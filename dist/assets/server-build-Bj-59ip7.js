import { r as requireReact, S as ServerRouter, a as reactExports, u as useLocation, L as Link, b as useNavigate, c as createCookieSessionStorage, w as withComponentProps, d as withErrorBoundaryProps, M as Meta, e as Links, f as ScrollRestoration, g as Scripts, O as Outlet, i as isRouteErrorResponse, h as useLoaderData, j as useSearchParams, k as useSubmit, l as useNavigation, A as Await, R as React, m as redirect, n as useFetcher, o as useActionData, F as Form, p as notImplemented, q as notImplementedClass, s as notImplementedAsync, t as getAugmentedNamespace, v as getDefaultExportFromCjs } from "./worker-entry-CHMicv-3.js";
import require$$0 from "util";
import require$$1$1 from "stream";
import require$$1$2 from "zlib";
import require$$0$1 from "assert";
import require$$3 from "buffer";
var jsxRuntime = { exports: {} };
var reactJsxRuntime_production = {};
var hasRequiredReactJsxRuntime_production;
function requireReactJsxRuntime_production() {
  if (hasRequiredReactJsxRuntime_production) return reactJsxRuntime_production;
  hasRequiredReactJsxRuntime_production = 1;
  var REACT_ELEMENT_TYPE = Symbol.for("react.transitional.element"), REACT_FRAGMENT_TYPE = Symbol.for("react.fragment");
  function jsxProd(type, config, maybeKey) {
    var key = null;
    void 0 !== maybeKey && (key = "" + maybeKey);
    void 0 !== config.key && (key = "" + config.key);
    if ("key" in config) {
      maybeKey = {};
      for (var propName in config)
        "key" !== propName && (maybeKey[propName] = config[propName]);
    } else maybeKey = config;
    config = maybeKey.ref;
    return {
      $$typeof: REACT_ELEMENT_TYPE,
      type,
      key,
      ref: void 0 !== config ? config : null,
      props: maybeKey
    };
  }
  reactJsxRuntime_production.Fragment = REACT_FRAGMENT_TYPE;
  reactJsxRuntime_production.jsx = jsxProd;
  reactJsxRuntime_production.jsxs = jsxProd;
  return reactJsxRuntime_production;
}
var hasRequiredJsxRuntime;
function requireJsxRuntime() {
  if (hasRequiredJsxRuntime) return jsxRuntime.exports;
  hasRequiredJsxRuntime = 1;
  {
    jsxRuntime.exports = requireReactJsxRuntime_production();
  }
  return jsxRuntime.exports;
}
var jsxRuntimeExports = requireJsxRuntime();
var fullPattern = " daum[ /]| deusu/|(?:^|[^g])news(?!sapphire)|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bots?(?:\\b|_)|(?<!(?:lib))http|(?<![hg]m)score|(?<!cam)scan|24x7|@[a-z][\\w-]+\\.|\\(\\)|\\.com\\b|\\bperl\\b|\\btime/|\\||^[\\w \\.\\-\\(?:\\):%]+(?:/v?\\d+(?:\\.\\d+)?(?:\\.\\d{1,10})*?)?(?:,|$)|^[^ ]{50,}$|^\\d+\\b|^\\W|^\\w*search\\b|^\\w+/[\\w\\(\\)]*$|^active|^ad muncher|^amaya|^avsdevicesdk/|^azure|^biglotron|^bot|^bw/|^clamav[ /]|^client/|^cobweb/|^custom|^ddg[_-]android|^discourse|^dispatch/\\d|^downcast/|^duckduckgo|^email|^facebook|^getright/|^gozilla/|^hobbit|^hotzonu|^hwcdn/|^igetter/|^jeode/|^jetty/|^jigsaw|^microsoft bits|^movabletype|^mozilla/\\d\\.\\d\\s[\\w\\.-]+$|^mozilla/\\d\\.\\d\\s\\(compatible;?(?:\\s\\w+\\/\\d+\\.\\d+)?\\)$|^navermailapp|^netsurf|^offline|^openai/|^owler|^php|^postman|^python|^rank|^read|^reed|^rest|^rss|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^track|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^wordpress|^xenu link sleuth|^yahoo|^yandex|^zdm/\\d|^zoom marketplace/|agent\\b|analyzer|archive|ask jeeves/teoma|audit|bit\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check\\b|checker|chrome-lighthouse|chromeframe|classifier|cloudflare|convertify|crawl|cypress/|dareboost|datanyze|dejaclick|detect|dmbrowser|download|evc-batch/|exaleadcloudview|feed|fetcher|firephp|functionize|grab|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|infrawatch|insight|inspect|iplabel|java(?!;)|library|linkcheck|mail\\.ru/|manager|measure|neustar wpm|node\\b|nutch|offbyone|onetrust|optimize|pageburst|pagespeed|parser|phantomjs|pingdom|powermarks|preview|proxy|ptst[ /]\\d|retriever|rexx;|rigor|rss\\b|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|supercleaner|synapse|synthetic|tools|torrent|transcoder|url|validator|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|xtate/";
var naivePattern = /bot|crawl|http|lighthouse|scan|search|spider/i;
var pattern;
function getPattern() {
  if (pattern instanceof RegExp) {
    return pattern;
  }
  try {
    pattern = new RegExp(fullPattern, "i");
  } catch (error) {
    pattern = naivePattern;
  }
  return pattern;
}
function isbot(userAgent) {
  return Boolean(userAgent) && getPattern().test(userAgent);
}
var server_edge = {};
var reactDomServer_edge_production = {};
var reactDom = { exports: {} };
var reactDom_production = {};
var hasRequiredReactDom_production;
function requireReactDom_production() {
  if (hasRequiredReactDom_production) return reactDom_production;
  hasRequiredReactDom_production = 1;
  var React2 = requireReact();
  function formatProdErrorMessage(code) {
    var url = "https://react.dev/errors/" + code;
    if (1 < arguments.length) {
      url += "?args[]=" + encodeURIComponent(arguments[1]);
      for (var i = 2; i < arguments.length; i++)
        url += "&args[]=" + encodeURIComponent(arguments[i]);
    }
    return "Minified React error #" + code + "; visit " + url + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
  }
  function noop2() {
  }
  var Internals = {
    d: {
      f: noop2,
      r: function() {
        throw Error(formatProdErrorMessage(522));
      },
      D: noop2,
      C: noop2,
      L: noop2,
      m: noop2,
      X: noop2,
      S: noop2,
      M: noop2
    },
    p: 0,
    findDOMNode: null
  }, REACT_PORTAL_TYPE = Symbol.for("react.portal");
  function createPortal$1(children, containerInfo, implementation) {
    var key = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;
    return {
      $$typeof: REACT_PORTAL_TYPE,
      key: null == key ? null : "" + key,
      children,
      containerInfo,
      implementation
    };
  }
  var ReactSharedInternals = React2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;
  function getCrossOriginStringAs(as, input) {
    if ("font" === as) return "";
    if ("string" === typeof input)
      return "use-credentials" === input ? input : "";
  }
  reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE = Internals;
  reactDom_production.createPortal = function(children, container) {
    var key = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;
    if (!container || 1 !== container.nodeType && 9 !== container.nodeType && 11 !== container.nodeType)
      throw Error(formatProdErrorMessage(299));
    return createPortal$1(children, container, null, key);
  };
  reactDom_production.flushSync = function(fn) {
    var previousTransition = ReactSharedInternals.T, previousUpdatePriority = Internals.p;
    try {
      if (ReactSharedInternals.T = null, Internals.p = 2, fn) return fn();
    } finally {
      ReactSharedInternals.T = previousTransition, Internals.p = previousUpdatePriority, Internals.d.f();
    }
  };
  reactDom_production.preconnect = function(href, options) {
    "string" === typeof href && (options ? (options = options.crossOrigin, options = "string" === typeof options ? "use-credentials" === options ? options : "" : void 0) : options = null, Internals.d.C(href, options));
  };
  reactDom_production.prefetchDNS = function(href) {
    "string" === typeof href && Internals.d.D(href);
  };
  reactDom_production.preinit = function(href, options) {
    if ("string" === typeof href && options && "string" === typeof options.as) {
      var as = options.as, crossOrigin = getCrossOriginStringAs(as, options.crossOrigin), integrity = "string" === typeof options.integrity ? options.integrity : void 0, fetchPriority = "string" === typeof options.fetchPriority ? options.fetchPriority : void 0;
      "style" === as ? Internals.d.S(
        href,
        "string" === typeof options.precedence ? options.precedence : void 0,
        {
          crossOrigin,
          integrity,
          fetchPriority
        }
      ) : "script" === as && Internals.d.X(href, {
        crossOrigin,
        integrity,
        fetchPriority,
        nonce: "string" === typeof options.nonce ? options.nonce : void 0
      });
    }
  };
  reactDom_production.preinitModule = function(href, options) {
    if ("string" === typeof href)
      if ("object" === typeof options && null !== options) {
        if (null == options.as || "script" === options.as) {
          var crossOrigin = getCrossOriginStringAs(
            options.as,
            options.crossOrigin
          );
          Internals.d.M(href, {
            crossOrigin,
            integrity: "string" === typeof options.integrity ? options.integrity : void 0,
            nonce: "string" === typeof options.nonce ? options.nonce : void 0
          });
        }
      } else null == options && Internals.d.M(href);
  };
  reactDom_production.preload = function(href, options) {
    if ("string" === typeof href && "object" === typeof options && null !== options && "string" === typeof options.as) {
      var as = options.as, crossOrigin = getCrossOriginStringAs(as, options.crossOrigin);
      Internals.d.L(href, as, {
        crossOrigin,
        integrity: "string" === typeof options.integrity ? options.integrity : void 0,
        nonce: "string" === typeof options.nonce ? options.nonce : void 0,
        type: "string" === typeof options.type ? options.type : void 0,
        fetchPriority: "string" === typeof options.fetchPriority ? options.fetchPriority : void 0,
        referrerPolicy: "string" === typeof options.referrerPolicy ? options.referrerPolicy : void 0,
        imageSrcSet: "string" === typeof options.imageSrcSet ? options.imageSrcSet : void 0,
        imageSizes: "string" === typeof options.imageSizes ? options.imageSizes : void 0,
        media: "string" === typeof options.media ? options.media : void 0
      });
    }
  };
  reactDom_production.preloadModule = function(href, options) {
    if ("string" === typeof href)
      if (options) {
        var crossOrigin = getCrossOriginStringAs(options.as, options.crossOrigin);
        Internals.d.m(href, {
          as: "string" === typeof options.as && "script" !== options.as ? options.as : void 0,
          crossOrigin,
          integrity: "string" === typeof options.integrity ? options.integrity : void 0
        });
      } else Internals.d.m(href);
  };
  reactDom_production.requestFormReset = function(form) {
    Internals.d.r(form);
  };
  reactDom_production.unstable_batchedUpdates = function(fn, a) {
    return fn(a);
  };
  reactDom_production.useFormState = function(action2, initialState, permalink) {
    return ReactSharedInternals.H.useFormState(action2, initialState, permalink);
  };
  reactDom_production.useFormStatus = function() {
    return ReactSharedInternals.H.useHostTransitionStatus();
  };
  reactDom_production.version = "19.2.0";
  return reactDom_production;
}
var hasRequiredReactDom;
function requireReactDom() {
  if (hasRequiredReactDom) return reactDom.exports;
  hasRequiredReactDom = 1;
  function checkDCE() {
    if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === "undefined" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== "function") {
      return;
    }
    try {
      __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);
    } catch (err) {
      console.error(err);
    }
  }
  {
    checkDCE();
    reactDom.exports = requireReactDom_production();
  }
  return reactDom.exports;
}
var hasRequiredReactDomServer_edge_production;
function requireReactDomServer_edge_production() {
  if (hasRequiredReactDomServer_edge_production) return reactDomServer_edge_production;
  hasRequiredReactDomServer_edge_production = 1;
  var React2 = requireReact(), ReactDOM = requireReactDom(), REACT_ELEMENT_TYPE = Symbol.for("react.transitional.element"), REACT_PORTAL_TYPE = Symbol.for("react.portal"), REACT_FRAGMENT_TYPE = Symbol.for("react.fragment"), REACT_STRICT_MODE_TYPE = Symbol.for("react.strict_mode"), REACT_PROFILER_TYPE = Symbol.for("react.profiler"), REACT_CONSUMER_TYPE = Symbol.for("react.consumer"), REACT_CONTEXT_TYPE = Symbol.for("react.context"), REACT_FORWARD_REF_TYPE = Symbol.for("react.forward_ref"), REACT_SUSPENSE_TYPE = Symbol.for("react.suspense"), REACT_SUSPENSE_LIST_TYPE = Symbol.for("react.suspense_list"), REACT_MEMO_TYPE = Symbol.for("react.memo"), REACT_LAZY_TYPE = Symbol.for("react.lazy"), REACT_SCOPE_TYPE = Symbol.for("react.scope"), REACT_ACTIVITY_TYPE = Symbol.for("react.activity"), REACT_LEGACY_HIDDEN_TYPE = Symbol.for("react.legacy_hidden"), REACT_MEMO_CACHE_SENTINEL = Symbol.for("react.memo_cache_sentinel"), REACT_VIEW_TRANSITION_TYPE = Symbol.for("react.view_transition"), MAYBE_ITERATOR_SYMBOL = Symbol.iterator;
  function getIteratorFn(maybeIterable) {
    if (null === maybeIterable || "object" !== typeof maybeIterable) return null;
    maybeIterable = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable["@@iterator"];
    return "function" === typeof maybeIterable ? maybeIterable : null;
  }
  var isArrayImpl = Array.isArray;
  function murmurhash3_32_gc(key, seed) {
    var remainder = key.length & 3;
    var bytes = key.length - remainder;
    var h1 = seed;
    for (seed = 0; seed < bytes; ) {
      var k1 = key.charCodeAt(seed) & 255 | (key.charCodeAt(++seed) & 255) << 8 | (key.charCodeAt(++seed) & 255) << 16 | (key.charCodeAt(++seed) & 255) << 24;
      ++seed;
      k1 = 3432918353 * (k1 & 65535) + ((3432918353 * (k1 >>> 16) & 65535) << 16) & 4294967295;
      k1 = k1 << 15 | k1 >>> 17;
      k1 = 461845907 * (k1 & 65535) + ((461845907 * (k1 >>> 16) & 65535) << 16) & 4294967295;
      h1 ^= k1;
      h1 = h1 << 13 | h1 >>> 19;
      h1 = 5 * (h1 & 65535) + ((5 * (h1 >>> 16) & 65535) << 16) & 4294967295;
      h1 = (h1 & 65535) + 27492 + (((h1 >>> 16) + 58964 & 65535) << 16);
    }
    k1 = 0;
    switch (remainder) {
      case 3:
        k1 ^= (key.charCodeAt(seed + 2) & 255) << 16;
      case 2:
        k1 ^= (key.charCodeAt(seed + 1) & 255) << 8;
      case 1:
        k1 ^= key.charCodeAt(seed) & 255, k1 = 3432918353 * (k1 & 65535) + ((3432918353 * (k1 >>> 16) & 65535) << 16) & 4294967295, k1 = k1 << 15 | k1 >>> 17, h1 ^= 461845907 * (k1 & 65535) + ((461845907 * (k1 >>> 16) & 65535) << 16) & 4294967295;
    }
    h1 ^= key.length;
    h1 ^= h1 >>> 16;
    h1 = 2246822507 * (h1 & 65535) + ((2246822507 * (h1 >>> 16) & 65535) << 16) & 4294967295;
    h1 ^= h1 >>> 13;
    h1 = 3266489909 * (h1 & 65535) + ((3266489909 * (h1 >>> 16) & 65535) << 16) & 4294967295;
    return (h1 ^ h1 >>> 16) >>> 0;
  }
  function handleErrorInNextTick(error) {
    setTimeout(function() {
      throw error;
    });
  }
  var LocalPromise = Promise, scheduleMicrotask = "function" === typeof queueMicrotask ? queueMicrotask : function(callback) {
    LocalPromise.resolve(null).then(callback).catch(handleErrorInNextTick);
  }, currentView = null, writtenBytes = 0;
  function writeChunk(destination, chunk) {
    if (0 !== chunk.byteLength)
      if (2048 < chunk.byteLength)
        0 < writtenBytes && (destination.enqueue(
          new Uint8Array(currentView.buffer, 0, writtenBytes)
        ), currentView = new Uint8Array(2048), writtenBytes = 0), destination.enqueue(chunk);
      else {
        var allowableBytes = currentView.length - writtenBytes;
        allowableBytes < chunk.byteLength && (0 === allowableBytes ? destination.enqueue(currentView) : (currentView.set(chunk.subarray(0, allowableBytes), writtenBytes), destination.enqueue(currentView), chunk = chunk.subarray(allowableBytes)), currentView = new Uint8Array(2048), writtenBytes = 0);
        currentView.set(chunk, writtenBytes);
        writtenBytes += chunk.byteLength;
      }
  }
  function writeChunkAndReturn(destination, chunk) {
    writeChunk(destination, chunk);
    return true;
  }
  function completeWriting(destination) {
    currentView && 0 < writtenBytes && (destination.enqueue(new Uint8Array(currentView.buffer, 0, writtenBytes)), currentView = null, writtenBytes = 0);
  }
  var textEncoder = new TextEncoder();
  function stringToChunk(content) {
    return textEncoder.encode(content);
  }
  function stringToPrecomputedChunk(content) {
    return textEncoder.encode(content);
  }
  function byteLengthOfChunk(chunk) {
    return chunk.byteLength;
  }
  function closeWithError(destination, error) {
    "function" === typeof destination.error ? destination.error(error) : destination.close();
  }
  var assign = Object.assign, hasOwnProperty = Object.prototype.hasOwnProperty, VALID_ATTRIBUTE_NAME_REGEX = RegExp(
    "^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"
  ), illegalAttributeNameCache = {}, validatedAttributeNameCache = {};
  function isAttributeNameSafe(attributeName) {
    if (hasOwnProperty.call(validatedAttributeNameCache, attributeName))
      return true;
    if (hasOwnProperty.call(illegalAttributeNameCache, attributeName)) return false;
    if (VALID_ATTRIBUTE_NAME_REGEX.test(attributeName))
      return validatedAttributeNameCache[attributeName] = true;
    illegalAttributeNameCache[attributeName] = true;
    return false;
  }
  var unitlessNumbers = new Set(
    "animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(
      " "
    )
  ), aliases = /* @__PURE__ */ new Map([
    ["acceptCharset", "accept-charset"],
    ["htmlFor", "for"],
    ["httpEquiv", "http-equiv"],
    ["crossOrigin", "crossorigin"],
    ["accentHeight", "accent-height"],
    ["alignmentBaseline", "alignment-baseline"],
    ["arabicForm", "arabic-form"],
    ["baselineShift", "baseline-shift"],
    ["capHeight", "cap-height"],
    ["clipPath", "clip-path"],
    ["clipRule", "clip-rule"],
    ["colorInterpolation", "color-interpolation"],
    ["colorInterpolationFilters", "color-interpolation-filters"],
    ["colorProfile", "color-profile"],
    ["colorRendering", "color-rendering"],
    ["dominantBaseline", "dominant-baseline"],
    ["enableBackground", "enable-background"],
    ["fillOpacity", "fill-opacity"],
    ["fillRule", "fill-rule"],
    ["floodColor", "flood-color"],
    ["floodOpacity", "flood-opacity"],
    ["fontFamily", "font-family"],
    ["fontSize", "font-size"],
    ["fontSizeAdjust", "font-size-adjust"],
    ["fontStretch", "font-stretch"],
    ["fontStyle", "font-style"],
    ["fontVariant", "font-variant"],
    ["fontWeight", "font-weight"],
    ["glyphName", "glyph-name"],
    ["glyphOrientationHorizontal", "glyph-orientation-horizontal"],
    ["glyphOrientationVertical", "glyph-orientation-vertical"],
    ["horizAdvX", "horiz-adv-x"],
    ["horizOriginX", "horiz-origin-x"],
    ["imageRendering", "image-rendering"],
    ["letterSpacing", "letter-spacing"],
    ["lightingColor", "lighting-color"],
    ["markerEnd", "marker-end"],
    ["markerMid", "marker-mid"],
    ["markerStart", "marker-start"],
    ["overlinePosition", "overline-position"],
    ["overlineThickness", "overline-thickness"],
    ["paintOrder", "paint-order"],
    ["panose-1", "panose-1"],
    ["pointerEvents", "pointer-events"],
    ["renderingIntent", "rendering-intent"],
    ["shapeRendering", "shape-rendering"],
    ["stopColor", "stop-color"],
    ["stopOpacity", "stop-opacity"],
    ["strikethroughPosition", "strikethrough-position"],
    ["strikethroughThickness", "strikethrough-thickness"],
    ["strokeDasharray", "stroke-dasharray"],
    ["strokeDashoffset", "stroke-dashoffset"],
    ["strokeLinecap", "stroke-linecap"],
    ["strokeLinejoin", "stroke-linejoin"],
    ["strokeMiterlimit", "stroke-miterlimit"],
    ["strokeOpacity", "stroke-opacity"],
    ["strokeWidth", "stroke-width"],
    ["textAnchor", "text-anchor"],
    ["textDecoration", "text-decoration"],
    ["textRendering", "text-rendering"],
    ["transformOrigin", "transform-origin"],
    ["underlinePosition", "underline-position"],
    ["underlineThickness", "underline-thickness"],
    ["unicodeBidi", "unicode-bidi"],
    ["unicodeRange", "unicode-range"],
    ["unitsPerEm", "units-per-em"],
    ["vAlphabetic", "v-alphabetic"],
    ["vHanging", "v-hanging"],
    ["vIdeographic", "v-ideographic"],
    ["vMathematical", "v-mathematical"],
    ["vectorEffect", "vector-effect"],
    ["vertAdvY", "vert-adv-y"],
    ["vertOriginX", "vert-origin-x"],
    ["vertOriginY", "vert-origin-y"],
    ["wordSpacing", "word-spacing"],
    ["writingMode", "writing-mode"],
    ["xmlnsXlink", "xmlns:xlink"],
    ["xHeight", "x-height"]
  ]), matchHtmlRegExp = /["'&<>]/;
  function escapeTextForBrowser(text) {
    if ("boolean" === typeof text || "number" === typeof text || "bigint" === typeof text)
      return "" + text;
    text = "" + text;
    var match = matchHtmlRegExp.exec(text);
    if (match) {
      var html = "", index2, lastIndex = 0;
      for (index2 = match.index; index2 < text.length; index2++) {
        switch (text.charCodeAt(index2)) {
          case 34:
            match = "&quot;";
            break;
          case 38:
            match = "&amp;";
            break;
          case 39:
            match = "&#x27;";
            break;
          case 60:
            match = "&lt;";
            break;
          case 62:
            match = "&gt;";
            break;
          default:
            continue;
        }
        lastIndex !== index2 && (html += text.slice(lastIndex, index2));
        lastIndex = index2 + 1;
        html += match;
      }
      text = lastIndex !== index2 ? html + text.slice(lastIndex, index2) : html;
    }
    return text;
  }
  var uppercasePattern = /([A-Z])/g, msPattern = /^ms-/, isJavaScriptProtocol = /^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;
  function sanitizeURL(url) {
    return isJavaScriptProtocol.test("" + url) ? "javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')" : url;
  }
  var ReactSharedInternals = React2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, ReactDOMSharedInternals = ReactDOM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, sharedNotPendingObject = {
    pending: false,
    data: null,
    method: null,
    action: null
  }, previousDispatcher = ReactDOMSharedInternals.d;
  ReactDOMSharedInternals.d = {
    f: previousDispatcher.f,
    r: previousDispatcher.r,
    D: prefetchDNS,
    C: preconnect,
    L: preload,
    m: preloadModule,
    X: preinitScript,
    S: preinitStyle,
    M: preinitModuleScript
  };
  var PRELOAD_NO_CREDS = [], currentlyFlushingRenderState = null;
  stringToPrecomputedChunk('"></template>');
  var startInlineScript = stringToPrecomputedChunk("<script"), endInlineScript = stringToPrecomputedChunk("<\/script>"), startScriptSrc = stringToPrecomputedChunk('<script src="'), startModuleSrc = stringToPrecomputedChunk('<script type="module" src="'), scriptNonce = stringToPrecomputedChunk(' nonce="'), scriptIntegirty = stringToPrecomputedChunk(' integrity="'), scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin="'), endAsyncScript = stringToPrecomputedChunk(' async=""><\/script>'), startInlineStyle = stringToPrecomputedChunk("<style"), scriptRegex = /(<\/|<)(s)(cript)/gi;
  function scriptReplacer(match, prefix2, s, suffix2) {
    return "" + prefix2 + ("s" === s ? "\\u0073" : "\\u0053") + suffix2;
  }
  var importMapScriptStart = stringToPrecomputedChunk(
    '<script type="importmap">'
  ), importMapScriptEnd = stringToPrecomputedChunk("<\/script>");
  function createRenderState(resumableState, nonce, externalRuntimeConfig, importMap, onHeaders, maxHeadersLength) {
    externalRuntimeConfig = "string" === typeof nonce ? nonce : nonce && nonce.script;
    var inlineScriptWithNonce = void 0 === externalRuntimeConfig ? startInlineScript : stringToPrecomputedChunk(
      '<script nonce="' + escapeTextForBrowser(externalRuntimeConfig) + '"'
    ), nonceStyle = "string" === typeof nonce ? void 0 : nonce && nonce.style, inlineStyleWithNonce = void 0 === nonceStyle ? startInlineStyle : stringToPrecomputedChunk(
      '<style nonce="' + escapeTextForBrowser(nonceStyle) + '"'
    ), idPrefix = resumableState.idPrefix, bootstrapChunks = [], bootstrapScriptContent = resumableState.bootstrapScriptContent, bootstrapScripts = resumableState.bootstrapScripts, bootstrapModules = resumableState.bootstrapModules;
    void 0 !== bootstrapScriptContent && (bootstrapChunks.push(inlineScriptWithNonce), pushCompletedShellIdAttribute(bootstrapChunks, resumableState), bootstrapChunks.push(
      endOfStartTag,
      stringToChunk(
        ("" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer)
      ),
      endInlineScript
    ));
    bootstrapScriptContent = [];
    void 0 !== importMap && (bootstrapScriptContent.push(importMapScriptStart), bootstrapScriptContent.push(
      stringToChunk(
        ("" + JSON.stringify(importMap)).replace(scriptRegex, scriptReplacer)
      )
    ), bootstrapScriptContent.push(importMapScriptEnd));
    importMap = onHeaders ? {
      preconnects: "",
      fontPreloads: "",
      highImagePreloads: "",
      remainingCapacity: 2 + ("number" === typeof maxHeadersLength ? maxHeadersLength : 2e3)
    } : null;
    onHeaders = {
      placeholderPrefix: stringToPrecomputedChunk(idPrefix + "P:"),
      segmentPrefix: stringToPrecomputedChunk(idPrefix + "S:"),
      boundaryPrefix: stringToPrecomputedChunk(idPrefix + "B:"),
      startInlineScript: inlineScriptWithNonce,
      startInlineStyle: inlineStyleWithNonce,
      preamble: createPreambleState(),
      externalRuntimeScript: null,
      bootstrapChunks,
      importMapChunks: bootstrapScriptContent,
      onHeaders,
      headers: importMap,
      resets: {
        font: {},
        dns: {},
        connect: { default: {}, anonymous: {}, credentials: {} },
        image: {},
        style: {}
      },
      charsetChunks: [],
      viewportChunks: [],
      hoistableChunks: [],
      preconnects: /* @__PURE__ */ new Set(),
      fontPreloads: /* @__PURE__ */ new Set(),
      highImagePreloads: /* @__PURE__ */ new Set(),
      styles: /* @__PURE__ */ new Map(),
      bootstrapScripts: /* @__PURE__ */ new Set(),
      scripts: /* @__PURE__ */ new Set(),
      bulkPreloads: /* @__PURE__ */ new Set(),
      preloads: {
        images: /* @__PURE__ */ new Map(),
        stylesheets: /* @__PURE__ */ new Map(),
        scripts: /* @__PURE__ */ new Map(),
        moduleScripts: /* @__PURE__ */ new Map()
      },
      nonce: { script: externalRuntimeConfig, style: nonceStyle },
      hoistableState: null,
      stylesToHoist: false
    };
    if (void 0 !== bootstrapScripts)
      for (importMap = 0; importMap < bootstrapScripts.length; importMap++)
        idPrefix = bootstrapScripts[importMap], nonceStyle = inlineScriptWithNonce = void 0, inlineStyleWithNonce = {
          rel: "preload",
          as: "script",
          fetchPriority: "low",
          nonce
        }, "string" === typeof idPrefix ? inlineStyleWithNonce.href = maxHeadersLength = idPrefix : (inlineStyleWithNonce.href = maxHeadersLength = idPrefix.src, inlineStyleWithNonce.integrity = nonceStyle = "string" === typeof idPrefix.integrity ? idPrefix.integrity : void 0, inlineStyleWithNonce.crossOrigin = inlineScriptWithNonce = "string" === typeof idPrefix || null == idPrefix.crossOrigin ? void 0 : "use-credentials" === idPrefix.crossOrigin ? "use-credentials" : ""), idPrefix = resumableState, bootstrapScriptContent = maxHeadersLength, idPrefix.scriptResources[bootstrapScriptContent] = null, idPrefix.moduleScriptResources[bootstrapScriptContent] = null, idPrefix = [], pushLinkImpl(idPrefix, inlineStyleWithNonce), onHeaders.bootstrapScripts.add(idPrefix), bootstrapChunks.push(
          startScriptSrc,
          stringToChunk(escapeTextForBrowser(maxHeadersLength)),
          attributeEnd
        ), externalRuntimeConfig && bootstrapChunks.push(
          scriptNonce,
          stringToChunk(escapeTextForBrowser(externalRuntimeConfig)),
          attributeEnd
        ), "string" === typeof nonceStyle && bootstrapChunks.push(
          scriptIntegirty,
          stringToChunk(escapeTextForBrowser(nonceStyle)),
          attributeEnd
        ), "string" === typeof inlineScriptWithNonce && bootstrapChunks.push(
          scriptCrossOrigin,
          stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),
          attributeEnd
        ), pushCompletedShellIdAttribute(bootstrapChunks, resumableState), bootstrapChunks.push(endAsyncScript);
    if (void 0 !== bootstrapModules)
      for (nonce = 0; nonce < bootstrapModules.length; nonce++)
        nonceStyle = bootstrapModules[nonce], maxHeadersLength = importMap = void 0, inlineScriptWithNonce = {
          rel: "modulepreload",
          fetchPriority: "low",
          nonce: externalRuntimeConfig
        }, "string" === typeof nonceStyle ? inlineScriptWithNonce.href = bootstrapScripts = nonceStyle : (inlineScriptWithNonce.href = bootstrapScripts = nonceStyle.src, inlineScriptWithNonce.integrity = maxHeadersLength = "string" === typeof nonceStyle.integrity ? nonceStyle.integrity : void 0, inlineScriptWithNonce.crossOrigin = importMap = "string" === typeof nonceStyle || null == nonceStyle.crossOrigin ? void 0 : "use-credentials" === nonceStyle.crossOrigin ? "use-credentials" : ""), nonceStyle = resumableState, inlineStyleWithNonce = bootstrapScripts, nonceStyle.scriptResources[inlineStyleWithNonce] = null, nonceStyle.moduleScriptResources[inlineStyleWithNonce] = null, nonceStyle = [], pushLinkImpl(nonceStyle, inlineScriptWithNonce), onHeaders.bootstrapScripts.add(nonceStyle), bootstrapChunks.push(
          startModuleSrc,
          stringToChunk(escapeTextForBrowser(bootstrapScripts)),
          attributeEnd
        ), externalRuntimeConfig && bootstrapChunks.push(
          scriptNonce,
          stringToChunk(escapeTextForBrowser(externalRuntimeConfig)),
          attributeEnd
        ), "string" === typeof maxHeadersLength && bootstrapChunks.push(
          scriptIntegirty,
          stringToChunk(escapeTextForBrowser(maxHeadersLength)),
          attributeEnd
        ), "string" === typeof importMap && bootstrapChunks.push(
          scriptCrossOrigin,
          stringToChunk(escapeTextForBrowser(importMap)),
          attributeEnd
        ), pushCompletedShellIdAttribute(bootstrapChunks, resumableState), bootstrapChunks.push(endAsyncScript);
    return onHeaders;
  }
  function createResumableState(identifierPrefix, externalRuntimeConfig, bootstrapScriptContent, bootstrapScripts, bootstrapModules) {
    return {
      idPrefix: void 0 === identifierPrefix ? "" : identifierPrefix,
      nextFormID: 0,
      streamingFormat: 0,
      bootstrapScriptContent,
      bootstrapScripts,
      bootstrapModules,
      instructions: 0,
      hasBody: false,
      hasHtml: false,
      unknownResources: {},
      dnsResources: {},
      connectResources: { default: {}, anonymous: {}, credentials: {} },
      imageResources: {},
      styleResources: {},
      scriptResources: {},
      moduleUnknownResources: {},
      moduleScriptResources: {}
    };
  }
  function createPreambleState() {
    return { htmlChunks: null, headChunks: null, bodyChunks: null };
  }
  function createFormatContext(insertionMode, selectedValue, tagScope, viewTransition) {
    return {
      insertionMode,
      selectedValue,
      tagScope,
      viewTransition
    };
  }
  function createRootFormatContext(namespaceURI) {
    return createFormatContext(
      "http://www.w3.org/2000/svg" === namespaceURI ? 4 : "http://www.w3.org/1998/Math/MathML" === namespaceURI ? 5 : 0,
      null,
      0,
      null
    );
  }
  function getChildFormatContext(parentContext, type, props) {
    var subtreeScope = parentContext.tagScope & -25;
    switch (type) {
      case "noscript":
        return createFormatContext(2, null, subtreeScope | 1, null);
      case "select":
        return createFormatContext(
          2,
          null != props.value ? props.value : props.defaultValue,
          subtreeScope,
          null
        );
      case "svg":
        return createFormatContext(4, null, subtreeScope, null);
      case "picture":
        return createFormatContext(2, null, subtreeScope | 2, null);
      case "math":
        return createFormatContext(5, null, subtreeScope, null);
      case "foreignObject":
        return createFormatContext(2, null, subtreeScope, null);
      case "table":
        return createFormatContext(6, null, subtreeScope, null);
      case "thead":
      case "tbody":
      case "tfoot":
        return createFormatContext(7, null, subtreeScope, null);
      case "colgroup":
        return createFormatContext(9, null, subtreeScope, null);
      case "tr":
        return createFormatContext(8, null, subtreeScope, null);
      case "head":
        if (2 > parentContext.insertionMode)
          return createFormatContext(3, null, subtreeScope, null);
        break;
      case "html":
        if (0 === parentContext.insertionMode)
          return createFormatContext(1, null, subtreeScope, null);
    }
    return 6 <= parentContext.insertionMode || 2 > parentContext.insertionMode ? createFormatContext(2, null, subtreeScope, null) : parentContext.tagScope !== subtreeScope ? createFormatContext(
      parentContext.insertionMode,
      parentContext.selectedValue,
      subtreeScope,
      null
    ) : parentContext;
  }
  function getSuspenseViewTransition(parentViewTransition) {
    return null === parentViewTransition ? null : {
      update: parentViewTransition.update,
      enter: "none",
      exit: "none",
      share: parentViewTransition.update,
      name: parentViewTransition.autoName,
      autoName: parentViewTransition.autoName,
      nameIdx: 0
    };
  }
  function getSuspenseFallbackFormatContext(resumableState, parentContext) {
    parentContext.tagScope & 32 && (resumableState.instructions |= 128);
    return createFormatContext(
      parentContext.insertionMode,
      parentContext.selectedValue,
      parentContext.tagScope | 12,
      getSuspenseViewTransition(parentContext.viewTransition)
    );
  }
  function getSuspenseContentFormatContext(resumableState, parentContext) {
    resumableState = getSuspenseViewTransition(parentContext.viewTransition);
    var subtreeScope = parentContext.tagScope | 16;
    null !== resumableState && "none" !== resumableState.share && (subtreeScope |= 64);
    return createFormatContext(
      parentContext.insertionMode,
      parentContext.selectedValue,
      subtreeScope,
      resumableState
    );
  }
  var textSeparator = stringToPrecomputedChunk("<!-- -->");
  function pushTextInstance(target, text, renderState, textEmbedded) {
    if ("" === text) return textEmbedded;
    textEmbedded && target.push(textSeparator);
    target.push(stringToChunk(escapeTextForBrowser(text)));
    return true;
  }
  var styleNameCache = /* @__PURE__ */ new Map(), styleAttributeStart = stringToPrecomputedChunk(' style="'), styleAssign = stringToPrecomputedChunk(":"), styleSeparator = stringToPrecomputedChunk(";");
  function pushStyleAttribute(target, style) {
    if ("object" !== typeof style)
      throw Error(
        "The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX."
      );
    var isFirst = true, styleName;
    for (styleName in style)
      if (hasOwnProperty.call(style, styleName)) {
        var styleValue = style[styleName];
        if (null != styleValue && "boolean" !== typeof styleValue && "" !== styleValue) {
          if (0 === styleName.indexOf("--")) {
            var nameChunk = stringToChunk(escapeTextForBrowser(styleName));
            styleValue = stringToChunk(
              escapeTextForBrowser(("" + styleValue).trim())
            );
          } else
            nameChunk = styleNameCache.get(styleName), void 0 === nameChunk && (nameChunk = stringToPrecomputedChunk(
              escapeTextForBrowser(
                styleName.replace(uppercasePattern, "-$1").toLowerCase().replace(msPattern, "-ms-")
              )
            ), styleNameCache.set(styleName, nameChunk)), styleValue = "number" === typeof styleValue ? 0 === styleValue || unitlessNumbers.has(styleName) ? stringToChunk("" + styleValue) : stringToChunk(styleValue + "px") : stringToChunk(
              escapeTextForBrowser(("" + styleValue).trim())
            );
          isFirst ? (isFirst = false, target.push(
            styleAttributeStart,
            nameChunk,
            styleAssign,
            styleValue
          )) : target.push(styleSeparator, nameChunk, styleAssign, styleValue);
        }
      }
    isFirst || target.push(attributeEnd);
  }
  var attributeSeparator = stringToPrecomputedChunk(" "), attributeAssign = stringToPrecomputedChunk('="'), attributeEnd = stringToPrecomputedChunk('"'), attributeEmptyString = stringToPrecomputedChunk('=""');
  function pushBooleanAttribute(target, name, value) {
    value && "function" !== typeof value && "symbol" !== typeof value && target.push(attributeSeparator, stringToChunk(name), attributeEmptyString);
  }
  function pushStringAttribute(target, name, value) {
    "function" !== typeof value && "symbol" !== typeof value && "boolean" !== typeof value && target.push(
      attributeSeparator,
      stringToChunk(name),
      attributeAssign,
      stringToChunk(escapeTextForBrowser(value)),
      attributeEnd
    );
  }
  var actionJavaScriptURL = stringToPrecomputedChunk(
    escapeTextForBrowser(
      "javascript:throw new Error('React form unexpectedly submitted.')"
    )
  ), startHiddenInputChunk = stringToPrecomputedChunk('<input type="hidden"');
  function pushAdditionalFormField(value, key) {
    this.push(startHiddenInputChunk);
    validateAdditionalFormField(value);
    pushStringAttribute(this, "name", key);
    pushStringAttribute(this, "value", value);
    this.push(endOfStartTagSelfClosing);
  }
  function validateAdditionalFormField(value) {
    if ("string" !== typeof value)
      throw Error(
        "File/Blob fields are not yet supported in progressive forms. Will fallback to client hydration."
      );
  }
  function getCustomFormFields(resumableState, formAction) {
    if ("function" === typeof formAction.$$FORM_ACTION) {
      var id2 = resumableState.nextFormID++;
      resumableState = resumableState.idPrefix + id2;
      try {
        var customFields = formAction.$$FORM_ACTION(resumableState);
        if (customFields) {
          var formData = customFields.data;
          null != formData && formData.forEach(validateAdditionalFormField);
        }
        return customFields;
      } catch (x2) {
        if ("object" === typeof x2 && null !== x2 && "function" === typeof x2.then)
          throw x2;
      }
    }
    return null;
  }
  function pushFormActionAttribute(target, resumableState, renderState, formAction, formEncType, formMethod, formTarget, name) {
    var formData = null;
    if ("function" === typeof formAction) {
      var customFields = getCustomFormFields(resumableState, formAction);
      null !== customFields ? (name = customFields.name, formAction = customFields.action || "", formEncType = customFields.encType, formMethod = customFields.method, formTarget = customFields.target, formData = customFields.data) : (target.push(
        attributeSeparator,
        stringToChunk("formAction"),
        attributeAssign,
        actionJavaScriptURL,
        attributeEnd
      ), formTarget = formMethod = formEncType = formAction = name = null, injectFormReplayingRuntime(resumableState, renderState));
    }
    null != name && pushAttribute(target, "name", name);
    null != formAction && pushAttribute(target, "formAction", formAction);
    null != formEncType && pushAttribute(target, "formEncType", formEncType);
    null != formMethod && pushAttribute(target, "formMethod", formMethod);
    null != formTarget && pushAttribute(target, "formTarget", formTarget);
    return formData;
  }
  function pushAttribute(target, name, value) {
    switch (name) {
      case "className":
        pushStringAttribute(target, "class", value);
        break;
      case "tabIndex":
        pushStringAttribute(target, "tabindex", value);
        break;
      case "dir":
      case "role":
      case "viewBox":
      case "width":
      case "height":
        pushStringAttribute(target, name, value);
        break;
      case "style":
        pushStyleAttribute(target, value);
        break;
      case "src":
      case "href":
        if ("" === value) break;
      case "action":
      case "formAction":
        if (null == value || "function" === typeof value || "symbol" === typeof value || "boolean" === typeof value)
          break;
        value = sanitizeURL("" + value);
        target.push(
          attributeSeparator,
          stringToChunk(name),
          attributeAssign,
          stringToChunk(escapeTextForBrowser(value)),
          attributeEnd
        );
        break;
      case "defaultValue":
      case "defaultChecked":
      case "innerHTML":
      case "suppressContentEditableWarning":
      case "suppressHydrationWarning":
      case "ref":
        break;
      case "autoFocus":
      case "multiple":
      case "muted":
        pushBooleanAttribute(target, name.toLowerCase(), value);
        break;
      case "xlinkHref":
        if ("function" === typeof value || "symbol" === typeof value || "boolean" === typeof value)
          break;
        value = sanitizeURL("" + value);
        target.push(
          attributeSeparator,
          stringToChunk("xlink:href"),
          attributeAssign,
          stringToChunk(escapeTextForBrowser(value)),
          attributeEnd
        );
        break;
      case "contentEditable":
      case "spellCheck":
      case "draggable":
      case "value":
      case "autoReverse":
      case "externalResourcesRequired":
      case "focusable":
      case "preserveAlpha":
        "function" !== typeof value && "symbol" !== typeof value && target.push(
          attributeSeparator,
          stringToChunk(name),
          attributeAssign,
          stringToChunk(escapeTextForBrowser(value)),
          attributeEnd
        );
        break;
      case "inert":
      case "allowFullScreen":
      case "async":
      case "autoPlay":
      case "controls":
      case "default":
      case "defer":
      case "disabled":
      case "disablePictureInPicture":
      case "disableRemotePlayback":
      case "formNoValidate":
      case "hidden":
      case "loop":
      case "noModule":
      case "noValidate":
      case "open":
      case "playsInline":
      case "readOnly":
      case "required":
      case "reversed":
      case "scoped":
      case "seamless":
      case "itemScope":
        value && "function" !== typeof value && "symbol" !== typeof value && target.push(
          attributeSeparator,
          stringToChunk(name),
          attributeEmptyString
        );
        break;
      case "capture":
      case "download":
        true === value ? target.push(
          attributeSeparator,
          stringToChunk(name),
          attributeEmptyString
        ) : false !== value && "function" !== typeof value && "symbol" !== typeof value && target.push(
          attributeSeparator,
          stringToChunk(name),
          attributeAssign,
          stringToChunk(escapeTextForBrowser(value)),
          attributeEnd
        );
        break;
      case "cols":
      case "rows":
      case "size":
      case "span":
        "function" !== typeof value && "symbol" !== typeof value && !isNaN(value) && 1 <= value && target.push(
          attributeSeparator,
          stringToChunk(name),
          attributeAssign,
          stringToChunk(escapeTextForBrowser(value)),
          attributeEnd
        );
        break;
      case "rowSpan":
      case "start":
        "function" === typeof value || "symbol" === typeof value || isNaN(value) || target.push(
          attributeSeparator,
          stringToChunk(name),
          attributeAssign,
          stringToChunk(escapeTextForBrowser(value)),
          attributeEnd
        );
        break;
      case "xlinkActuate":
        pushStringAttribute(target, "xlink:actuate", value);
        break;
      case "xlinkArcrole":
        pushStringAttribute(target, "xlink:arcrole", value);
        break;
      case "xlinkRole":
        pushStringAttribute(target, "xlink:role", value);
        break;
      case "xlinkShow":
        pushStringAttribute(target, "xlink:show", value);
        break;
      case "xlinkTitle":
        pushStringAttribute(target, "xlink:title", value);
        break;
      case "xlinkType":
        pushStringAttribute(target, "xlink:type", value);
        break;
      case "xmlBase":
        pushStringAttribute(target, "xml:base", value);
        break;
      case "xmlLang":
        pushStringAttribute(target, "xml:lang", value);
        break;
      case "xmlSpace":
        pushStringAttribute(target, "xml:space", value);
        break;
      default:
        if (!(2 < name.length) || "o" !== name[0] && "O" !== name[0] || "n" !== name[1] && "N" !== name[1]) {
          if (name = aliases.get(name) || name, isAttributeNameSafe(name)) {
            switch (typeof value) {
              case "function":
              case "symbol":
                return;
              case "boolean":
                var prefix$8 = name.toLowerCase().slice(0, 5);
                if ("data-" !== prefix$8 && "aria-" !== prefix$8) return;
            }
            target.push(
              attributeSeparator,
              stringToChunk(name),
              attributeAssign,
              stringToChunk(escapeTextForBrowser(value)),
              attributeEnd
            );
          }
        }
    }
  }
  var endOfStartTag = stringToPrecomputedChunk(">"), endOfStartTagSelfClosing = stringToPrecomputedChunk("/>");
  function pushInnerHTML(target, innerHTML, children) {
    if (null != innerHTML) {
      if (null != children)
        throw Error(
          "Can only set one of `children` or `props.dangerouslySetInnerHTML`."
        );
      if ("object" !== typeof innerHTML || !("__html" in innerHTML))
        throw Error(
          "`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://react.dev/link/dangerously-set-inner-html for more information."
        );
      innerHTML = innerHTML.__html;
      null !== innerHTML && void 0 !== innerHTML && target.push(stringToChunk("" + innerHTML));
    }
  }
  function flattenOptionChildren(children) {
    var content = "";
    React2.Children.forEach(children, function(child) {
      null != child && (content += child);
    });
    return content;
  }
  var selectedMarkerAttribute = stringToPrecomputedChunk(' selected=""'), formReplayingRuntimeScript = stringToPrecomputedChunk(
    `addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`
  );
  function injectFormReplayingRuntime(resumableState, renderState) {
    if (0 === (resumableState.instructions & 16)) {
      resumableState.instructions |= 16;
      var preamble = renderState.preamble, bootstrapChunks = renderState.bootstrapChunks;
      (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length ? (bootstrapChunks.push(renderState.startInlineScript), pushCompletedShellIdAttribute(bootstrapChunks, resumableState), bootstrapChunks.push(
        endOfStartTag,
        formReplayingRuntimeScript,
        endInlineScript
      )) : bootstrapChunks.unshift(
        renderState.startInlineScript,
        endOfStartTag,
        formReplayingRuntimeScript,
        endInlineScript
      );
    }
  }
  var formStateMarkerIsMatching = stringToPrecomputedChunk("<!--F!-->"), formStateMarkerIsNotMatching = stringToPrecomputedChunk("<!--F-->");
  function pushLinkImpl(target, props) {
    target.push(startChunkForTag("link"));
    for (var propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
            case "dangerouslySetInnerHTML":
              throw Error(
                "link is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`."
              );
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push(endOfStartTagSelfClosing);
    return null;
  }
  var styleRegex = /(<\/|<)(s)(tyle)/gi;
  function styleReplacer(match, prefix2, s, suffix2) {
    return "" + prefix2 + ("s" === s ? "\\73 " : "\\53 ") + suffix2;
  }
  function pushSelfClosing(target, props, tag) {
    target.push(startChunkForTag(tag));
    for (var propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
            case "dangerouslySetInnerHTML":
              throw Error(
                tag + " is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`."
              );
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push(endOfStartTagSelfClosing);
    return null;
  }
  function pushTitleImpl(target, props) {
    target.push(startChunkForTag("title"));
    var children = null, innerHTML = null, propKey;
    for (propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
              children = propValue;
              break;
            case "dangerouslySetInnerHTML":
              innerHTML = propValue;
              break;
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push(endOfStartTag);
    props = Array.isArray(children) ? 2 > children.length ? children[0] : null : children;
    "function" !== typeof props && "symbol" !== typeof props && null !== props && void 0 !== props && target.push(stringToChunk(escapeTextForBrowser("" + props)));
    pushInnerHTML(target, innerHTML, children);
    target.push(endChunkForTag("title"));
    return null;
  }
  var headPreambleContributionChunk = stringToPrecomputedChunk("<!--head-->"), bodyPreambleContributionChunk = stringToPrecomputedChunk("<!--body-->"), htmlPreambleContributionChunk = stringToPrecomputedChunk("<!--html-->");
  function pushScriptImpl(target, props) {
    target.push(startChunkForTag("script"));
    var children = null, innerHTML = null, propKey;
    for (propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
              children = propValue;
              break;
            case "dangerouslySetInnerHTML":
              innerHTML = propValue;
              break;
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push(endOfStartTag);
    pushInnerHTML(target, innerHTML, children);
    "string" === typeof children && target.push(
      stringToChunk(("" + children).replace(scriptRegex, scriptReplacer))
    );
    target.push(endChunkForTag("script"));
    return null;
  }
  function pushStartSingletonElement(target, props, tag) {
    target.push(startChunkForTag(tag));
    var innerHTML = tag = null, propKey;
    for (propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
              tag = propValue;
              break;
            case "dangerouslySetInnerHTML":
              innerHTML = propValue;
              break;
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push(endOfStartTag);
    pushInnerHTML(target, innerHTML, tag);
    return tag;
  }
  function pushStartGenericElement(target, props, tag) {
    target.push(startChunkForTag(tag));
    var innerHTML = tag = null, propKey;
    for (propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
              tag = propValue;
              break;
            case "dangerouslySetInnerHTML":
              innerHTML = propValue;
              break;
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push(endOfStartTag);
    pushInnerHTML(target, innerHTML, tag);
    return "string" === typeof tag ? (target.push(stringToChunk(escapeTextForBrowser(tag))), null) : tag;
  }
  var leadingNewline = stringToPrecomputedChunk("\n"), VALID_TAG_REGEX = /^[a-zA-Z][a-zA-Z:_\.\-\d]*$/, validatedTagCache = /* @__PURE__ */ new Map();
  function startChunkForTag(tag) {
    var tagStartChunk = validatedTagCache.get(tag);
    if (void 0 === tagStartChunk) {
      if (!VALID_TAG_REGEX.test(tag)) throw Error("Invalid tag: " + tag);
      tagStartChunk = stringToPrecomputedChunk("<" + tag);
      validatedTagCache.set(tag, tagStartChunk);
    }
    return tagStartChunk;
  }
  var doctypeChunk = stringToPrecomputedChunk("<!DOCTYPE html>");
  function pushStartInstance(target$jscomp$0, type, props, resumableState, renderState, preambleState, hoistableState, formatContext, textEmbedded) {
    switch (type) {
      case "div":
      case "span":
      case "svg":
      case "path":
        break;
      case "a":
        target$jscomp$0.push(startChunkForTag("a"));
        var children = null, innerHTML = null, propKey;
        for (propKey in props)
          if (hasOwnProperty.call(props, propKey)) {
            var propValue = props[propKey];
            if (null != propValue)
              switch (propKey) {
                case "children":
                  children = propValue;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML = propValue;
                  break;
                case "href":
                  "" === propValue ? pushStringAttribute(target$jscomp$0, "href", "") : pushAttribute(target$jscomp$0, propKey, propValue);
                  break;
                default:
                  pushAttribute(target$jscomp$0, propKey, propValue);
              }
          }
        target$jscomp$0.push(endOfStartTag);
        pushInnerHTML(target$jscomp$0, innerHTML, children);
        if ("string" === typeof children) {
          target$jscomp$0.push(stringToChunk(escapeTextForBrowser(children)));
          var JSCompiler_inline_result = null;
        } else JSCompiler_inline_result = children;
        return JSCompiler_inline_result;
      case "g":
      case "p":
      case "li":
        break;
      case "select":
        target$jscomp$0.push(startChunkForTag("select"));
        var children$jscomp$0 = null, innerHTML$jscomp$0 = null, propKey$jscomp$0;
        for (propKey$jscomp$0 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$0)) {
            var propValue$jscomp$0 = props[propKey$jscomp$0];
            if (null != propValue$jscomp$0)
              switch (propKey$jscomp$0) {
                case "children":
                  children$jscomp$0 = propValue$jscomp$0;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$0 = propValue$jscomp$0;
                  break;
                case "defaultValue":
                case "value":
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$0,
                    propValue$jscomp$0
                  );
              }
          }
        target$jscomp$0.push(endOfStartTag);
        pushInnerHTML(target$jscomp$0, innerHTML$jscomp$0, children$jscomp$0);
        return children$jscomp$0;
      case "option":
        var selectedValue = formatContext.selectedValue;
        target$jscomp$0.push(startChunkForTag("option"));
        var children$jscomp$1 = null, value = null, selected = null, innerHTML$jscomp$1 = null, propKey$jscomp$1;
        for (propKey$jscomp$1 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$1)) {
            var propValue$jscomp$1 = props[propKey$jscomp$1];
            if (null != propValue$jscomp$1)
              switch (propKey$jscomp$1) {
                case "children":
                  children$jscomp$1 = propValue$jscomp$1;
                  break;
                case "selected":
                  selected = propValue$jscomp$1;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$1 = propValue$jscomp$1;
                  break;
                case "value":
                  value = propValue$jscomp$1;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$1,
                    propValue$jscomp$1
                  );
              }
          }
        if (null != selectedValue) {
          var stringValue = null !== value ? "" + value : flattenOptionChildren(children$jscomp$1);
          if (isArrayImpl(selectedValue))
            for (var i = 0; i < selectedValue.length; i++) {
              if ("" + selectedValue[i] === stringValue) {
                target$jscomp$0.push(selectedMarkerAttribute);
                break;
              }
            }
          else
            "" + selectedValue === stringValue && target$jscomp$0.push(selectedMarkerAttribute);
        } else selected && target$jscomp$0.push(selectedMarkerAttribute);
        target$jscomp$0.push(endOfStartTag);
        pushInnerHTML(target$jscomp$0, innerHTML$jscomp$1, children$jscomp$1);
        return children$jscomp$1;
      case "textarea":
        target$jscomp$0.push(startChunkForTag("textarea"));
        var value$jscomp$0 = null, defaultValue = null, children$jscomp$2 = null, propKey$jscomp$2;
        for (propKey$jscomp$2 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$2)) {
            var propValue$jscomp$2 = props[propKey$jscomp$2];
            if (null != propValue$jscomp$2)
              switch (propKey$jscomp$2) {
                case "children":
                  children$jscomp$2 = propValue$jscomp$2;
                  break;
                case "value":
                  value$jscomp$0 = propValue$jscomp$2;
                  break;
                case "defaultValue":
                  defaultValue = propValue$jscomp$2;
                  break;
                case "dangerouslySetInnerHTML":
                  throw Error(
                    "`dangerouslySetInnerHTML` does not make sense on <textarea>."
                  );
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$2,
                    propValue$jscomp$2
                  );
              }
          }
        null === value$jscomp$0 && null !== defaultValue && (value$jscomp$0 = defaultValue);
        target$jscomp$0.push(endOfStartTag);
        if (null != children$jscomp$2) {
          if (null != value$jscomp$0)
            throw Error(
              "If you supply `defaultValue` on a <textarea>, do not pass children."
            );
          if (isArrayImpl(children$jscomp$2)) {
            if (1 < children$jscomp$2.length)
              throw Error("<textarea> can only have at most one child.");
            value$jscomp$0 = "" + children$jscomp$2[0];
          }
          value$jscomp$0 = "" + children$jscomp$2;
        }
        "string" === typeof value$jscomp$0 && "\n" === value$jscomp$0[0] && target$jscomp$0.push(leadingNewline);
        null !== value$jscomp$0 && target$jscomp$0.push(
          stringToChunk(escapeTextForBrowser("" + value$jscomp$0))
        );
        return null;
      case "input":
        target$jscomp$0.push(startChunkForTag("input"));
        var name = null, formAction = null, formEncType = null, formMethod = null, formTarget = null, value$jscomp$1 = null, defaultValue$jscomp$0 = null, checked = null, defaultChecked = null, propKey$jscomp$3;
        for (propKey$jscomp$3 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$3)) {
            var propValue$jscomp$3 = props[propKey$jscomp$3];
            if (null != propValue$jscomp$3)
              switch (propKey$jscomp$3) {
                case "children":
                case "dangerouslySetInnerHTML":
                  throw Error(
                    "input is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`."
                  );
                case "name":
                  name = propValue$jscomp$3;
                  break;
                case "formAction":
                  formAction = propValue$jscomp$3;
                  break;
                case "formEncType":
                  formEncType = propValue$jscomp$3;
                  break;
                case "formMethod":
                  formMethod = propValue$jscomp$3;
                  break;
                case "formTarget":
                  formTarget = propValue$jscomp$3;
                  break;
                case "defaultChecked":
                  defaultChecked = propValue$jscomp$3;
                  break;
                case "defaultValue":
                  defaultValue$jscomp$0 = propValue$jscomp$3;
                  break;
                case "checked":
                  checked = propValue$jscomp$3;
                  break;
                case "value":
                  value$jscomp$1 = propValue$jscomp$3;
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$3,
                    propValue$jscomp$3
                  );
              }
          }
        var formData = pushFormActionAttribute(
          target$jscomp$0,
          resumableState,
          renderState,
          formAction,
          formEncType,
          formMethod,
          formTarget,
          name
        );
        null !== checked ? pushBooleanAttribute(target$jscomp$0, "checked", checked) : null !== defaultChecked && pushBooleanAttribute(target$jscomp$0, "checked", defaultChecked);
        null !== value$jscomp$1 ? pushAttribute(target$jscomp$0, "value", value$jscomp$1) : null !== defaultValue$jscomp$0 && pushAttribute(target$jscomp$0, "value", defaultValue$jscomp$0);
        target$jscomp$0.push(endOfStartTagSelfClosing);
        null != formData && formData.forEach(pushAdditionalFormField, target$jscomp$0);
        return null;
      case "button":
        target$jscomp$0.push(startChunkForTag("button"));
        var children$jscomp$3 = null, innerHTML$jscomp$2 = null, name$jscomp$0 = null, formAction$jscomp$0 = null, formEncType$jscomp$0 = null, formMethod$jscomp$0 = null, formTarget$jscomp$0 = null, propKey$jscomp$4;
        for (propKey$jscomp$4 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$4)) {
            var propValue$jscomp$4 = props[propKey$jscomp$4];
            if (null != propValue$jscomp$4)
              switch (propKey$jscomp$4) {
                case "children":
                  children$jscomp$3 = propValue$jscomp$4;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$2 = propValue$jscomp$4;
                  break;
                case "name":
                  name$jscomp$0 = propValue$jscomp$4;
                  break;
                case "formAction":
                  formAction$jscomp$0 = propValue$jscomp$4;
                  break;
                case "formEncType":
                  formEncType$jscomp$0 = propValue$jscomp$4;
                  break;
                case "formMethod":
                  formMethod$jscomp$0 = propValue$jscomp$4;
                  break;
                case "formTarget":
                  formTarget$jscomp$0 = propValue$jscomp$4;
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$4,
                    propValue$jscomp$4
                  );
              }
          }
        var formData$jscomp$0 = pushFormActionAttribute(
          target$jscomp$0,
          resumableState,
          renderState,
          formAction$jscomp$0,
          formEncType$jscomp$0,
          formMethod$jscomp$0,
          formTarget$jscomp$0,
          name$jscomp$0
        );
        target$jscomp$0.push(endOfStartTag);
        null != formData$jscomp$0 && formData$jscomp$0.forEach(pushAdditionalFormField, target$jscomp$0);
        pushInnerHTML(target$jscomp$0, innerHTML$jscomp$2, children$jscomp$3);
        if ("string" === typeof children$jscomp$3) {
          target$jscomp$0.push(
            stringToChunk(escapeTextForBrowser(children$jscomp$3))
          );
          var JSCompiler_inline_result$jscomp$0 = null;
        } else JSCompiler_inline_result$jscomp$0 = children$jscomp$3;
        return JSCompiler_inline_result$jscomp$0;
      case "form":
        target$jscomp$0.push(startChunkForTag("form"));
        var children$jscomp$4 = null, innerHTML$jscomp$3 = null, formAction$jscomp$1 = null, formEncType$jscomp$1 = null, formMethod$jscomp$1 = null, formTarget$jscomp$1 = null, propKey$jscomp$5;
        for (propKey$jscomp$5 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$5)) {
            var propValue$jscomp$5 = props[propKey$jscomp$5];
            if (null != propValue$jscomp$5)
              switch (propKey$jscomp$5) {
                case "children":
                  children$jscomp$4 = propValue$jscomp$5;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$3 = propValue$jscomp$5;
                  break;
                case "action":
                  formAction$jscomp$1 = propValue$jscomp$5;
                  break;
                case "encType":
                  formEncType$jscomp$1 = propValue$jscomp$5;
                  break;
                case "method":
                  formMethod$jscomp$1 = propValue$jscomp$5;
                  break;
                case "target":
                  formTarget$jscomp$1 = propValue$jscomp$5;
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$5,
                    propValue$jscomp$5
                  );
              }
          }
        var formData$jscomp$1 = null, formActionName = null;
        if ("function" === typeof formAction$jscomp$1) {
          var customFields = getCustomFormFields(
            resumableState,
            formAction$jscomp$1
          );
          null !== customFields ? (formAction$jscomp$1 = customFields.action || "", formEncType$jscomp$1 = customFields.encType, formMethod$jscomp$1 = customFields.method, formTarget$jscomp$1 = customFields.target, formData$jscomp$1 = customFields.data, formActionName = customFields.name) : (target$jscomp$0.push(
            attributeSeparator,
            stringToChunk("action"),
            attributeAssign,
            actionJavaScriptURL,
            attributeEnd
          ), formTarget$jscomp$1 = formMethod$jscomp$1 = formEncType$jscomp$1 = formAction$jscomp$1 = null, injectFormReplayingRuntime(resumableState, renderState));
        }
        null != formAction$jscomp$1 && pushAttribute(target$jscomp$0, "action", formAction$jscomp$1);
        null != formEncType$jscomp$1 && pushAttribute(target$jscomp$0, "encType", formEncType$jscomp$1);
        null != formMethod$jscomp$1 && pushAttribute(target$jscomp$0, "method", formMethod$jscomp$1);
        null != formTarget$jscomp$1 && pushAttribute(target$jscomp$0, "target", formTarget$jscomp$1);
        target$jscomp$0.push(endOfStartTag);
        null !== formActionName && (target$jscomp$0.push(startHiddenInputChunk), pushStringAttribute(target$jscomp$0, "name", formActionName), target$jscomp$0.push(endOfStartTagSelfClosing), null != formData$jscomp$1 && formData$jscomp$1.forEach(pushAdditionalFormField, target$jscomp$0));
        pushInnerHTML(target$jscomp$0, innerHTML$jscomp$3, children$jscomp$4);
        if ("string" === typeof children$jscomp$4) {
          target$jscomp$0.push(
            stringToChunk(escapeTextForBrowser(children$jscomp$4))
          );
          var JSCompiler_inline_result$jscomp$1 = null;
        } else JSCompiler_inline_result$jscomp$1 = children$jscomp$4;
        return JSCompiler_inline_result$jscomp$1;
      case "menuitem":
        target$jscomp$0.push(startChunkForTag("menuitem"));
        for (var propKey$jscomp$6 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$6)) {
            var propValue$jscomp$6 = props[propKey$jscomp$6];
            if (null != propValue$jscomp$6)
              switch (propKey$jscomp$6) {
                case "children":
                case "dangerouslySetInnerHTML":
                  throw Error(
                    "menuitems cannot have `children` nor `dangerouslySetInnerHTML`."
                  );
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$6,
                    propValue$jscomp$6
                  );
              }
          }
        target$jscomp$0.push(endOfStartTag);
        return null;
      case "object":
        target$jscomp$0.push(startChunkForTag("object"));
        var children$jscomp$5 = null, innerHTML$jscomp$4 = null, propKey$jscomp$7;
        for (propKey$jscomp$7 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$7)) {
            var propValue$jscomp$7 = props[propKey$jscomp$7];
            if (null != propValue$jscomp$7)
              switch (propKey$jscomp$7) {
                case "children":
                  children$jscomp$5 = propValue$jscomp$7;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$4 = propValue$jscomp$7;
                  break;
                case "data":
                  var sanitizedValue = sanitizeURL("" + propValue$jscomp$7);
                  if ("" === sanitizedValue) break;
                  target$jscomp$0.push(
                    attributeSeparator,
                    stringToChunk("data"),
                    attributeAssign,
                    stringToChunk(escapeTextForBrowser(sanitizedValue)),
                    attributeEnd
                  );
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$7,
                    propValue$jscomp$7
                  );
              }
          }
        target$jscomp$0.push(endOfStartTag);
        pushInnerHTML(target$jscomp$0, innerHTML$jscomp$4, children$jscomp$5);
        if ("string" === typeof children$jscomp$5) {
          target$jscomp$0.push(
            stringToChunk(escapeTextForBrowser(children$jscomp$5))
          );
          var JSCompiler_inline_result$jscomp$2 = null;
        } else JSCompiler_inline_result$jscomp$2 = children$jscomp$5;
        return JSCompiler_inline_result$jscomp$2;
      case "title":
        var noscriptTagInScope = formatContext.tagScope & 1, isFallback = formatContext.tagScope & 4;
        if (4 === formatContext.insertionMode || noscriptTagInScope || null != props.itemProp)
          var JSCompiler_inline_result$jscomp$3 = pushTitleImpl(
            target$jscomp$0,
            props
          );
        else
          isFallback ? JSCompiler_inline_result$jscomp$3 = null : (pushTitleImpl(renderState.hoistableChunks, props), JSCompiler_inline_result$jscomp$3 = void 0);
        return JSCompiler_inline_result$jscomp$3;
      case "link":
        var noscriptTagInScope$jscomp$0 = formatContext.tagScope & 1, isFallback$jscomp$0 = formatContext.tagScope & 4, rel = props.rel, href = props.href, precedence = props.precedence;
        if (4 === formatContext.insertionMode || noscriptTagInScope$jscomp$0 || null != props.itemProp || "string" !== typeof rel || "string" !== typeof href || "" === href) {
          pushLinkImpl(target$jscomp$0, props);
          var JSCompiler_inline_result$jscomp$4 = null;
        } else if ("stylesheet" === props.rel)
          if ("string" !== typeof precedence || null != props.disabled || props.onLoad || props.onError)
            JSCompiler_inline_result$jscomp$4 = pushLinkImpl(
              target$jscomp$0,
              props
            );
          else {
            var styleQueue = renderState.styles.get(precedence), resourceState = resumableState.styleResources.hasOwnProperty(href) ? resumableState.styleResources[href] : void 0;
            if (null !== resourceState) {
              resumableState.styleResources[href] = null;
              styleQueue || (styleQueue = {
                precedence: stringToChunk(escapeTextForBrowser(precedence)),
                rules: [],
                hrefs: [],
                sheets: /* @__PURE__ */ new Map()
              }, renderState.styles.set(precedence, styleQueue));
              var resource = {
                state: 0,
                props: assign({}, props, {
                  "data-precedence": props.precedence,
                  precedence: null
                })
              };
              if (resourceState) {
                2 === resourceState.length && adoptPreloadCredentials(resource.props, resourceState);
                var preloadResource = renderState.preloads.stylesheets.get(href);
                preloadResource && 0 < preloadResource.length ? preloadResource.length = 0 : resource.state = 1;
              }
              styleQueue.sheets.set(href, resource);
              hoistableState && hoistableState.stylesheets.add(resource);
            } else if (styleQueue) {
              var resource$9 = styleQueue.sheets.get(href);
              resource$9 && hoistableState && hoistableState.stylesheets.add(resource$9);
            }
            textEmbedded && target$jscomp$0.push(textSeparator);
            JSCompiler_inline_result$jscomp$4 = null;
          }
        else
          props.onLoad || props.onError ? JSCompiler_inline_result$jscomp$4 = pushLinkImpl(
            target$jscomp$0,
            props
          ) : (textEmbedded && target$jscomp$0.push(textSeparator), JSCompiler_inline_result$jscomp$4 = isFallback$jscomp$0 ? null : pushLinkImpl(renderState.hoistableChunks, props));
        return JSCompiler_inline_result$jscomp$4;
      case "script":
        var noscriptTagInScope$jscomp$1 = formatContext.tagScope & 1, asyncProp = props.async;
        if ("string" !== typeof props.src || !props.src || !asyncProp || "function" === typeof asyncProp || "symbol" === typeof asyncProp || props.onLoad || props.onError || 4 === formatContext.insertionMode || noscriptTagInScope$jscomp$1 || null != props.itemProp)
          var JSCompiler_inline_result$jscomp$5 = pushScriptImpl(
            target$jscomp$0,
            props
          );
        else {
          var key = props.src;
          if ("module" === props.type) {
            var resources = resumableState.moduleScriptResources;
            var preloads = renderState.preloads.moduleScripts;
          } else
            resources = resumableState.scriptResources, preloads = renderState.preloads.scripts;
          var resourceState$jscomp$0 = resources.hasOwnProperty(key) ? resources[key] : void 0;
          if (null !== resourceState$jscomp$0) {
            resources[key] = null;
            var scriptProps = props;
            if (resourceState$jscomp$0) {
              2 === resourceState$jscomp$0.length && (scriptProps = assign({}, props), adoptPreloadCredentials(scriptProps, resourceState$jscomp$0));
              var preloadResource$jscomp$0 = preloads.get(key);
              preloadResource$jscomp$0 && (preloadResource$jscomp$0.length = 0);
            }
            var resource$jscomp$0 = [];
            renderState.scripts.add(resource$jscomp$0);
            pushScriptImpl(resource$jscomp$0, scriptProps);
          }
          textEmbedded && target$jscomp$0.push(textSeparator);
          JSCompiler_inline_result$jscomp$5 = null;
        }
        return JSCompiler_inline_result$jscomp$5;
      case "style":
        var noscriptTagInScope$jscomp$2 = formatContext.tagScope & 1, precedence$jscomp$0 = props.precedence, href$jscomp$0 = props.href, nonce = props.nonce;
        if (4 === formatContext.insertionMode || noscriptTagInScope$jscomp$2 || null != props.itemProp || "string" !== typeof precedence$jscomp$0 || "string" !== typeof href$jscomp$0 || "" === href$jscomp$0) {
          target$jscomp$0.push(startChunkForTag("style"));
          var children$jscomp$6 = null, innerHTML$jscomp$5 = null, propKey$jscomp$8;
          for (propKey$jscomp$8 in props)
            if (hasOwnProperty.call(props, propKey$jscomp$8)) {
              var propValue$jscomp$8 = props[propKey$jscomp$8];
              if (null != propValue$jscomp$8)
                switch (propKey$jscomp$8) {
                  case "children":
                    children$jscomp$6 = propValue$jscomp$8;
                    break;
                  case "dangerouslySetInnerHTML":
                    innerHTML$jscomp$5 = propValue$jscomp$8;
                    break;
                  default:
                    pushAttribute(
                      target$jscomp$0,
                      propKey$jscomp$8,
                      propValue$jscomp$8
                    );
                }
            }
          target$jscomp$0.push(endOfStartTag);
          var child = Array.isArray(children$jscomp$6) ? 2 > children$jscomp$6.length ? children$jscomp$6[0] : null : children$jscomp$6;
          "function" !== typeof child && "symbol" !== typeof child && null !== child && void 0 !== child && target$jscomp$0.push(
            stringToChunk(("" + child).replace(styleRegex, styleReplacer))
          );
          pushInnerHTML(target$jscomp$0, innerHTML$jscomp$5, children$jscomp$6);
          target$jscomp$0.push(endChunkForTag("style"));
          var JSCompiler_inline_result$jscomp$6 = null;
        } else {
          var styleQueue$jscomp$0 = renderState.styles.get(precedence$jscomp$0);
          if (null !== (resumableState.styleResources.hasOwnProperty(href$jscomp$0) ? resumableState.styleResources[href$jscomp$0] : void 0)) {
            resumableState.styleResources[href$jscomp$0] = null;
            styleQueue$jscomp$0 || (styleQueue$jscomp$0 = {
              precedence: stringToChunk(
                escapeTextForBrowser(precedence$jscomp$0)
              ),
              rules: [],
              hrefs: [],
              sheets: /* @__PURE__ */ new Map()
            }, renderState.styles.set(precedence$jscomp$0, styleQueue$jscomp$0));
            var nonceStyle = renderState.nonce.style;
            if (!nonceStyle || nonceStyle === nonce) {
              styleQueue$jscomp$0.hrefs.push(
                stringToChunk(escapeTextForBrowser(href$jscomp$0))
              );
              var target = styleQueue$jscomp$0.rules, children$jscomp$7 = null, innerHTML$jscomp$6 = null, propKey$jscomp$9;
              for (propKey$jscomp$9 in props)
                if (hasOwnProperty.call(props, propKey$jscomp$9)) {
                  var propValue$jscomp$9 = props[propKey$jscomp$9];
                  if (null != propValue$jscomp$9)
                    switch (propKey$jscomp$9) {
                      case "children":
                        children$jscomp$7 = propValue$jscomp$9;
                        break;
                      case "dangerouslySetInnerHTML":
                        innerHTML$jscomp$6 = propValue$jscomp$9;
                    }
                }
              var child$jscomp$0 = Array.isArray(children$jscomp$7) ? 2 > children$jscomp$7.length ? children$jscomp$7[0] : null : children$jscomp$7;
              "function" !== typeof child$jscomp$0 && "symbol" !== typeof child$jscomp$0 && null !== child$jscomp$0 && void 0 !== child$jscomp$0 && target.push(
                stringToChunk(
                  ("" + child$jscomp$0).replace(styleRegex, styleReplacer)
                )
              );
              pushInnerHTML(target, innerHTML$jscomp$6, children$jscomp$7);
            }
          }
          styleQueue$jscomp$0 && hoistableState && hoistableState.styles.add(styleQueue$jscomp$0);
          textEmbedded && target$jscomp$0.push(textSeparator);
          JSCompiler_inline_result$jscomp$6 = void 0;
        }
        return JSCompiler_inline_result$jscomp$6;
      case "meta":
        var noscriptTagInScope$jscomp$3 = formatContext.tagScope & 1, isFallback$jscomp$1 = formatContext.tagScope & 4;
        if (4 === formatContext.insertionMode || noscriptTagInScope$jscomp$3 || null != props.itemProp)
          var JSCompiler_inline_result$jscomp$7 = pushSelfClosing(
            target$jscomp$0,
            props,
            "meta"
          );
        else
          textEmbedded && target$jscomp$0.push(textSeparator), JSCompiler_inline_result$jscomp$7 = isFallback$jscomp$1 ? null : "string" === typeof props.charSet ? pushSelfClosing(renderState.charsetChunks, props, "meta") : "viewport" === props.name ? pushSelfClosing(renderState.viewportChunks, props, "meta") : pushSelfClosing(renderState.hoistableChunks, props, "meta");
        return JSCompiler_inline_result$jscomp$7;
      case "listing":
      case "pre":
        target$jscomp$0.push(startChunkForTag(type));
        var children$jscomp$8 = null, innerHTML$jscomp$7 = null, propKey$jscomp$10;
        for (propKey$jscomp$10 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$10)) {
            var propValue$jscomp$10 = props[propKey$jscomp$10];
            if (null != propValue$jscomp$10)
              switch (propKey$jscomp$10) {
                case "children":
                  children$jscomp$8 = propValue$jscomp$10;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$7 = propValue$jscomp$10;
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$10,
                    propValue$jscomp$10
                  );
              }
          }
        target$jscomp$0.push(endOfStartTag);
        if (null != innerHTML$jscomp$7) {
          if (null != children$jscomp$8)
            throw Error(
              "Can only set one of `children` or `props.dangerouslySetInnerHTML`."
            );
          if ("object" !== typeof innerHTML$jscomp$7 || !("__html" in innerHTML$jscomp$7))
            throw Error(
              "`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://react.dev/link/dangerously-set-inner-html for more information."
            );
          var html = innerHTML$jscomp$7.__html;
          null !== html && void 0 !== html && ("string" === typeof html && 0 < html.length && "\n" === html[0] ? target$jscomp$0.push(leadingNewline, stringToChunk(html)) : target$jscomp$0.push(stringToChunk("" + html)));
        }
        "string" === typeof children$jscomp$8 && "\n" === children$jscomp$8[0] && target$jscomp$0.push(leadingNewline);
        return children$jscomp$8;
      case "img":
        var pictureOrNoScriptTagInScope = formatContext.tagScope & 3, src = props.src, srcSet = props.srcSet;
        if (!("lazy" === props.loading || !src && !srcSet || "string" !== typeof src && null != src || "string" !== typeof srcSet && null != srcSet || "low" === props.fetchPriority || pictureOrNoScriptTagInScope) && ("string" !== typeof src || ":" !== src[4] || "d" !== src[0] && "D" !== src[0] || "a" !== src[1] && "A" !== src[1] || "t" !== src[2] && "T" !== src[2] || "a" !== src[3] && "A" !== src[3]) && ("string" !== typeof srcSet || ":" !== srcSet[4] || "d" !== srcSet[0] && "D" !== srcSet[0] || "a" !== srcSet[1] && "A" !== srcSet[1] || "t" !== srcSet[2] && "T" !== srcSet[2] || "a" !== srcSet[3] && "A" !== srcSet[3])) {
          null !== hoistableState && formatContext.tagScope & 64 && (hoistableState.suspenseyImages = true);
          var sizes = "string" === typeof props.sizes ? props.sizes : void 0, key$jscomp$0 = srcSet ? srcSet + "\n" + (sizes || "") : src, promotablePreloads = renderState.preloads.images, resource$jscomp$1 = promotablePreloads.get(key$jscomp$0);
          if (resource$jscomp$1) {
            if ("high" === props.fetchPriority || 10 > renderState.highImagePreloads.size)
              promotablePreloads.delete(key$jscomp$0), renderState.highImagePreloads.add(resource$jscomp$1);
          } else if (!resumableState.imageResources.hasOwnProperty(key$jscomp$0)) {
            resumableState.imageResources[key$jscomp$0] = PRELOAD_NO_CREDS;
            var input = props.crossOrigin;
            var JSCompiler_inline_result$jscomp$8 = "string" === typeof input ? "use-credentials" === input ? input : "" : void 0;
            var headers = renderState.headers, header;
            headers && 0 < headers.remainingCapacity && "string" !== typeof props.srcSet && ("high" === props.fetchPriority || 500 > headers.highImagePreloads.length) && (header = getPreloadAsHeader(src, "image", {
              imageSrcSet: props.srcSet,
              imageSizes: props.sizes,
              crossOrigin: JSCompiler_inline_result$jscomp$8,
              integrity: props.integrity,
              nonce: props.nonce,
              type: props.type,
              fetchPriority: props.fetchPriority,
              referrerPolicy: props.refererPolicy
            }), 0 <= (headers.remainingCapacity -= header.length + 2)) ? (renderState.resets.image[key$jscomp$0] = PRELOAD_NO_CREDS, headers.highImagePreloads && (headers.highImagePreloads += ", "), headers.highImagePreloads += header) : (resource$jscomp$1 = [], pushLinkImpl(resource$jscomp$1, {
              rel: "preload",
              as: "image",
              href: srcSet ? void 0 : src,
              imageSrcSet: srcSet,
              imageSizes: sizes,
              crossOrigin: JSCompiler_inline_result$jscomp$8,
              integrity: props.integrity,
              type: props.type,
              fetchPriority: props.fetchPriority,
              referrerPolicy: props.referrerPolicy
            }), "high" === props.fetchPriority || 10 > renderState.highImagePreloads.size ? renderState.highImagePreloads.add(resource$jscomp$1) : (renderState.bulkPreloads.add(resource$jscomp$1), promotablePreloads.set(key$jscomp$0, resource$jscomp$1)));
          }
        }
        return pushSelfClosing(target$jscomp$0, props, "img");
      case "base":
      case "area":
      case "br":
      case "col":
      case "embed":
      case "hr":
      case "keygen":
      case "param":
      case "source":
      case "track":
      case "wbr":
        return pushSelfClosing(target$jscomp$0, props, type);
      case "annotation-xml":
      case "color-profile":
      case "font-face":
      case "font-face-src":
      case "font-face-uri":
      case "font-face-format":
      case "font-face-name":
      case "missing-glyph":
        break;
      case "head":
        if (2 > formatContext.insertionMode) {
          var preamble = preambleState || renderState.preamble;
          if (preamble.headChunks)
            throw Error("The `<head>` tag may only be rendered once.");
          null !== preambleState && target$jscomp$0.push(headPreambleContributionChunk);
          preamble.headChunks = [];
          var JSCompiler_inline_result$jscomp$9 = pushStartSingletonElement(
            preamble.headChunks,
            props,
            "head"
          );
        } else
          JSCompiler_inline_result$jscomp$9 = pushStartGenericElement(
            target$jscomp$0,
            props,
            "head"
          );
        return JSCompiler_inline_result$jscomp$9;
      case "body":
        if (2 > formatContext.insertionMode) {
          var preamble$jscomp$0 = preambleState || renderState.preamble;
          if (preamble$jscomp$0.bodyChunks)
            throw Error("The `<body>` tag may only be rendered once.");
          null !== preambleState && target$jscomp$0.push(bodyPreambleContributionChunk);
          preamble$jscomp$0.bodyChunks = [];
          var JSCompiler_inline_result$jscomp$10 = pushStartSingletonElement(
            preamble$jscomp$0.bodyChunks,
            props,
            "body"
          );
        } else
          JSCompiler_inline_result$jscomp$10 = pushStartGenericElement(
            target$jscomp$0,
            props,
            "body"
          );
        return JSCompiler_inline_result$jscomp$10;
      case "html":
        if (0 === formatContext.insertionMode) {
          var preamble$jscomp$1 = preambleState || renderState.preamble;
          if (preamble$jscomp$1.htmlChunks)
            throw Error("The `<html>` tag may only be rendered once.");
          null !== preambleState && target$jscomp$0.push(htmlPreambleContributionChunk);
          preamble$jscomp$1.htmlChunks = [doctypeChunk];
          var JSCompiler_inline_result$jscomp$11 = pushStartSingletonElement(
            preamble$jscomp$1.htmlChunks,
            props,
            "html"
          );
        } else
          JSCompiler_inline_result$jscomp$11 = pushStartGenericElement(
            target$jscomp$0,
            props,
            "html"
          );
        return JSCompiler_inline_result$jscomp$11;
      default:
        if (-1 !== type.indexOf("-")) {
          target$jscomp$0.push(startChunkForTag(type));
          var children$jscomp$9 = null, innerHTML$jscomp$8 = null, propKey$jscomp$11;
          for (propKey$jscomp$11 in props)
            if (hasOwnProperty.call(props, propKey$jscomp$11)) {
              var propValue$jscomp$11 = props[propKey$jscomp$11];
              if (null != propValue$jscomp$11) {
                var attributeName = propKey$jscomp$11;
                switch (propKey$jscomp$11) {
                  case "children":
                    children$jscomp$9 = propValue$jscomp$11;
                    break;
                  case "dangerouslySetInnerHTML":
                    innerHTML$jscomp$8 = propValue$jscomp$11;
                    break;
                  case "style":
                    pushStyleAttribute(target$jscomp$0, propValue$jscomp$11);
                    break;
                  case "suppressContentEditableWarning":
                  case "suppressHydrationWarning":
                  case "ref":
                    break;
                  case "className":
                    attributeName = "class";
                  default:
                    if (isAttributeNameSafe(propKey$jscomp$11) && "function" !== typeof propValue$jscomp$11 && "symbol" !== typeof propValue$jscomp$11 && false !== propValue$jscomp$11) {
                      if (true === propValue$jscomp$11) propValue$jscomp$11 = "";
                      else if ("object" === typeof propValue$jscomp$11) continue;
                      target$jscomp$0.push(
                        attributeSeparator,
                        stringToChunk(attributeName),
                        attributeAssign,
                        stringToChunk(escapeTextForBrowser(propValue$jscomp$11)),
                        attributeEnd
                      );
                    }
                }
              }
            }
          target$jscomp$0.push(endOfStartTag);
          pushInnerHTML(target$jscomp$0, innerHTML$jscomp$8, children$jscomp$9);
          return children$jscomp$9;
        }
    }
    return pushStartGenericElement(target$jscomp$0, props, type);
  }
  var endTagCache = /* @__PURE__ */ new Map();
  function endChunkForTag(tag) {
    var chunk = endTagCache.get(tag);
    void 0 === chunk && (chunk = stringToPrecomputedChunk("</" + tag + ">"), endTagCache.set(tag, chunk));
    return chunk;
  }
  function hoistPreambleState(renderState, preambleState) {
    renderState = renderState.preamble;
    null === renderState.htmlChunks && preambleState.htmlChunks && (renderState.htmlChunks = preambleState.htmlChunks);
    null === renderState.headChunks && preambleState.headChunks && (renderState.headChunks = preambleState.headChunks);
    null === renderState.bodyChunks && preambleState.bodyChunks && (renderState.bodyChunks = preambleState.bodyChunks);
  }
  function writeBootstrap(destination, renderState) {
    renderState = renderState.bootstrapChunks;
    for (var i = 0; i < renderState.length - 1; i++)
      writeChunk(destination, renderState[i]);
    return i < renderState.length ? (i = renderState[i], renderState.length = 0, writeChunkAndReturn(destination, i)) : true;
  }
  var shellTimeRuntimeScript = stringToPrecomputedChunk(
    "requestAnimationFrame(function(){$RT=performance.now()});"
  ), placeholder1 = stringToPrecomputedChunk('<template id="'), placeholder2 = stringToPrecomputedChunk('"></template>'), startActivityBoundary = stringToPrecomputedChunk("<!--&-->"), endActivityBoundary = stringToPrecomputedChunk("<!--/&-->"), startCompletedSuspenseBoundary = stringToPrecomputedChunk("<!--$-->"), startPendingSuspenseBoundary1 = stringToPrecomputedChunk(
    '<!--$?--><template id="'
  ), startPendingSuspenseBoundary2 = stringToPrecomputedChunk('"></template>'), startClientRenderedSuspenseBoundary = stringToPrecomputedChunk("<!--$!-->"), endSuspenseBoundary = stringToPrecomputedChunk("<!--/$-->"), clientRenderedSuspenseBoundaryError1 = stringToPrecomputedChunk("<template"), clientRenderedSuspenseBoundaryErrorAttrInterstitial = stringToPrecomputedChunk('"'), clientRenderedSuspenseBoundaryError1A = stringToPrecomputedChunk(' data-dgst="');
  stringToPrecomputedChunk(' data-msg="');
  stringToPrecomputedChunk(' data-stck="');
  stringToPrecomputedChunk(' data-cstck="');
  var clientRenderedSuspenseBoundaryError2 = stringToPrecomputedChunk("></template>");
  function writeStartPendingSuspenseBoundary(destination, renderState, id2) {
    writeChunk(destination, startPendingSuspenseBoundary1);
    if (null === id2)
      throw Error(
        "An ID must have been assigned before we can complete the boundary."
      );
    writeChunk(destination, renderState.boundaryPrefix);
    writeChunk(destination, stringToChunk(id2.toString(16)));
    return writeChunkAndReturn(destination, startPendingSuspenseBoundary2);
  }
  var startSegmentHTML = stringToPrecomputedChunk('<div hidden id="'), startSegmentHTML2 = stringToPrecomputedChunk('">'), endSegmentHTML = stringToPrecomputedChunk("</div>"), startSegmentSVG = stringToPrecomputedChunk(
    '<svg aria-hidden="true" style="display:none" id="'
  ), startSegmentSVG2 = stringToPrecomputedChunk('">'), endSegmentSVG = stringToPrecomputedChunk("</svg>"), startSegmentMathML = stringToPrecomputedChunk(
    '<math aria-hidden="true" style="display:none" id="'
  ), startSegmentMathML2 = stringToPrecomputedChunk('">'), endSegmentMathML = stringToPrecomputedChunk("</math>"), startSegmentTable = stringToPrecomputedChunk('<table hidden id="'), startSegmentTable2 = stringToPrecomputedChunk('">'), endSegmentTable = stringToPrecomputedChunk("</table>"), startSegmentTableBody = stringToPrecomputedChunk('<table hidden><tbody id="'), startSegmentTableBody2 = stringToPrecomputedChunk('">'), endSegmentTableBody = stringToPrecomputedChunk("</tbody></table>"), startSegmentTableRow = stringToPrecomputedChunk('<table hidden><tr id="'), startSegmentTableRow2 = stringToPrecomputedChunk('">'), endSegmentTableRow = stringToPrecomputedChunk("</tr></table>"), startSegmentColGroup = stringToPrecomputedChunk(
    '<table hidden><colgroup id="'
  ), startSegmentColGroup2 = stringToPrecomputedChunk('">'), endSegmentColGroup = stringToPrecomputedChunk("</colgroup></table>");
  function writeStartSegment(destination, renderState, formatContext, id2) {
    switch (formatContext.insertionMode) {
      case 0:
      case 1:
      case 3:
      case 2:
        return writeChunk(destination, startSegmentHTML), writeChunk(destination, renderState.segmentPrefix), writeChunk(destination, stringToChunk(id2.toString(16))), writeChunkAndReturn(destination, startSegmentHTML2);
      case 4:
        return writeChunk(destination, startSegmentSVG), writeChunk(destination, renderState.segmentPrefix), writeChunk(destination, stringToChunk(id2.toString(16))), writeChunkAndReturn(destination, startSegmentSVG2);
      case 5:
        return writeChunk(destination, startSegmentMathML), writeChunk(destination, renderState.segmentPrefix), writeChunk(destination, stringToChunk(id2.toString(16))), writeChunkAndReturn(destination, startSegmentMathML2);
      case 6:
        return writeChunk(destination, startSegmentTable), writeChunk(destination, renderState.segmentPrefix), writeChunk(destination, stringToChunk(id2.toString(16))), writeChunkAndReturn(destination, startSegmentTable2);
      case 7:
        return writeChunk(destination, startSegmentTableBody), writeChunk(destination, renderState.segmentPrefix), writeChunk(destination, stringToChunk(id2.toString(16))), writeChunkAndReturn(destination, startSegmentTableBody2);
      case 8:
        return writeChunk(destination, startSegmentTableRow), writeChunk(destination, renderState.segmentPrefix), writeChunk(destination, stringToChunk(id2.toString(16))), writeChunkAndReturn(destination, startSegmentTableRow2);
      case 9:
        return writeChunk(destination, startSegmentColGroup), writeChunk(destination, renderState.segmentPrefix), writeChunk(destination, stringToChunk(id2.toString(16))), writeChunkAndReturn(destination, startSegmentColGroup2);
      default:
        throw Error("Unknown insertion mode. This is a bug in React.");
    }
  }
  function writeEndSegment(destination, formatContext) {
    switch (formatContext.insertionMode) {
      case 0:
      case 1:
      case 3:
      case 2:
        return writeChunkAndReturn(destination, endSegmentHTML);
      case 4:
        return writeChunkAndReturn(destination, endSegmentSVG);
      case 5:
        return writeChunkAndReturn(destination, endSegmentMathML);
      case 6:
        return writeChunkAndReturn(destination, endSegmentTable);
      case 7:
        return writeChunkAndReturn(destination, endSegmentTableBody);
      case 8:
        return writeChunkAndReturn(destination, endSegmentTableRow);
      case 9:
        return writeChunkAndReturn(destination, endSegmentColGroup);
      default:
        throw Error("Unknown insertion mode. This is a bug in React.");
    }
  }
  var completeSegmentScript1Full = stringToPrecomputedChunk(
    '$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'
  ), completeSegmentScript1Partial = stringToPrecomputedChunk('$RS("'), completeSegmentScript2 = stringToPrecomputedChunk('","'), completeSegmentScriptEnd = stringToPrecomputedChunk('")<\/script>');
  stringToPrecomputedChunk('<template data-rsi="" data-sid="');
  stringToPrecomputedChunk('" data-pid="');
  var completeBoundaryScriptFunctionOnly = stringToPrecomputedChunk(
    '$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};\n$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};'
  );
  stringToChunk(
    `$RV=function(A,g){function k(a,b){var e=a.getAttribute(b);e&&(b=a.style,l.push(a,b.viewTransitionName,b.viewTransitionClass),"auto"!==e&&(b.viewTransitionClass=e),(a=a.getAttribute("vt-name"))||(a="_T_"+K++ +"_"),b.viewTransitionName=a,B=!0)}var B=!1,K=0,l=[];try{var f=document.__reactViewTransition;if(f){f.finished.finally($RV.bind(null,g));return}var m=new Map;for(f=1;f<g.length;f+=2)for(var h=g[f].querySelectorAll("[vt-share]"),d=0;d<h.length;d++){var c=h[d];m.set(c.getAttribute("vt-name"),c)}var u=[];for(h=0;h<g.length;h+=2){var C=g[h],x=C.parentNode;if(x){var v=x.getBoundingClientRect();if(v.left||v.top||v.width||v.height){c=C;for(f=0;c;){if(8===c.nodeType){var r=c.data;if("/$"===r)if(0===f)break;else f--;else"$"!==r&&"$?"!==r&&"$~"!==r&&"$!"!==r||f++}else if(1===c.nodeType){d=c;var D=d.getAttribute("vt-name"),y=m.get(D);k(d,y?"vt-share":"vt-exit");y&&(k(y,"vt-share"),m.set(D,null));var E=d.querySelectorAll("[vt-share]");for(d=0;d<E.length;d++){var F=E[d],G=F.getAttribute("vt-name"),
H=m.get(G);H&&(k(F,"vt-share"),k(H,"vt-share"),m.set(G,null))}}c=c.nextSibling}for(var I=g[h+1],t=I.firstElementChild;t;)null!==m.get(t.getAttribute("vt-name"))&&k(t,"vt-enter"),t=t.nextElementSibling;c=x;do for(var n=c.firstElementChild;n;){var J=n.getAttribute("vt-update");J&&"none"!==J&&!l.includes(n)&&k(n,"vt-update");n=n.nextElementSibling}while((c=c.parentNode)&&1===c.nodeType&&"none"!==c.getAttribute("vt-update"));u.push.apply(u,I.querySelectorAll('img[src]:not([loading="lazy"])'))}}}if(B){var z=
document.__reactViewTransition=document.startViewTransition({update:function(){A(g);for(var a=[document.documentElement.clientHeight,document.fonts.ready],b={},e=0;e<u.length;b={g:b.g},e++)if(b.g=u[e],!b.g.complete){var p=b.g.getBoundingClientRect();0<p.bottom&&0<p.right&&p.top<window.innerHeight&&p.left<window.innerWidth&&(p=new Promise(function(w){return function(q){w.g.addEventListener("load",q);w.g.addEventListener("error",q)}}(b)),a.push(p))}return Promise.race([Promise.all(a),new Promise(function(w){var q=
performance.now();setTimeout(w,2300>q&&2E3<q?2300-q:500)})])},types:[]});z.ready.finally(function(){for(var a=l.length-3;0<=a;a-=3){var b=l[a],e=b.style;e.viewTransitionName=l[a+1];e.viewTransitionClass=l[a+1];""===b.getAttribute("style")&&b.removeAttribute("style")}});z.finished.finally(function(){document.__reactViewTransition===z&&(document.__reactViewTransition=null)});$RB=[];return}}catch(a){}A(g)}.bind(null,$RV);`
  );
  var completeBoundaryScript1Partial = stringToPrecomputedChunk('$RC("'), completeBoundaryWithStylesScript1FullPartial = stringToPrecomputedChunk(
    '$RM=new Map;$RR=function(n,w,p){function u(q){this._p=null;q()}for(var r=new Map,t=document,h,b,e=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=[],k=0;b=e[k++];)"not all"===b.getAttribute("media")?v.push(b):("LINK"===b.tagName&&$RM.set(b.getAttribute("href"),b),r.set(b.dataset.precedence,h=b));e=0;b=[];var l,a;for(k=!0;;){if(k){var f=p[e++];if(!f){k=!1;e=0;continue}var c=!1,m=0;var d=f[m++];if(a=$RM.get(d)){var g=a._p;c=!0}else{a=t.createElement("link");a.href=d;a.rel=\n"stylesheet";for(a.dataset.precedence=l=f[m++];g=f[m++];)a.setAttribute(g,f[m++]);g=a._p=new Promise(function(q,x){a.onload=u.bind(a,q);a.onerror=u.bind(a,x)});$RM.set(d,a)}d=a.getAttribute("media");!g||d&&!matchMedia(d).matches||b.push(g);if(c)continue}else{a=v[e++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=r.get(l)||h;c===h&&(h=a);r.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=t.head,c.insertBefore(a,c.firstChild))}if(p=document.getElementById(n))p.previousSibling.data=\n"$~";Promise.all(b).then($RC.bind(null,n,w),$RX.bind(null,n,"CSS failed to load"))};$RR("'
  ), completeBoundaryWithStylesScript1Partial = stringToPrecomputedChunk('$RR("'), completeBoundaryScript2 = stringToPrecomputedChunk('","'), completeBoundaryScript3a = stringToPrecomputedChunk('",'), completeBoundaryScript3b = stringToPrecomputedChunk('"'), completeBoundaryScriptEnd = stringToPrecomputedChunk(")<\/script>");
  stringToPrecomputedChunk('<template data-rci="" data-bid="');
  stringToPrecomputedChunk('<template data-rri="" data-bid="');
  stringToPrecomputedChunk('" data-sid="');
  stringToPrecomputedChunk('" data-sty="');
  var clientRenderScriptFunctionOnly = stringToPrecomputedChunk(
    '$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};'
  ), clientRenderScript1Full = stringToPrecomputedChunk(
    '$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("'
  ), clientRenderScript1Partial = stringToPrecomputedChunk('$RX("'), clientRenderScript1A = stringToPrecomputedChunk('"'), clientRenderErrorScriptArgInterstitial = stringToPrecomputedChunk(","), clientRenderScriptEnd = stringToPrecomputedChunk(")<\/script>");
  stringToPrecomputedChunk('<template data-rxi="" data-bid="');
  stringToPrecomputedChunk('" data-dgst="');
  stringToPrecomputedChunk('" data-msg="');
  stringToPrecomputedChunk('" data-stck="');
  stringToPrecomputedChunk('" data-cstck="');
  var regexForJSStringsInInstructionScripts = /[<\u2028\u2029]/g;
  function escapeJSStringsForInstructionScripts(input) {
    return JSON.stringify(input).replace(
      regexForJSStringsInInstructionScripts,
      function(match) {
        switch (match) {
          case "<":
            return "\\u003c";
          case "\u2028":
            return "\\u2028";
          case "\u2029":
            return "\\u2029";
          default:
            throw Error(
              "escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React"
            );
        }
      }
    );
  }
  var regexForJSStringsInScripts = /[&><\u2028\u2029]/g;
  function escapeJSObjectForInstructionScripts(input) {
    return JSON.stringify(input).replace(
      regexForJSStringsInScripts,
      function(match) {
        switch (match) {
          case "&":
            return "\\u0026";
          case ">":
            return "\\u003e";
          case "<":
            return "\\u003c";
          case "\u2028":
            return "\\u2028";
          case "\u2029":
            return "\\u2029";
          default:
            throw Error(
              "escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React"
            );
        }
      }
    );
  }
  var lateStyleTagResourceOpen1 = stringToPrecomputedChunk(
    ' media="not all" data-precedence="'
  ), lateStyleTagResourceOpen2 = stringToPrecomputedChunk('" data-href="'), lateStyleTagResourceOpen3 = stringToPrecomputedChunk('">'), lateStyleTagTemplateClose = stringToPrecomputedChunk("</style>"), currentlyRenderingBoundaryHasStylesToHoist = false, destinationHasCapacity = true;
  function flushStyleTagsLateForBoundary(styleQueue) {
    var rules = styleQueue.rules, hrefs = styleQueue.hrefs, i = 0;
    if (hrefs.length) {
      writeChunk(this, currentlyFlushingRenderState.startInlineStyle);
      writeChunk(this, lateStyleTagResourceOpen1);
      writeChunk(this, styleQueue.precedence);
      for (writeChunk(this, lateStyleTagResourceOpen2); i < hrefs.length - 1; i++)
        writeChunk(this, hrefs[i]), writeChunk(this, spaceSeparator);
      writeChunk(this, hrefs[i]);
      writeChunk(this, lateStyleTagResourceOpen3);
      for (i = 0; i < rules.length; i++) writeChunk(this, rules[i]);
      destinationHasCapacity = writeChunkAndReturn(
        this,
        lateStyleTagTemplateClose
      );
      currentlyRenderingBoundaryHasStylesToHoist = true;
      rules.length = 0;
      hrefs.length = 0;
    }
  }
  function hasStylesToHoist(stylesheet) {
    return 2 !== stylesheet.state ? currentlyRenderingBoundaryHasStylesToHoist = true : false;
  }
  function writeHoistablesForBoundary(destination, hoistableState, renderState) {
    currentlyRenderingBoundaryHasStylesToHoist = false;
    destinationHasCapacity = true;
    currentlyFlushingRenderState = renderState;
    hoistableState.styles.forEach(flushStyleTagsLateForBoundary, destination);
    currentlyFlushingRenderState = null;
    hoistableState.stylesheets.forEach(hasStylesToHoist);
    currentlyRenderingBoundaryHasStylesToHoist && (renderState.stylesToHoist = true);
    return destinationHasCapacity;
  }
  function flushResource(resource) {
    for (var i = 0; i < resource.length; i++) writeChunk(this, resource[i]);
    resource.length = 0;
  }
  var stylesheetFlushingQueue = [];
  function flushStyleInPreamble(stylesheet) {
    pushLinkImpl(stylesheetFlushingQueue, stylesheet.props);
    for (var i = 0; i < stylesheetFlushingQueue.length; i++)
      writeChunk(this, stylesheetFlushingQueue[i]);
    stylesheetFlushingQueue.length = 0;
    stylesheet.state = 2;
  }
  var styleTagResourceOpen1 = stringToPrecomputedChunk(' data-precedence="'), styleTagResourceOpen2 = stringToPrecomputedChunk('" data-href="'), spaceSeparator = stringToPrecomputedChunk(" "), styleTagResourceOpen3 = stringToPrecomputedChunk('">'), styleTagResourceClose = stringToPrecomputedChunk("</style>");
  function flushStylesInPreamble(styleQueue) {
    var hasStylesheets = 0 < styleQueue.sheets.size;
    styleQueue.sheets.forEach(flushStyleInPreamble, this);
    styleQueue.sheets.clear();
    var rules = styleQueue.rules, hrefs = styleQueue.hrefs;
    if (!hasStylesheets || hrefs.length) {
      writeChunk(this, currentlyFlushingRenderState.startInlineStyle);
      writeChunk(this, styleTagResourceOpen1);
      writeChunk(this, styleQueue.precedence);
      styleQueue = 0;
      if (hrefs.length) {
        for (writeChunk(this, styleTagResourceOpen2); styleQueue < hrefs.length - 1; styleQueue++)
          writeChunk(this, hrefs[styleQueue]), writeChunk(this, spaceSeparator);
        writeChunk(this, hrefs[styleQueue]);
      }
      writeChunk(this, styleTagResourceOpen3);
      for (styleQueue = 0; styleQueue < rules.length; styleQueue++)
        writeChunk(this, rules[styleQueue]);
      writeChunk(this, styleTagResourceClose);
      rules.length = 0;
      hrefs.length = 0;
    }
  }
  function preloadLateStyle(stylesheet) {
    if (0 === stylesheet.state) {
      stylesheet.state = 1;
      var props = stylesheet.props;
      pushLinkImpl(stylesheetFlushingQueue, {
        rel: "preload",
        as: "style",
        href: stylesheet.props.href,
        crossOrigin: props.crossOrigin,
        fetchPriority: props.fetchPriority,
        integrity: props.integrity,
        media: props.media,
        hrefLang: props.hrefLang,
        referrerPolicy: props.referrerPolicy
      });
      for (stylesheet = 0; stylesheet < stylesheetFlushingQueue.length; stylesheet++)
        writeChunk(this, stylesheetFlushingQueue[stylesheet]);
      stylesheetFlushingQueue.length = 0;
    }
  }
  function preloadLateStyles(styleQueue) {
    styleQueue.sheets.forEach(preloadLateStyle, this);
    styleQueue.sheets.clear();
  }
  stringToPrecomputedChunk('<link rel="expect" href="#');
  stringToPrecomputedChunk('" blocking="render"/>');
  var completedShellIdAttributeStart = stringToPrecomputedChunk(' id="');
  function pushCompletedShellIdAttribute(target, resumableState) {
    0 === (resumableState.instructions & 32) && (resumableState.instructions |= 32, target.push(
      completedShellIdAttributeStart,
      stringToChunk(escapeTextForBrowser("_" + resumableState.idPrefix + "R_")),
      attributeEnd
    ));
  }
  var arrayFirstOpenBracket = stringToPrecomputedChunk("["), arraySubsequentOpenBracket = stringToPrecomputedChunk(",["), arrayInterstitial = stringToPrecomputedChunk(","), arrayCloseBracket = stringToPrecomputedChunk("]");
  function writeStyleResourceDependenciesInJS(destination, hoistableState) {
    writeChunk(destination, arrayFirstOpenBracket);
    var nextArrayOpenBrackChunk = arrayFirstOpenBracket;
    hoistableState.stylesheets.forEach(function(resource) {
      if (2 !== resource.state)
        if (3 === resource.state)
          writeChunk(destination, nextArrayOpenBrackChunk), writeChunk(
            destination,
            stringToChunk(
              escapeJSObjectForInstructionScripts("" + resource.props.href)
            )
          ), writeChunk(destination, arrayCloseBracket), nextArrayOpenBrackChunk = arraySubsequentOpenBracket;
        else {
          writeChunk(destination, nextArrayOpenBrackChunk);
          var precedence = resource.props["data-precedence"], props = resource.props, coercedHref = sanitizeURL("" + resource.props.href);
          writeChunk(
            destination,
            stringToChunk(escapeJSObjectForInstructionScripts(coercedHref))
          );
          precedence = "" + precedence;
          writeChunk(destination, arrayInterstitial);
          writeChunk(
            destination,
            stringToChunk(escapeJSObjectForInstructionScripts(precedence))
          );
          for (var propKey in props)
            if (hasOwnProperty.call(props, propKey) && (precedence = props[propKey], null != precedence))
              switch (propKey) {
                case "href":
                case "rel":
                case "precedence":
                case "data-precedence":
                  break;
                case "children":
                case "dangerouslySetInnerHTML":
                  throw Error(
                    "link is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`."
                  );
                default:
                  writeStyleResourceAttributeInJS(
                    destination,
                    propKey,
                    precedence
                  );
              }
          writeChunk(destination, arrayCloseBracket);
          nextArrayOpenBrackChunk = arraySubsequentOpenBracket;
          resource.state = 3;
        }
    });
    writeChunk(destination, arrayCloseBracket);
  }
  function writeStyleResourceAttributeInJS(destination, name, value) {
    var attributeName = name.toLowerCase();
    switch (typeof value) {
      case "function":
      case "symbol":
        return;
    }
    switch (name) {
      case "innerHTML":
      case "dangerouslySetInnerHTML":
      case "suppressContentEditableWarning":
      case "suppressHydrationWarning":
      case "style":
      case "ref":
        return;
      case "className":
        attributeName = "class";
        name = "" + value;
        break;
      case "hidden":
        if (false === value) return;
        name = "";
        break;
      case "src":
      case "href":
        value = sanitizeURL(value);
        name = "" + value;
        break;
      default:
        if (2 < name.length && ("o" === name[0] || "O" === name[0]) && ("n" === name[1] || "N" === name[1]) || !isAttributeNameSafe(name))
          return;
        name = "" + value;
    }
    writeChunk(destination, arrayInterstitial);
    writeChunk(
      destination,
      stringToChunk(escapeJSObjectForInstructionScripts(attributeName))
    );
    writeChunk(destination, arrayInterstitial);
    writeChunk(
      destination,
      stringToChunk(escapeJSObjectForInstructionScripts(name))
    );
  }
  function createHoistableState() {
    return { styles: /* @__PURE__ */ new Set(), stylesheets: /* @__PURE__ */ new Set(), suspenseyImages: false };
  }
  function prefetchDNS(href) {
    var request = resolveRequest();
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if ("string" === typeof href && href) {
        if (!resumableState.dnsResources.hasOwnProperty(href)) {
          resumableState.dnsResources[href] = null;
          resumableState = renderState.headers;
          var header, JSCompiler_temp;
          if (JSCompiler_temp = resumableState && 0 < resumableState.remainingCapacity)
            JSCompiler_temp = (header = "<" + ("" + href).replace(
              regexForHrefInLinkHeaderURLContext,
              escapeHrefForLinkHeaderURLContextReplacer
            ) + ">; rel=dns-prefetch", 0 <= (resumableState.remainingCapacity -= header.length + 2));
          JSCompiler_temp ? (renderState.resets.dns[href] = null, resumableState.preconnects && (resumableState.preconnects += ", "), resumableState.preconnects += header) : (header = [], pushLinkImpl(header, { href, rel: "dns-prefetch" }), renderState.preconnects.add(header));
        }
        enqueueFlush(request);
      }
    } else previousDispatcher.D(href);
  }
  function preconnect(href, crossOrigin) {
    var request = resolveRequest();
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if ("string" === typeof href && href) {
        var bucket = "use-credentials" === crossOrigin ? "credentials" : "string" === typeof crossOrigin ? "anonymous" : "default";
        if (!resumableState.connectResources[bucket].hasOwnProperty(href)) {
          resumableState.connectResources[bucket][href] = null;
          resumableState = renderState.headers;
          var header, JSCompiler_temp;
          if (JSCompiler_temp = resumableState && 0 < resumableState.remainingCapacity) {
            JSCompiler_temp = "<" + ("" + href).replace(
              regexForHrefInLinkHeaderURLContext,
              escapeHrefForLinkHeaderURLContextReplacer
            ) + ">; rel=preconnect";
            if ("string" === typeof crossOrigin) {
              var escapedCrossOrigin = ("" + crossOrigin).replace(
                regexForLinkHeaderQuotedParamValueContext,
                escapeStringForLinkHeaderQuotedParamValueContextReplacer
              );
              JSCompiler_temp += '; crossorigin="' + escapedCrossOrigin + '"';
            }
            JSCompiler_temp = (header = JSCompiler_temp, 0 <= (resumableState.remainingCapacity -= header.length + 2));
          }
          JSCompiler_temp ? (renderState.resets.connect[bucket][href] = null, resumableState.preconnects && (resumableState.preconnects += ", "), resumableState.preconnects += header) : (bucket = [], pushLinkImpl(bucket, {
            rel: "preconnect",
            href,
            crossOrigin
          }), renderState.preconnects.add(bucket));
        }
        enqueueFlush(request);
      }
    } else previousDispatcher.C(href, crossOrigin);
  }
  function preload(href, as, options) {
    var request = resolveRequest();
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if (as && href) {
        switch (as) {
          case "image":
            if (options) {
              var imageSrcSet = options.imageSrcSet;
              var imageSizes = options.imageSizes;
              var fetchPriority = options.fetchPriority;
            }
            var key = imageSrcSet ? imageSrcSet + "\n" + (imageSizes || "") : href;
            if (resumableState.imageResources.hasOwnProperty(key)) return;
            resumableState.imageResources[key] = PRELOAD_NO_CREDS;
            resumableState = renderState.headers;
            var header;
            resumableState && 0 < resumableState.remainingCapacity && "string" !== typeof imageSrcSet && "high" === fetchPriority && (header = getPreloadAsHeader(href, as, options), 0 <= (resumableState.remainingCapacity -= header.length + 2)) ? (renderState.resets.image[key] = PRELOAD_NO_CREDS, resumableState.highImagePreloads && (resumableState.highImagePreloads += ", "), resumableState.highImagePreloads += header) : (resumableState = [], pushLinkImpl(
              resumableState,
              assign(
                { rel: "preload", href: imageSrcSet ? void 0 : href, as },
                options
              )
            ), "high" === fetchPriority ? renderState.highImagePreloads.add(resumableState) : (renderState.bulkPreloads.add(resumableState), renderState.preloads.images.set(key, resumableState)));
            break;
          case "style":
            if (resumableState.styleResources.hasOwnProperty(href)) return;
            imageSrcSet = [];
            pushLinkImpl(
              imageSrcSet,
              assign({ rel: "preload", href, as }, options)
            );
            resumableState.styleResources[href] = !options || "string" !== typeof options.crossOrigin && "string" !== typeof options.integrity ? PRELOAD_NO_CREDS : [options.crossOrigin, options.integrity];
            renderState.preloads.stylesheets.set(href, imageSrcSet);
            renderState.bulkPreloads.add(imageSrcSet);
            break;
          case "script":
            if (resumableState.scriptResources.hasOwnProperty(href)) return;
            imageSrcSet = [];
            renderState.preloads.scripts.set(href, imageSrcSet);
            renderState.bulkPreloads.add(imageSrcSet);
            pushLinkImpl(
              imageSrcSet,
              assign({ rel: "preload", href, as }, options)
            );
            resumableState.scriptResources[href] = !options || "string" !== typeof options.crossOrigin && "string" !== typeof options.integrity ? PRELOAD_NO_CREDS : [options.crossOrigin, options.integrity];
            break;
          default:
            if (resumableState.unknownResources.hasOwnProperty(as)) {
              if (imageSrcSet = resumableState.unknownResources[as], imageSrcSet.hasOwnProperty(href))
                return;
            } else
              imageSrcSet = {}, resumableState.unknownResources[as] = imageSrcSet;
            imageSrcSet[href] = PRELOAD_NO_CREDS;
            if ((resumableState = renderState.headers) && 0 < resumableState.remainingCapacity && "font" === as && (key = getPreloadAsHeader(href, as, options), 0 <= (resumableState.remainingCapacity -= key.length + 2)))
              renderState.resets.font[href] = PRELOAD_NO_CREDS, resumableState.fontPreloads && (resumableState.fontPreloads += ", "), resumableState.fontPreloads += key;
            else
              switch (resumableState = [], href = assign({ rel: "preload", href, as }, options), pushLinkImpl(resumableState, href), as) {
                case "font":
                  renderState.fontPreloads.add(resumableState);
                  break;
                default:
                  renderState.bulkPreloads.add(resumableState);
              }
        }
        enqueueFlush(request);
      }
    } else previousDispatcher.L(href, as, options);
  }
  function preloadModule(href, options) {
    var request = resolveRequest();
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if (href) {
        var as = options && "string" === typeof options.as ? options.as : "script";
        switch (as) {
          case "script":
            if (resumableState.moduleScriptResources.hasOwnProperty(href)) return;
            as = [];
            resumableState.moduleScriptResources[href] = !options || "string" !== typeof options.crossOrigin && "string" !== typeof options.integrity ? PRELOAD_NO_CREDS : [options.crossOrigin, options.integrity];
            renderState.preloads.moduleScripts.set(href, as);
            break;
          default:
            if (resumableState.moduleUnknownResources.hasOwnProperty(as)) {
              var resources = resumableState.unknownResources[as];
              if (resources.hasOwnProperty(href)) return;
            } else
              resources = {}, resumableState.moduleUnknownResources[as] = resources;
            as = [];
            resources[href] = PRELOAD_NO_CREDS;
        }
        pushLinkImpl(as, assign({ rel: "modulepreload", href }, options));
        renderState.bulkPreloads.add(as);
        enqueueFlush(request);
      }
    } else previousDispatcher.m(href, options);
  }
  function preinitStyle(href, precedence, options) {
    var request = resolveRequest();
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if (href) {
        precedence = precedence || "default";
        var styleQueue = renderState.styles.get(precedence), resourceState = resumableState.styleResources.hasOwnProperty(href) ? resumableState.styleResources[href] : void 0;
        null !== resourceState && (resumableState.styleResources[href] = null, styleQueue || (styleQueue = {
          precedence: stringToChunk(escapeTextForBrowser(precedence)),
          rules: [],
          hrefs: [],
          sheets: /* @__PURE__ */ new Map()
        }, renderState.styles.set(precedence, styleQueue)), precedence = {
          state: 0,
          props: assign(
            { rel: "stylesheet", href, "data-precedence": precedence },
            options
          )
        }, resourceState && (2 === resourceState.length && adoptPreloadCredentials(precedence.props, resourceState), (renderState = renderState.preloads.stylesheets.get(href)) && 0 < renderState.length ? renderState.length = 0 : precedence.state = 1), styleQueue.sheets.set(href, precedence), enqueueFlush(request));
      }
    } else previousDispatcher.S(href, precedence, options);
  }
  function preinitScript(src, options) {
    var request = resolveRequest();
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if (src) {
        var resourceState = resumableState.scriptResources.hasOwnProperty(src) ? resumableState.scriptResources[src] : void 0;
        null !== resourceState && (resumableState.scriptResources[src] = null, options = assign({ src, async: true }, options), resourceState && (2 === resourceState.length && adoptPreloadCredentials(options, resourceState), src = renderState.preloads.scripts.get(src)) && (src.length = 0), src = [], renderState.scripts.add(src), pushScriptImpl(src, options), enqueueFlush(request));
      }
    } else previousDispatcher.X(src, options);
  }
  function preinitModuleScript(src, options) {
    var request = resolveRequest();
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if (src) {
        var resourceState = resumableState.moduleScriptResources.hasOwnProperty(
          src
        ) ? resumableState.moduleScriptResources[src] : void 0;
        null !== resourceState && (resumableState.moduleScriptResources[src] = null, options = assign({ src, type: "module", async: true }, options), resourceState && (2 === resourceState.length && adoptPreloadCredentials(options, resourceState), src = renderState.preloads.moduleScripts.get(src)) && (src.length = 0), src = [], renderState.scripts.add(src), pushScriptImpl(src, options), enqueueFlush(request));
      }
    } else previousDispatcher.M(src, options);
  }
  function adoptPreloadCredentials(target, preloadState) {
    null == target.crossOrigin && (target.crossOrigin = preloadState[0]);
    null == target.integrity && (target.integrity = preloadState[1]);
  }
  function getPreloadAsHeader(href, as, params) {
    href = ("" + href).replace(
      regexForHrefInLinkHeaderURLContext,
      escapeHrefForLinkHeaderURLContextReplacer
    );
    as = ("" + as).replace(
      regexForLinkHeaderQuotedParamValueContext,
      escapeStringForLinkHeaderQuotedParamValueContextReplacer
    );
    as = "<" + href + '>; rel=preload; as="' + as + '"';
    for (var paramName in params)
      hasOwnProperty.call(params, paramName) && (href = params[paramName], "string" === typeof href && (as += "; " + paramName.toLowerCase() + '="' + ("" + href).replace(
        regexForLinkHeaderQuotedParamValueContext,
        escapeStringForLinkHeaderQuotedParamValueContextReplacer
      ) + '"'));
    return as;
  }
  var regexForHrefInLinkHeaderURLContext = /[<>\r\n]/g;
  function escapeHrefForLinkHeaderURLContextReplacer(match) {
    switch (match) {
      case "<":
        return "%3C";
      case ">":
        return "%3E";
      case "\n":
        return "%0A";
      case "\r":
        return "%0D";
      default:
        throw Error(
          "escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React"
        );
    }
  }
  var regexForLinkHeaderQuotedParamValueContext = /["';,\r\n]/g;
  function escapeStringForLinkHeaderQuotedParamValueContextReplacer(match) {
    switch (match) {
      case '"':
        return "%22";
      case "'":
        return "%27";
      case ";":
        return "%3B";
      case ",":
        return "%2C";
      case "\n":
        return "%0A";
      case "\r":
        return "%0D";
      default:
        throw Error(
          "escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React"
        );
    }
  }
  function hoistStyleQueueDependency(styleQueue) {
    this.styles.add(styleQueue);
  }
  function hoistStylesheetDependency(stylesheet) {
    this.stylesheets.add(stylesheet);
  }
  function hoistHoistables(parentState, childState) {
    childState.styles.forEach(hoistStyleQueueDependency, parentState);
    childState.stylesheets.forEach(hoistStylesheetDependency, parentState);
    childState.suspenseyImages && (parentState.suspenseyImages = true);
  }
  function hasSuspenseyContent(hoistableState) {
    return 0 < hoistableState.stylesheets.size || hoistableState.suspenseyImages;
  }
  var bind = Function.prototype.bind, supportsRequestStorage = "function" === typeof AsyncLocalStorage, requestStorage = supportsRequestStorage ? new AsyncLocalStorage() : null, REACT_CLIENT_REFERENCE = Symbol.for("react.client.reference");
  function getComponentNameFromType(type) {
    if (null == type) return null;
    if ("function" === typeof type)
      return type.$$typeof === REACT_CLIENT_REFERENCE ? null : type.displayName || type.name || null;
    if ("string" === typeof type) return type;
    switch (type) {
      case REACT_FRAGMENT_TYPE:
        return "Fragment";
      case REACT_PROFILER_TYPE:
        return "Profiler";
      case REACT_STRICT_MODE_TYPE:
        return "StrictMode";
      case REACT_SUSPENSE_TYPE:
        return "Suspense";
      case REACT_SUSPENSE_LIST_TYPE:
        return "SuspenseList";
      case REACT_ACTIVITY_TYPE:
        return "Activity";
    }
    if ("object" === typeof type)
      switch (type.$$typeof) {
        case REACT_PORTAL_TYPE:
          return "Portal";
        case REACT_CONTEXT_TYPE:
          return type.displayName || "Context";
        case REACT_CONSUMER_TYPE:
          return (type._context.displayName || "Context") + ".Consumer";
        case REACT_FORWARD_REF_TYPE:
          var innerType = type.render;
          type = type.displayName;
          type || (type = innerType.displayName || innerType.name || "", type = "" !== type ? "ForwardRef(" + type + ")" : "ForwardRef");
          return type;
        case REACT_MEMO_TYPE:
          return innerType = type.displayName || null, null !== innerType ? innerType : getComponentNameFromType(type.type) || "Memo";
        case REACT_LAZY_TYPE:
          innerType = type._payload;
          type = type._init;
          try {
            return getComponentNameFromType(type(innerType));
          } catch (x2) {
          }
      }
    return null;
  }
  var emptyContextObject = {}, currentActiveSnapshot = null;
  function popToNearestCommonAncestor(prev, next) {
    if (prev !== next) {
      prev.context._currentValue = prev.parentValue;
      prev = prev.parent;
      var parentNext = next.parent;
      if (null === prev) {
        if (null !== parentNext)
          throw Error(
            "The stacks must reach the root at the same time. This is a bug in React."
          );
      } else {
        if (null === parentNext)
          throw Error(
            "The stacks must reach the root at the same time. This is a bug in React."
          );
        popToNearestCommonAncestor(prev, parentNext);
      }
      next.context._currentValue = next.value;
    }
  }
  function popAllPrevious(prev) {
    prev.context._currentValue = prev.parentValue;
    prev = prev.parent;
    null !== prev && popAllPrevious(prev);
  }
  function pushAllNext(next) {
    var parentNext = next.parent;
    null !== parentNext && pushAllNext(parentNext);
    next.context._currentValue = next.value;
  }
  function popPreviousToCommonLevel(prev, next) {
    prev.context._currentValue = prev.parentValue;
    prev = prev.parent;
    if (null === prev)
      throw Error(
        "The depth must equal at least at zero before reaching the root. This is a bug in React."
      );
    prev.depth === next.depth ? popToNearestCommonAncestor(prev, next) : popPreviousToCommonLevel(prev, next);
  }
  function popNextToCommonLevel(prev, next) {
    var parentNext = next.parent;
    if (null === parentNext)
      throw Error(
        "The depth must equal at least at zero before reaching the root. This is a bug in React."
      );
    prev.depth === parentNext.depth ? popToNearestCommonAncestor(prev, parentNext) : popNextToCommonLevel(prev, parentNext);
    next.context._currentValue = next.value;
  }
  function switchContext(newSnapshot) {
    var prev = currentActiveSnapshot;
    prev !== newSnapshot && (null === prev ? pushAllNext(newSnapshot) : null === newSnapshot ? popAllPrevious(prev) : prev.depth === newSnapshot.depth ? popToNearestCommonAncestor(prev, newSnapshot) : prev.depth > newSnapshot.depth ? popPreviousToCommonLevel(prev, newSnapshot) : popNextToCommonLevel(prev, newSnapshot), currentActiveSnapshot = newSnapshot);
  }
  var classComponentUpdater = {
    enqueueSetState: function(inst, payload) {
      inst = inst._reactInternals;
      null !== inst.queue && inst.queue.push(payload);
    },
    enqueueReplaceState: function(inst, payload) {
      inst = inst._reactInternals;
      inst.replace = true;
      inst.queue = [payload];
    },
    enqueueForceUpdate: function() {
    }
  }, emptyTreeContext = { id: 1, overflow: "" };
  function pushTreeContext(baseContext, totalChildren, index2) {
    var baseIdWithLeadingBit = baseContext.id;
    baseContext = baseContext.overflow;
    var baseLength = 32 - clz32(baseIdWithLeadingBit) - 1;
    baseIdWithLeadingBit &= ~(1 << baseLength);
    index2 += 1;
    var length = 32 - clz32(totalChildren) + baseLength;
    if (30 < length) {
      var numberOfOverflowBits = baseLength - baseLength % 5;
      length = (baseIdWithLeadingBit & (1 << numberOfOverflowBits) - 1).toString(32);
      baseIdWithLeadingBit >>= numberOfOverflowBits;
      baseLength -= numberOfOverflowBits;
      return {
        id: 1 << 32 - clz32(totalChildren) + baseLength | index2 << baseLength | baseIdWithLeadingBit,
        overflow: length + baseContext
      };
    }
    return {
      id: 1 << length | index2 << baseLength | baseIdWithLeadingBit,
      overflow: baseContext
    };
  }
  var clz32 = Math.clz32 ? Math.clz32 : clz32Fallback, log = Math.log, LN2 = Math.LN2;
  function clz32Fallback(x2) {
    x2 >>>= 0;
    return 0 === x2 ? 32 : 31 - (log(x2) / LN2 | 0) | 0;
  }
  function noop2() {
  }
  var SuspenseException = Error(
    "Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`."
  );
  function trackUsedThenable(thenableState2, thenable, index2) {
    index2 = thenableState2[index2];
    void 0 === index2 ? thenableState2.push(thenable) : index2 !== thenable && (thenable.then(noop2, noop2), thenable = index2);
    switch (thenable.status) {
      case "fulfilled":
        return thenable.value;
      case "rejected":
        throw thenable.reason;
      default:
        "string" === typeof thenable.status ? thenable.then(noop2, noop2) : (thenableState2 = thenable, thenableState2.status = "pending", thenableState2.then(
          function(fulfilledValue) {
            if ("pending" === thenable.status) {
              var fulfilledThenable = thenable;
              fulfilledThenable.status = "fulfilled";
              fulfilledThenable.value = fulfilledValue;
            }
          },
          function(error) {
            if ("pending" === thenable.status) {
              var rejectedThenable = thenable;
              rejectedThenable.status = "rejected";
              rejectedThenable.reason = error;
            }
          }
        ));
        switch (thenable.status) {
          case "fulfilled":
            return thenable.value;
          case "rejected":
            throw thenable.reason;
        }
        suspendedThenable = thenable;
        throw SuspenseException;
    }
  }
  var suspendedThenable = null;
  function getSuspendedThenable() {
    if (null === suspendedThenable)
      throw Error(
        "Expected a suspended thenable. This is a bug in React. Please file an issue."
      );
    var thenable = suspendedThenable;
    suspendedThenable = null;
    return thenable;
  }
  function is(x2, y2) {
    return x2 === y2 && (0 !== x2 || 1 / x2 === 1 / y2) || x2 !== x2 && y2 !== y2;
  }
  var objectIs = "function" === typeof Object.is ? Object.is : is, currentlyRenderingComponent = null, currentlyRenderingTask = null, currentlyRenderingRequest = null, currentlyRenderingKeyPath = null, firstWorkInProgressHook = null, workInProgressHook = null, isReRender = false, didScheduleRenderPhaseUpdate = false, localIdCounter = 0, actionStateCounter = 0, actionStateMatchingIndex = -1, thenableIndexCounter = 0, thenableState = null, renderPhaseUpdates = null, numberOfReRenders = 0;
  function resolveCurrentlyRenderingComponent() {
    if (null === currentlyRenderingComponent)
      throw Error(
        "Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem."
      );
    return currentlyRenderingComponent;
  }
  function createHook() {
    if (0 < numberOfReRenders)
      throw Error("Rendered more hooks than during the previous render");
    return { memoizedState: null, queue: null, next: null };
  }
  function createWorkInProgressHook() {
    null === workInProgressHook ? null === firstWorkInProgressHook ? (isReRender = false, firstWorkInProgressHook = workInProgressHook = createHook()) : (isReRender = true, workInProgressHook = firstWorkInProgressHook) : null === workInProgressHook.next ? (isReRender = false, workInProgressHook = workInProgressHook.next = createHook()) : (isReRender = true, workInProgressHook = workInProgressHook.next);
    return workInProgressHook;
  }
  function getThenableStateAfterSuspending() {
    var state = thenableState;
    thenableState = null;
    return state;
  }
  function resetHooksState() {
    currentlyRenderingKeyPath = currentlyRenderingRequest = currentlyRenderingTask = currentlyRenderingComponent = null;
    didScheduleRenderPhaseUpdate = false;
    firstWorkInProgressHook = null;
    numberOfReRenders = 0;
    workInProgressHook = renderPhaseUpdates = null;
  }
  function basicStateReducer(state, action2) {
    return "function" === typeof action2 ? action2(state) : action2;
  }
  function useReducer(reducer, initialArg, init) {
    currentlyRenderingComponent = resolveCurrentlyRenderingComponent();
    workInProgressHook = createWorkInProgressHook();
    if (isReRender) {
      var queue = workInProgressHook.queue;
      initialArg = queue.dispatch;
      if (null !== renderPhaseUpdates && (init = renderPhaseUpdates.get(queue), void 0 !== init)) {
        renderPhaseUpdates.delete(queue);
        queue = workInProgressHook.memoizedState;
        do
          queue = reducer(queue, init.action), init = init.next;
        while (null !== init);
        workInProgressHook.memoizedState = queue;
        return [queue, initialArg];
      }
      return [workInProgressHook.memoizedState, initialArg];
    }
    reducer = reducer === basicStateReducer ? "function" === typeof initialArg ? initialArg() : initialArg : void 0 !== init ? init(initialArg) : initialArg;
    workInProgressHook.memoizedState = reducer;
    reducer = workInProgressHook.queue = { last: null, dispatch: null };
    reducer = reducer.dispatch = dispatchAction.bind(
      null,
      currentlyRenderingComponent,
      reducer
    );
    return [workInProgressHook.memoizedState, reducer];
  }
  function useMemo(nextCreate, deps) {
    currentlyRenderingComponent = resolveCurrentlyRenderingComponent();
    workInProgressHook = createWorkInProgressHook();
    deps = void 0 === deps ? null : deps;
    if (null !== workInProgressHook) {
      var prevState = workInProgressHook.memoizedState;
      if (null !== prevState && null !== deps) {
        var prevDeps = prevState[1];
        a: if (null === prevDeps) prevDeps = false;
        else {
          for (var i = 0; i < prevDeps.length && i < deps.length; i++)
            if (!objectIs(deps[i], prevDeps[i])) {
              prevDeps = false;
              break a;
            }
          prevDeps = true;
        }
        if (prevDeps) return prevState[0];
      }
    }
    nextCreate = nextCreate();
    workInProgressHook.memoizedState = [nextCreate, deps];
    return nextCreate;
  }
  function dispatchAction(componentIdentity, queue, action2) {
    if (25 <= numberOfReRenders)
      throw Error(
        "Too many re-renders. React limits the number of renders to prevent an infinite loop."
      );
    if (componentIdentity === currentlyRenderingComponent)
      if (didScheduleRenderPhaseUpdate = true, componentIdentity = { action: action2, next: null }, null === renderPhaseUpdates && (renderPhaseUpdates = /* @__PURE__ */ new Map()), action2 = renderPhaseUpdates.get(queue), void 0 === action2)
        renderPhaseUpdates.set(queue, componentIdentity);
      else {
        for (queue = action2; null !== queue.next; ) queue = queue.next;
        queue.next = componentIdentity;
      }
  }
  function throwOnUseEffectEventCall() {
    throw Error(
      "A function wrapped in useEffectEvent can't be called during rendering."
    );
  }
  function unsupportedStartTransition() {
    throw Error("startTransition cannot be called during server rendering.");
  }
  function unsupportedSetOptimisticState() {
    throw Error("Cannot update optimistic state while rendering.");
  }
  function useActionState(action2, initialState, permalink) {
    resolveCurrentlyRenderingComponent();
    var actionStateHookIndex = actionStateCounter++, request = currentlyRenderingRequest;
    if ("function" === typeof action2.$$FORM_ACTION) {
      var nextPostbackStateKey = null, componentKeyPath = currentlyRenderingKeyPath;
      request = request.formState;
      var isSignatureEqual = action2.$$IS_SIGNATURE_EQUAL;
      if (null !== request && "function" === typeof isSignatureEqual) {
        var postbackKey = request[1];
        isSignatureEqual.call(action2, request[2], request[3]) && (nextPostbackStateKey = void 0 !== permalink ? "p" + permalink : "k" + murmurhash3_32_gc(
          JSON.stringify([componentKeyPath, null, actionStateHookIndex]),
          0
        ), postbackKey === nextPostbackStateKey && (actionStateMatchingIndex = actionStateHookIndex, initialState = request[0]));
      }
      var boundAction = action2.bind(null, initialState);
      action2 = function(payload) {
        boundAction(payload);
      };
      "function" === typeof boundAction.$$FORM_ACTION && (action2.$$FORM_ACTION = function(prefix2) {
        prefix2 = boundAction.$$FORM_ACTION(prefix2);
        void 0 !== permalink && (permalink += "", prefix2.action = permalink);
        var formData = prefix2.data;
        formData && (null === nextPostbackStateKey && (nextPostbackStateKey = void 0 !== permalink ? "p" + permalink : "k" + murmurhash3_32_gc(
          JSON.stringify([
            componentKeyPath,
            null,
            actionStateHookIndex
          ]),
          0
        )), formData.append("$ACTION_KEY", nextPostbackStateKey));
        return prefix2;
      });
      return [initialState, action2, false];
    }
    var boundAction$22 = action2.bind(null, initialState);
    return [
      initialState,
      function(payload) {
        boundAction$22(payload);
      },
      false
    ];
  }
  function unwrapThenable(thenable) {
    var index2 = thenableIndexCounter;
    thenableIndexCounter += 1;
    null === thenableState && (thenableState = []);
    return trackUsedThenable(thenableState, thenable, index2);
  }
  function unsupportedRefresh() {
    throw Error("Cache cannot be refreshed during server rendering.");
  }
  var HooksDispatcher = {
    readContext: function(context) {
      return context._currentValue;
    },
    use: function(usable) {
      if (null !== usable && "object" === typeof usable) {
        if ("function" === typeof usable.then) return unwrapThenable(usable);
        if (usable.$$typeof === REACT_CONTEXT_TYPE) return usable._currentValue;
      }
      throw Error("An unsupported type was passed to use(): " + String(usable));
    },
    useContext: function(context) {
      resolveCurrentlyRenderingComponent();
      return context._currentValue;
    },
    useMemo,
    useReducer,
    useRef: function(initialValue) {
      currentlyRenderingComponent = resolveCurrentlyRenderingComponent();
      workInProgressHook = createWorkInProgressHook();
      var previousRef = workInProgressHook.memoizedState;
      return null === previousRef ? (initialValue = { current: initialValue }, workInProgressHook.memoizedState = initialValue) : previousRef;
    },
    useState: function(initialState) {
      return useReducer(basicStateReducer, initialState);
    },
    useInsertionEffect: noop2,
    useLayoutEffect: noop2,
    useCallback: function(callback, deps) {
      return useMemo(function() {
        return callback;
      }, deps);
    },
    useImperativeHandle: noop2,
    useEffect: noop2,
    useDebugValue: noop2,
    useDeferredValue: function(value, initialValue) {
      resolveCurrentlyRenderingComponent();
      return void 0 !== initialValue ? initialValue : value;
    },
    useTransition: function() {
      resolveCurrentlyRenderingComponent();
      return [false, unsupportedStartTransition];
    },
    useId: function() {
      var JSCompiler_inline_result = currentlyRenderingTask.treeContext;
      var overflow = JSCompiler_inline_result.overflow;
      JSCompiler_inline_result = JSCompiler_inline_result.id;
      JSCompiler_inline_result = (JSCompiler_inline_result & ~(1 << 32 - clz32(JSCompiler_inline_result) - 1)).toString(32) + overflow;
      var resumableState = currentResumableState;
      if (null === resumableState)
        throw Error(
          "Invalid hook call. Hooks can only be called inside of the body of a function component."
        );
      overflow = localIdCounter++;
      JSCompiler_inline_result = "_" + resumableState.idPrefix + "R_" + JSCompiler_inline_result;
      0 < overflow && (JSCompiler_inline_result += "H" + overflow.toString(32));
      return JSCompiler_inline_result + "_";
    },
    useSyncExternalStore: function(subscribe, getSnapshot, getServerSnapshot) {
      if (void 0 === getServerSnapshot)
        throw Error(
          "Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering."
        );
      return getServerSnapshot();
    },
    useOptimistic: function(passthrough) {
      resolveCurrentlyRenderingComponent();
      return [passthrough, unsupportedSetOptimisticState];
    },
    useActionState,
    useFormState: useActionState,
    useHostTransitionStatus: function() {
      resolveCurrentlyRenderingComponent();
      return sharedNotPendingObject;
    },
    useMemoCache: function(size) {
      for (var data = Array(size), i = 0; i < size; i++)
        data[i] = REACT_MEMO_CACHE_SENTINEL;
      return data;
    },
    useCacheRefresh: function() {
      return unsupportedRefresh;
    },
    useEffectEvent: function() {
      return throwOnUseEffectEventCall;
    }
  }, currentResumableState = null, DefaultAsyncDispatcher = {
    getCacheForType: function() {
      throw Error("Not implemented.");
    },
    cacheSignal: function() {
      throw Error("Not implemented.");
    }
  };
  function prepareStackTrace(error, structuredStackTrace) {
    error = (error.name || "Error") + ": " + (error.message || "");
    for (var i = 0; i < structuredStackTrace.length; i++)
      error += "\n    at " + structuredStackTrace[i].toString();
    return error;
  }
  var prefix, suffix;
  function describeBuiltInComponentFrame(name) {
    if (void 0 === prefix)
      try {
        throw Error();
      } catch (x2) {
        var match = x2.stack.trim().match(/\n( *(at )?)/);
        prefix = match && match[1] || "";
        suffix = -1 < x2.stack.indexOf("\n    at") ? " (<anonymous>)" : -1 < x2.stack.indexOf("@") ? "@unknown:0:0" : "";
      }
    return "\n" + prefix + name + suffix;
  }
  var reentry = false;
  function describeNativeComponentFrame(fn, construct) {
    if (!fn || reentry) return "";
    reentry = true;
    var previousPrepareStackTrace = Error.prepareStackTrace;
    Error.prepareStackTrace = prepareStackTrace;
    try {
      var RunInRootFrame = {
        DetermineComponentFrameRoot: function() {
          try {
            if (construct) {
              var Fake = function() {
                throw Error();
              };
              Object.defineProperty(Fake.prototype, "props", {
                set: function() {
                  throw Error();
                }
              });
              if ("object" === typeof Reflect && Reflect.construct) {
                try {
                  Reflect.construct(Fake, []);
                } catch (x2) {
                  var control = x2;
                }
                Reflect.construct(fn, [], Fake);
              } else {
                try {
                  Fake.call();
                } catch (x$24) {
                  control = x$24;
                }
                fn.call(Fake.prototype);
              }
            } else {
              try {
                throw Error();
              } catch (x$25) {
                control = x$25;
              }
              (Fake = fn()) && "function" === typeof Fake.catch && Fake.catch(function() {
              });
            }
          } catch (sample) {
            if (sample && control && "string" === typeof sample.stack)
              return [sample.stack, control.stack];
          }
          return [null, null];
        }
      };
      RunInRootFrame.DetermineComponentFrameRoot.displayName = "DetermineComponentFrameRoot";
      var namePropDescriptor = Object.getOwnPropertyDescriptor(
        RunInRootFrame.DetermineComponentFrameRoot,
        "name"
      );
      namePropDescriptor && namePropDescriptor.configurable && Object.defineProperty(
        RunInRootFrame.DetermineComponentFrameRoot,
        "name",
        { value: "DetermineComponentFrameRoot" }
      );
      var _RunInRootFrame$Deter = RunInRootFrame.DetermineComponentFrameRoot(), sampleStack = _RunInRootFrame$Deter[0], controlStack = _RunInRootFrame$Deter[1];
      if (sampleStack && controlStack) {
        var sampleLines = sampleStack.split("\n"), controlLines = controlStack.split("\n");
        for (namePropDescriptor = RunInRootFrame = 0; RunInRootFrame < sampleLines.length && !sampleLines[RunInRootFrame].includes("DetermineComponentFrameRoot"); )
          RunInRootFrame++;
        for (; namePropDescriptor < controlLines.length && !controlLines[namePropDescriptor].includes(
          "DetermineComponentFrameRoot"
        ); )
          namePropDescriptor++;
        if (RunInRootFrame === sampleLines.length || namePropDescriptor === controlLines.length)
          for (RunInRootFrame = sampleLines.length - 1, namePropDescriptor = controlLines.length - 1; 1 <= RunInRootFrame && 0 <= namePropDescriptor && sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]; )
            namePropDescriptor--;
        for (; 1 <= RunInRootFrame && 0 <= namePropDescriptor; RunInRootFrame--, namePropDescriptor--)
          if (sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]) {
            if (1 !== RunInRootFrame || 1 !== namePropDescriptor) {
              do
                if (RunInRootFrame--, namePropDescriptor--, 0 > namePropDescriptor || sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]) {
                  var frame2 = "\n" + sampleLines[RunInRootFrame].replace(" at new ", " at ");
                  fn.displayName && frame2.includes("<anonymous>") && (frame2 = frame2.replace("<anonymous>", fn.displayName));
                  return frame2;
                }
              while (1 <= RunInRootFrame && 0 <= namePropDescriptor);
            }
            break;
          }
      }
    } finally {
      reentry = false, Error.prepareStackTrace = previousPrepareStackTrace;
    }
    return (previousPrepareStackTrace = fn ? fn.displayName || fn.name : "") ? describeBuiltInComponentFrame(previousPrepareStackTrace) : "";
  }
  function describeComponentStackByType(type) {
    if ("string" === typeof type) return describeBuiltInComponentFrame(type);
    if ("function" === typeof type)
      return type.prototype && type.prototype.isReactComponent ? describeNativeComponentFrame(type, true) : describeNativeComponentFrame(type, false);
    if ("object" === typeof type && null !== type) {
      switch (type.$$typeof) {
        case REACT_FORWARD_REF_TYPE:
          return describeNativeComponentFrame(type.render, false);
        case REACT_MEMO_TYPE:
          return describeNativeComponentFrame(type.type, false);
        case REACT_LAZY_TYPE:
          var lazyComponent = type, payload = lazyComponent._payload;
          lazyComponent = lazyComponent._init;
          try {
            type = lazyComponent(payload);
          } catch (x2) {
            return describeBuiltInComponentFrame("Lazy");
          }
          return describeComponentStackByType(type);
      }
      if ("string" === typeof type.name) {
        a: {
          payload = type.name;
          lazyComponent = type.env;
          var location = type.debugLocation;
          if (null != location && (type = Error.prepareStackTrace, Error.prepareStackTrace = prepareStackTrace, location = location.stack, Error.prepareStackTrace = type, location.startsWith("Error: react-stack-top-frame\n") && (location = location.slice(29)), type = location.indexOf("\n"), -1 !== type && (location = location.slice(type + 1)), type = location.indexOf("react_stack_bottom_frame"), -1 !== type && (type = location.lastIndexOf("\n", type)), type = -1 !== type ? location = location.slice(0, type) : "", location = type.lastIndexOf("\n"), type = -1 === location ? type : type.slice(location + 1), -1 !== type.indexOf(payload))) {
            payload = "\n" + type;
            break a;
          }
          payload = describeBuiltInComponentFrame(
            payload + (lazyComponent ? " [" + lazyComponent + "]" : "")
          );
        }
        return payload;
      }
    }
    switch (type) {
      case REACT_SUSPENSE_LIST_TYPE:
        return describeBuiltInComponentFrame("SuspenseList");
      case REACT_SUSPENSE_TYPE:
        return describeBuiltInComponentFrame("Suspense");
    }
    return "";
  }
  function isEligibleForOutlining(request, boundary) {
    return (500 < boundary.byteSize || hasSuspenseyContent(boundary.contentState)) && null === boundary.contentPreamble;
  }
  function defaultErrorHandler(error) {
    if ("object" === typeof error && null !== error && "string" === typeof error.environmentName) {
      var JSCompiler_inline_result = error.environmentName;
      error = [error].slice(0);
      "string" === typeof error[0] ? error.splice(
        0,
        1,
        "\x1B[0m\x1B[7m%c%s\x1B[0m%c " + error[0],
        "background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px",
        " " + JSCompiler_inline_result + " ",
        ""
      ) : error.splice(
        0,
        0,
        "\x1B[0m\x1B[7m%c%s\x1B[0m%c",
        "background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px",
        " " + JSCompiler_inline_result + " ",
        ""
      );
      error.unshift(console);
      JSCompiler_inline_result = bind.apply(console.error, error);
      JSCompiler_inline_result();
    } else console.error(error);
    return null;
  }
  function RequestInstance(resumableState, renderState, rootFormatContext, progressiveChunkSize, onError, onAllReady, onShellReady, onShellError, onFatalError, onPostpone, formState) {
    var abortSet = /* @__PURE__ */ new Set();
    this.destination = null;
    this.flushScheduled = false;
    this.resumableState = resumableState;
    this.renderState = renderState;
    this.rootFormatContext = rootFormatContext;
    this.progressiveChunkSize = void 0 === progressiveChunkSize ? 12800 : progressiveChunkSize;
    this.status = 10;
    this.fatalError = null;
    this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;
    this.completedPreambleSegments = this.completedRootSegment = null;
    this.byteSize = 0;
    this.abortableTasks = abortSet;
    this.pingedTasks = [];
    this.clientRenderedBoundaries = [];
    this.completedBoundaries = [];
    this.partialBoundaries = [];
    this.trackedPostpones = null;
    this.onError = void 0 === onError ? defaultErrorHandler : onError;
    this.onPostpone = void 0 === onPostpone ? noop2 : onPostpone;
    this.onAllReady = void 0 === onAllReady ? noop2 : onAllReady;
    this.onShellReady = void 0 === onShellReady ? noop2 : onShellReady;
    this.onShellError = void 0 === onShellError ? noop2 : onShellError;
    this.onFatalError = void 0 === onFatalError ? noop2 : onFatalError;
    this.formState = void 0 === formState ? null : formState;
  }
  function createRequest(children, resumableState, renderState, rootFormatContext, progressiveChunkSize, onError, onAllReady, onShellReady, onShellError, onFatalError, onPostpone, formState) {
    resumableState = new RequestInstance(
      resumableState,
      renderState,
      rootFormatContext,
      progressiveChunkSize,
      onError,
      onAllReady,
      onShellReady,
      onShellError,
      onFatalError,
      onPostpone,
      formState
    );
    renderState = createPendingSegment(
      resumableState,
      0,
      null,
      rootFormatContext,
      false,
      false
    );
    renderState.parentFlushed = true;
    children = createRenderTask(
      resumableState,
      null,
      children,
      -1,
      null,
      renderState,
      null,
      null,
      resumableState.abortableTasks,
      null,
      rootFormatContext,
      null,
      emptyTreeContext,
      null,
      null
    );
    pushComponentStack(children);
    resumableState.pingedTasks.push(children);
    return resumableState;
  }
  function createPrerenderRequest(children, resumableState, renderState, rootFormatContext, progressiveChunkSize, onError, onAllReady, onShellReady, onShellError, onFatalError, onPostpone) {
    children = createRequest(
      children,
      resumableState,
      renderState,
      rootFormatContext,
      progressiveChunkSize,
      onError,
      onAllReady,
      onShellReady,
      onShellError,
      onFatalError,
      onPostpone,
      void 0
    );
    children.trackedPostpones = {
      workingMap: /* @__PURE__ */ new Map(),
      rootNodes: [],
      rootSlots: null
    };
    return children;
  }
  function resumeRequest(children, postponedState, renderState, onError, onAllReady, onShellReady, onShellError, onFatalError, onPostpone) {
    renderState = new RequestInstance(
      postponedState.resumableState,
      renderState,
      postponedState.rootFormatContext,
      postponedState.progressiveChunkSize,
      onError,
      onAllReady,
      onShellReady,
      onShellError,
      onFatalError,
      onPostpone,
      null
    );
    renderState.nextSegmentId = postponedState.nextSegmentId;
    if ("number" === typeof postponedState.replaySlots)
      return onError = createPendingSegment(
        renderState,
        0,
        null,
        postponedState.rootFormatContext,
        false,
        false
      ), onError.parentFlushed = true, children = createRenderTask(
        renderState,
        null,
        children,
        -1,
        null,
        onError,
        null,
        null,
        renderState.abortableTasks,
        null,
        postponedState.rootFormatContext,
        null,
        emptyTreeContext,
        null,
        null
      ), pushComponentStack(children), renderState.pingedTasks.push(children), renderState;
    children = createReplayTask(
      renderState,
      null,
      {
        nodes: postponedState.replayNodes,
        slots: postponedState.replaySlots,
        pendingTasks: 0
      },
      children,
      -1,
      null,
      null,
      renderState.abortableTasks,
      null,
      postponedState.rootFormatContext,
      null,
      emptyTreeContext,
      null,
      null
    );
    pushComponentStack(children);
    renderState.pingedTasks.push(children);
    return renderState;
  }
  function resumeAndPrerenderRequest(children, postponedState, renderState, onError, onAllReady, onShellReady, onShellError, onFatalError, onPostpone) {
    children = resumeRequest(
      children,
      postponedState,
      renderState,
      onError,
      onAllReady,
      onShellReady,
      onShellError,
      onFatalError,
      onPostpone
    );
    children.trackedPostpones = {
      workingMap: /* @__PURE__ */ new Map(),
      rootNodes: [],
      rootSlots: null
    };
    return children;
  }
  var currentRequest = null;
  function resolveRequest() {
    if (currentRequest) return currentRequest;
    if (supportsRequestStorage) {
      var store = requestStorage.getStore();
      if (store) return store;
    }
    return null;
  }
  function pingTask(request, task) {
    request.pingedTasks.push(task);
    1 === request.pingedTasks.length && (request.flushScheduled = null !== request.destination, null !== request.trackedPostpones || 10 === request.status ? scheduleMicrotask(function() {
      return performWork(request);
    }) : setTimeout(function() {
      return performWork(request);
    }, 0));
  }
  function createSuspenseBoundary(request, row, fallbackAbortableTasks, contentPreamble, fallbackPreamble) {
    fallbackAbortableTasks = {
      status: 0,
      rootSegmentID: -1,
      parentFlushed: false,
      pendingTasks: 0,
      row,
      completedSegments: [],
      byteSize: 0,
      fallbackAbortableTasks,
      errorDigest: null,
      contentState: createHoistableState(),
      fallbackState: createHoistableState(),
      contentPreamble,
      fallbackPreamble,
      trackedContentKeyPath: null,
      trackedFallbackNode: null
    };
    null !== row && (row.pendingTasks++, contentPreamble = row.boundaries, null !== contentPreamble && (request.allPendingTasks++, fallbackAbortableTasks.pendingTasks++, contentPreamble.push(fallbackAbortableTasks)), request = row.inheritedHoistables, null !== request && hoistHoistables(fallbackAbortableTasks.contentState, request));
    return fallbackAbortableTasks;
  }
  function createRenderTask(request, thenableState2, node, childIndex, blockedBoundary, blockedSegment, blockedPreamble, hoistableState, abortSet, keyPath, formatContext, context, treeContext, row, componentStack) {
    request.allPendingTasks++;
    null === blockedBoundary ? request.pendingRootTasks++ : blockedBoundary.pendingTasks++;
    null !== row && row.pendingTasks++;
    var task = {
      replay: null,
      node,
      childIndex,
      ping: function() {
        return pingTask(request, task);
      },
      blockedBoundary,
      blockedSegment,
      blockedPreamble,
      hoistableState,
      abortSet,
      keyPath,
      formatContext,
      context,
      treeContext,
      row,
      componentStack,
      thenableState: thenableState2
    };
    abortSet.add(task);
    return task;
  }
  function createReplayTask(request, thenableState2, replay, node, childIndex, blockedBoundary, hoistableState, abortSet, keyPath, formatContext, context, treeContext, row, componentStack) {
    request.allPendingTasks++;
    null === blockedBoundary ? request.pendingRootTasks++ : blockedBoundary.pendingTasks++;
    null !== row && row.pendingTasks++;
    replay.pendingTasks++;
    var task = {
      replay,
      node,
      childIndex,
      ping: function() {
        return pingTask(request, task);
      },
      blockedBoundary,
      blockedSegment: null,
      blockedPreamble: null,
      hoistableState,
      abortSet,
      keyPath,
      formatContext,
      context,
      treeContext,
      row,
      componentStack,
      thenableState: thenableState2
    };
    abortSet.add(task);
    return task;
  }
  function createPendingSegment(request, index2, boundary, parentFormatContext, lastPushedText, textEmbedded) {
    return {
      status: 0,
      parentFlushed: false,
      id: -1,
      index: index2,
      chunks: [],
      children: [],
      preambleChildren: [],
      parentFormatContext,
      boundary,
      lastPushedText,
      textEmbedded
    };
  }
  function pushComponentStack(task) {
    var node = task.node;
    if ("object" === typeof node && null !== node)
      switch (node.$$typeof) {
        case REACT_ELEMENT_TYPE:
          task.componentStack = { parent: task.componentStack, type: node.type };
      }
  }
  function replaceSuspenseComponentStackWithSuspenseFallbackStack(componentStack) {
    return null === componentStack ? null : { parent: componentStack.parent, type: "Suspense Fallback" };
  }
  function getThrownInfo(node$jscomp$0) {
    var errorInfo = {};
    node$jscomp$0 && Object.defineProperty(errorInfo, "componentStack", {
      configurable: true,
      enumerable: true,
      get: function() {
        try {
          var info = "", node = node$jscomp$0;
          do
            info += describeComponentStackByType(node.type), node = node.parent;
          while (node);
          var JSCompiler_inline_result = info;
        } catch (x2) {
          JSCompiler_inline_result = "\nError generating stack: " + x2.message + "\n" + x2.stack;
        }
        Object.defineProperty(errorInfo, "componentStack", {
          value: JSCompiler_inline_result
        });
        return JSCompiler_inline_result;
      }
    });
    return errorInfo;
  }
  function logRecoverableError(request, error, errorInfo) {
    request = request.onError;
    error = request(error, errorInfo);
    if (null == error || "string" === typeof error) return error;
  }
  function fatalError(request, error) {
    var onShellError = request.onShellError, onFatalError = request.onFatalError;
    onShellError(error);
    onFatalError(error);
    null !== request.destination ? (request.status = 14, closeWithError(request.destination, error)) : (request.status = 13, request.fatalError = error);
  }
  function finishSuspenseListRow(request, row) {
    unblockSuspenseListRow(request, row.next, row.hoistables);
  }
  function unblockSuspenseListRow(request, unblockedRow, inheritedHoistables) {
    for (; null !== unblockedRow; ) {
      null !== inheritedHoistables && (hoistHoistables(unblockedRow.hoistables, inheritedHoistables), unblockedRow.inheritedHoistables = inheritedHoistables);
      var unblockedBoundaries = unblockedRow.boundaries;
      if (null !== unblockedBoundaries) {
        unblockedRow.boundaries = null;
        for (var i = 0; i < unblockedBoundaries.length; i++) {
          var unblockedBoundary = unblockedBoundaries[i];
          null !== inheritedHoistables && hoistHoistables(unblockedBoundary.contentState, inheritedHoistables);
          finishedTask(request, unblockedBoundary, null, null);
        }
      }
      unblockedRow.pendingTasks--;
      if (0 < unblockedRow.pendingTasks) break;
      inheritedHoistables = unblockedRow.hoistables;
      unblockedRow = unblockedRow.next;
    }
  }
  function tryToResolveTogetherRow(request, togetherRow) {
    var boundaries = togetherRow.boundaries;
    if (null !== boundaries && togetherRow.pendingTasks === boundaries.length) {
      for (var allCompleteAndInlinable = true, i = 0; i < boundaries.length; i++) {
        var rowBoundary = boundaries[i];
        if (1 !== rowBoundary.pendingTasks || rowBoundary.parentFlushed || isEligibleForOutlining(request, rowBoundary)) {
          allCompleteAndInlinable = false;
          break;
        }
      }
      allCompleteAndInlinable && unblockSuspenseListRow(request, togetherRow, togetherRow.hoistables);
    }
  }
  function createSuspenseListRow(previousRow) {
    var newRow = {
      pendingTasks: 1,
      boundaries: null,
      hoistables: createHoistableState(),
      inheritedHoistables: null,
      together: false,
      next: null
    };
    null !== previousRow && 0 < previousRow.pendingTasks && (newRow.pendingTasks++, newRow.boundaries = [], previousRow.next = newRow);
    return newRow;
  }
  function renderSuspenseListRows(request, task, keyPath, rows, revealOrder) {
    var prevKeyPath = task.keyPath, prevTreeContext = task.treeContext, prevRow = task.row;
    task.keyPath = keyPath;
    keyPath = rows.length;
    var previousSuspenseListRow = null;
    if (null !== task.replay) {
      var resumeSlots = task.replay.slots;
      if (null !== resumeSlots && "object" === typeof resumeSlots)
        for (var n = 0; n < keyPath; n++) {
          var i = "backwards" !== revealOrder && "unstable_legacy-backwards" !== revealOrder ? n : keyPath - 1 - n, node = rows[i];
          task.row = previousSuspenseListRow = createSuspenseListRow(
            previousSuspenseListRow
          );
          task.treeContext = pushTreeContext(prevTreeContext, keyPath, i);
          var resumeSegmentID = resumeSlots[i];
          "number" === typeof resumeSegmentID ? (resumeNode(request, task, resumeSegmentID, node, i), delete resumeSlots[i]) : renderNode(request, task, node, i);
          0 === --previousSuspenseListRow.pendingTasks && finishSuspenseListRow(request, previousSuspenseListRow);
        }
      else
        for (resumeSlots = 0; resumeSlots < keyPath; resumeSlots++)
          n = "backwards" !== revealOrder && "unstable_legacy-backwards" !== revealOrder ? resumeSlots : keyPath - 1 - resumeSlots, i = rows[n], task.row = previousSuspenseListRow = createSuspenseListRow(previousSuspenseListRow), task.treeContext = pushTreeContext(prevTreeContext, keyPath, n), renderNode(request, task, i, n), 0 === --previousSuspenseListRow.pendingTasks && finishSuspenseListRow(request, previousSuspenseListRow);
    } else if ("backwards" !== revealOrder && "unstable_legacy-backwards" !== revealOrder)
      for (revealOrder = 0; revealOrder < keyPath; revealOrder++)
        resumeSlots = rows[revealOrder], task.row = previousSuspenseListRow = createSuspenseListRow(previousSuspenseListRow), task.treeContext = pushTreeContext(
          prevTreeContext,
          keyPath,
          revealOrder
        ), renderNode(request, task, resumeSlots, revealOrder), 0 === --previousSuspenseListRow.pendingTasks && finishSuspenseListRow(request, previousSuspenseListRow);
    else {
      revealOrder = task.blockedSegment;
      resumeSlots = revealOrder.children.length;
      n = revealOrder.chunks.length;
      for (i = keyPath - 1; 0 <= i; i--) {
        node = rows[i];
        task.row = previousSuspenseListRow = createSuspenseListRow(
          previousSuspenseListRow
        );
        task.treeContext = pushTreeContext(prevTreeContext, keyPath, i);
        resumeSegmentID = createPendingSegment(
          request,
          n,
          null,
          task.formatContext,
          0 === i ? revealOrder.lastPushedText : true,
          true
        );
        revealOrder.children.splice(resumeSlots, 0, resumeSegmentID);
        task.blockedSegment = resumeSegmentID;
        try {
          renderNode(request, task, node, i), resumeSegmentID.lastPushedText && resumeSegmentID.textEmbedded && resumeSegmentID.chunks.push(textSeparator), resumeSegmentID.status = 1, finishedSegment(request, task.blockedBoundary, resumeSegmentID), 0 === --previousSuspenseListRow.pendingTasks && finishSuspenseListRow(request, previousSuspenseListRow);
        } catch (thrownValue) {
          throw resumeSegmentID.status = 12 === request.status ? 3 : 4, thrownValue;
        }
      }
      task.blockedSegment = revealOrder;
      revealOrder.lastPushedText = false;
    }
    null !== prevRow && null !== previousSuspenseListRow && 0 < previousSuspenseListRow.pendingTasks && (prevRow.pendingTasks++, previousSuspenseListRow.next = prevRow);
    task.treeContext = prevTreeContext;
    task.row = prevRow;
    task.keyPath = prevKeyPath;
  }
  function renderWithHooks(request, task, keyPath, Component, props, secondArg) {
    var prevThenableState = task.thenableState;
    task.thenableState = null;
    currentlyRenderingComponent = {};
    currentlyRenderingTask = task;
    currentlyRenderingRequest = request;
    currentlyRenderingKeyPath = keyPath;
    actionStateCounter = localIdCounter = 0;
    actionStateMatchingIndex = -1;
    thenableIndexCounter = 0;
    thenableState = prevThenableState;
    for (request = Component(props, secondArg); didScheduleRenderPhaseUpdate; )
      didScheduleRenderPhaseUpdate = false, actionStateCounter = localIdCounter = 0, actionStateMatchingIndex = -1, thenableIndexCounter = 0, numberOfReRenders += 1, workInProgressHook = null, request = Component(props, secondArg);
    resetHooksState();
    return request;
  }
  function finishFunctionComponent(request, task, keyPath, children, hasId, actionStateCount, actionStateMatchingIndex2) {
    var didEmitActionStateMarkers = false;
    if (0 !== actionStateCount && null !== request.formState) {
      var segment = task.blockedSegment;
      if (null !== segment) {
        didEmitActionStateMarkers = true;
        segment = segment.chunks;
        for (var i = 0; i < actionStateCount; i++)
          i === actionStateMatchingIndex2 ? segment.push(formStateMarkerIsMatching) : segment.push(formStateMarkerIsNotMatching);
      }
    }
    actionStateCount = task.keyPath;
    task.keyPath = keyPath;
    hasId ? (keyPath = task.treeContext, task.treeContext = pushTreeContext(keyPath, 1, 0), renderNode(request, task, children, -1), task.treeContext = keyPath) : didEmitActionStateMarkers ? renderNode(request, task, children, -1) : renderNodeDestructive(request, task, children, -1);
    task.keyPath = actionStateCount;
  }
  function renderElement(request, task, keyPath, type, props, ref) {
    if ("function" === typeof type)
      if (type.prototype && type.prototype.isReactComponent) {
        var newProps = props;
        if ("ref" in props) {
          newProps = {};
          for (var propName in props)
            "ref" !== propName && (newProps[propName] = props[propName]);
        }
        var defaultProps = type.defaultProps;
        if (defaultProps) {
          newProps === props && (newProps = assign({}, newProps, props));
          for (var propName$44 in defaultProps)
            void 0 === newProps[propName$44] && (newProps[propName$44] = defaultProps[propName$44]);
        }
        props = newProps;
        newProps = emptyContextObject;
        defaultProps = type.contextType;
        "object" === typeof defaultProps && null !== defaultProps && (newProps = defaultProps._currentValue);
        newProps = new type(props, newProps);
        var initialState = void 0 !== newProps.state ? newProps.state : null;
        newProps.updater = classComponentUpdater;
        newProps.props = props;
        newProps.state = initialState;
        defaultProps = { queue: [], replace: false };
        newProps._reactInternals = defaultProps;
        ref = type.contextType;
        newProps.context = "object" === typeof ref && null !== ref ? ref._currentValue : emptyContextObject;
        ref = type.getDerivedStateFromProps;
        "function" === typeof ref && (ref = ref(props, initialState), initialState = null === ref || void 0 === ref ? initialState : assign({}, initialState, ref), newProps.state = initialState);
        if ("function" !== typeof type.getDerivedStateFromProps && "function" !== typeof newProps.getSnapshotBeforeUpdate && ("function" === typeof newProps.UNSAFE_componentWillMount || "function" === typeof newProps.componentWillMount))
          if (type = newProps.state, "function" === typeof newProps.componentWillMount && newProps.componentWillMount(), "function" === typeof newProps.UNSAFE_componentWillMount && newProps.UNSAFE_componentWillMount(), type !== newProps.state && classComponentUpdater.enqueueReplaceState(
            newProps,
            newProps.state,
            null
          ), null !== defaultProps.queue && 0 < defaultProps.queue.length)
            if (type = defaultProps.queue, ref = defaultProps.replace, defaultProps.queue = null, defaultProps.replace = false, ref && 1 === type.length)
              newProps.state = type[0];
            else {
              defaultProps = ref ? type[0] : newProps.state;
              initialState = true;
              for (ref = ref ? 1 : 0; ref < type.length; ref++)
                propName$44 = type[ref], propName$44 = "function" === typeof propName$44 ? propName$44.call(newProps, defaultProps, props, void 0) : propName$44, null != propName$44 && (initialState ? (initialState = false, defaultProps = assign({}, defaultProps, propName$44)) : assign(defaultProps, propName$44));
              newProps.state = defaultProps;
            }
          else defaultProps.queue = null;
        type = newProps.render();
        if (12 === request.status) throw null;
        props = task.keyPath;
        task.keyPath = keyPath;
        renderNodeDestructive(request, task, type, -1);
        task.keyPath = props;
      } else {
        type = renderWithHooks(request, task, keyPath, type, props, void 0);
        if (12 === request.status) throw null;
        finishFunctionComponent(
          request,
          task,
          keyPath,
          type,
          0 !== localIdCounter,
          actionStateCounter,
          actionStateMatchingIndex
        );
      }
    else if ("string" === typeof type)
      if (newProps = task.blockedSegment, null === newProps)
        newProps = props.children, defaultProps = task.formatContext, initialState = task.keyPath, task.formatContext = getChildFormatContext(defaultProps, type, props), task.keyPath = keyPath, renderNode(request, task, newProps, -1), task.formatContext = defaultProps, task.keyPath = initialState;
      else {
        initialState = pushStartInstance(
          newProps.chunks,
          type,
          props,
          request.resumableState,
          request.renderState,
          task.blockedPreamble,
          task.hoistableState,
          task.formatContext,
          newProps.lastPushedText
        );
        newProps.lastPushedText = false;
        defaultProps = task.formatContext;
        ref = task.keyPath;
        task.keyPath = keyPath;
        if (3 === (task.formatContext = getChildFormatContext(defaultProps, type, props)).insertionMode) {
          keyPath = createPendingSegment(
            request,
            0,
            null,
            task.formatContext,
            false,
            false
          );
          newProps.preambleChildren.push(keyPath);
          task.blockedSegment = keyPath;
          try {
            keyPath.status = 6, renderNode(request, task, initialState, -1), keyPath.lastPushedText && keyPath.textEmbedded && keyPath.chunks.push(textSeparator), keyPath.status = 1, finishedSegment(request, task.blockedBoundary, keyPath);
          } finally {
            task.blockedSegment = newProps;
          }
        } else renderNode(request, task, initialState, -1);
        task.formatContext = defaultProps;
        task.keyPath = ref;
        a: {
          task = newProps.chunks;
          request = request.resumableState;
          switch (type) {
            case "title":
            case "style":
            case "script":
            case "area":
            case "base":
            case "br":
            case "col":
            case "embed":
            case "hr":
            case "img":
            case "input":
            case "keygen":
            case "link":
            case "meta":
            case "param":
            case "source":
            case "track":
            case "wbr":
              break a;
            case "body":
              if (1 >= defaultProps.insertionMode) {
                request.hasBody = true;
                break a;
              }
              break;
            case "html":
              if (0 === defaultProps.insertionMode) {
                request.hasHtml = true;
                break a;
              }
              break;
            case "head":
              if (1 >= defaultProps.insertionMode) break a;
          }
          task.push(endChunkForTag(type));
        }
        newProps.lastPushedText = false;
      }
    else {
      switch (type) {
        case REACT_LEGACY_HIDDEN_TYPE:
        case REACT_STRICT_MODE_TYPE:
        case REACT_PROFILER_TYPE:
        case REACT_FRAGMENT_TYPE:
          type = task.keyPath;
          task.keyPath = keyPath;
          renderNodeDestructive(request, task, props.children, -1);
          task.keyPath = type;
          return;
        case REACT_ACTIVITY_TYPE:
          type = task.blockedSegment;
          null === type ? "hidden" !== props.mode && (type = task.keyPath, task.keyPath = keyPath, renderNode(request, task, props.children, -1), task.keyPath = type) : "hidden" !== props.mode && (type.chunks.push(startActivityBoundary), type.lastPushedText = false, newProps = task.keyPath, task.keyPath = keyPath, renderNode(request, task, props.children, -1), task.keyPath = newProps, type.chunks.push(endActivityBoundary), type.lastPushedText = false);
          return;
        case REACT_SUSPENSE_LIST_TYPE:
          a: {
            type = props.children;
            props = props.revealOrder;
            if ("forwards" === props || "backwards" === props || "unstable_legacy-backwards" === props) {
              if (isArrayImpl(type)) {
                renderSuspenseListRows(request, task, keyPath, type, props);
                break a;
              }
              if (newProps = getIteratorFn(type)) {
                if (newProps = newProps.call(type)) {
                  defaultProps = newProps.next();
                  if (!defaultProps.done) {
                    do
                      defaultProps = newProps.next();
                    while (!defaultProps.done);
                    renderSuspenseListRows(request, task, keyPath, type, props);
                  }
                  break a;
                }
              }
            }
            "together" === props ? (props = task.keyPath, newProps = task.row, defaultProps = task.row = createSuspenseListRow(null), defaultProps.boundaries = [], defaultProps.together = true, task.keyPath = keyPath, renderNodeDestructive(request, task, type, -1), 0 === --defaultProps.pendingTasks && finishSuspenseListRow(request, defaultProps), task.keyPath = props, task.row = newProps, null !== newProps && 0 < defaultProps.pendingTasks && (newProps.pendingTasks++, defaultProps.next = newProps)) : (props = task.keyPath, task.keyPath = keyPath, renderNodeDestructive(request, task, type, -1), task.keyPath = props);
          }
          return;
        case REACT_VIEW_TRANSITION_TYPE:
        case REACT_SCOPE_TYPE:
          throw Error("ReactDOMServer does not yet support scope components.");
        case REACT_SUSPENSE_TYPE:
          a: if (null !== task.replay) {
            type = task.keyPath;
            newProps = task.formatContext;
            defaultProps = task.row;
            task.keyPath = keyPath;
            task.formatContext = getSuspenseContentFormatContext(
              request.resumableState,
              newProps
            );
            task.row = null;
            keyPath = props.children;
            try {
              renderNode(request, task, keyPath, -1);
            } finally {
              task.keyPath = type, task.formatContext = newProps, task.row = defaultProps;
            }
          } else {
            type = task.keyPath;
            ref = task.formatContext;
            var prevRow = task.row;
            propName$44 = task.blockedBoundary;
            propName = task.blockedPreamble;
            var parentHoistableState = task.hoistableState, parentSegment = task.blockedSegment, fallback = props.fallback;
            props = props.children;
            var fallbackAbortSet = /* @__PURE__ */ new Set();
            var newBoundary = 2 > task.formatContext.insertionMode ? createSuspenseBoundary(
              request,
              task.row,
              fallbackAbortSet,
              createPreambleState(),
              createPreambleState()
            ) : createSuspenseBoundary(
              request,
              task.row,
              fallbackAbortSet,
              null,
              null
            );
            null !== request.trackedPostpones && (newBoundary.trackedContentKeyPath = keyPath);
            var boundarySegment = createPendingSegment(
              request,
              parentSegment.chunks.length,
              newBoundary,
              task.formatContext,
              false,
              false
            );
            parentSegment.children.push(boundarySegment);
            parentSegment.lastPushedText = false;
            var contentRootSegment = createPendingSegment(
              request,
              0,
              null,
              task.formatContext,
              false,
              false
            );
            contentRootSegment.parentFlushed = true;
            if (null !== request.trackedPostpones) {
              newProps = task.componentStack;
              defaultProps = [keyPath[0], "Suspense Fallback", keyPath[2]];
              initialState = [defaultProps[1], defaultProps[2], [], null];
              request.trackedPostpones.workingMap.set(defaultProps, initialState);
              newBoundary.trackedFallbackNode = initialState;
              task.blockedSegment = boundarySegment;
              task.blockedPreamble = newBoundary.fallbackPreamble;
              task.keyPath = defaultProps;
              task.formatContext = getSuspenseFallbackFormatContext(
                request.resumableState,
                ref
              );
              task.componentStack = replaceSuspenseComponentStackWithSuspenseFallbackStack(newProps);
              boundarySegment.status = 6;
              try {
                renderNode(request, task, fallback, -1), boundarySegment.lastPushedText && boundarySegment.textEmbedded && boundarySegment.chunks.push(textSeparator), boundarySegment.status = 1, finishedSegment(request, propName$44, boundarySegment);
              } catch (thrownValue) {
                throw boundarySegment.status = 12 === request.status ? 3 : 4, thrownValue;
              } finally {
                task.blockedSegment = parentSegment, task.blockedPreamble = propName, task.keyPath = type, task.formatContext = ref;
              }
              task = createRenderTask(
                request,
                null,
                props,
                -1,
                newBoundary,
                contentRootSegment,
                newBoundary.contentPreamble,
                newBoundary.contentState,
                task.abortSet,
                keyPath,
                getSuspenseContentFormatContext(
                  request.resumableState,
                  task.formatContext
                ),
                task.context,
                task.treeContext,
                null,
                newProps
              );
              pushComponentStack(task);
              request.pingedTasks.push(task);
            } else {
              task.blockedBoundary = newBoundary;
              task.blockedPreamble = newBoundary.contentPreamble;
              task.hoistableState = newBoundary.contentState;
              task.blockedSegment = contentRootSegment;
              task.keyPath = keyPath;
              task.formatContext = getSuspenseContentFormatContext(
                request.resumableState,
                ref
              );
              task.row = null;
              contentRootSegment.status = 6;
              try {
                if (renderNode(request, task, props, -1), contentRootSegment.lastPushedText && contentRootSegment.textEmbedded && contentRootSegment.chunks.push(textSeparator), contentRootSegment.status = 1, finishedSegment(request, newBoundary, contentRootSegment), queueCompletedSegment(newBoundary, contentRootSegment), 0 === newBoundary.pendingTasks && 0 === newBoundary.status) {
                  if (newBoundary.status = 1, !isEligibleForOutlining(request, newBoundary)) {
                    null !== prevRow && 0 === --prevRow.pendingTasks && finishSuspenseListRow(request, prevRow);
                    0 === request.pendingRootTasks && task.blockedPreamble && preparePreamble(request);
                    break a;
                  }
                } else
                  null !== prevRow && prevRow.together && tryToResolveTogetherRow(request, prevRow);
              } catch (thrownValue$31) {
                newBoundary.status = 4, 12 === request.status ? (contentRootSegment.status = 3, newProps = request.fatalError) : (contentRootSegment.status = 4, newProps = thrownValue$31), defaultProps = getThrownInfo(task.componentStack), initialState = logRecoverableError(
                  request,
                  newProps,
                  defaultProps
                ), newBoundary.errorDigest = initialState, untrackBoundary(request, newBoundary);
              } finally {
                task.blockedBoundary = propName$44, task.blockedPreamble = propName, task.hoistableState = parentHoistableState, task.blockedSegment = parentSegment, task.keyPath = type, task.formatContext = ref, task.row = prevRow;
              }
              task = createRenderTask(
                request,
                null,
                fallback,
                -1,
                propName$44,
                boundarySegment,
                newBoundary.fallbackPreamble,
                newBoundary.fallbackState,
                fallbackAbortSet,
                [keyPath[0], "Suspense Fallback", keyPath[2]],
                getSuspenseFallbackFormatContext(
                  request.resumableState,
                  task.formatContext
                ),
                task.context,
                task.treeContext,
                task.row,
                replaceSuspenseComponentStackWithSuspenseFallbackStack(
                  task.componentStack
                )
              );
              pushComponentStack(task);
              request.pingedTasks.push(task);
            }
          }
          return;
      }
      if ("object" === typeof type && null !== type)
        switch (type.$$typeof) {
          case REACT_FORWARD_REF_TYPE:
            if ("ref" in props)
              for (parentSegment in newProps = {}, props)
                "ref" !== parentSegment && (newProps[parentSegment] = props[parentSegment]);
            else newProps = props;
            type = renderWithHooks(
              request,
              task,
              keyPath,
              type.render,
              newProps,
              ref
            );
            finishFunctionComponent(
              request,
              task,
              keyPath,
              type,
              0 !== localIdCounter,
              actionStateCounter,
              actionStateMatchingIndex
            );
            return;
          case REACT_MEMO_TYPE:
            renderElement(request, task, keyPath, type.type, props, ref);
            return;
          case REACT_CONTEXT_TYPE:
            defaultProps = props.children;
            newProps = task.keyPath;
            props = props.value;
            initialState = type._currentValue;
            type._currentValue = props;
            ref = currentActiveSnapshot;
            currentActiveSnapshot = type = {
              parent: ref,
              depth: null === ref ? 0 : ref.depth + 1,
              context: type,
              parentValue: initialState,
              value: props
            };
            task.context = type;
            task.keyPath = keyPath;
            renderNodeDestructive(request, task, defaultProps, -1);
            request = currentActiveSnapshot;
            if (null === request)
              throw Error(
                "Tried to pop a Context at the root of the app. This is a bug in React."
              );
            request.context._currentValue = request.parentValue;
            request = currentActiveSnapshot = request.parent;
            task.context = request;
            task.keyPath = newProps;
            return;
          case REACT_CONSUMER_TYPE:
            props = props.children;
            type = props(type._context._currentValue);
            props = task.keyPath;
            task.keyPath = keyPath;
            renderNodeDestructive(request, task, type, -1);
            task.keyPath = props;
            return;
          case REACT_LAZY_TYPE:
            newProps = type._init;
            type = newProps(type._payload);
            if (12 === request.status) throw null;
            renderElement(request, task, keyPath, type, props, ref);
            return;
        }
      throw Error(
        "Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: " + ((null == type ? type : typeof type) + ".")
      );
    }
  }
  function resumeNode(request, task, segmentId, node, childIndex) {
    var prevReplay = task.replay, blockedBoundary = task.blockedBoundary, resumedSegment = createPendingSegment(
      request,
      0,
      null,
      task.formatContext,
      false,
      false
    );
    resumedSegment.id = segmentId;
    resumedSegment.parentFlushed = true;
    try {
      task.replay = null, task.blockedSegment = resumedSegment, renderNode(request, task, node, childIndex), resumedSegment.status = 1, finishedSegment(request, blockedBoundary, resumedSegment), null === blockedBoundary ? request.completedRootSegment = resumedSegment : (queueCompletedSegment(blockedBoundary, resumedSegment), blockedBoundary.parentFlushed && request.partialBoundaries.push(blockedBoundary));
    } finally {
      task.replay = prevReplay, task.blockedSegment = null;
    }
  }
  function renderNodeDestructive(request, task, node, childIndex) {
    null !== task.replay && "number" === typeof task.replay.slots ? resumeNode(request, task, task.replay.slots, node, childIndex) : (task.node = node, task.childIndex = childIndex, node = task.componentStack, pushComponentStack(task), retryNode(request, task), task.componentStack = node);
  }
  function retryNode(request, task) {
    var node = task.node, childIndex = task.childIndex;
    if (null !== node) {
      if ("object" === typeof node) {
        switch (node.$$typeof) {
          case REACT_ELEMENT_TYPE:
            var type = node.type, key = node.key, props = node.props;
            node = props.ref;
            var ref = void 0 !== node ? node : null, name = getComponentNameFromType(type), keyOrIndex = null == key ? -1 === childIndex ? 0 : childIndex : key;
            key = [task.keyPath, name, keyOrIndex];
            if (null !== task.replay)
              a: {
                var replay = task.replay;
                childIndex = replay.nodes;
                for (node = 0; node < childIndex.length; node++) {
                  var node$jscomp$0 = childIndex[node];
                  if (keyOrIndex === node$jscomp$0[1]) {
                    if (4 === node$jscomp$0.length) {
                      if (null !== name && name !== node$jscomp$0[0])
                        throw Error(
                          "Expected the resume to render <" + node$jscomp$0[0] + "> in this slot but instead it rendered <" + name + ">. The tree doesn't match so React will fallback to client rendering."
                        );
                      var childNodes = node$jscomp$0[2];
                      name = node$jscomp$0[3];
                      keyOrIndex = task.node;
                      task.replay = {
                        nodes: childNodes,
                        slots: name,
                        pendingTasks: 1
                      };
                      try {
                        renderElement(request, task, key, type, props, ref);
                        if (1 === task.replay.pendingTasks && 0 < task.replay.nodes.length)
                          throw Error(
                            "Couldn't find all resumable slots by key/index during replaying. The tree doesn't match so React will fallback to client rendering."
                          );
                        task.replay.pendingTasks--;
                      } catch (x2) {
                        if ("object" === typeof x2 && null !== x2 && (x2 === SuspenseException || "function" === typeof x2.then))
                          throw task.node === keyOrIndex ? task.replay = replay : childIndex.splice(node, 1), x2;
                        task.replay.pendingTasks--;
                        props = getThrownInfo(task.componentStack);
                        key = request;
                        request = task.blockedBoundary;
                        type = x2;
                        props = logRecoverableError(key, type, props);
                        abortRemainingReplayNodes(
                          key,
                          request,
                          childNodes,
                          name,
                          type,
                          props
                        );
                      }
                      task.replay = replay;
                    } else {
                      if (type !== REACT_SUSPENSE_TYPE)
                        throw Error(
                          "Expected the resume to render <Suspense> in this slot but instead it rendered <" + (getComponentNameFromType(type) || "Unknown") + ">. The tree doesn't match so React will fallback to client rendering."
                        );
                      b: {
                        replay = void 0;
                        type = node$jscomp$0[5];
                        ref = node$jscomp$0[2];
                        name = node$jscomp$0[3];
                        keyOrIndex = null === node$jscomp$0[4] ? [] : node$jscomp$0[4][2];
                        node$jscomp$0 = null === node$jscomp$0[4] ? null : node$jscomp$0[4][3];
                        var prevKeyPath = task.keyPath, prevContext = task.formatContext, prevRow = task.row, previousReplaySet = task.replay, parentBoundary = task.blockedBoundary, parentHoistableState = task.hoistableState, content = props.children, fallback = props.fallback, fallbackAbortSet = /* @__PURE__ */ new Set();
                        props = 2 > task.formatContext.insertionMode ? createSuspenseBoundary(
                          request,
                          task.row,
                          fallbackAbortSet,
                          createPreambleState(),
                          createPreambleState()
                        ) : createSuspenseBoundary(
                          request,
                          task.row,
                          fallbackAbortSet,
                          null,
                          null
                        );
                        props.parentFlushed = true;
                        props.rootSegmentID = type;
                        task.blockedBoundary = props;
                        task.hoistableState = props.contentState;
                        task.keyPath = key;
                        task.formatContext = getSuspenseContentFormatContext(
                          request.resumableState,
                          prevContext
                        );
                        task.row = null;
                        task.replay = {
                          nodes: ref,
                          slots: name,
                          pendingTasks: 1
                        };
                        try {
                          renderNode(request, task, content, -1);
                          if (1 === task.replay.pendingTasks && 0 < task.replay.nodes.length)
                            throw Error(
                              "Couldn't find all resumable slots by key/index during replaying. The tree doesn't match so React will fallback to client rendering."
                            );
                          task.replay.pendingTasks--;
                          if (0 === props.pendingTasks && 0 === props.status) {
                            props.status = 1;
                            request.completedBoundaries.push(props);
                            break b;
                          }
                        } catch (error) {
                          props.status = 4, childNodes = getThrownInfo(task.componentStack), replay = logRecoverableError(
                            request,
                            error,
                            childNodes
                          ), props.errorDigest = replay, task.replay.pendingTasks--, request.clientRenderedBoundaries.push(props);
                        } finally {
                          task.blockedBoundary = parentBoundary, task.hoistableState = parentHoistableState, task.replay = previousReplaySet, task.keyPath = prevKeyPath, task.formatContext = prevContext, task.row = prevRow;
                        }
                        childNodes = createReplayTask(
                          request,
                          null,
                          {
                            nodes: keyOrIndex,
                            slots: node$jscomp$0,
                            pendingTasks: 0
                          },
                          fallback,
                          -1,
                          parentBoundary,
                          props.fallbackState,
                          fallbackAbortSet,
                          [key[0], "Suspense Fallback", key[2]],
                          getSuspenseFallbackFormatContext(
                            request.resumableState,
                            task.formatContext
                          ),
                          task.context,
                          task.treeContext,
                          task.row,
                          replaceSuspenseComponentStackWithSuspenseFallbackStack(
                            task.componentStack
                          )
                        );
                        pushComponentStack(childNodes);
                        request.pingedTasks.push(childNodes);
                      }
                    }
                    childIndex.splice(node, 1);
                    break a;
                  }
                }
              }
            else renderElement(request, task, key, type, props, ref);
            return;
          case REACT_PORTAL_TYPE:
            throw Error(
              "Portals are not currently supported by the server renderer. Render them conditionally so that they only appear on the client render."
            );
          case REACT_LAZY_TYPE:
            childNodes = node._init;
            node = childNodes(node._payload);
            if (12 === request.status) throw null;
            renderNodeDestructive(request, task, node, childIndex);
            return;
        }
        if (isArrayImpl(node)) {
          renderChildrenArray(request, task, node, childIndex);
          return;
        }
        if (childNodes = getIteratorFn(node)) {
          if (childNodes = childNodes.call(node)) {
            node = childNodes.next();
            if (!node.done) {
              props = [];
              do
                props.push(node.value), node = childNodes.next();
              while (!node.done);
              renderChildrenArray(request, task, props, childIndex);
            }
            return;
          }
        }
        if ("function" === typeof node.then)
          return task.thenableState = null, renderNodeDestructive(request, task, unwrapThenable(node), childIndex);
        if (node.$$typeof === REACT_CONTEXT_TYPE)
          return renderNodeDestructive(
            request,
            task,
            node._currentValue,
            childIndex
          );
        childIndex = Object.prototype.toString.call(node);
        throw Error(
          "Objects are not valid as a React child (found: " + ("[object Object]" === childIndex ? "object with keys {" + Object.keys(node).join(", ") + "}" : childIndex) + "). If you meant to render a collection of children, use an array instead."
        );
      }
      if ("string" === typeof node)
        childIndex = task.blockedSegment, null !== childIndex && (childIndex.lastPushedText = pushTextInstance(
          childIndex.chunks,
          node,
          request.renderState,
          childIndex.lastPushedText
        ));
      else if ("number" === typeof node || "bigint" === typeof node)
        childIndex = task.blockedSegment, null !== childIndex && (childIndex.lastPushedText = pushTextInstance(
          childIndex.chunks,
          "" + node,
          request.renderState,
          childIndex.lastPushedText
        ));
    }
  }
  function renderChildrenArray(request, task, children, childIndex) {
    var prevKeyPath = task.keyPath;
    if (-1 !== childIndex && (task.keyPath = [task.keyPath, "Fragment", childIndex], null !== task.replay)) {
      for (var replay = task.replay, replayNodes = replay.nodes, j2 = 0; j2 < replayNodes.length; j2++) {
        var node = replayNodes[j2];
        if (node[1] === childIndex) {
          childIndex = node[2];
          node = node[3];
          task.replay = { nodes: childIndex, slots: node, pendingTasks: 1 };
          try {
            renderChildrenArray(request, task, children, -1);
            if (1 === task.replay.pendingTasks && 0 < task.replay.nodes.length)
              throw Error(
                "Couldn't find all resumable slots by key/index during replaying. The tree doesn't match so React will fallback to client rendering."
              );
            task.replay.pendingTasks--;
          } catch (x2) {
            if ("object" === typeof x2 && null !== x2 && (x2 === SuspenseException || "function" === typeof x2.then))
              throw x2;
            task.replay.pendingTasks--;
            children = getThrownInfo(task.componentStack);
            var boundary = task.blockedBoundary, error = x2;
            children = logRecoverableError(request, error, children);
            abortRemainingReplayNodes(
              request,
              boundary,
              childIndex,
              node,
              error,
              children
            );
          }
          task.replay = replay;
          replayNodes.splice(j2, 1);
          break;
        }
      }
      task.keyPath = prevKeyPath;
      return;
    }
    replay = task.treeContext;
    replayNodes = children.length;
    if (null !== task.replay && (j2 = task.replay.slots, null !== j2 && "object" === typeof j2)) {
      for (childIndex = 0; childIndex < replayNodes; childIndex++)
        node = children[childIndex], task.treeContext = pushTreeContext(replay, replayNodes, childIndex), boundary = j2[childIndex], "number" === typeof boundary ? (resumeNode(request, task, boundary, node, childIndex), delete j2[childIndex]) : renderNode(request, task, node, childIndex);
      task.treeContext = replay;
      task.keyPath = prevKeyPath;
      return;
    }
    for (j2 = 0; j2 < replayNodes; j2++)
      childIndex = children[j2], task.treeContext = pushTreeContext(replay, replayNodes, j2), renderNode(request, task, childIndex, j2);
    task.treeContext = replay;
    task.keyPath = prevKeyPath;
  }
  function trackPostponedBoundary(request, trackedPostpones, boundary) {
    boundary.status = 5;
    boundary.rootSegmentID = request.nextSegmentId++;
    request = boundary.trackedContentKeyPath;
    if (null === request)
      throw Error(
        "It should not be possible to postpone at the root. This is a bug in React."
      );
    var fallbackReplayNode = boundary.trackedFallbackNode, children = [], boundaryNode = trackedPostpones.workingMap.get(request);
    if (void 0 === boundaryNode)
      return boundary = [
        request[1],
        request[2],
        children,
        null,
        fallbackReplayNode,
        boundary.rootSegmentID
      ], trackedPostpones.workingMap.set(request, boundary), addToReplayParent(boundary, request[0], trackedPostpones), boundary;
    boundaryNode[4] = fallbackReplayNode;
    boundaryNode[5] = boundary.rootSegmentID;
    return boundaryNode;
  }
  function trackPostpone(request, trackedPostpones, task, segment) {
    segment.status = 5;
    var keyPath = task.keyPath, boundary = task.blockedBoundary;
    if (null === boundary)
      segment.id = request.nextSegmentId++, trackedPostpones.rootSlots = segment.id, null !== request.completedRootSegment && (request.completedRootSegment.status = 5);
    else {
      if (null !== boundary && 0 === boundary.status) {
        var boundaryNode = trackPostponedBoundary(
          request,
          trackedPostpones,
          boundary
        );
        if (boundary.trackedContentKeyPath === keyPath && -1 === task.childIndex) {
          -1 === segment.id && (segment.id = segment.parentFlushed ? boundary.rootSegmentID : request.nextSegmentId++);
          boundaryNode[3] = segment.id;
          return;
        }
      }
      -1 === segment.id && (segment.id = segment.parentFlushed && null !== boundary ? boundary.rootSegmentID : request.nextSegmentId++);
      if (-1 === task.childIndex)
        null === keyPath ? trackedPostpones.rootSlots = segment.id : (task = trackedPostpones.workingMap.get(keyPath), void 0 === task ? (task = [keyPath[1], keyPath[2], [], segment.id], addToReplayParent(task, keyPath[0], trackedPostpones)) : task[3] = segment.id);
      else {
        if (null === keyPath)
          if (request = trackedPostpones.rootSlots, null === request)
            request = trackedPostpones.rootSlots = {};
          else {
            if ("number" === typeof request)
              throw Error(
                "It should not be possible to postpone both at the root of an element as well as a slot below. This is a bug in React."
              );
          }
        else if (boundary = trackedPostpones.workingMap, boundaryNode = boundary.get(keyPath), void 0 === boundaryNode)
          request = {}, boundaryNode = [keyPath[1], keyPath[2], [], request], boundary.set(keyPath, boundaryNode), addToReplayParent(boundaryNode, keyPath[0], trackedPostpones);
        else if (request = boundaryNode[3], null === request)
          request = boundaryNode[3] = {};
        else if ("number" === typeof request)
          throw Error(
            "It should not be possible to postpone both at the root of an element as well as a slot below. This is a bug in React."
          );
        request[task.childIndex] = segment.id;
      }
    }
  }
  function untrackBoundary(request, boundary) {
    request = request.trackedPostpones;
    null !== request && (boundary = boundary.trackedContentKeyPath, null !== boundary && (boundary = request.workingMap.get(boundary), void 0 !== boundary && (boundary.length = 4, boundary[2] = [], boundary[3] = null)));
  }
  function spawnNewSuspendedReplayTask(request, task, thenableState2) {
    return createReplayTask(
      request,
      thenableState2,
      task.replay,
      task.node,
      task.childIndex,
      task.blockedBoundary,
      task.hoistableState,
      task.abortSet,
      task.keyPath,
      task.formatContext,
      task.context,
      task.treeContext,
      task.row,
      task.componentStack
    );
  }
  function spawnNewSuspendedRenderTask(request, task, thenableState2) {
    var segment = task.blockedSegment, newSegment = createPendingSegment(
      request,
      segment.chunks.length,
      null,
      task.formatContext,
      segment.lastPushedText,
      true
    );
    segment.children.push(newSegment);
    segment.lastPushedText = false;
    return createRenderTask(
      request,
      thenableState2,
      task.node,
      task.childIndex,
      task.blockedBoundary,
      newSegment,
      task.blockedPreamble,
      task.hoistableState,
      task.abortSet,
      task.keyPath,
      task.formatContext,
      task.context,
      task.treeContext,
      task.row,
      task.componentStack
    );
  }
  function renderNode(request, task, node, childIndex) {
    var previousFormatContext = task.formatContext, previousContext = task.context, previousKeyPath = task.keyPath, previousTreeContext = task.treeContext, previousComponentStack = task.componentStack, segment = task.blockedSegment;
    if (null === segment) {
      segment = task.replay;
      try {
        return renderNodeDestructive(request, task, node, childIndex);
      } catch (thrownValue) {
        if (resetHooksState(), node = thrownValue === SuspenseException ? getSuspendedThenable() : thrownValue, 12 !== request.status && "object" === typeof node && null !== node) {
          if ("function" === typeof node.then) {
            childIndex = thrownValue === SuspenseException ? getThenableStateAfterSuspending() : null;
            request = spawnNewSuspendedReplayTask(request, task, childIndex).ping;
            node.then(request, request);
            task.formatContext = previousFormatContext;
            task.context = previousContext;
            task.keyPath = previousKeyPath;
            task.treeContext = previousTreeContext;
            task.componentStack = previousComponentStack;
            task.replay = segment;
            switchContext(previousContext);
            return;
          }
          if ("Maximum call stack size exceeded" === node.message) {
            node = thrownValue === SuspenseException ? getThenableStateAfterSuspending() : null;
            node = spawnNewSuspendedReplayTask(request, task, node);
            request.pingedTasks.push(node);
            task.formatContext = previousFormatContext;
            task.context = previousContext;
            task.keyPath = previousKeyPath;
            task.treeContext = previousTreeContext;
            task.componentStack = previousComponentStack;
            task.replay = segment;
            switchContext(previousContext);
            return;
          }
        }
      }
    } else {
      var childrenLength = segment.children.length, chunkLength = segment.chunks.length;
      try {
        return renderNodeDestructive(request, task, node, childIndex);
      } catch (thrownValue$63) {
        if (resetHooksState(), segment.children.length = childrenLength, segment.chunks.length = chunkLength, node = thrownValue$63 === SuspenseException ? getSuspendedThenable() : thrownValue$63, 12 !== request.status && "object" === typeof node && null !== node) {
          if ("function" === typeof node.then) {
            segment = node;
            node = thrownValue$63 === SuspenseException ? getThenableStateAfterSuspending() : null;
            request = spawnNewSuspendedRenderTask(request, task, node).ping;
            segment.then(request, request);
            task.formatContext = previousFormatContext;
            task.context = previousContext;
            task.keyPath = previousKeyPath;
            task.treeContext = previousTreeContext;
            task.componentStack = previousComponentStack;
            switchContext(previousContext);
            return;
          }
          if ("Maximum call stack size exceeded" === node.message) {
            segment = thrownValue$63 === SuspenseException ? getThenableStateAfterSuspending() : null;
            segment = spawnNewSuspendedRenderTask(request, task, segment);
            request.pingedTasks.push(segment);
            task.formatContext = previousFormatContext;
            task.context = previousContext;
            task.keyPath = previousKeyPath;
            task.treeContext = previousTreeContext;
            task.componentStack = previousComponentStack;
            switchContext(previousContext);
            return;
          }
        }
      }
    }
    task.formatContext = previousFormatContext;
    task.context = previousContext;
    task.keyPath = previousKeyPath;
    task.treeContext = previousTreeContext;
    switchContext(previousContext);
    throw node;
  }
  function abortTaskSoft(task) {
    var boundary = task.blockedBoundary, segment = task.blockedSegment;
    null !== segment && (segment.status = 3, finishedTask(this, boundary, task.row, segment));
  }
  function abortRemainingReplayNodes(request$jscomp$0, boundary, nodes, slots, error, errorDigest$jscomp$0) {
    for (var i = 0; i < nodes.length; i++) {
      var node = nodes[i];
      if (4 === node.length)
        abortRemainingReplayNodes(
          request$jscomp$0,
          boundary,
          node[2],
          node[3],
          error,
          errorDigest$jscomp$0
        );
      else {
        node = node[5];
        var request = request$jscomp$0, errorDigest = errorDigest$jscomp$0, resumedBoundary = createSuspenseBoundary(
          request,
          null,
          /* @__PURE__ */ new Set(),
          null,
          null
        );
        resumedBoundary.parentFlushed = true;
        resumedBoundary.rootSegmentID = node;
        resumedBoundary.status = 4;
        resumedBoundary.errorDigest = errorDigest;
        resumedBoundary.parentFlushed && request.clientRenderedBoundaries.push(resumedBoundary);
      }
    }
    nodes.length = 0;
    if (null !== slots) {
      if (null === boundary)
        throw Error(
          "We should not have any resumable nodes in the shell. This is a bug in React."
        );
      4 !== boundary.status && (boundary.status = 4, boundary.errorDigest = errorDigest$jscomp$0, boundary.parentFlushed && request$jscomp$0.clientRenderedBoundaries.push(boundary));
      if ("object" === typeof slots) for (var index2 in slots) delete slots[index2];
    }
  }
  function abortTask(task, request, error) {
    var boundary = task.blockedBoundary, segment = task.blockedSegment;
    if (null !== segment) {
      if (6 === segment.status) return;
      segment.status = 3;
    }
    var errorInfo = getThrownInfo(task.componentStack);
    if (null === boundary) {
      if (13 !== request.status && 14 !== request.status) {
        boundary = task.replay;
        if (null === boundary) {
          null !== request.trackedPostpones && null !== segment ? (boundary = request.trackedPostpones, logRecoverableError(request, error, errorInfo), trackPostpone(request, boundary, task, segment), finishedTask(request, null, task.row, segment)) : (logRecoverableError(request, error, errorInfo), fatalError(request, error));
          return;
        }
        boundary.pendingTasks--;
        0 === boundary.pendingTasks && 0 < boundary.nodes.length && (segment = logRecoverableError(request, error, errorInfo), abortRemainingReplayNodes(
          request,
          null,
          boundary.nodes,
          boundary.slots,
          error,
          segment
        ));
        request.pendingRootTasks--;
        0 === request.pendingRootTasks && completeShell(request);
      }
    } else {
      var trackedPostpones$64 = request.trackedPostpones;
      if (4 !== boundary.status) {
        if (null !== trackedPostpones$64 && null !== segment)
          return logRecoverableError(request, error, errorInfo), trackPostpone(request, trackedPostpones$64, task, segment), boundary.fallbackAbortableTasks.forEach(function(fallbackTask) {
            return abortTask(fallbackTask, request, error);
          }), boundary.fallbackAbortableTasks.clear(), finishedTask(request, boundary, task.row, segment);
        boundary.status = 4;
        segment = logRecoverableError(request, error, errorInfo);
        boundary.status = 4;
        boundary.errorDigest = segment;
        untrackBoundary(request, boundary);
        boundary.parentFlushed && request.clientRenderedBoundaries.push(boundary);
      }
      boundary.pendingTasks--;
      segment = boundary.row;
      null !== segment && 0 === --segment.pendingTasks && finishSuspenseListRow(request, segment);
      boundary.fallbackAbortableTasks.forEach(function(fallbackTask) {
        return abortTask(fallbackTask, request, error);
      });
      boundary.fallbackAbortableTasks.clear();
    }
    task = task.row;
    null !== task && 0 === --task.pendingTasks && finishSuspenseListRow(request, task);
    request.allPendingTasks--;
    0 === request.allPendingTasks && completeAll(request);
  }
  function safelyEmitEarlyPreloads(request, shellComplete) {
    try {
      var renderState = request.renderState, onHeaders = renderState.onHeaders;
      if (onHeaders) {
        var headers = renderState.headers;
        if (headers) {
          renderState.headers = null;
          var linkHeader = headers.preconnects;
          headers.fontPreloads && (linkHeader && (linkHeader += ", "), linkHeader += headers.fontPreloads);
          headers.highImagePreloads && (linkHeader && (linkHeader += ", "), linkHeader += headers.highImagePreloads);
          if (!shellComplete) {
            var queueIter = renderState.styles.values(), queueStep = queueIter.next();
            b: for (; 0 < headers.remainingCapacity && !queueStep.done; queueStep = queueIter.next())
              for (var sheetIter = queueStep.value.sheets.values(), sheetStep = sheetIter.next(); 0 < headers.remainingCapacity && !sheetStep.done; sheetStep = sheetIter.next()) {
                var sheet = sheetStep.value, props = sheet.props, key = props.href, props$jscomp$0 = sheet.props, header = getPreloadAsHeader(props$jscomp$0.href, "style", {
                  crossOrigin: props$jscomp$0.crossOrigin,
                  integrity: props$jscomp$0.integrity,
                  nonce: props$jscomp$0.nonce,
                  type: props$jscomp$0.type,
                  fetchPriority: props$jscomp$0.fetchPriority,
                  referrerPolicy: props$jscomp$0.referrerPolicy,
                  media: props$jscomp$0.media
                });
                if (0 <= (headers.remainingCapacity -= header.length + 2))
                  renderState.resets.style[key] = PRELOAD_NO_CREDS, linkHeader && (linkHeader += ", "), linkHeader += header, renderState.resets.style[key] = "string" === typeof props.crossOrigin || "string" === typeof props.integrity ? [props.crossOrigin, props.integrity] : PRELOAD_NO_CREDS;
                else break b;
              }
          }
          linkHeader ? onHeaders({ Link: linkHeader }) : onHeaders({});
        }
      }
    } catch (error) {
      logRecoverableError(request, error, {});
    }
  }
  function completeShell(request) {
    null === request.trackedPostpones && safelyEmitEarlyPreloads(request, true);
    null === request.trackedPostpones && preparePreamble(request);
    request.onShellError = noop2;
    request = request.onShellReady;
    request();
  }
  function completeAll(request) {
    safelyEmitEarlyPreloads(
      request,
      null === request.trackedPostpones ? true : null === request.completedRootSegment || 5 !== request.completedRootSegment.status
    );
    preparePreamble(request);
    request = request.onAllReady;
    request();
  }
  function queueCompletedSegment(boundary, segment) {
    if (0 === segment.chunks.length && 1 === segment.children.length && null === segment.children[0].boundary && -1 === segment.children[0].id) {
      var childSegment = segment.children[0];
      childSegment.id = segment.id;
      childSegment.parentFlushed = true;
      1 !== childSegment.status && 3 !== childSegment.status && 4 !== childSegment.status || queueCompletedSegment(boundary, childSegment);
    } else boundary.completedSegments.push(segment);
  }
  function finishedSegment(request, boundary, segment) {
    if (null !== byteLengthOfChunk) {
      segment = segment.chunks;
      for (var segmentByteSize = 0, i = 0; i < segment.length; i++)
        segmentByteSize += segment[i].byteLength;
      null === boundary ? request.byteSize += segmentByteSize : boundary.byteSize += segmentByteSize;
    }
  }
  function finishedTask(request, boundary, row, segment) {
    null !== row && (0 === --row.pendingTasks ? finishSuspenseListRow(request, row) : row.together && tryToResolveTogetherRow(request, row));
    request.allPendingTasks--;
    if (null === boundary) {
      if (null !== segment && segment.parentFlushed) {
        if (null !== request.completedRootSegment)
          throw Error(
            "There can only be one root segment. This is a bug in React."
          );
        request.completedRootSegment = segment;
      }
      request.pendingRootTasks--;
      0 === request.pendingRootTasks && completeShell(request);
    } else if (boundary.pendingTasks--, 4 !== boundary.status)
      if (0 === boundary.pendingTasks)
        if (0 === boundary.status && (boundary.status = 1), null !== segment && segment.parentFlushed && (1 === segment.status || 3 === segment.status) && queueCompletedSegment(boundary, segment), boundary.parentFlushed && request.completedBoundaries.push(boundary), 1 === boundary.status)
          row = boundary.row, null !== row && hoistHoistables(row.hoistables, boundary.contentState), isEligibleForOutlining(request, boundary) || (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request), boundary.fallbackAbortableTasks.clear(), null !== row && 0 === --row.pendingTasks && finishSuspenseListRow(request, row)), 0 === request.pendingRootTasks && null === request.trackedPostpones && null !== boundary.contentPreamble && preparePreamble(request);
        else {
          if (5 === boundary.status && (boundary = boundary.row, null !== boundary)) {
            if (null !== request.trackedPostpones) {
              row = request.trackedPostpones;
              var postponedRow = boundary.next;
              if (null !== postponedRow && (segment = postponedRow.boundaries, null !== segment))
                for (postponedRow.boundaries = null, postponedRow = 0; postponedRow < segment.length; postponedRow++) {
                  var postponedBoundary = segment[postponedRow];
                  trackPostponedBoundary(request, row, postponedBoundary);
                  finishedTask(request, postponedBoundary, null, null);
                }
            }
            0 === --boundary.pendingTasks && finishSuspenseListRow(request, boundary);
          }
        }
      else
        null === segment || !segment.parentFlushed || 1 !== segment.status && 3 !== segment.status || (queueCompletedSegment(boundary, segment), 1 === boundary.completedSegments.length && boundary.parentFlushed && request.partialBoundaries.push(boundary)), boundary = boundary.row, null !== boundary && boundary.together && tryToResolveTogetherRow(request, boundary);
    0 === request.allPendingTasks && completeAll(request);
  }
  function performWork(request$jscomp$2) {
    if (14 !== request$jscomp$2.status && 13 !== request$jscomp$2.status) {
      var prevContext = currentActiveSnapshot, prevDispatcher = ReactSharedInternals.H;
      ReactSharedInternals.H = HooksDispatcher;
      var prevAsyncDispatcher = ReactSharedInternals.A;
      ReactSharedInternals.A = DefaultAsyncDispatcher;
      var prevRequest = currentRequest;
      currentRequest = request$jscomp$2;
      var prevResumableState = currentResumableState;
      currentResumableState = request$jscomp$2.resumableState;
      try {
        var pingedTasks = request$jscomp$2.pingedTasks, i;
        for (i = 0; i < pingedTasks.length; i++) {
          var task = pingedTasks[i], request = request$jscomp$2, segment = task.blockedSegment;
          if (null === segment) {
            var request$jscomp$0 = request;
            if (0 !== task.replay.pendingTasks) {
              switchContext(task.context);
              try {
                "number" === typeof task.replay.slots ? resumeNode(
                  request$jscomp$0,
                  task,
                  task.replay.slots,
                  task.node,
                  task.childIndex
                ) : retryNode(request$jscomp$0, task);
                if (1 === task.replay.pendingTasks && 0 < task.replay.nodes.length)
                  throw Error(
                    "Couldn't find all resumable slots by key/index during replaying. The tree doesn't match so React will fallback to client rendering."
                  );
                task.replay.pendingTasks--;
                task.abortSet.delete(task);
                finishedTask(
                  request$jscomp$0,
                  task.blockedBoundary,
                  task.row,
                  null
                );
              } catch (thrownValue) {
                resetHooksState();
                var x2 = thrownValue === SuspenseException ? getSuspendedThenable() : thrownValue;
                if ("object" === typeof x2 && null !== x2 && "function" === typeof x2.then) {
                  var ping = task.ping;
                  x2.then(ping, ping);
                  task.thenableState = thrownValue === SuspenseException ? getThenableStateAfterSuspending() : null;
                } else {
                  task.replay.pendingTasks--;
                  task.abortSet.delete(task);
                  var errorInfo = getThrownInfo(task.componentStack);
                  request = void 0;
                  var request$jscomp$1 = request$jscomp$0, boundary = task.blockedBoundary, error$jscomp$0 = 12 === request$jscomp$0.status ? request$jscomp$0.fatalError : x2, replayNodes = task.replay.nodes, resumeSlots = task.replay.slots;
                  request = logRecoverableError(
                    request$jscomp$1,
                    error$jscomp$0,
                    errorInfo
                  );
                  abortRemainingReplayNodes(
                    request$jscomp$1,
                    boundary,
                    replayNodes,
                    resumeSlots,
                    error$jscomp$0,
                    request
                  );
                  request$jscomp$0.pendingRootTasks--;
                  0 === request$jscomp$0.pendingRootTasks && completeShell(request$jscomp$0);
                  request$jscomp$0.allPendingTasks--;
                  0 === request$jscomp$0.allPendingTasks && completeAll(request$jscomp$0);
                }
              } finally {
              }
            }
          } else if (request$jscomp$0 = void 0, request$jscomp$1 = segment, 0 === request$jscomp$1.status) {
            request$jscomp$1.status = 6;
            switchContext(task.context);
            var childrenLength = request$jscomp$1.children.length, chunkLength = request$jscomp$1.chunks.length;
            try {
              retryNode(request, task), request$jscomp$1.lastPushedText && request$jscomp$1.textEmbedded && request$jscomp$1.chunks.push(textSeparator), task.abortSet.delete(task), request$jscomp$1.status = 1, finishedSegment(request, task.blockedBoundary, request$jscomp$1), finishedTask(
                request,
                task.blockedBoundary,
                task.row,
                request$jscomp$1
              );
            } catch (thrownValue) {
              resetHooksState();
              request$jscomp$1.children.length = childrenLength;
              request$jscomp$1.chunks.length = chunkLength;
              var x$jscomp$0 = thrownValue === SuspenseException ? getSuspendedThenable() : 12 === request.status ? request.fatalError : thrownValue;
              if (12 === request.status && null !== request.trackedPostpones) {
                var trackedPostpones = request.trackedPostpones, thrownInfo = getThrownInfo(task.componentStack);
                task.abortSet.delete(task);
                logRecoverableError(request, x$jscomp$0, thrownInfo);
                trackPostpone(request, trackedPostpones, task, request$jscomp$1);
                finishedTask(
                  request,
                  task.blockedBoundary,
                  task.row,
                  request$jscomp$1
                );
              } else if ("object" === typeof x$jscomp$0 && null !== x$jscomp$0 && "function" === typeof x$jscomp$0.then) {
                request$jscomp$1.status = 0;
                task.thenableState = thrownValue === SuspenseException ? getThenableStateAfterSuspending() : null;
                var ping$jscomp$0 = task.ping;
                x$jscomp$0.then(ping$jscomp$0, ping$jscomp$0);
              } else {
                var errorInfo$jscomp$0 = getThrownInfo(task.componentStack);
                task.abortSet.delete(task);
                request$jscomp$1.status = 4;
                var boundary$jscomp$0 = task.blockedBoundary, row = task.row;
                null !== row && 0 === --row.pendingTasks && finishSuspenseListRow(request, row);
                request.allPendingTasks--;
                request$jscomp$0 = logRecoverableError(
                  request,
                  x$jscomp$0,
                  errorInfo$jscomp$0
                );
                if (null === boundary$jscomp$0) fatalError(request, x$jscomp$0);
                else if (boundary$jscomp$0.pendingTasks--, 4 !== boundary$jscomp$0.status) {
                  boundary$jscomp$0.status = 4;
                  boundary$jscomp$0.errorDigest = request$jscomp$0;
                  untrackBoundary(request, boundary$jscomp$0);
                  var boundaryRow = boundary$jscomp$0.row;
                  null !== boundaryRow && 0 === --boundaryRow.pendingTasks && finishSuspenseListRow(request, boundaryRow);
                  boundary$jscomp$0.parentFlushed && request.clientRenderedBoundaries.push(boundary$jscomp$0);
                  0 === request.pendingRootTasks && null === request.trackedPostpones && null !== boundary$jscomp$0.contentPreamble && preparePreamble(request);
                }
                0 === request.allPendingTasks && completeAll(request);
              }
            } finally {
            }
          }
        }
        pingedTasks.splice(0, i);
        null !== request$jscomp$2.destination && flushCompletedQueues(request$jscomp$2, request$jscomp$2.destination);
      } catch (error) {
        logRecoverableError(request$jscomp$2, error, {}), fatalError(request$jscomp$2, error);
      } finally {
        currentResumableState = prevResumableState, ReactSharedInternals.H = prevDispatcher, ReactSharedInternals.A = prevAsyncDispatcher, prevDispatcher === HooksDispatcher && switchContext(prevContext), currentRequest = prevRequest;
      }
    }
  }
  function preparePreambleFromSubtree(request, segment, collectedPreambleSegments) {
    segment.preambleChildren.length && collectedPreambleSegments.push(segment.preambleChildren);
    for (var pendingPreambles = false, i = 0; i < segment.children.length; i++)
      pendingPreambles = preparePreambleFromSegment(
        request,
        segment.children[i],
        collectedPreambleSegments
      ) || pendingPreambles;
    return pendingPreambles;
  }
  function preparePreambleFromSegment(request, segment, collectedPreambleSegments) {
    var boundary = segment.boundary;
    if (null === boundary)
      return preparePreambleFromSubtree(
        request,
        segment,
        collectedPreambleSegments
      );
    var preamble = boundary.contentPreamble, fallbackPreamble = boundary.fallbackPreamble;
    if (null === preamble || null === fallbackPreamble) return false;
    switch (boundary.status) {
      case 1:
        hoistPreambleState(request.renderState, preamble);
        request.byteSize += boundary.byteSize;
        segment = boundary.completedSegments[0];
        if (!segment)
          throw Error(
            "A previously unvisited boundary must have exactly one root segment. This is a bug in React."
          );
        return preparePreambleFromSubtree(
          request,
          segment,
          collectedPreambleSegments
        );
      case 5:
        if (null !== request.trackedPostpones) return true;
      case 4:
        if (1 === segment.status)
          return hoistPreambleState(request.renderState, fallbackPreamble), preparePreambleFromSubtree(
            request,
            segment,
            collectedPreambleSegments
          );
      default:
        return true;
    }
  }
  function preparePreamble(request) {
    if (request.completedRootSegment && null === request.completedPreambleSegments) {
      var collectedPreambleSegments = [], originalRequestByteSize = request.byteSize, hasPendingPreambles = preparePreambleFromSegment(
        request,
        request.completedRootSegment,
        collectedPreambleSegments
      ), preamble = request.renderState.preamble;
      false === hasPendingPreambles || preamble.headChunks && preamble.bodyChunks ? request.completedPreambleSegments = collectedPreambleSegments : request.byteSize = originalRequestByteSize;
    }
  }
  function flushSubtree(request, destination, segment, hoistableState) {
    segment.parentFlushed = true;
    switch (segment.status) {
      case 0:
        segment.id = request.nextSegmentId++;
      case 5:
        return hoistableState = segment.id, segment.lastPushedText = false, segment.textEmbedded = false, request = request.renderState, writeChunk(destination, placeholder1), writeChunk(destination, request.placeholderPrefix), request = stringToChunk(hoistableState.toString(16)), writeChunk(destination, request), writeChunkAndReturn(destination, placeholder2);
      case 1:
        segment.status = 2;
        var r2 = true, chunks = segment.chunks, chunkIdx = 0;
        segment = segment.children;
        for (var childIdx = 0; childIdx < segment.length; childIdx++) {
          for (r2 = segment[childIdx]; chunkIdx < r2.index; chunkIdx++)
            writeChunk(destination, chunks[chunkIdx]);
          r2 = flushSegment(request, destination, r2, hoistableState);
        }
        for (; chunkIdx < chunks.length - 1; chunkIdx++)
          writeChunk(destination, chunks[chunkIdx]);
        chunkIdx < chunks.length && (r2 = writeChunkAndReturn(destination, chunks[chunkIdx]));
        return r2;
      case 3:
        return true;
      default:
        throw Error(
          "Aborted, errored or already flushed boundaries should not be flushed again. This is a bug in React."
        );
    }
  }
  var flushedByteSize = 0;
  function flushSegment(request, destination, segment, hoistableState) {
    var boundary = segment.boundary;
    if (null === boundary)
      return flushSubtree(request, destination, segment, hoistableState);
    boundary.parentFlushed = true;
    if (4 === boundary.status) {
      var row = boundary.row;
      null !== row && 0 === --row.pendingTasks && finishSuspenseListRow(request, row);
      boundary = boundary.errorDigest;
      writeChunkAndReturn(destination, startClientRenderedSuspenseBoundary);
      writeChunk(destination, clientRenderedSuspenseBoundaryError1);
      boundary && (writeChunk(destination, clientRenderedSuspenseBoundaryError1A), writeChunk(destination, stringToChunk(escapeTextForBrowser(boundary))), writeChunk(
        destination,
        clientRenderedSuspenseBoundaryErrorAttrInterstitial
      ));
      writeChunkAndReturn(destination, clientRenderedSuspenseBoundaryError2);
      flushSubtree(request, destination, segment, hoistableState);
    } else if (1 !== boundary.status)
      0 === boundary.status && (boundary.rootSegmentID = request.nextSegmentId++), 0 < boundary.completedSegments.length && request.partialBoundaries.push(boundary), writeStartPendingSuspenseBoundary(
        destination,
        request.renderState,
        boundary.rootSegmentID
      ), hoistableState && hoistHoistables(hoistableState, boundary.fallbackState), flushSubtree(request, destination, segment, hoistableState);
    else if (!flushingPartialBoundaries && isEligibleForOutlining(request, boundary) && (flushedByteSize + boundary.byteSize > request.progressiveChunkSize || hasSuspenseyContent(boundary.contentState)))
      boundary.rootSegmentID = request.nextSegmentId++, request.completedBoundaries.push(boundary), writeStartPendingSuspenseBoundary(
        destination,
        request.renderState,
        boundary.rootSegmentID
      ), flushSubtree(request, destination, segment, hoistableState);
    else {
      flushedByteSize += boundary.byteSize;
      hoistableState && hoistHoistables(hoistableState, boundary.contentState);
      segment = boundary.row;
      null !== segment && isEligibleForOutlining(request, boundary) && 0 === --segment.pendingTasks && finishSuspenseListRow(request, segment);
      writeChunkAndReturn(destination, startCompletedSuspenseBoundary);
      segment = boundary.completedSegments;
      if (1 !== segment.length)
        throw Error(
          "A previously unvisited boundary must have exactly one root segment. This is a bug in React."
        );
      flushSegment(request, destination, segment[0], hoistableState);
    }
    return writeChunkAndReturn(destination, endSuspenseBoundary);
  }
  function flushSegmentContainer(request, destination, segment, hoistableState) {
    writeStartSegment(
      destination,
      request.renderState,
      segment.parentFormatContext,
      segment.id
    );
    flushSegment(request, destination, segment, hoistableState);
    return writeEndSegment(destination, segment.parentFormatContext);
  }
  function flushCompletedBoundary(request, destination, boundary) {
    flushedByteSize = boundary.byteSize;
    for (var completedSegments = boundary.completedSegments, i = 0; i < completedSegments.length; i++)
      flushPartiallyCompletedSegment(
        request,
        destination,
        boundary,
        completedSegments[i]
      );
    completedSegments.length = 0;
    completedSegments = boundary.row;
    null !== completedSegments && isEligibleForOutlining(request, boundary) && 0 === --completedSegments.pendingTasks && finishSuspenseListRow(request, completedSegments);
    writeHoistablesForBoundary(
      destination,
      boundary.contentState,
      request.renderState
    );
    completedSegments = request.resumableState;
    request = request.renderState;
    i = boundary.rootSegmentID;
    boundary = boundary.contentState;
    var requiresStyleInsertion = request.stylesToHoist;
    request.stylesToHoist = false;
    writeChunk(destination, request.startInlineScript);
    writeChunk(destination, endOfStartTag);
    requiresStyleInsertion ? (0 === (completedSegments.instructions & 4) && (completedSegments.instructions |= 4, writeChunk(destination, clientRenderScriptFunctionOnly)), 0 === (completedSegments.instructions & 2) && (completedSegments.instructions |= 2, writeChunk(destination, completeBoundaryScriptFunctionOnly)), 0 === (completedSegments.instructions & 8) ? (completedSegments.instructions |= 8, writeChunk(destination, completeBoundaryWithStylesScript1FullPartial)) : writeChunk(destination, completeBoundaryWithStylesScript1Partial)) : (0 === (completedSegments.instructions & 2) && (completedSegments.instructions |= 2, writeChunk(destination, completeBoundaryScriptFunctionOnly)), writeChunk(destination, completeBoundaryScript1Partial));
    completedSegments = stringToChunk(i.toString(16));
    writeChunk(destination, request.boundaryPrefix);
    writeChunk(destination, completedSegments);
    writeChunk(destination, completeBoundaryScript2);
    writeChunk(destination, request.segmentPrefix);
    writeChunk(destination, completedSegments);
    requiresStyleInsertion ? (writeChunk(destination, completeBoundaryScript3a), writeStyleResourceDependenciesInJS(destination, boundary)) : writeChunk(destination, completeBoundaryScript3b);
    boundary = writeChunkAndReturn(destination, completeBoundaryScriptEnd);
    return writeBootstrap(destination, request) && boundary;
  }
  function flushPartiallyCompletedSegment(request, destination, boundary, segment) {
    if (2 === segment.status) return true;
    var hoistableState = boundary.contentState, segmentID = segment.id;
    if (-1 === segmentID) {
      if (-1 === (segment.id = boundary.rootSegmentID))
        throw Error(
          "A root segment ID must have been assigned by now. This is a bug in React."
        );
      return flushSegmentContainer(request, destination, segment, hoistableState);
    }
    if (segmentID === boundary.rootSegmentID)
      return flushSegmentContainer(request, destination, segment, hoistableState);
    flushSegmentContainer(request, destination, segment, hoistableState);
    boundary = request.resumableState;
    request = request.renderState;
    writeChunk(destination, request.startInlineScript);
    writeChunk(destination, endOfStartTag);
    0 === (boundary.instructions & 1) ? (boundary.instructions |= 1, writeChunk(destination, completeSegmentScript1Full)) : writeChunk(destination, completeSegmentScript1Partial);
    writeChunk(destination, request.segmentPrefix);
    segmentID = stringToChunk(segmentID.toString(16));
    writeChunk(destination, segmentID);
    writeChunk(destination, completeSegmentScript2);
    writeChunk(destination, request.placeholderPrefix);
    writeChunk(destination, segmentID);
    destination = writeChunkAndReturn(destination, completeSegmentScriptEnd);
    return destination;
  }
  var flushingPartialBoundaries = false;
  function flushCompletedQueues(request, destination) {
    currentView = new Uint8Array(2048);
    writtenBytes = 0;
    try {
      if (!(0 < request.pendingRootTasks)) {
        var i, completedRootSegment = request.completedRootSegment;
        if (null !== completedRootSegment) {
          if (5 === completedRootSegment.status) return;
          var completedPreambleSegments = request.completedPreambleSegments;
          if (null === completedPreambleSegments) return;
          flushedByteSize = request.byteSize;
          var resumableState = request.resumableState, renderState = request.renderState, preamble = renderState.preamble, htmlChunks = preamble.htmlChunks, headChunks = preamble.headChunks, i$jscomp$0;
          if (htmlChunks) {
            for (i$jscomp$0 = 0; i$jscomp$0 < htmlChunks.length; i$jscomp$0++)
              writeChunk(destination, htmlChunks[i$jscomp$0]);
            if (headChunks)
              for (i$jscomp$0 = 0; i$jscomp$0 < headChunks.length; i$jscomp$0++)
                writeChunk(destination, headChunks[i$jscomp$0]);
            else
              writeChunk(destination, startChunkForTag("head")), writeChunk(destination, endOfStartTag);
          } else if (headChunks)
            for (i$jscomp$0 = 0; i$jscomp$0 < headChunks.length; i$jscomp$0++)
              writeChunk(destination, headChunks[i$jscomp$0]);
          var charsetChunks = renderState.charsetChunks;
          for (i$jscomp$0 = 0; i$jscomp$0 < charsetChunks.length; i$jscomp$0++)
            writeChunk(destination, charsetChunks[i$jscomp$0]);
          charsetChunks.length = 0;
          renderState.preconnects.forEach(flushResource, destination);
          renderState.preconnects.clear();
          var viewportChunks = renderState.viewportChunks;
          for (i$jscomp$0 = 0; i$jscomp$0 < viewportChunks.length; i$jscomp$0++)
            writeChunk(destination, viewportChunks[i$jscomp$0]);
          viewportChunks.length = 0;
          renderState.fontPreloads.forEach(flushResource, destination);
          renderState.fontPreloads.clear();
          renderState.highImagePreloads.forEach(flushResource, destination);
          renderState.highImagePreloads.clear();
          currentlyFlushingRenderState = renderState;
          renderState.styles.forEach(flushStylesInPreamble, destination);
          currentlyFlushingRenderState = null;
          var importMapChunks = renderState.importMapChunks;
          for (i$jscomp$0 = 0; i$jscomp$0 < importMapChunks.length; i$jscomp$0++)
            writeChunk(destination, importMapChunks[i$jscomp$0]);
          importMapChunks.length = 0;
          renderState.bootstrapScripts.forEach(flushResource, destination);
          renderState.scripts.forEach(flushResource, destination);
          renderState.scripts.clear();
          renderState.bulkPreloads.forEach(flushResource, destination);
          renderState.bulkPreloads.clear();
          htmlChunks || headChunks || (resumableState.instructions |= 32);
          var hoistableChunks = renderState.hoistableChunks;
          for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)
            writeChunk(destination, hoistableChunks[i$jscomp$0]);
          for (resumableState = hoistableChunks.length = 0; resumableState < completedPreambleSegments.length; resumableState++) {
            var segments2 = completedPreambleSegments[resumableState];
            for (renderState = 0; renderState < segments2.length; renderState++)
              flushSegment(request, destination, segments2[renderState], null);
          }
          var preamble$jscomp$0 = request.renderState.preamble, headChunks$jscomp$0 = preamble$jscomp$0.headChunks;
          (preamble$jscomp$0.htmlChunks || headChunks$jscomp$0) && writeChunk(destination, endChunkForTag("head"));
          var bodyChunks = preamble$jscomp$0.bodyChunks;
          if (bodyChunks)
            for (completedPreambleSegments = 0; completedPreambleSegments < bodyChunks.length; completedPreambleSegments++)
              writeChunk(destination, bodyChunks[completedPreambleSegments]);
          flushSegment(request, destination, completedRootSegment, null);
          request.completedRootSegment = null;
          var renderState$jscomp$0 = request.renderState;
          if (0 !== request.allPendingTasks || 0 !== request.clientRenderedBoundaries.length || 0 !== request.completedBoundaries.length || null !== request.trackedPostpones && (0 !== request.trackedPostpones.rootNodes.length || null !== request.trackedPostpones.rootSlots)) {
            var resumableState$jscomp$0 = request.resumableState;
            if (0 === (resumableState$jscomp$0.instructions & 64)) {
              resumableState$jscomp$0.instructions |= 64;
              writeChunk(destination, renderState$jscomp$0.startInlineScript);
              if (0 === (resumableState$jscomp$0.instructions & 32)) {
                resumableState$jscomp$0.instructions |= 32;
                var shellId = "_" + resumableState$jscomp$0.idPrefix + "R_";
                writeChunk(destination, completedShellIdAttributeStart);
                writeChunk(
                  destination,
                  stringToChunk(escapeTextForBrowser(shellId))
                );
                writeChunk(destination, attributeEnd);
              }
              writeChunk(destination, endOfStartTag);
              writeChunk(destination, shellTimeRuntimeScript);
              writeChunkAndReturn(destination, endInlineScript);
            }
          }
          writeBootstrap(destination, renderState$jscomp$0);
        }
        var renderState$jscomp$1 = request.renderState;
        completedRootSegment = 0;
        var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;
        for (completedRootSegment = 0; completedRootSegment < viewportChunks$jscomp$0.length; completedRootSegment++)
          writeChunk(destination, viewportChunks$jscomp$0[completedRootSegment]);
        viewportChunks$jscomp$0.length = 0;
        renderState$jscomp$1.preconnects.forEach(flushResource, destination);
        renderState$jscomp$1.preconnects.clear();
        renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);
        renderState$jscomp$1.fontPreloads.clear();
        renderState$jscomp$1.highImagePreloads.forEach(
          flushResource,
          destination
        );
        renderState$jscomp$1.highImagePreloads.clear();
        renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);
        renderState$jscomp$1.scripts.forEach(flushResource, destination);
        renderState$jscomp$1.scripts.clear();
        renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);
        renderState$jscomp$1.bulkPreloads.clear();
        var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;
        for (completedRootSegment = 0; completedRootSegment < hoistableChunks$jscomp$0.length; completedRootSegment++)
          writeChunk(destination, hoistableChunks$jscomp$0[completedRootSegment]);
        hoistableChunks$jscomp$0.length = 0;
        var clientRenderedBoundaries = request.clientRenderedBoundaries;
        for (i = 0; i < clientRenderedBoundaries.length; i++) {
          var boundary = clientRenderedBoundaries[i];
          renderState$jscomp$1 = destination;
          var resumableState$jscomp$1 = request.resumableState, renderState$jscomp$2 = request.renderState, id2 = boundary.rootSegmentID, errorDigest = boundary.errorDigest;
          writeChunk(
            renderState$jscomp$1,
            renderState$jscomp$2.startInlineScript
          );
          writeChunk(renderState$jscomp$1, endOfStartTag);
          0 === (resumableState$jscomp$1.instructions & 4) ? (resumableState$jscomp$1.instructions |= 4, writeChunk(renderState$jscomp$1, clientRenderScript1Full)) : writeChunk(renderState$jscomp$1, clientRenderScript1Partial);
          writeChunk(renderState$jscomp$1, renderState$jscomp$2.boundaryPrefix);
          writeChunk(renderState$jscomp$1, stringToChunk(id2.toString(16)));
          writeChunk(renderState$jscomp$1, clientRenderScript1A);
          errorDigest && (writeChunk(
            renderState$jscomp$1,
            clientRenderErrorScriptArgInterstitial
          ), writeChunk(
            renderState$jscomp$1,
            stringToChunk(
              escapeJSStringsForInstructionScripts(errorDigest || "")
            )
          ));
          var JSCompiler_inline_result = writeChunkAndReturn(
            renderState$jscomp$1,
            clientRenderScriptEnd
          );
          if (!JSCompiler_inline_result) {
            request.destination = null;
            i++;
            clientRenderedBoundaries.splice(0, i);
            return;
          }
        }
        clientRenderedBoundaries.splice(0, i);
        var completedBoundaries = request.completedBoundaries;
        for (i = 0; i < completedBoundaries.length; i++)
          if (!flushCompletedBoundary(request, destination, completedBoundaries[i])) {
            request.destination = null;
            i++;
            completedBoundaries.splice(0, i);
            return;
          }
        completedBoundaries.splice(0, i);
        completeWriting(destination);
        currentView = new Uint8Array(2048);
        writtenBytes = 0;
        flushingPartialBoundaries = true;
        var partialBoundaries = request.partialBoundaries;
        for (i = 0; i < partialBoundaries.length; i++) {
          var boundary$70 = partialBoundaries[i];
          a: {
            clientRenderedBoundaries = request;
            boundary = destination;
            flushedByteSize = boundary$70.byteSize;
            var completedSegments = boundary$70.completedSegments;
            for (JSCompiler_inline_result = 0; JSCompiler_inline_result < completedSegments.length; JSCompiler_inline_result++)
              if (!flushPartiallyCompletedSegment(
                clientRenderedBoundaries,
                boundary,
                boundary$70,
                completedSegments[JSCompiler_inline_result]
              )) {
                JSCompiler_inline_result++;
                completedSegments.splice(0, JSCompiler_inline_result);
                var JSCompiler_inline_result$jscomp$0 = false;
                break a;
              }
            completedSegments.splice(0, JSCompiler_inline_result);
            var row = boundary$70.row;
            null !== row && row.together && 1 === boundary$70.pendingTasks && (1 === row.pendingTasks ? unblockSuspenseListRow(
              clientRenderedBoundaries,
              row,
              row.hoistables
            ) : row.pendingTasks--);
            JSCompiler_inline_result$jscomp$0 = writeHoistablesForBoundary(
              boundary,
              boundary$70.contentState,
              clientRenderedBoundaries.renderState
            );
          }
          if (!JSCompiler_inline_result$jscomp$0) {
            request.destination = null;
            i++;
            partialBoundaries.splice(0, i);
            return;
          }
        }
        partialBoundaries.splice(0, i);
        flushingPartialBoundaries = false;
        var largeBoundaries = request.completedBoundaries;
        for (i = 0; i < largeBoundaries.length; i++)
          if (!flushCompletedBoundary(request, destination, largeBoundaries[i])) {
            request.destination = null;
            i++;
            largeBoundaries.splice(0, i);
            return;
          }
        largeBoundaries.splice(0, i);
      }
    } finally {
      flushingPartialBoundaries = false, 0 === request.allPendingTasks && 0 === request.clientRenderedBoundaries.length && 0 === request.completedBoundaries.length ? (request.flushScheduled = false, i = request.resumableState, i.hasBody && writeChunk(destination, endChunkForTag("body")), i.hasHtml && writeChunk(destination, endChunkForTag("html")), completeWriting(destination), request.status = 14, destination.close(), request.destination = null) : completeWriting(destination);
    }
  }
  function startWork(request) {
    request.flushScheduled = null !== request.destination;
    supportsRequestStorage ? scheduleMicrotask(function() {
      return requestStorage.run(request, performWork, request);
    }) : scheduleMicrotask(function() {
      return performWork(request);
    });
    setTimeout(function() {
      10 === request.status && (request.status = 11);
      null === request.trackedPostpones && (supportsRequestStorage ? requestStorage.run(
        request,
        enqueueEarlyPreloadsAfterInitialWork,
        request
      ) : enqueueEarlyPreloadsAfterInitialWork(request));
    }, 0);
  }
  function enqueueEarlyPreloadsAfterInitialWork(request) {
    safelyEmitEarlyPreloads(request, 0 === request.pendingRootTasks);
  }
  function enqueueFlush(request) {
    false === request.flushScheduled && 0 === request.pingedTasks.length && null !== request.destination && (request.flushScheduled = true, setTimeout(function() {
      var destination = request.destination;
      destination ? flushCompletedQueues(request, destination) : request.flushScheduled = false;
    }, 0));
  }
  function startFlowing(request, destination) {
    if (13 === request.status)
      request.status = 14, closeWithError(destination, request.fatalError);
    else if (14 !== request.status && null === request.destination) {
      request.destination = destination;
      try {
        flushCompletedQueues(request, destination);
      } catch (error) {
        logRecoverableError(request, error, {}), fatalError(request, error);
      }
    }
  }
  function abort(request, reason) {
    if (11 === request.status || 10 === request.status) request.status = 12;
    try {
      var abortableTasks = request.abortableTasks;
      if (0 < abortableTasks.size) {
        var error = void 0 === reason ? Error("The render was aborted by the server without a reason.") : "object" === typeof reason && null !== reason && "function" === typeof reason.then ? Error("The render was aborted by the server with a promise.") : reason;
        request.fatalError = error;
        abortableTasks.forEach(function(task) {
          return abortTask(task, request, error);
        });
        abortableTasks.clear();
      }
      null !== request.destination && flushCompletedQueues(request, request.destination);
    } catch (error$72) {
      logRecoverableError(request, error$72, {}), fatalError(request, error$72);
    }
  }
  function addToReplayParent(node, parentKeyPath, trackedPostpones) {
    if (null === parentKeyPath) trackedPostpones.rootNodes.push(node);
    else {
      var workingMap = trackedPostpones.workingMap, parentNode = workingMap.get(parentKeyPath);
      void 0 === parentNode && (parentNode = [parentKeyPath[1], parentKeyPath[2], [], null], workingMap.set(parentKeyPath, parentNode), addToReplayParent(parentNode, parentKeyPath[0], trackedPostpones));
      parentNode[2].push(node);
    }
  }
  function getPostponedState(request) {
    var trackedPostpones = request.trackedPostpones;
    if (null === trackedPostpones || 0 === trackedPostpones.rootNodes.length && null === trackedPostpones.rootSlots)
      return request.trackedPostpones = null;
    if (null === request.completedRootSegment || 5 !== request.completedRootSegment.status && null !== request.completedPreambleSegments) {
      var nextSegmentId = request.nextSegmentId;
      var replaySlots = trackedPostpones.rootSlots;
      var resumableState = request.resumableState;
      resumableState.bootstrapScriptContent = void 0;
      resumableState.bootstrapScripts = void 0;
      resumableState.bootstrapModules = void 0;
    } else {
      nextSegmentId = 0;
      replaySlots = -1;
      resumableState = request.resumableState;
      var renderState = request.renderState;
      resumableState.nextFormID = 0;
      resumableState.hasBody = false;
      resumableState.hasHtml = false;
      resumableState.unknownResources = { font: renderState.resets.font };
      resumableState.dnsResources = renderState.resets.dns;
      resumableState.connectResources = renderState.resets.connect;
      resumableState.imageResources = renderState.resets.image;
      resumableState.styleResources = renderState.resets.style;
      resumableState.scriptResources = {};
      resumableState.moduleUnknownResources = {};
      resumableState.moduleScriptResources = {};
      resumableState.instructions = 0;
    }
    return {
      nextSegmentId,
      rootFormatContext: request.rootFormatContext,
      progressiveChunkSize: request.progressiveChunkSize,
      resumableState: request.resumableState,
      replayNodes: trackedPostpones.rootNodes,
      replaySlots
    };
  }
  function ensureCorrectIsomorphicReactVersion() {
    var isomorphicReactPackageVersion = React2.version;
    if ("19.2.0" !== isomorphicReactPackageVersion)
      throw Error(
        'Incompatible React versions: The "react" and "react-dom" packages must have the exact same version. Instead got:\n  - react:      ' + (isomorphicReactPackageVersion + "\n  - react-dom:  19.2.0\nLearn more: https://react.dev/warnings/version-mismatch")
      );
  }
  ensureCorrectIsomorphicReactVersion();
  ensureCorrectIsomorphicReactVersion();
  reactDomServer_edge_production.prerender = function(children, options) {
    return new Promise(function(resolve, reject) {
      var onHeaders = options ? options.onHeaders : void 0, onHeadersImpl;
      onHeaders && (onHeadersImpl = function(headersDescriptor) {
        onHeaders(new Headers(headersDescriptor));
      });
      var resources = createResumableState(
        options ? options.identifierPrefix : void 0,
        options ? options.unstable_externalRuntimeSrc : void 0,
        options ? options.bootstrapScriptContent : void 0,
        options ? options.bootstrapScripts : void 0,
        options ? options.bootstrapModules : void 0
      ), request = createPrerenderRequest(
        children,
        resources,
        createRenderState(
          resources,
          void 0,
          options ? options.unstable_externalRuntimeSrc : void 0,
          options ? options.importMap : void 0,
          onHeadersImpl,
          options ? options.maxHeadersLength : void 0
        ),
        createRootFormatContext(options ? options.namespaceURI : void 0),
        options ? options.progressiveChunkSize : void 0,
        options ? options.onError : void 0,
        function() {
          var stream = new ReadableStream(
            {
              type: "bytes",
              pull: function(controller) {
                startFlowing(request, controller);
              },
              cancel: function(reason) {
                request.destination = null;
                abort(request, reason);
              }
            },
            { highWaterMark: 0 }
          );
          stream = { postponed: getPostponedState(request), prelude: stream };
          resolve(stream);
        },
        void 0,
        void 0,
        reject,
        options ? options.onPostpone : void 0
      );
      if (options && options.signal) {
        var signal = options.signal;
        if (signal.aborted) abort(request, signal.reason);
        else {
          var listener = function() {
            abort(request, signal.reason);
            signal.removeEventListener("abort", listener);
          };
          signal.addEventListener("abort", listener);
        }
      }
      startWork(request);
    });
  };
  reactDomServer_edge_production.renderToReadableStream = function(children, options) {
    return new Promise(function(resolve, reject) {
      var onFatalError, onAllReady, allReady = new Promise(function(res, rej) {
        onAllReady = res;
        onFatalError = rej;
      }), onHeaders = options ? options.onHeaders : void 0, onHeadersImpl;
      onHeaders && (onHeadersImpl = function(headersDescriptor) {
        onHeaders(new Headers(headersDescriptor));
      });
      var resumableState = createResumableState(
        options ? options.identifierPrefix : void 0,
        options ? options.unstable_externalRuntimeSrc : void 0,
        options ? options.bootstrapScriptContent : void 0,
        options ? options.bootstrapScripts : void 0,
        options ? options.bootstrapModules : void 0
      ), request = createRequest(
        children,
        resumableState,
        createRenderState(
          resumableState,
          options ? options.nonce : void 0,
          options ? options.unstable_externalRuntimeSrc : void 0,
          options ? options.importMap : void 0,
          onHeadersImpl,
          options ? options.maxHeadersLength : void 0
        ),
        createRootFormatContext(options ? options.namespaceURI : void 0),
        options ? options.progressiveChunkSize : void 0,
        options ? options.onError : void 0,
        onAllReady,
        function() {
          var stream = new ReadableStream(
            {
              type: "bytes",
              pull: function(controller) {
                startFlowing(request, controller);
              },
              cancel: function(reason) {
                request.destination = null;
                abort(request, reason);
              }
            },
            { highWaterMark: 0 }
          );
          stream.allReady = allReady;
          resolve(stream);
        },
        function(error) {
          allReady.catch(function() {
          });
          reject(error);
        },
        onFatalError,
        options ? options.onPostpone : void 0,
        options ? options.formState : void 0
      );
      if (options && options.signal) {
        var signal = options.signal;
        if (signal.aborted) abort(request, signal.reason);
        else {
          var listener = function() {
            abort(request, signal.reason);
            signal.removeEventListener("abort", listener);
          };
          signal.addEventListener("abort", listener);
        }
      }
      startWork(request);
    });
  };
  reactDomServer_edge_production.resume = function(children, postponedState, options) {
    return new Promise(function(resolve, reject) {
      var onFatalError, onAllReady, allReady = new Promise(function(res, rej) {
        onAllReady = res;
        onFatalError = rej;
      }), request = resumeRequest(
        children,
        postponedState,
        createRenderState(
          postponedState.resumableState,
          options ? options.nonce : void 0,
          void 0,
          void 0,
          void 0,
          void 0
        ),
        options ? options.onError : void 0,
        onAllReady,
        function() {
          var stream = new ReadableStream(
            {
              type: "bytes",
              pull: function(controller) {
                startFlowing(request, controller);
              },
              cancel: function(reason) {
                request.destination = null;
                abort(request, reason);
              }
            },
            { highWaterMark: 0 }
          );
          stream.allReady = allReady;
          resolve(stream);
        },
        function(error) {
          allReady.catch(function() {
          });
          reject(error);
        },
        onFatalError,
        options ? options.onPostpone : void 0
      );
      if (options && options.signal) {
        var signal = options.signal;
        if (signal.aborted) abort(request, signal.reason);
        else {
          var listener = function() {
            abort(request, signal.reason);
            signal.removeEventListener("abort", listener);
          };
          signal.addEventListener("abort", listener);
        }
      }
      startWork(request);
    });
  };
  reactDomServer_edge_production.resumeAndPrerender = function(children, postponedState, options) {
    return new Promise(function(resolve, reject) {
      var request = resumeAndPrerenderRequest(
        children,
        postponedState,
        createRenderState(
          postponedState.resumableState,
          void 0,
          void 0,
          void 0,
          void 0,
          void 0
        ),
        options ? options.onError : void 0,
        function() {
          var stream = new ReadableStream(
            {
              type: "bytes",
              pull: function(controller) {
                startFlowing(request, controller);
              },
              cancel: function(reason) {
                request.destination = null;
                abort(request, reason);
              }
            },
            { highWaterMark: 0 }
          );
          stream = { postponed: getPostponedState(request), prelude: stream };
          resolve(stream);
        },
        void 0,
        void 0,
        reject,
        options ? options.onPostpone : void 0
      );
      if (options && options.signal) {
        var signal = options.signal;
        if (signal.aborted) abort(request, signal.reason);
        else {
          var listener = function() {
            abort(request, signal.reason);
            signal.removeEventListener("abort", listener);
          };
          signal.addEventListener("abort", listener);
        }
      }
      startWork(request);
    });
  };
  reactDomServer_edge_production.version = "19.2.0";
  return reactDomServer_edge_production;
}
var reactDomServerLegacy_browser_production = {};
var hasRequiredReactDomServerLegacy_browser_production;
function requireReactDomServerLegacy_browser_production() {
  if (hasRequiredReactDomServerLegacy_browser_production) return reactDomServerLegacy_browser_production;
  hasRequiredReactDomServerLegacy_browser_production = 1;
  var React2 = requireReact(), ReactDOM = requireReactDom();
  function formatProdErrorMessage(code) {
    var url = "https://react.dev/errors/" + code;
    if (1 < arguments.length) {
      url += "?args[]=" + encodeURIComponent(arguments[1]);
      for (var i = 2; i < arguments.length; i++)
        url += "&args[]=" + encodeURIComponent(arguments[i]);
    }
    return "Minified React error #" + code + "; visit " + url + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
  }
  var REACT_ELEMENT_TYPE = Symbol.for("react.transitional.element"), REACT_PORTAL_TYPE = Symbol.for("react.portal"), REACT_FRAGMENT_TYPE = Symbol.for("react.fragment"), REACT_STRICT_MODE_TYPE = Symbol.for("react.strict_mode"), REACT_PROFILER_TYPE = Symbol.for("react.profiler"), REACT_CONSUMER_TYPE = Symbol.for("react.consumer"), REACT_CONTEXT_TYPE = Symbol.for("react.context"), REACT_FORWARD_REF_TYPE = Symbol.for("react.forward_ref"), REACT_SUSPENSE_TYPE = Symbol.for("react.suspense"), REACT_SUSPENSE_LIST_TYPE = Symbol.for("react.suspense_list"), REACT_MEMO_TYPE = Symbol.for("react.memo"), REACT_LAZY_TYPE = Symbol.for("react.lazy"), REACT_SCOPE_TYPE = Symbol.for("react.scope"), REACT_ACTIVITY_TYPE = Symbol.for("react.activity"), REACT_LEGACY_HIDDEN_TYPE = Symbol.for("react.legacy_hidden"), REACT_MEMO_CACHE_SENTINEL = Symbol.for("react.memo_cache_sentinel"), REACT_VIEW_TRANSITION_TYPE = Symbol.for("react.view_transition"), MAYBE_ITERATOR_SYMBOL = Symbol.iterator;
  function getIteratorFn(maybeIterable) {
    if (null === maybeIterable || "object" !== typeof maybeIterable) return null;
    maybeIterable = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable["@@iterator"];
    return "function" === typeof maybeIterable ? maybeIterable : null;
  }
  var isArrayImpl = Array.isArray;
  function murmurhash3_32_gc(key, seed) {
    var remainder = key.length & 3;
    var bytes = key.length - remainder;
    var h1 = seed;
    for (seed = 0; seed < bytes; ) {
      var k1 = key.charCodeAt(seed) & 255 | (key.charCodeAt(++seed) & 255) << 8 | (key.charCodeAt(++seed) & 255) << 16 | (key.charCodeAt(++seed) & 255) << 24;
      ++seed;
      k1 = 3432918353 * (k1 & 65535) + ((3432918353 * (k1 >>> 16) & 65535) << 16) & 4294967295;
      k1 = k1 << 15 | k1 >>> 17;
      k1 = 461845907 * (k1 & 65535) + ((461845907 * (k1 >>> 16) & 65535) << 16) & 4294967295;
      h1 ^= k1;
      h1 = h1 << 13 | h1 >>> 19;
      h1 = 5 * (h1 & 65535) + ((5 * (h1 >>> 16) & 65535) << 16) & 4294967295;
      h1 = (h1 & 65535) + 27492 + (((h1 >>> 16) + 58964 & 65535) << 16);
    }
    k1 = 0;
    switch (remainder) {
      case 3:
        k1 ^= (key.charCodeAt(seed + 2) & 255) << 16;
      case 2:
        k1 ^= (key.charCodeAt(seed + 1) & 255) << 8;
      case 1:
        k1 ^= key.charCodeAt(seed) & 255, k1 = 3432918353 * (k1 & 65535) + ((3432918353 * (k1 >>> 16) & 65535) << 16) & 4294967295, k1 = k1 << 15 | k1 >>> 17, h1 ^= 461845907 * (k1 & 65535) + ((461845907 * (k1 >>> 16) & 65535) << 16) & 4294967295;
    }
    h1 ^= key.length;
    h1 ^= h1 >>> 16;
    h1 = 2246822507 * (h1 & 65535) + ((2246822507 * (h1 >>> 16) & 65535) << 16) & 4294967295;
    h1 ^= h1 >>> 13;
    h1 = 3266489909 * (h1 & 65535) + ((3266489909 * (h1 >>> 16) & 65535) << 16) & 4294967295;
    return (h1 ^ h1 >>> 16) >>> 0;
  }
  var assign = Object.assign, hasOwnProperty = Object.prototype.hasOwnProperty, VALID_ATTRIBUTE_NAME_REGEX = RegExp(
    "^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"
  ), illegalAttributeNameCache = {}, validatedAttributeNameCache = {};
  function isAttributeNameSafe(attributeName) {
    if (hasOwnProperty.call(validatedAttributeNameCache, attributeName))
      return true;
    if (hasOwnProperty.call(illegalAttributeNameCache, attributeName)) return false;
    if (VALID_ATTRIBUTE_NAME_REGEX.test(attributeName))
      return validatedAttributeNameCache[attributeName] = true;
    illegalAttributeNameCache[attributeName] = true;
    return false;
  }
  var unitlessNumbers = new Set(
    "animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(
      " "
    )
  ), aliases = /* @__PURE__ */ new Map([
    ["acceptCharset", "accept-charset"],
    ["htmlFor", "for"],
    ["httpEquiv", "http-equiv"],
    ["crossOrigin", "crossorigin"],
    ["accentHeight", "accent-height"],
    ["alignmentBaseline", "alignment-baseline"],
    ["arabicForm", "arabic-form"],
    ["baselineShift", "baseline-shift"],
    ["capHeight", "cap-height"],
    ["clipPath", "clip-path"],
    ["clipRule", "clip-rule"],
    ["colorInterpolation", "color-interpolation"],
    ["colorInterpolationFilters", "color-interpolation-filters"],
    ["colorProfile", "color-profile"],
    ["colorRendering", "color-rendering"],
    ["dominantBaseline", "dominant-baseline"],
    ["enableBackground", "enable-background"],
    ["fillOpacity", "fill-opacity"],
    ["fillRule", "fill-rule"],
    ["floodColor", "flood-color"],
    ["floodOpacity", "flood-opacity"],
    ["fontFamily", "font-family"],
    ["fontSize", "font-size"],
    ["fontSizeAdjust", "font-size-adjust"],
    ["fontStretch", "font-stretch"],
    ["fontStyle", "font-style"],
    ["fontVariant", "font-variant"],
    ["fontWeight", "font-weight"],
    ["glyphName", "glyph-name"],
    ["glyphOrientationHorizontal", "glyph-orientation-horizontal"],
    ["glyphOrientationVertical", "glyph-orientation-vertical"],
    ["horizAdvX", "horiz-adv-x"],
    ["horizOriginX", "horiz-origin-x"],
    ["imageRendering", "image-rendering"],
    ["letterSpacing", "letter-spacing"],
    ["lightingColor", "lighting-color"],
    ["markerEnd", "marker-end"],
    ["markerMid", "marker-mid"],
    ["markerStart", "marker-start"],
    ["overlinePosition", "overline-position"],
    ["overlineThickness", "overline-thickness"],
    ["paintOrder", "paint-order"],
    ["panose-1", "panose-1"],
    ["pointerEvents", "pointer-events"],
    ["renderingIntent", "rendering-intent"],
    ["shapeRendering", "shape-rendering"],
    ["stopColor", "stop-color"],
    ["stopOpacity", "stop-opacity"],
    ["strikethroughPosition", "strikethrough-position"],
    ["strikethroughThickness", "strikethrough-thickness"],
    ["strokeDasharray", "stroke-dasharray"],
    ["strokeDashoffset", "stroke-dashoffset"],
    ["strokeLinecap", "stroke-linecap"],
    ["strokeLinejoin", "stroke-linejoin"],
    ["strokeMiterlimit", "stroke-miterlimit"],
    ["strokeOpacity", "stroke-opacity"],
    ["strokeWidth", "stroke-width"],
    ["textAnchor", "text-anchor"],
    ["textDecoration", "text-decoration"],
    ["textRendering", "text-rendering"],
    ["transformOrigin", "transform-origin"],
    ["underlinePosition", "underline-position"],
    ["underlineThickness", "underline-thickness"],
    ["unicodeBidi", "unicode-bidi"],
    ["unicodeRange", "unicode-range"],
    ["unitsPerEm", "units-per-em"],
    ["vAlphabetic", "v-alphabetic"],
    ["vHanging", "v-hanging"],
    ["vIdeographic", "v-ideographic"],
    ["vMathematical", "v-mathematical"],
    ["vectorEffect", "vector-effect"],
    ["vertAdvY", "vert-adv-y"],
    ["vertOriginX", "vert-origin-x"],
    ["vertOriginY", "vert-origin-y"],
    ["wordSpacing", "word-spacing"],
    ["writingMode", "writing-mode"],
    ["xmlnsXlink", "xmlns:xlink"],
    ["xHeight", "x-height"]
  ]), matchHtmlRegExp = /["'&<>]/;
  function escapeTextForBrowser(text) {
    if ("boolean" === typeof text || "number" === typeof text || "bigint" === typeof text)
      return "" + text;
    text = "" + text;
    var match = matchHtmlRegExp.exec(text);
    if (match) {
      var html = "", index2, lastIndex = 0;
      for (index2 = match.index; index2 < text.length; index2++) {
        switch (text.charCodeAt(index2)) {
          case 34:
            match = "&quot;";
            break;
          case 38:
            match = "&amp;";
            break;
          case 39:
            match = "&#x27;";
            break;
          case 60:
            match = "&lt;";
            break;
          case 62:
            match = "&gt;";
            break;
          default:
            continue;
        }
        lastIndex !== index2 && (html += text.slice(lastIndex, index2));
        lastIndex = index2 + 1;
        html += match;
      }
      text = lastIndex !== index2 ? html + text.slice(lastIndex, index2) : html;
    }
    return text;
  }
  var uppercasePattern = /([A-Z])/g, msPattern = /^ms-/, isJavaScriptProtocol = /^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;
  function sanitizeURL(url) {
    return isJavaScriptProtocol.test("" + url) ? "javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')" : url;
  }
  var ReactSharedInternals = React2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, ReactDOMSharedInternals = ReactDOM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, sharedNotPendingObject = {
    pending: false,
    data: null,
    method: null,
    action: null
  }, previousDispatcher = ReactDOMSharedInternals.d;
  ReactDOMSharedInternals.d = {
    f: previousDispatcher.f,
    r: previousDispatcher.r,
    D: prefetchDNS,
    C: preconnect,
    L: preload,
    m: preloadModule,
    X: preinitScript,
    S: preinitStyle,
    M: preinitModuleScript
  };
  var PRELOAD_NO_CREDS = [], currentlyFlushingRenderState = null, scriptRegex = /(<\/|<)(s)(cript)/gi;
  function scriptReplacer(match, prefix2, s, suffix2) {
    return "" + prefix2 + ("s" === s ? "\\u0073" : "\\u0053") + suffix2;
  }
  function createResumableState(identifierPrefix, externalRuntimeConfig, bootstrapScriptContent, bootstrapScripts, bootstrapModules) {
    return {
      idPrefix: void 0 === identifierPrefix ? "" : identifierPrefix,
      nextFormID: 0,
      streamingFormat: 0,
      bootstrapScriptContent,
      bootstrapScripts,
      bootstrapModules,
      instructions: 0,
      hasBody: false,
      hasHtml: false,
      unknownResources: {},
      dnsResources: {},
      connectResources: { default: {}, anonymous: {}, credentials: {} },
      imageResources: {},
      styleResources: {},
      scriptResources: {},
      moduleUnknownResources: {},
      moduleScriptResources: {}
    };
  }
  function createFormatContext(insertionMode, selectedValue, tagScope, viewTransition) {
    return {
      insertionMode,
      selectedValue,
      tagScope,
      viewTransition
    };
  }
  function getChildFormatContext(parentContext, type, props) {
    var subtreeScope = parentContext.tagScope & -25;
    switch (type) {
      case "noscript":
        return createFormatContext(2, null, subtreeScope | 1, null);
      case "select":
        return createFormatContext(
          2,
          null != props.value ? props.value : props.defaultValue,
          subtreeScope,
          null
        );
      case "svg":
        return createFormatContext(4, null, subtreeScope, null);
      case "picture":
        return createFormatContext(2, null, subtreeScope | 2, null);
      case "math":
        return createFormatContext(5, null, subtreeScope, null);
      case "foreignObject":
        return createFormatContext(2, null, subtreeScope, null);
      case "table":
        return createFormatContext(6, null, subtreeScope, null);
      case "thead":
      case "tbody":
      case "tfoot":
        return createFormatContext(7, null, subtreeScope, null);
      case "colgroup":
        return createFormatContext(9, null, subtreeScope, null);
      case "tr":
        return createFormatContext(8, null, subtreeScope, null);
      case "head":
        if (2 > parentContext.insertionMode)
          return createFormatContext(3, null, subtreeScope, null);
        break;
      case "html":
        if (0 === parentContext.insertionMode)
          return createFormatContext(1, null, subtreeScope, null);
    }
    return 6 <= parentContext.insertionMode || 2 > parentContext.insertionMode ? createFormatContext(2, null, subtreeScope, null) : parentContext.tagScope !== subtreeScope ? createFormatContext(
      parentContext.insertionMode,
      parentContext.selectedValue,
      subtreeScope,
      null
    ) : parentContext;
  }
  function getSuspenseViewTransition(parentViewTransition) {
    return null === parentViewTransition ? null : {
      update: parentViewTransition.update,
      enter: "none",
      exit: "none",
      share: parentViewTransition.update,
      name: parentViewTransition.autoName,
      autoName: parentViewTransition.autoName,
      nameIdx: 0
    };
  }
  function getSuspenseFallbackFormatContext(resumableState, parentContext) {
    parentContext.tagScope & 32 && (resumableState.instructions |= 128);
    return createFormatContext(
      parentContext.insertionMode,
      parentContext.selectedValue,
      parentContext.tagScope | 12,
      getSuspenseViewTransition(parentContext.viewTransition)
    );
  }
  function getSuspenseContentFormatContext(resumableState, parentContext) {
    resumableState = getSuspenseViewTransition(parentContext.viewTransition);
    var subtreeScope = parentContext.tagScope | 16;
    null !== resumableState && "none" !== resumableState.share && (subtreeScope |= 64);
    return createFormatContext(
      parentContext.insertionMode,
      parentContext.selectedValue,
      subtreeScope,
      resumableState
    );
  }
  var styleNameCache = /* @__PURE__ */ new Map();
  function pushStyleAttribute(target, style) {
    if ("object" !== typeof style) throw Error(formatProdErrorMessage(62));
    var isFirst = true, styleName;
    for (styleName in style)
      if (hasOwnProperty.call(style, styleName)) {
        var styleValue = style[styleName];
        if (null != styleValue && "boolean" !== typeof styleValue && "" !== styleValue) {
          if (0 === styleName.indexOf("--")) {
            var nameChunk = escapeTextForBrowser(styleName);
            styleValue = escapeTextForBrowser(("" + styleValue).trim());
          } else
            nameChunk = styleNameCache.get(styleName), void 0 === nameChunk && (nameChunk = escapeTextForBrowser(
              styleName.replace(uppercasePattern, "-$1").toLowerCase().replace(msPattern, "-ms-")
            ), styleNameCache.set(styleName, nameChunk)), styleValue = "number" === typeof styleValue ? 0 === styleValue || unitlessNumbers.has(styleName) ? "" + styleValue : styleValue + "px" : escapeTextForBrowser(("" + styleValue).trim());
          isFirst ? (isFirst = false, target.push(' style="', nameChunk, ":", styleValue)) : target.push(";", nameChunk, ":", styleValue);
        }
      }
    isFirst || target.push('"');
  }
  function pushBooleanAttribute(target, name, value) {
    value && "function" !== typeof value && "symbol" !== typeof value && target.push(" ", name, '=""');
  }
  function pushStringAttribute(target, name, value) {
    "function" !== typeof value && "symbol" !== typeof value && "boolean" !== typeof value && target.push(" ", name, '="', escapeTextForBrowser(value), '"');
  }
  var actionJavaScriptURL = escapeTextForBrowser(
    "javascript:throw new Error('React form unexpectedly submitted.')"
  );
  function pushAdditionalFormField(value, key) {
    this.push('<input type="hidden"');
    validateAdditionalFormField(value);
    pushStringAttribute(this, "name", key);
    pushStringAttribute(this, "value", value);
    this.push("/>");
  }
  function validateAdditionalFormField(value) {
    if ("string" !== typeof value) throw Error(formatProdErrorMessage(480));
  }
  function getCustomFormFields(resumableState, formAction) {
    if ("function" === typeof formAction.$$FORM_ACTION) {
      var id2 = resumableState.nextFormID++;
      resumableState = resumableState.idPrefix + id2;
      try {
        var customFields = formAction.$$FORM_ACTION(resumableState);
        if (customFields) {
          var formData = customFields.data;
          null != formData && formData.forEach(validateAdditionalFormField);
        }
        return customFields;
      } catch (x2) {
        if ("object" === typeof x2 && null !== x2 && "function" === typeof x2.then)
          throw x2;
      }
    }
    return null;
  }
  function pushFormActionAttribute(target, resumableState, renderState, formAction, formEncType, formMethod, formTarget, name) {
    var formData = null;
    if ("function" === typeof formAction) {
      var customFields = getCustomFormFields(resumableState, formAction);
      null !== customFields ? (name = customFields.name, formAction = customFields.action || "", formEncType = customFields.encType, formMethod = customFields.method, formTarget = customFields.target, formData = customFields.data) : (target.push(" ", "formAction", '="', actionJavaScriptURL, '"'), formTarget = formMethod = formEncType = formAction = name = null, injectFormReplayingRuntime(resumableState, renderState));
    }
    null != name && pushAttribute(target, "name", name);
    null != formAction && pushAttribute(target, "formAction", formAction);
    null != formEncType && pushAttribute(target, "formEncType", formEncType);
    null != formMethod && pushAttribute(target, "formMethod", formMethod);
    null != formTarget && pushAttribute(target, "formTarget", formTarget);
    return formData;
  }
  function pushAttribute(target, name, value) {
    switch (name) {
      case "className":
        pushStringAttribute(target, "class", value);
        break;
      case "tabIndex":
        pushStringAttribute(target, "tabindex", value);
        break;
      case "dir":
      case "role":
      case "viewBox":
      case "width":
      case "height":
        pushStringAttribute(target, name, value);
        break;
      case "style":
        pushStyleAttribute(target, value);
        break;
      case "src":
      case "href":
        if ("" === value) break;
      case "action":
      case "formAction":
        if (null == value || "function" === typeof value || "symbol" === typeof value || "boolean" === typeof value)
          break;
        value = sanitizeURL("" + value);
        target.push(" ", name, '="', escapeTextForBrowser(value), '"');
        break;
      case "defaultValue":
      case "defaultChecked":
      case "innerHTML":
      case "suppressContentEditableWarning":
      case "suppressHydrationWarning":
      case "ref":
        break;
      case "autoFocus":
      case "multiple":
      case "muted":
        pushBooleanAttribute(target, name.toLowerCase(), value);
        break;
      case "xlinkHref":
        if ("function" === typeof value || "symbol" === typeof value || "boolean" === typeof value)
          break;
        value = sanitizeURL("" + value);
        target.push(" ", "xlink:href", '="', escapeTextForBrowser(value), '"');
        break;
      case "contentEditable":
      case "spellCheck":
      case "draggable":
      case "value":
      case "autoReverse":
      case "externalResourcesRequired":
      case "focusable":
      case "preserveAlpha":
        "function" !== typeof value && "symbol" !== typeof value && target.push(" ", name, '="', escapeTextForBrowser(value), '"');
        break;
      case "inert":
      case "allowFullScreen":
      case "async":
      case "autoPlay":
      case "controls":
      case "default":
      case "defer":
      case "disabled":
      case "disablePictureInPicture":
      case "disableRemotePlayback":
      case "formNoValidate":
      case "hidden":
      case "loop":
      case "noModule":
      case "noValidate":
      case "open":
      case "playsInline":
      case "readOnly":
      case "required":
      case "reversed":
      case "scoped":
      case "seamless":
      case "itemScope":
        value && "function" !== typeof value && "symbol" !== typeof value && target.push(" ", name, '=""');
        break;
      case "capture":
      case "download":
        true === value ? target.push(" ", name, '=""') : false !== value && "function" !== typeof value && "symbol" !== typeof value && target.push(" ", name, '="', escapeTextForBrowser(value), '"');
        break;
      case "cols":
      case "rows":
      case "size":
      case "span":
        "function" !== typeof value && "symbol" !== typeof value && !isNaN(value) && 1 <= value && target.push(" ", name, '="', escapeTextForBrowser(value), '"');
        break;
      case "rowSpan":
      case "start":
        "function" === typeof value || "symbol" === typeof value || isNaN(value) || target.push(" ", name, '="', escapeTextForBrowser(value), '"');
        break;
      case "xlinkActuate":
        pushStringAttribute(target, "xlink:actuate", value);
        break;
      case "xlinkArcrole":
        pushStringAttribute(target, "xlink:arcrole", value);
        break;
      case "xlinkRole":
        pushStringAttribute(target, "xlink:role", value);
        break;
      case "xlinkShow":
        pushStringAttribute(target, "xlink:show", value);
        break;
      case "xlinkTitle":
        pushStringAttribute(target, "xlink:title", value);
        break;
      case "xlinkType":
        pushStringAttribute(target, "xlink:type", value);
        break;
      case "xmlBase":
        pushStringAttribute(target, "xml:base", value);
        break;
      case "xmlLang":
        pushStringAttribute(target, "xml:lang", value);
        break;
      case "xmlSpace":
        pushStringAttribute(target, "xml:space", value);
        break;
      default:
        if (!(2 < name.length) || "o" !== name[0] && "O" !== name[0] || "n" !== name[1] && "N" !== name[1]) {
          if (name = aliases.get(name) || name, isAttributeNameSafe(name)) {
            switch (typeof value) {
              case "function":
              case "symbol":
                return;
              case "boolean":
                var prefix$8 = name.toLowerCase().slice(0, 5);
                if ("data-" !== prefix$8 && "aria-" !== prefix$8) return;
            }
            target.push(" ", name, '="', escapeTextForBrowser(value), '"');
          }
        }
    }
  }
  function pushInnerHTML(target, innerHTML, children) {
    if (null != innerHTML) {
      if (null != children) throw Error(formatProdErrorMessage(60));
      if ("object" !== typeof innerHTML || !("__html" in innerHTML))
        throw Error(formatProdErrorMessage(61));
      innerHTML = innerHTML.__html;
      null !== innerHTML && void 0 !== innerHTML && target.push("" + innerHTML);
    }
  }
  function flattenOptionChildren(children) {
    var content = "";
    React2.Children.forEach(children, function(child) {
      null != child && (content += child);
    });
    return content;
  }
  function injectFormReplayingRuntime(resumableState, renderState) {
    if (0 === (resumableState.instructions & 16)) {
      resumableState.instructions |= 16;
      var preamble = renderState.preamble, bootstrapChunks = renderState.bootstrapChunks;
      (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length ? (bootstrapChunks.push(renderState.startInlineScript), pushCompletedShellIdAttribute(bootstrapChunks, resumableState), bootstrapChunks.push(
        ">",
        `addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`,
        "<\/script>"
      )) : bootstrapChunks.unshift(
        renderState.startInlineScript,
        ">",
        `addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`,
        "<\/script>"
      );
    }
  }
  function pushLinkImpl(target, props) {
    target.push(startChunkForTag("link"));
    for (var propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
            case "dangerouslySetInnerHTML":
              throw Error(formatProdErrorMessage(399, "link"));
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push("/>");
    return null;
  }
  var styleRegex = /(<\/|<)(s)(tyle)/gi;
  function styleReplacer(match, prefix2, s, suffix2) {
    return "" + prefix2 + ("s" === s ? "\\73 " : "\\53 ") + suffix2;
  }
  function pushSelfClosing(target, props, tag) {
    target.push(startChunkForTag(tag));
    for (var propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
            case "dangerouslySetInnerHTML":
              throw Error(formatProdErrorMessage(399, tag));
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push("/>");
    return null;
  }
  function pushTitleImpl(target, props) {
    target.push(startChunkForTag("title"));
    var children = null, innerHTML = null, propKey;
    for (propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
              children = propValue;
              break;
            case "dangerouslySetInnerHTML":
              innerHTML = propValue;
              break;
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push(">");
    props = Array.isArray(children) ? 2 > children.length ? children[0] : null : children;
    "function" !== typeof props && "symbol" !== typeof props && null !== props && void 0 !== props && target.push(escapeTextForBrowser("" + props));
    pushInnerHTML(target, innerHTML, children);
    target.push(endChunkForTag("title"));
    return null;
  }
  function pushScriptImpl(target, props) {
    target.push(startChunkForTag("script"));
    var children = null, innerHTML = null, propKey;
    for (propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
              children = propValue;
              break;
            case "dangerouslySetInnerHTML":
              innerHTML = propValue;
              break;
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push(">");
    pushInnerHTML(target, innerHTML, children);
    "string" === typeof children && target.push(("" + children).replace(scriptRegex, scriptReplacer));
    target.push(endChunkForTag("script"));
    return null;
  }
  function pushStartSingletonElement(target, props, tag) {
    target.push(startChunkForTag(tag));
    var innerHTML = tag = null, propKey;
    for (propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
              tag = propValue;
              break;
            case "dangerouslySetInnerHTML":
              innerHTML = propValue;
              break;
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push(">");
    pushInnerHTML(target, innerHTML, tag);
    return tag;
  }
  function pushStartGenericElement(target, props, tag) {
    target.push(startChunkForTag(tag));
    var innerHTML = tag = null, propKey;
    for (propKey in props)
      if (hasOwnProperty.call(props, propKey)) {
        var propValue = props[propKey];
        if (null != propValue)
          switch (propKey) {
            case "children":
              tag = propValue;
              break;
            case "dangerouslySetInnerHTML":
              innerHTML = propValue;
              break;
            default:
              pushAttribute(target, propKey, propValue);
          }
      }
    target.push(">");
    pushInnerHTML(target, innerHTML, tag);
    return "string" === typeof tag ? (target.push(escapeTextForBrowser(tag)), null) : tag;
  }
  var VALID_TAG_REGEX = /^[a-zA-Z][a-zA-Z:_\.\-\d]*$/, validatedTagCache = /* @__PURE__ */ new Map();
  function startChunkForTag(tag) {
    var tagStartChunk = validatedTagCache.get(tag);
    if (void 0 === tagStartChunk) {
      if (!VALID_TAG_REGEX.test(tag))
        throw Error(formatProdErrorMessage(65, tag));
      tagStartChunk = "<" + tag;
      validatedTagCache.set(tag, tagStartChunk);
    }
    return tagStartChunk;
  }
  function pushStartInstance(target$jscomp$0, type, props, resumableState, renderState, preambleState, hoistableState, formatContext, textEmbedded) {
    switch (type) {
      case "div":
      case "span":
      case "svg":
      case "path":
        break;
      case "a":
        target$jscomp$0.push(startChunkForTag("a"));
        var children = null, innerHTML = null, propKey;
        for (propKey in props)
          if (hasOwnProperty.call(props, propKey)) {
            var propValue = props[propKey];
            if (null != propValue)
              switch (propKey) {
                case "children":
                  children = propValue;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML = propValue;
                  break;
                case "href":
                  "" === propValue ? pushStringAttribute(target$jscomp$0, "href", "") : pushAttribute(target$jscomp$0, propKey, propValue);
                  break;
                default:
                  pushAttribute(target$jscomp$0, propKey, propValue);
              }
          }
        target$jscomp$0.push(">");
        pushInnerHTML(target$jscomp$0, innerHTML, children);
        if ("string" === typeof children) {
          target$jscomp$0.push(escapeTextForBrowser(children));
          var JSCompiler_inline_result = null;
        } else JSCompiler_inline_result = children;
        return JSCompiler_inline_result;
      case "g":
      case "p":
      case "li":
        break;
      case "select":
        target$jscomp$0.push(startChunkForTag("select"));
        var children$jscomp$0 = null, innerHTML$jscomp$0 = null, propKey$jscomp$0;
        for (propKey$jscomp$0 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$0)) {
            var propValue$jscomp$0 = props[propKey$jscomp$0];
            if (null != propValue$jscomp$0)
              switch (propKey$jscomp$0) {
                case "children":
                  children$jscomp$0 = propValue$jscomp$0;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$0 = propValue$jscomp$0;
                  break;
                case "defaultValue":
                case "value":
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$0,
                    propValue$jscomp$0
                  );
              }
          }
        target$jscomp$0.push(">");
        pushInnerHTML(target$jscomp$0, innerHTML$jscomp$0, children$jscomp$0);
        return children$jscomp$0;
      case "option":
        var selectedValue = formatContext.selectedValue;
        target$jscomp$0.push(startChunkForTag("option"));
        var children$jscomp$1 = null, value = null, selected = null, innerHTML$jscomp$1 = null, propKey$jscomp$1;
        for (propKey$jscomp$1 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$1)) {
            var propValue$jscomp$1 = props[propKey$jscomp$1];
            if (null != propValue$jscomp$1)
              switch (propKey$jscomp$1) {
                case "children":
                  children$jscomp$1 = propValue$jscomp$1;
                  break;
                case "selected":
                  selected = propValue$jscomp$1;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$1 = propValue$jscomp$1;
                  break;
                case "value":
                  value = propValue$jscomp$1;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$1,
                    propValue$jscomp$1
                  );
              }
          }
        if (null != selectedValue) {
          var stringValue = null !== value ? "" + value : flattenOptionChildren(children$jscomp$1);
          if (isArrayImpl(selectedValue))
            for (var i = 0; i < selectedValue.length; i++) {
              if ("" + selectedValue[i] === stringValue) {
                target$jscomp$0.push(' selected=""');
                break;
              }
            }
          else
            "" + selectedValue === stringValue && target$jscomp$0.push(' selected=""');
        } else selected && target$jscomp$0.push(' selected=""');
        target$jscomp$0.push(">");
        pushInnerHTML(target$jscomp$0, innerHTML$jscomp$1, children$jscomp$1);
        return children$jscomp$1;
      case "textarea":
        target$jscomp$0.push(startChunkForTag("textarea"));
        var value$jscomp$0 = null, defaultValue = null, children$jscomp$2 = null, propKey$jscomp$2;
        for (propKey$jscomp$2 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$2)) {
            var propValue$jscomp$2 = props[propKey$jscomp$2];
            if (null != propValue$jscomp$2)
              switch (propKey$jscomp$2) {
                case "children":
                  children$jscomp$2 = propValue$jscomp$2;
                  break;
                case "value":
                  value$jscomp$0 = propValue$jscomp$2;
                  break;
                case "defaultValue":
                  defaultValue = propValue$jscomp$2;
                  break;
                case "dangerouslySetInnerHTML":
                  throw Error(formatProdErrorMessage(91));
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$2,
                    propValue$jscomp$2
                  );
              }
          }
        null === value$jscomp$0 && null !== defaultValue && (value$jscomp$0 = defaultValue);
        target$jscomp$0.push(">");
        if (null != children$jscomp$2) {
          if (null != value$jscomp$0) throw Error(formatProdErrorMessage(92));
          if (isArrayImpl(children$jscomp$2)) {
            if (1 < children$jscomp$2.length)
              throw Error(formatProdErrorMessage(93));
            value$jscomp$0 = "" + children$jscomp$2[0];
          }
          value$jscomp$0 = "" + children$jscomp$2;
        }
        "string" === typeof value$jscomp$0 && "\n" === value$jscomp$0[0] && target$jscomp$0.push("\n");
        null !== value$jscomp$0 && target$jscomp$0.push(escapeTextForBrowser("" + value$jscomp$0));
        return null;
      case "input":
        target$jscomp$0.push(startChunkForTag("input"));
        var name = null, formAction = null, formEncType = null, formMethod = null, formTarget = null, value$jscomp$1 = null, defaultValue$jscomp$0 = null, checked = null, defaultChecked = null, propKey$jscomp$3;
        for (propKey$jscomp$3 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$3)) {
            var propValue$jscomp$3 = props[propKey$jscomp$3];
            if (null != propValue$jscomp$3)
              switch (propKey$jscomp$3) {
                case "children":
                case "dangerouslySetInnerHTML":
                  throw Error(formatProdErrorMessage(399, "input"));
                case "name":
                  name = propValue$jscomp$3;
                  break;
                case "formAction":
                  formAction = propValue$jscomp$3;
                  break;
                case "formEncType":
                  formEncType = propValue$jscomp$3;
                  break;
                case "formMethod":
                  formMethod = propValue$jscomp$3;
                  break;
                case "formTarget":
                  formTarget = propValue$jscomp$3;
                  break;
                case "defaultChecked":
                  defaultChecked = propValue$jscomp$3;
                  break;
                case "defaultValue":
                  defaultValue$jscomp$0 = propValue$jscomp$3;
                  break;
                case "checked":
                  checked = propValue$jscomp$3;
                  break;
                case "value":
                  value$jscomp$1 = propValue$jscomp$3;
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$3,
                    propValue$jscomp$3
                  );
              }
          }
        var formData = pushFormActionAttribute(
          target$jscomp$0,
          resumableState,
          renderState,
          formAction,
          formEncType,
          formMethod,
          formTarget,
          name
        );
        null !== checked ? pushBooleanAttribute(target$jscomp$0, "checked", checked) : null !== defaultChecked && pushBooleanAttribute(target$jscomp$0, "checked", defaultChecked);
        null !== value$jscomp$1 ? pushAttribute(target$jscomp$0, "value", value$jscomp$1) : null !== defaultValue$jscomp$0 && pushAttribute(target$jscomp$0, "value", defaultValue$jscomp$0);
        target$jscomp$0.push("/>");
        null != formData && formData.forEach(pushAdditionalFormField, target$jscomp$0);
        return null;
      case "button":
        target$jscomp$0.push(startChunkForTag("button"));
        var children$jscomp$3 = null, innerHTML$jscomp$2 = null, name$jscomp$0 = null, formAction$jscomp$0 = null, formEncType$jscomp$0 = null, formMethod$jscomp$0 = null, formTarget$jscomp$0 = null, propKey$jscomp$4;
        for (propKey$jscomp$4 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$4)) {
            var propValue$jscomp$4 = props[propKey$jscomp$4];
            if (null != propValue$jscomp$4)
              switch (propKey$jscomp$4) {
                case "children":
                  children$jscomp$3 = propValue$jscomp$4;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$2 = propValue$jscomp$4;
                  break;
                case "name":
                  name$jscomp$0 = propValue$jscomp$4;
                  break;
                case "formAction":
                  formAction$jscomp$0 = propValue$jscomp$4;
                  break;
                case "formEncType":
                  formEncType$jscomp$0 = propValue$jscomp$4;
                  break;
                case "formMethod":
                  formMethod$jscomp$0 = propValue$jscomp$4;
                  break;
                case "formTarget":
                  formTarget$jscomp$0 = propValue$jscomp$4;
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$4,
                    propValue$jscomp$4
                  );
              }
          }
        var formData$jscomp$0 = pushFormActionAttribute(
          target$jscomp$0,
          resumableState,
          renderState,
          formAction$jscomp$0,
          formEncType$jscomp$0,
          formMethod$jscomp$0,
          formTarget$jscomp$0,
          name$jscomp$0
        );
        target$jscomp$0.push(">");
        null != formData$jscomp$0 && formData$jscomp$0.forEach(pushAdditionalFormField, target$jscomp$0);
        pushInnerHTML(target$jscomp$0, innerHTML$jscomp$2, children$jscomp$3);
        if ("string" === typeof children$jscomp$3) {
          target$jscomp$0.push(escapeTextForBrowser(children$jscomp$3));
          var JSCompiler_inline_result$jscomp$0 = null;
        } else JSCompiler_inline_result$jscomp$0 = children$jscomp$3;
        return JSCompiler_inline_result$jscomp$0;
      case "form":
        target$jscomp$0.push(startChunkForTag("form"));
        var children$jscomp$4 = null, innerHTML$jscomp$3 = null, formAction$jscomp$1 = null, formEncType$jscomp$1 = null, formMethod$jscomp$1 = null, formTarget$jscomp$1 = null, propKey$jscomp$5;
        for (propKey$jscomp$5 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$5)) {
            var propValue$jscomp$5 = props[propKey$jscomp$5];
            if (null != propValue$jscomp$5)
              switch (propKey$jscomp$5) {
                case "children":
                  children$jscomp$4 = propValue$jscomp$5;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$3 = propValue$jscomp$5;
                  break;
                case "action":
                  formAction$jscomp$1 = propValue$jscomp$5;
                  break;
                case "encType":
                  formEncType$jscomp$1 = propValue$jscomp$5;
                  break;
                case "method":
                  formMethod$jscomp$1 = propValue$jscomp$5;
                  break;
                case "target":
                  formTarget$jscomp$1 = propValue$jscomp$5;
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$5,
                    propValue$jscomp$5
                  );
              }
          }
        var formData$jscomp$1 = null, formActionName = null;
        if ("function" === typeof formAction$jscomp$1) {
          var customFields = getCustomFormFields(
            resumableState,
            formAction$jscomp$1
          );
          null !== customFields ? (formAction$jscomp$1 = customFields.action || "", formEncType$jscomp$1 = customFields.encType, formMethod$jscomp$1 = customFields.method, formTarget$jscomp$1 = customFields.target, formData$jscomp$1 = customFields.data, formActionName = customFields.name) : (target$jscomp$0.push(
            " ",
            "action",
            '="',
            actionJavaScriptURL,
            '"'
          ), formTarget$jscomp$1 = formMethod$jscomp$1 = formEncType$jscomp$1 = formAction$jscomp$1 = null, injectFormReplayingRuntime(resumableState, renderState));
        }
        null != formAction$jscomp$1 && pushAttribute(target$jscomp$0, "action", formAction$jscomp$1);
        null != formEncType$jscomp$1 && pushAttribute(target$jscomp$0, "encType", formEncType$jscomp$1);
        null != formMethod$jscomp$1 && pushAttribute(target$jscomp$0, "method", formMethod$jscomp$1);
        null != formTarget$jscomp$1 && pushAttribute(target$jscomp$0, "target", formTarget$jscomp$1);
        target$jscomp$0.push(">");
        null !== formActionName && (target$jscomp$0.push('<input type="hidden"'), pushStringAttribute(target$jscomp$0, "name", formActionName), target$jscomp$0.push("/>"), null != formData$jscomp$1 && formData$jscomp$1.forEach(pushAdditionalFormField, target$jscomp$0));
        pushInnerHTML(target$jscomp$0, innerHTML$jscomp$3, children$jscomp$4);
        if ("string" === typeof children$jscomp$4) {
          target$jscomp$0.push(escapeTextForBrowser(children$jscomp$4));
          var JSCompiler_inline_result$jscomp$1 = null;
        } else JSCompiler_inline_result$jscomp$1 = children$jscomp$4;
        return JSCompiler_inline_result$jscomp$1;
      case "menuitem":
        target$jscomp$0.push(startChunkForTag("menuitem"));
        for (var propKey$jscomp$6 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$6)) {
            var propValue$jscomp$6 = props[propKey$jscomp$6];
            if (null != propValue$jscomp$6)
              switch (propKey$jscomp$6) {
                case "children":
                case "dangerouslySetInnerHTML":
                  throw Error(formatProdErrorMessage(400));
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$6,
                    propValue$jscomp$6
                  );
              }
          }
        target$jscomp$0.push(">");
        return null;
      case "object":
        target$jscomp$0.push(startChunkForTag("object"));
        var children$jscomp$5 = null, innerHTML$jscomp$4 = null, propKey$jscomp$7;
        for (propKey$jscomp$7 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$7)) {
            var propValue$jscomp$7 = props[propKey$jscomp$7];
            if (null != propValue$jscomp$7)
              switch (propKey$jscomp$7) {
                case "children":
                  children$jscomp$5 = propValue$jscomp$7;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$4 = propValue$jscomp$7;
                  break;
                case "data":
                  var sanitizedValue = sanitizeURL("" + propValue$jscomp$7);
                  if ("" === sanitizedValue) break;
                  target$jscomp$0.push(
                    " ",
                    "data",
                    '="',
                    escapeTextForBrowser(sanitizedValue),
                    '"'
                  );
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$7,
                    propValue$jscomp$7
                  );
              }
          }
        target$jscomp$0.push(">");
        pushInnerHTML(target$jscomp$0, innerHTML$jscomp$4, children$jscomp$5);
        if ("string" === typeof children$jscomp$5) {
          target$jscomp$0.push(escapeTextForBrowser(children$jscomp$5));
          var JSCompiler_inline_result$jscomp$2 = null;
        } else JSCompiler_inline_result$jscomp$2 = children$jscomp$5;
        return JSCompiler_inline_result$jscomp$2;
      case "title":
        var noscriptTagInScope = formatContext.tagScope & 1, isFallback = formatContext.tagScope & 4;
        if (4 === formatContext.insertionMode || noscriptTagInScope || null != props.itemProp)
          var JSCompiler_inline_result$jscomp$3 = pushTitleImpl(
            target$jscomp$0,
            props
          );
        else
          isFallback ? JSCompiler_inline_result$jscomp$3 = null : (pushTitleImpl(renderState.hoistableChunks, props), JSCompiler_inline_result$jscomp$3 = void 0);
        return JSCompiler_inline_result$jscomp$3;
      case "link":
        var noscriptTagInScope$jscomp$0 = formatContext.tagScope & 1, isFallback$jscomp$0 = formatContext.tagScope & 4, rel = props.rel, href = props.href, precedence = props.precedence;
        if (4 === formatContext.insertionMode || noscriptTagInScope$jscomp$0 || null != props.itemProp || "string" !== typeof rel || "string" !== typeof href || "" === href) {
          pushLinkImpl(target$jscomp$0, props);
          var JSCompiler_inline_result$jscomp$4 = null;
        } else if ("stylesheet" === props.rel)
          if ("string" !== typeof precedence || null != props.disabled || props.onLoad || props.onError)
            JSCompiler_inline_result$jscomp$4 = pushLinkImpl(
              target$jscomp$0,
              props
            );
          else {
            var styleQueue = renderState.styles.get(precedence), resourceState = resumableState.styleResources.hasOwnProperty(href) ? resumableState.styleResources[href] : void 0;
            if (null !== resourceState) {
              resumableState.styleResources[href] = null;
              styleQueue || (styleQueue = {
                precedence: escapeTextForBrowser(precedence),
                rules: [],
                hrefs: [],
                sheets: /* @__PURE__ */ new Map()
              }, renderState.styles.set(precedence, styleQueue));
              var resource = {
                state: 0,
                props: assign({}, props, {
                  "data-precedence": props.precedence,
                  precedence: null
                })
              };
              if (resourceState) {
                2 === resourceState.length && adoptPreloadCredentials(resource.props, resourceState);
                var preloadResource = renderState.preloads.stylesheets.get(href);
                preloadResource && 0 < preloadResource.length ? preloadResource.length = 0 : resource.state = 1;
              }
              styleQueue.sheets.set(href, resource);
              hoistableState && hoistableState.stylesheets.add(resource);
            } else if (styleQueue) {
              var resource$9 = styleQueue.sheets.get(href);
              resource$9 && hoistableState && hoistableState.stylesheets.add(resource$9);
            }
            textEmbedded && target$jscomp$0.push("<!-- -->");
            JSCompiler_inline_result$jscomp$4 = null;
          }
        else
          props.onLoad || props.onError ? JSCompiler_inline_result$jscomp$4 = pushLinkImpl(
            target$jscomp$0,
            props
          ) : (textEmbedded && target$jscomp$0.push("<!-- -->"), JSCompiler_inline_result$jscomp$4 = isFallback$jscomp$0 ? null : pushLinkImpl(renderState.hoistableChunks, props));
        return JSCompiler_inline_result$jscomp$4;
      case "script":
        var noscriptTagInScope$jscomp$1 = formatContext.tagScope & 1, asyncProp = props.async;
        if ("string" !== typeof props.src || !props.src || !asyncProp || "function" === typeof asyncProp || "symbol" === typeof asyncProp || props.onLoad || props.onError || 4 === formatContext.insertionMode || noscriptTagInScope$jscomp$1 || null != props.itemProp)
          var JSCompiler_inline_result$jscomp$5 = pushScriptImpl(
            target$jscomp$0,
            props
          );
        else {
          var key = props.src;
          if ("module" === props.type) {
            var resources = resumableState.moduleScriptResources;
            var preloads = renderState.preloads.moduleScripts;
          } else
            resources = resumableState.scriptResources, preloads = renderState.preloads.scripts;
          var resourceState$jscomp$0 = resources.hasOwnProperty(key) ? resources[key] : void 0;
          if (null !== resourceState$jscomp$0) {
            resources[key] = null;
            var scriptProps = props;
            if (resourceState$jscomp$0) {
              2 === resourceState$jscomp$0.length && (scriptProps = assign({}, props), adoptPreloadCredentials(scriptProps, resourceState$jscomp$0));
              var preloadResource$jscomp$0 = preloads.get(key);
              preloadResource$jscomp$0 && (preloadResource$jscomp$0.length = 0);
            }
            var resource$jscomp$0 = [];
            renderState.scripts.add(resource$jscomp$0);
            pushScriptImpl(resource$jscomp$0, scriptProps);
          }
          textEmbedded && target$jscomp$0.push("<!-- -->");
          JSCompiler_inline_result$jscomp$5 = null;
        }
        return JSCompiler_inline_result$jscomp$5;
      case "style":
        var noscriptTagInScope$jscomp$2 = formatContext.tagScope & 1, precedence$jscomp$0 = props.precedence, href$jscomp$0 = props.href, nonce = props.nonce;
        if (4 === formatContext.insertionMode || noscriptTagInScope$jscomp$2 || null != props.itemProp || "string" !== typeof precedence$jscomp$0 || "string" !== typeof href$jscomp$0 || "" === href$jscomp$0) {
          target$jscomp$0.push(startChunkForTag("style"));
          var children$jscomp$6 = null, innerHTML$jscomp$5 = null, propKey$jscomp$8;
          for (propKey$jscomp$8 in props)
            if (hasOwnProperty.call(props, propKey$jscomp$8)) {
              var propValue$jscomp$8 = props[propKey$jscomp$8];
              if (null != propValue$jscomp$8)
                switch (propKey$jscomp$8) {
                  case "children":
                    children$jscomp$6 = propValue$jscomp$8;
                    break;
                  case "dangerouslySetInnerHTML":
                    innerHTML$jscomp$5 = propValue$jscomp$8;
                    break;
                  default:
                    pushAttribute(
                      target$jscomp$0,
                      propKey$jscomp$8,
                      propValue$jscomp$8
                    );
                }
            }
          target$jscomp$0.push(">");
          var child = Array.isArray(children$jscomp$6) ? 2 > children$jscomp$6.length ? children$jscomp$6[0] : null : children$jscomp$6;
          "function" !== typeof child && "symbol" !== typeof child && null !== child && void 0 !== child && target$jscomp$0.push(("" + child).replace(styleRegex, styleReplacer));
          pushInnerHTML(target$jscomp$0, innerHTML$jscomp$5, children$jscomp$6);
          target$jscomp$0.push(endChunkForTag("style"));
          var JSCompiler_inline_result$jscomp$6 = null;
        } else {
          var styleQueue$jscomp$0 = renderState.styles.get(precedence$jscomp$0);
          if (null !== (resumableState.styleResources.hasOwnProperty(href$jscomp$0) ? resumableState.styleResources[href$jscomp$0] : void 0)) {
            resumableState.styleResources[href$jscomp$0] = null;
            styleQueue$jscomp$0 || (styleQueue$jscomp$0 = {
              precedence: escapeTextForBrowser(precedence$jscomp$0),
              rules: [],
              hrefs: [],
              sheets: /* @__PURE__ */ new Map()
            }, renderState.styles.set(precedence$jscomp$0, styleQueue$jscomp$0));
            var nonceStyle = renderState.nonce.style;
            if (!nonceStyle || nonceStyle === nonce) {
              styleQueue$jscomp$0.hrefs.push(escapeTextForBrowser(href$jscomp$0));
              var target = styleQueue$jscomp$0.rules, children$jscomp$7 = null, innerHTML$jscomp$6 = null, propKey$jscomp$9;
              for (propKey$jscomp$9 in props)
                if (hasOwnProperty.call(props, propKey$jscomp$9)) {
                  var propValue$jscomp$9 = props[propKey$jscomp$9];
                  if (null != propValue$jscomp$9)
                    switch (propKey$jscomp$9) {
                      case "children":
                        children$jscomp$7 = propValue$jscomp$9;
                        break;
                      case "dangerouslySetInnerHTML":
                        innerHTML$jscomp$6 = propValue$jscomp$9;
                    }
                }
              var child$jscomp$0 = Array.isArray(children$jscomp$7) ? 2 > children$jscomp$7.length ? children$jscomp$7[0] : null : children$jscomp$7;
              "function" !== typeof child$jscomp$0 && "symbol" !== typeof child$jscomp$0 && null !== child$jscomp$0 && void 0 !== child$jscomp$0 && target.push(
                ("" + child$jscomp$0).replace(styleRegex, styleReplacer)
              );
              pushInnerHTML(target, innerHTML$jscomp$6, children$jscomp$7);
            }
          }
          styleQueue$jscomp$0 && hoistableState && hoistableState.styles.add(styleQueue$jscomp$0);
          textEmbedded && target$jscomp$0.push("<!-- -->");
          JSCompiler_inline_result$jscomp$6 = void 0;
        }
        return JSCompiler_inline_result$jscomp$6;
      case "meta":
        var noscriptTagInScope$jscomp$3 = formatContext.tagScope & 1, isFallback$jscomp$1 = formatContext.tagScope & 4;
        if (4 === formatContext.insertionMode || noscriptTagInScope$jscomp$3 || null != props.itemProp)
          var JSCompiler_inline_result$jscomp$7 = pushSelfClosing(
            target$jscomp$0,
            props,
            "meta"
          );
        else
          textEmbedded && target$jscomp$0.push("<!-- -->"), JSCompiler_inline_result$jscomp$7 = isFallback$jscomp$1 ? null : "string" === typeof props.charSet ? pushSelfClosing(renderState.charsetChunks, props, "meta") : "viewport" === props.name ? pushSelfClosing(renderState.viewportChunks, props, "meta") : pushSelfClosing(renderState.hoistableChunks, props, "meta");
        return JSCompiler_inline_result$jscomp$7;
      case "listing":
      case "pre":
        target$jscomp$0.push(startChunkForTag(type));
        var children$jscomp$8 = null, innerHTML$jscomp$7 = null, propKey$jscomp$10;
        for (propKey$jscomp$10 in props)
          if (hasOwnProperty.call(props, propKey$jscomp$10)) {
            var propValue$jscomp$10 = props[propKey$jscomp$10];
            if (null != propValue$jscomp$10)
              switch (propKey$jscomp$10) {
                case "children":
                  children$jscomp$8 = propValue$jscomp$10;
                  break;
                case "dangerouslySetInnerHTML":
                  innerHTML$jscomp$7 = propValue$jscomp$10;
                  break;
                default:
                  pushAttribute(
                    target$jscomp$0,
                    propKey$jscomp$10,
                    propValue$jscomp$10
                  );
              }
          }
        target$jscomp$0.push(">");
        if (null != innerHTML$jscomp$7) {
          if (null != children$jscomp$8) throw Error(formatProdErrorMessage(60));
          if ("object" !== typeof innerHTML$jscomp$7 || !("__html" in innerHTML$jscomp$7))
            throw Error(formatProdErrorMessage(61));
          var html = innerHTML$jscomp$7.__html;
          null !== html && void 0 !== html && ("string" === typeof html && 0 < html.length && "\n" === html[0] ? target$jscomp$0.push("\n", html) : target$jscomp$0.push("" + html));
        }
        "string" === typeof children$jscomp$8 && "\n" === children$jscomp$8[0] && target$jscomp$0.push("\n");
        return children$jscomp$8;
      case "img":
        var pictureOrNoScriptTagInScope = formatContext.tagScope & 3, src = props.src, srcSet = props.srcSet;
        if (!("lazy" === props.loading || !src && !srcSet || "string" !== typeof src && null != src || "string" !== typeof srcSet && null != srcSet || "low" === props.fetchPriority || pictureOrNoScriptTagInScope) && ("string" !== typeof src || ":" !== src[4] || "d" !== src[0] && "D" !== src[0] || "a" !== src[1] && "A" !== src[1] || "t" !== src[2] && "T" !== src[2] || "a" !== src[3] && "A" !== src[3]) && ("string" !== typeof srcSet || ":" !== srcSet[4] || "d" !== srcSet[0] && "D" !== srcSet[0] || "a" !== srcSet[1] && "A" !== srcSet[1] || "t" !== srcSet[2] && "T" !== srcSet[2] || "a" !== srcSet[3] && "A" !== srcSet[3])) {
          null !== hoistableState && formatContext.tagScope & 64 && (hoistableState.suspenseyImages = true);
          var sizes = "string" === typeof props.sizes ? props.sizes : void 0, key$jscomp$0 = srcSet ? srcSet + "\n" + (sizes || "") : src, promotablePreloads = renderState.preloads.images, resource$jscomp$1 = promotablePreloads.get(key$jscomp$0);
          if (resource$jscomp$1) {
            if ("high" === props.fetchPriority || 10 > renderState.highImagePreloads.size)
              promotablePreloads.delete(key$jscomp$0), renderState.highImagePreloads.add(resource$jscomp$1);
          } else if (!resumableState.imageResources.hasOwnProperty(key$jscomp$0)) {
            resumableState.imageResources[key$jscomp$0] = PRELOAD_NO_CREDS;
            var input = props.crossOrigin;
            var JSCompiler_inline_result$jscomp$8 = "string" === typeof input ? "use-credentials" === input ? input : "" : void 0;
            var headers = renderState.headers, header;
            headers && 0 < headers.remainingCapacity && "string" !== typeof props.srcSet && ("high" === props.fetchPriority || 500 > headers.highImagePreloads.length) && (header = getPreloadAsHeader(src, "image", {
              imageSrcSet: props.srcSet,
              imageSizes: props.sizes,
              crossOrigin: JSCompiler_inline_result$jscomp$8,
              integrity: props.integrity,
              nonce: props.nonce,
              type: props.type,
              fetchPriority: props.fetchPriority,
              referrerPolicy: props.refererPolicy
            }), 0 <= (headers.remainingCapacity -= header.length + 2)) ? (renderState.resets.image[key$jscomp$0] = PRELOAD_NO_CREDS, headers.highImagePreloads && (headers.highImagePreloads += ", "), headers.highImagePreloads += header) : (resource$jscomp$1 = [], pushLinkImpl(resource$jscomp$1, {
              rel: "preload",
              as: "image",
              href: srcSet ? void 0 : src,
              imageSrcSet: srcSet,
              imageSizes: sizes,
              crossOrigin: JSCompiler_inline_result$jscomp$8,
              integrity: props.integrity,
              type: props.type,
              fetchPriority: props.fetchPriority,
              referrerPolicy: props.referrerPolicy
            }), "high" === props.fetchPriority || 10 > renderState.highImagePreloads.size ? renderState.highImagePreloads.add(resource$jscomp$1) : (renderState.bulkPreloads.add(resource$jscomp$1), promotablePreloads.set(key$jscomp$0, resource$jscomp$1)));
          }
        }
        return pushSelfClosing(target$jscomp$0, props, "img");
      case "base":
      case "area":
      case "br":
      case "col":
      case "embed":
      case "hr":
      case "keygen":
      case "param":
      case "source":
      case "track":
      case "wbr":
        return pushSelfClosing(target$jscomp$0, props, type);
      case "annotation-xml":
      case "color-profile":
      case "font-face":
      case "font-face-src":
      case "font-face-uri":
      case "font-face-format":
      case "font-face-name":
      case "missing-glyph":
        break;
      case "head":
        if (2 > formatContext.insertionMode) {
          var preamble = preambleState || renderState.preamble;
          if (preamble.headChunks)
            throw Error(formatProdErrorMessage(545, "`<head>`"));
          null !== preambleState && target$jscomp$0.push("<!--head-->");
          preamble.headChunks = [];
          var JSCompiler_inline_result$jscomp$9 = pushStartSingletonElement(
            preamble.headChunks,
            props,
            "head"
          );
        } else
          JSCompiler_inline_result$jscomp$9 = pushStartGenericElement(
            target$jscomp$0,
            props,
            "head"
          );
        return JSCompiler_inline_result$jscomp$9;
      case "body":
        if (2 > formatContext.insertionMode) {
          var preamble$jscomp$0 = preambleState || renderState.preamble;
          if (preamble$jscomp$0.bodyChunks)
            throw Error(formatProdErrorMessage(545, "`<body>`"));
          null !== preambleState && target$jscomp$0.push("<!--body-->");
          preamble$jscomp$0.bodyChunks = [];
          var JSCompiler_inline_result$jscomp$10 = pushStartSingletonElement(
            preamble$jscomp$0.bodyChunks,
            props,
            "body"
          );
        } else
          JSCompiler_inline_result$jscomp$10 = pushStartGenericElement(
            target$jscomp$0,
            props,
            "body"
          );
        return JSCompiler_inline_result$jscomp$10;
      case "html":
        if (0 === formatContext.insertionMode) {
          var preamble$jscomp$1 = preambleState || renderState.preamble;
          if (preamble$jscomp$1.htmlChunks)
            throw Error(formatProdErrorMessage(545, "`<html>`"));
          null !== preambleState && target$jscomp$0.push("<!--html-->");
          preamble$jscomp$1.htmlChunks = [""];
          var JSCompiler_inline_result$jscomp$11 = pushStartSingletonElement(
            preamble$jscomp$1.htmlChunks,
            props,
            "html"
          );
        } else
          JSCompiler_inline_result$jscomp$11 = pushStartGenericElement(
            target$jscomp$0,
            props,
            "html"
          );
        return JSCompiler_inline_result$jscomp$11;
      default:
        if (-1 !== type.indexOf("-")) {
          target$jscomp$0.push(startChunkForTag(type));
          var children$jscomp$9 = null, innerHTML$jscomp$8 = null, propKey$jscomp$11;
          for (propKey$jscomp$11 in props)
            if (hasOwnProperty.call(props, propKey$jscomp$11)) {
              var propValue$jscomp$11 = props[propKey$jscomp$11];
              if (null != propValue$jscomp$11) {
                var attributeName = propKey$jscomp$11;
                switch (propKey$jscomp$11) {
                  case "children":
                    children$jscomp$9 = propValue$jscomp$11;
                    break;
                  case "dangerouslySetInnerHTML":
                    innerHTML$jscomp$8 = propValue$jscomp$11;
                    break;
                  case "style":
                    pushStyleAttribute(target$jscomp$0, propValue$jscomp$11);
                    break;
                  case "suppressContentEditableWarning":
                  case "suppressHydrationWarning":
                  case "ref":
                    break;
                  case "className":
                    attributeName = "class";
                  default:
                    if (isAttributeNameSafe(propKey$jscomp$11) && "function" !== typeof propValue$jscomp$11 && "symbol" !== typeof propValue$jscomp$11 && false !== propValue$jscomp$11) {
                      if (true === propValue$jscomp$11) propValue$jscomp$11 = "";
                      else if ("object" === typeof propValue$jscomp$11) continue;
                      target$jscomp$0.push(
                        " ",
                        attributeName,
                        '="',
                        escapeTextForBrowser(propValue$jscomp$11),
                        '"'
                      );
                    }
                }
              }
            }
          target$jscomp$0.push(">");
          pushInnerHTML(target$jscomp$0, innerHTML$jscomp$8, children$jscomp$9);
          return children$jscomp$9;
        }
    }
    return pushStartGenericElement(target$jscomp$0, props, type);
  }
  var endTagCache = /* @__PURE__ */ new Map();
  function endChunkForTag(tag) {
    var chunk = endTagCache.get(tag);
    void 0 === chunk && (chunk = "</" + tag + ">", endTagCache.set(tag, chunk));
    return chunk;
  }
  function hoistPreambleState(renderState, preambleState) {
    renderState = renderState.preamble;
    null === renderState.htmlChunks && preambleState.htmlChunks && (renderState.htmlChunks = preambleState.htmlChunks);
    null === renderState.headChunks && preambleState.headChunks && (renderState.headChunks = preambleState.headChunks);
    null === renderState.bodyChunks && preambleState.bodyChunks && (renderState.bodyChunks = preambleState.bodyChunks);
  }
  function writeBootstrap(destination, renderState) {
    renderState = renderState.bootstrapChunks;
    for (var i = 0; i < renderState.length - 1; i++)
      destination.push(renderState[i]);
    return i < renderState.length ? (i = renderState[i], renderState.length = 0, destination.push(i)) : true;
  }
  function writeStartPendingSuspenseBoundary(destination, renderState, id2) {
    destination.push('<!--$?--><template id="');
    if (null === id2) throw Error(formatProdErrorMessage(395));
    destination.push(renderState.boundaryPrefix);
    renderState = id2.toString(16);
    destination.push(renderState);
    return destination.push('"></template>');
  }
  function writeStartSegment(destination, renderState, formatContext, id2) {
    switch (formatContext.insertionMode) {
      case 0:
      case 1:
      case 3:
      case 2:
        return destination.push('<div hidden id="'), destination.push(renderState.segmentPrefix), renderState = id2.toString(16), destination.push(renderState), destination.push('">');
      case 4:
        return destination.push('<svg aria-hidden="true" style="display:none" id="'), destination.push(renderState.segmentPrefix), renderState = id2.toString(16), destination.push(renderState), destination.push('">');
      case 5:
        return destination.push('<math aria-hidden="true" style="display:none" id="'), destination.push(renderState.segmentPrefix), renderState = id2.toString(16), destination.push(renderState), destination.push('">');
      case 6:
        return destination.push('<table hidden id="'), destination.push(renderState.segmentPrefix), renderState = id2.toString(16), destination.push(renderState), destination.push('">');
      case 7:
        return destination.push('<table hidden><tbody id="'), destination.push(renderState.segmentPrefix), renderState = id2.toString(16), destination.push(renderState), destination.push('">');
      case 8:
        return destination.push('<table hidden><tr id="'), destination.push(renderState.segmentPrefix), renderState = id2.toString(16), destination.push(renderState), destination.push('">');
      case 9:
        return destination.push('<table hidden><colgroup id="'), destination.push(renderState.segmentPrefix), renderState = id2.toString(16), destination.push(renderState), destination.push('">');
      default:
        throw Error(formatProdErrorMessage(397));
    }
  }
  function writeEndSegment(destination, formatContext) {
    switch (formatContext.insertionMode) {
      case 0:
      case 1:
      case 3:
      case 2:
        return destination.push("</div>");
      case 4:
        return destination.push("</svg>");
      case 5:
        return destination.push("</math>");
      case 6:
        return destination.push("</table>");
      case 7:
        return destination.push("</tbody></table>");
      case 8:
        return destination.push("</tr></table>");
      case 9:
        return destination.push("</colgroup></table>");
      default:
        throw Error(formatProdErrorMessage(397));
    }
  }
  var regexForJSStringsInInstructionScripts = /[<\u2028\u2029]/g;
  function escapeJSStringsForInstructionScripts(input) {
    return JSON.stringify(input).replace(
      regexForJSStringsInInstructionScripts,
      function(match) {
        switch (match) {
          case "<":
            return "\\u003c";
          case "\u2028":
            return "\\u2028";
          case "\u2029":
            return "\\u2029";
          default:
            throw Error(
              "escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React"
            );
        }
      }
    );
  }
  var regexForJSStringsInScripts = /[&><\u2028\u2029]/g;
  function escapeJSObjectForInstructionScripts(input) {
    return JSON.stringify(input).replace(
      regexForJSStringsInScripts,
      function(match) {
        switch (match) {
          case "&":
            return "\\u0026";
          case ">":
            return "\\u003e";
          case "<":
            return "\\u003c";
          case "\u2028":
            return "\\u2028";
          case "\u2029":
            return "\\u2029";
          default:
            throw Error(
              "escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React"
            );
        }
      }
    );
  }
  var currentlyRenderingBoundaryHasStylesToHoist = false, destinationHasCapacity = true;
  function flushStyleTagsLateForBoundary(styleQueue) {
    var rules = styleQueue.rules, hrefs = styleQueue.hrefs, i = 0;
    if (hrefs.length) {
      this.push(currentlyFlushingRenderState.startInlineStyle);
      this.push(' media="not all" data-precedence="');
      this.push(styleQueue.precedence);
      for (this.push('" data-href="'); i < hrefs.length - 1; i++)
        this.push(hrefs[i]), this.push(" ");
      this.push(hrefs[i]);
      this.push('">');
      for (i = 0; i < rules.length; i++) this.push(rules[i]);
      destinationHasCapacity = this.push("</style>");
      currentlyRenderingBoundaryHasStylesToHoist = true;
      rules.length = 0;
      hrefs.length = 0;
    }
  }
  function hasStylesToHoist(stylesheet) {
    return 2 !== stylesheet.state ? currentlyRenderingBoundaryHasStylesToHoist = true : false;
  }
  function writeHoistablesForBoundary(destination, hoistableState, renderState) {
    currentlyRenderingBoundaryHasStylesToHoist = false;
    destinationHasCapacity = true;
    currentlyFlushingRenderState = renderState;
    hoistableState.styles.forEach(flushStyleTagsLateForBoundary, destination);
    currentlyFlushingRenderState = null;
    hoistableState.stylesheets.forEach(hasStylesToHoist);
    currentlyRenderingBoundaryHasStylesToHoist && (renderState.stylesToHoist = true);
    return destinationHasCapacity;
  }
  function flushResource(resource) {
    for (var i = 0; i < resource.length; i++) this.push(resource[i]);
    resource.length = 0;
  }
  var stylesheetFlushingQueue = [];
  function flushStyleInPreamble(stylesheet) {
    pushLinkImpl(stylesheetFlushingQueue, stylesheet.props);
    for (var i = 0; i < stylesheetFlushingQueue.length; i++)
      this.push(stylesheetFlushingQueue[i]);
    stylesheetFlushingQueue.length = 0;
    stylesheet.state = 2;
  }
  function flushStylesInPreamble(styleQueue) {
    var hasStylesheets = 0 < styleQueue.sheets.size;
    styleQueue.sheets.forEach(flushStyleInPreamble, this);
    styleQueue.sheets.clear();
    var rules = styleQueue.rules, hrefs = styleQueue.hrefs;
    if (!hasStylesheets || hrefs.length) {
      this.push(currentlyFlushingRenderState.startInlineStyle);
      this.push(' data-precedence="');
      this.push(styleQueue.precedence);
      styleQueue = 0;
      if (hrefs.length) {
        for (this.push('" data-href="'); styleQueue < hrefs.length - 1; styleQueue++)
          this.push(hrefs[styleQueue]), this.push(" ");
        this.push(hrefs[styleQueue]);
      }
      this.push('">');
      for (styleQueue = 0; styleQueue < rules.length; styleQueue++)
        this.push(rules[styleQueue]);
      this.push("</style>");
      rules.length = 0;
      hrefs.length = 0;
    }
  }
  function preloadLateStyle(stylesheet) {
    if (0 === stylesheet.state) {
      stylesheet.state = 1;
      var props = stylesheet.props;
      pushLinkImpl(stylesheetFlushingQueue, {
        rel: "preload",
        as: "style",
        href: stylesheet.props.href,
        crossOrigin: props.crossOrigin,
        fetchPriority: props.fetchPriority,
        integrity: props.integrity,
        media: props.media,
        hrefLang: props.hrefLang,
        referrerPolicy: props.referrerPolicy
      });
      for (stylesheet = 0; stylesheet < stylesheetFlushingQueue.length; stylesheet++)
        this.push(stylesheetFlushingQueue[stylesheet]);
      stylesheetFlushingQueue.length = 0;
    }
  }
  function preloadLateStyles(styleQueue) {
    styleQueue.sheets.forEach(preloadLateStyle, this);
    styleQueue.sheets.clear();
  }
  function pushCompletedShellIdAttribute(target, resumableState) {
    0 === (resumableState.instructions & 32) && (resumableState.instructions |= 32, target.push(
      ' id="',
      escapeTextForBrowser("_" + resumableState.idPrefix + "R_"),
      '"'
    ));
  }
  function writeStyleResourceDependenciesInJS(destination, hoistableState) {
    destination.push("[");
    var nextArrayOpenBrackChunk = "[";
    hoistableState.stylesheets.forEach(function(resource) {
      if (2 !== resource.state)
        if (3 === resource.state)
          destination.push(nextArrayOpenBrackChunk), resource = escapeJSObjectForInstructionScripts(
            "" + resource.props.href
          ), destination.push(resource), destination.push("]"), nextArrayOpenBrackChunk = ",[";
        else {
          destination.push(nextArrayOpenBrackChunk);
          var precedence = resource.props["data-precedence"], props = resource.props, coercedHref = sanitizeURL("" + resource.props.href);
          coercedHref = escapeJSObjectForInstructionScripts(coercedHref);
          destination.push(coercedHref);
          precedence = "" + precedence;
          destination.push(",");
          precedence = escapeJSObjectForInstructionScripts(precedence);
          destination.push(precedence);
          for (var propKey in props)
            if (hasOwnProperty.call(props, propKey) && (precedence = props[propKey], null != precedence))
              switch (propKey) {
                case "href":
                case "rel":
                case "precedence":
                case "data-precedence":
                  break;
                case "children":
                case "dangerouslySetInnerHTML":
                  throw Error(formatProdErrorMessage(399, "link"));
                default:
                  writeStyleResourceAttributeInJS(
                    destination,
                    propKey,
                    precedence
                  );
              }
          destination.push("]");
          nextArrayOpenBrackChunk = ",[";
          resource.state = 3;
        }
    });
    destination.push("]");
  }
  function writeStyleResourceAttributeInJS(destination, name, value) {
    var attributeName = name.toLowerCase();
    switch (typeof value) {
      case "function":
      case "symbol":
        return;
    }
    switch (name) {
      case "innerHTML":
      case "dangerouslySetInnerHTML":
      case "suppressContentEditableWarning":
      case "suppressHydrationWarning":
      case "style":
      case "ref":
        return;
      case "className":
        attributeName = "class";
        name = "" + value;
        break;
      case "hidden":
        if (false === value) return;
        name = "";
        break;
      case "src":
      case "href":
        value = sanitizeURL(value);
        name = "" + value;
        break;
      default:
        if (2 < name.length && ("o" === name[0] || "O" === name[0]) && ("n" === name[1] || "N" === name[1]) || !isAttributeNameSafe(name))
          return;
        name = "" + value;
    }
    destination.push(",");
    attributeName = escapeJSObjectForInstructionScripts(attributeName);
    destination.push(attributeName);
    destination.push(",");
    attributeName = escapeJSObjectForInstructionScripts(name);
    destination.push(attributeName);
  }
  function createHoistableState() {
    return { styles: /* @__PURE__ */ new Set(), stylesheets: /* @__PURE__ */ new Set(), suspenseyImages: false };
  }
  function prefetchDNS(href) {
    var request = currentRequest ? currentRequest : null;
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if ("string" === typeof href && href) {
        if (!resumableState.dnsResources.hasOwnProperty(href)) {
          resumableState.dnsResources[href] = null;
          resumableState = renderState.headers;
          var header, JSCompiler_temp;
          if (JSCompiler_temp = resumableState && 0 < resumableState.remainingCapacity)
            JSCompiler_temp = (header = "<" + ("" + href).replace(
              regexForHrefInLinkHeaderURLContext,
              escapeHrefForLinkHeaderURLContextReplacer
            ) + ">; rel=dns-prefetch", 0 <= (resumableState.remainingCapacity -= header.length + 2));
          JSCompiler_temp ? (renderState.resets.dns[href] = null, resumableState.preconnects && (resumableState.preconnects += ", "), resumableState.preconnects += header) : (header = [], pushLinkImpl(header, { href, rel: "dns-prefetch" }), renderState.preconnects.add(header));
        }
        enqueueFlush(request);
      }
    } else previousDispatcher.D(href);
  }
  function preconnect(href, crossOrigin) {
    var request = currentRequest ? currentRequest : null;
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if ("string" === typeof href && href) {
        var bucket = "use-credentials" === crossOrigin ? "credentials" : "string" === typeof crossOrigin ? "anonymous" : "default";
        if (!resumableState.connectResources[bucket].hasOwnProperty(href)) {
          resumableState.connectResources[bucket][href] = null;
          resumableState = renderState.headers;
          var header, JSCompiler_temp;
          if (JSCompiler_temp = resumableState && 0 < resumableState.remainingCapacity) {
            JSCompiler_temp = "<" + ("" + href).replace(
              regexForHrefInLinkHeaderURLContext,
              escapeHrefForLinkHeaderURLContextReplacer
            ) + ">; rel=preconnect";
            if ("string" === typeof crossOrigin) {
              var escapedCrossOrigin = ("" + crossOrigin).replace(
                regexForLinkHeaderQuotedParamValueContext,
                escapeStringForLinkHeaderQuotedParamValueContextReplacer
              );
              JSCompiler_temp += '; crossorigin="' + escapedCrossOrigin + '"';
            }
            JSCompiler_temp = (header = JSCompiler_temp, 0 <= (resumableState.remainingCapacity -= header.length + 2));
          }
          JSCompiler_temp ? (renderState.resets.connect[bucket][href] = null, resumableState.preconnects && (resumableState.preconnects += ", "), resumableState.preconnects += header) : (bucket = [], pushLinkImpl(bucket, {
            rel: "preconnect",
            href,
            crossOrigin
          }), renderState.preconnects.add(bucket));
        }
        enqueueFlush(request);
      }
    } else previousDispatcher.C(href, crossOrigin);
  }
  function preload(href, as, options) {
    var request = currentRequest ? currentRequest : null;
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if (as && href) {
        switch (as) {
          case "image":
            if (options) {
              var imageSrcSet = options.imageSrcSet;
              var imageSizes = options.imageSizes;
              var fetchPriority = options.fetchPriority;
            }
            var key = imageSrcSet ? imageSrcSet + "\n" + (imageSizes || "") : href;
            if (resumableState.imageResources.hasOwnProperty(key)) return;
            resumableState.imageResources[key] = PRELOAD_NO_CREDS;
            resumableState = renderState.headers;
            var header;
            resumableState && 0 < resumableState.remainingCapacity && "string" !== typeof imageSrcSet && "high" === fetchPriority && (header = getPreloadAsHeader(href, as, options), 0 <= (resumableState.remainingCapacity -= header.length + 2)) ? (renderState.resets.image[key] = PRELOAD_NO_CREDS, resumableState.highImagePreloads && (resumableState.highImagePreloads += ", "), resumableState.highImagePreloads += header) : (resumableState = [], pushLinkImpl(
              resumableState,
              assign(
                { rel: "preload", href: imageSrcSet ? void 0 : href, as },
                options
              )
            ), "high" === fetchPriority ? renderState.highImagePreloads.add(resumableState) : (renderState.bulkPreloads.add(resumableState), renderState.preloads.images.set(key, resumableState)));
            break;
          case "style":
            if (resumableState.styleResources.hasOwnProperty(href)) return;
            imageSrcSet = [];
            pushLinkImpl(
              imageSrcSet,
              assign({ rel: "preload", href, as }, options)
            );
            resumableState.styleResources[href] = !options || "string" !== typeof options.crossOrigin && "string" !== typeof options.integrity ? PRELOAD_NO_CREDS : [options.crossOrigin, options.integrity];
            renderState.preloads.stylesheets.set(href, imageSrcSet);
            renderState.bulkPreloads.add(imageSrcSet);
            break;
          case "script":
            if (resumableState.scriptResources.hasOwnProperty(href)) return;
            imageSrcSet = [];
            renderState.preloads.scripts.set(href, imageSrcSet);
            renderState.bulkPreloads.add(imageSrcSet);
            pushLinkImpl(
              imageSrcSet,
              assign({ rel: "preload", href, as }, options)
            );
            resumableState.scriptResources[href] = !options || "string" !== typeof options.crossOrigin && "string" !== typeof options.integrity ? PRELOAD_NO_CREDS : [options.crossOrigin, options.integrity];
            break;
          default:
            if (resumableState.unknownResources.hasOwnProperty(as)) {
              if (imageSrcSet = resumableState.unknownResources[as], imageSrcSet.hasOwnProperty(href))
                return;
            } else
              imageSrcSet = {}, resumableState.unknownResources[as] = imageSrcSet;
            imageSrcSet[href] = PRELOAD_NO_CREDS;
            if ((resumableState = renderState.headers) && 0 < resumableState.remainingCapacity && "font" === as && (key = getPreloadAsHeader(href, as, options), 0 <= (resumableState.remainingCapacity -= key.length + 2)))
              renderState.resets.font[href] = PRELOAD_NO_CREDS, resumableState.fontPreloads && (resumableState.fontPreloads += ", "), resumableState.fontPreloads += key;
            else
              switch (resumableState = [], href = assign({ rel: "preload", href, as }, options), pushLinkImpl(resumableState, href), as) {
                case "font":
                  renderState.fontPreloads.add(resumableState);
                  break;
                default:
                  renderState.bulkPreloads.add(resumableState);
              }
        }
        enqueueFlush(request);
      }
    } else previousDispatcher.L(href, as, options);
  }
  function preloadModule(href, options) {
    var request = currentRequest ? currentRequest : null;
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if (href) {
        var as = options && "string" === typeof options.as ? options.as : "script";
        switch (as) {
          case "script":
            if (resumableState.moduleScriptResources.hasOwnProperty(href)) return;
            as = [];
            resumableState.moduleScriptResources[href] = !options || "string" !== typeof options.crossOrigin && "string" !== typeof options.integrity ? PRELOAD_NO_CREDS : [options.crossOrigin, options.integrity];
            renderState.preloads.moduleScripts.set(href, as);
            break;
          default:
            if (resumableState.moduleUnknownResources.hasOwnProperty(as)) {
              var resources = resumableState.unknownResources[as];
              if (resources.hasOwnProperty(href)) return;
            } else
              resources = {}, resumableState.moduleUnknownResources[as] = resources;
            as = [];
            resources[href] = PRELOAD_NO_CREDS;
        }
        pushLinkImpl(as, assign({ rel: "modulepreload", href }, options));
        renderState.bulkPreloads.add(as);
        enqueueFlush(request);
      }
    } else previousDispatcher.m(href, options);
  }
  function preinitStyle(href, precedence, options) {
    var request = currentRequest ? currentRequest : null;
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if (href) {
        precedence = precedence || "default";
        var styleQueue = renderState.styles.get(precedence), resourceState = resumableState.styleResources.hasOwnProperty(href) ? resumableState.styleResources[href] : void 0;
        null !== resourceState && (resumableState.styleResources[href] = null, styleQueue || (styleQueue = {
          precedence: escapeTextForBrowser(precedence),
          rules: [],
          hrefs: [],
          sheets: /* @__PURE__ */ new Map()
        }, renderState.styles.set(precedence, styleQueue)), precedence = {
          state: 0,
          props: assign(
            { rel: "stylesheet", href, "data-precedence": precedence },
            options
          )
        }, resourceState && (2 === resourceState.length && adoptPreloadCredentials(precedence.props, resourceState), (renderState = renderState.preloads.stylesheets.get(href)) && 0 < renderState.length ? renderState.length = 0 : precedence.state = 1), styleQueue.sheets.set(href, precedence), enqueueFlush(request));
      }
    } else previousDispatcher.S(href, precedence, options);
  }
  function preinitScript(src, options) {
    var request = currentRequest ? currentRequest : null;
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if (src) {
        var resourceState = resumableState.scriptResources.hasOwnProperty(src) ? resumableState.scriptResources[src] : void 0;
        null !== resourceState && (resumableState.scriptResources[src] = null, options = assign({ src, async: true }, options), resourceState && (2 === resourceState.length && adoptPreloadCredentials(options, resourceState), src = renderState.preloads.scripts.get(src)) && (src.length = 0), src = [], renderState.scripts.add(src), pushScriptImpl(src, options), enqueueFlush(request));
      }
    } else previousDispatcher.X(src, options);
  }
  function preinitModuleScript(src, options) {
    var request = currentRequest ? currentRequest : null;
    if (request) {
      var resumableState = request.resumableState, renderState = request.renderState;
      if (src) {
        var resourceState = resumableState.moduleScriptResources.hasOwnProperty(
          src
        ) ? resumableState.moduleScriptResources[src] : void 0;
        null !== resourceState && (resumableState.moduleScriptResources[src] = null, options = assign({ src, type: "module", async: true }, options), resourceState && (2 === resourceState.length && adoptPreloadCredentials(options, resourceState), src = renderState.preloads.moduleScripts.get(src)) && (src.length = 0), src = [], renderState.scripts.add(src), pushScriptImpl(src, options), enqueueFlush(request));
      }
    } else previousDispatcher.M(src, options);
  }
  function adoptPreloadCredentials(target, preloadState) {
    null == target.crossOrigin && (target.crossOrigin = preloadState[0]);
    null == target.integrity && (target.integrity = preloadState[1]);
  }
  function getPreloadAsHeader(href, as, params) {
    href = ("" + href).replace(
      regexForHrefInLinkHeaderURLContext,
      escapeHrefForLinkHeaderURLContextReplacer
    );
    as = ("" + as).replace(
      regexForLinkHeaderQuotedParamValueContext,
      escapeStringForLinkHeaderQuotedParamValueContextReplacer
    );
    as = "<" + href + '>; rel=preload; as="' + as + '"';
    for (var paramName in params)
      hasOwnProperty.call(params, paramName) && (href = params[paramName], "string" === typeof href && (as += "; " + paramName.toLowerCase() + '="' + ("" + href).replace(
        regexForLinkHeaderQuotedParamValueContext,
        escapeStringForLinkHeaderQuotedParamValueContextReplacer
      ) + '"'));
    return as;
  }
  var regexForHrefInLinkHeaderURLContext = /[<>\r\n]/g;
  function escapeHrefForLinkHeaderURLContextReplacer(match) {
    switch (match) {
      case "<":
        return "%3C";
      case ">":
        return "%3E";
      case "\n":
        return "%0A";
      case "\r":
        return "%0D";
      default:
        throw Error(
          "escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React"
        );
    }
  }
  var regexForLinkHeaderQuotedParamValueContext = /["';,\r\n]/g;
  function escapeStringForLinkHeaderQuotedParamValueContextReplacer(match) {
    switch (match) {
      case '"':
        return "%22";
      case "'":
        return "%27";
      case ";":
        return "%3B";
      case ",":
        return "%2C";
      case "\n":
        return "%0A";
      case "\r":
        return "%0D";
      default:
        throw Error(
          "escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React"
        );
    }
  }
  function hoistStyleQueueDependency(styleQueue) {
    this.styles.add(styleQueue);
  }
  function hoistStylesheetDependency(stylesheet) {
    this.stylesheets.add(stylesheet);
  }
  function hoistHoistables(parentState, childState) {
    childState.styles.forEach(hoistStyleQueueDependency, parentState);
    childState.stylesheets.forEach(hoistStylesheetDependency, parentState);
    childState.suspenseyImages && (parentState.suspenseyImages = true);
  }
  function createRenderState(resumableState, generateStaticMarkup) {
    var idPrefix = resumableState.idPrefix, bootstrapChunks = [], bootstrapScriptContent = resumableState.bootstrapScriptContent, bootstrapScripts = resumableState.bootstrapScripts, bootstrapModules = resumableState.bootstrapModules;
    void 0 !== bootstrapScriptContent && (bootstrapChunks.push("<script"), pushCompletedShellIdAttribute(bootstrapChunks, resumableState), bootstrapChunks.push(
      ">",
      ("" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer),
      "<\/script>"
    ));
    bootstrapScriptContent = idPrefix + "P:";
    var JSCompiler_object_inline_segmentPrefix_1673 = idPrefix + "S:";
    idPrefix += "B:";
    var JSCompiler_object_inline_preconnects_1687 = /* @__PURE__ */ new Set(), JSCompiler_object_inline_fontPreloads_1688 = /* @__PURE__ */ new Set(), JSCompiler_object_inline_highImagePreloads_1689 = /* @__PURE__ */ new Set(), JSCompiler_object_inline_styles_1690 = /* @__PURE__ */ new Map(), JSCompiler_object_inline_bootstrapScripts_1691 = /* @__PURE__ */ new Set(), JSCompiler_object_inline_scripts_1692 = /* @__PURE__ */ new Set(), JSCompiler_object_inline_bulkPreloads_1693 = /* @__PURE__ */ new Set(), JSCompiler_object_inline_preloads_1694 = {
      images: /* @__PURE__ */ new Map(),
      stylesheets: /* @__PURE__ */ new Map(),
      scripts: /* @__PURE__ */ new Map(),
      moduleScripts: /* @__PURE__ */ new Map()
    };
    if (void 0 !== bootstrapScripts)
      for (var i = 0; i < bootstrapScripts.length; i++) {
        var scriptConfig = bootstrapScripts[i], src, crossOrigin = void 0, integrity = void 0, props = {
          rel: "preload",
          as: "script",
          fetchPriority: "low",
          nonce: void 0
        };
        "string" === typeof scriptConfig ? props.href = src = scriptConfig : (props.href = src = scriptConfig.src, props.integrity = integrity = "string" === typeof scriptConfig.integrity ? scriptConfig.integrity : void 0, props.crossOrigin = crossOrigin = "string" === typeof scriptConfig || null == scriptConfig.crossOrigin ? void 0 : "use-credentials" === scriptConfig.crossOrigin ? "use-credentials" : "");
        scriptConfig = resumableState;
        var href = src;
        scriptConfig.scriptResources[href] = null;
        scriptConfig.moduleScriptResources[href] = null;
        scriptConfig = [];
        pushLinkImpl(scriptConfig, props);
        JSCompiler_object_inline_bootstrapScripts_1691.add(scriptConfig);
        bootstrapChunks.push('<script src="', escapeTextForBrowser(src), '"');
        "string" === typeof integrity && bootstrapChunks.push(
          ' integrity="',
          escapeTextForBrowser(integrity),
          '"'
        );
        "string" === typeof crossOrigin && bootstrapChunks.push(
          ' crossorigin="',
          escapeTextForBrowser(crossOrigin),
          '"'
        );
        pushCompletedShellIdAttribute(bootstrapChunks, resumableState);
        bootstrapChunks.push(' async=""><\/script>');
      }
    if (void 0 !== bootstrapModules)
      for (bootstrapScripts = 0; bootstrapScripts < bootstrapModules.length; bootstrapScripts++)
        props = bootstrapModules[bootstrapScripts], crossOrigin = src = void 0, integrity = {
          rel: "modulepreload",
          fetchPriority: "low",
          nonce: void 0
        }, "string" === typeof props ? integrity.href = i = props : (integrity.href = i = props.src, integrity.integrity = crossOrigin = "string" === typeof props.integrity ? props.integrity : void 0, integrity.crossOrigin = src = "string" === typeof props || null == props.crossOrigin ? void 0 : "use-credentials" === props.crossOrigin ? "use-credentials" : ""), props = resumableState, scriptConfig = i, props.scriptResources[scriptConfig] = null, props.moduleScriptResources[scriptConfig] = null, props = [], pushLinkImpl(props, integrity), JSCompiler_object_inline_bootstrapScripts_1691.add(props), bootstrapChunks.push(
          '<script type="module" src="',
          escapeTextForBrowser(i),
          '"'
        ), "string" === typeof crossOrigin && bootstrapChunks.push(
          ' integrity="',
          escapeTextForBrowser(crossOrigin),
          '"'
        ), "string" === typeof src && bootstrapChunks.push(
          ' crossorigin="',
          escapeTextForBrowser(src),
          '"'
        ), pushCompletedShellIdAttribute(bootstrapChunks, resumableState), bootstrapChunks.push(' async=""><\/script>');
    return {
      placeholderPrefix: bootstrapScriptContent,
      segmentPrefix: JSCompiler_object_inline_segmentPrefix_1673,
      boundaryPrefix: idPrefix,
      startInlineScript: "<script",
      startInlineStyle: "<style",
      preamble: { htmlChunks: null, headChunks: null, bodyChunks: null },
      externalRuntimeScript: null,
      bootstrapChunks,
      importMapChunks: [],
      onHeaders: void 0,
      headers: null,
      resets: {
        font: {},
        dns: {},
        connect: { default: {}, anonymous: {}, credentials: {} },
        image: {},
        style: {}
      },
      charsetChunks: [],
      viewportChunks: [],
      hoistableChunks: [],
      preconnects: JSCompiler_object_inline_preconnects_1687,
      fontPreloads: JSCompiler_object_inline_fontPreloads_1688,
      highImagePreloads: JSCompiler_object_inline_highImagePreloads_1689,
      styles: JSCompiler_object_inline_styles_1690,
      bootstrapScripts: JSCompiler_object_inline_bootstrapScripts_1691,
      scripts: JSCompiler_object_inline_scripts_1692,
      bulkPreloads: JSCompiler_object_inline_bulkPreloads_1693,
      preloads: JSCompiler_object_inline_preloads_1694,
      nonce: { script: void 0, style: void 0 },
      stylesToHoist: false,
      generateStaticMarkup
    };
  }
  function pushTextInstance(target, text, renderState, textEmbedded) {
    if (renderState.generateStaticMarkup)
      return target.push(escapeTextForBrowser(text)), false;
    "" === text ? target = textEmbedded : (textEmbedded && target.push("<!-- -->"), target.push(escapeTextForBrowser(text)), target = true);
    return target;
  }
  function pushSegmentFinale(target, renderState, lastPushedText, textEmbedded) {
    renderState.generateStaticMarkup || lastPushedText && textEmbedded && target.push("<!-- -->");
  }
  var bind = Function.prototype.bind, REACT_CLIENT_REFERENCE = Symbol.for("react.client.reference");
  function getComponentNameFromType(type) {
    if (null == type) return null;
    if ("function" === typeof type)
      return type.$$typeof === REACT_CLIENT_REFERENCE ? null : type.displayName || type.name || null;
    if ("string" === typeof type) return type;
    switch (type) {
      case REACT_FRAGMENT_TYPE:
        return "Fragment";
      case REACT_PROFILER_TYPE:
        return "Profiler";
      case REACT_STRICT_MODE_TYPE:
        return "StrictMode";
      case REACT_SUSPENSE_TYPE:
        return "Suspense";
      case REACT_SUSPENSE_LIST_TYPE:
        return "SuspenseList";
      case REACT_ACTIVITY_TYPE:
        return "Activity";
    }
    if ("object" === typeof type)
      switch (type.$$typeof) {
        case REACT_PORTAL_TYPE:
          return "Portal";
        case REACT_CONTEXT_TYPE:
          return type.displayName || "Context";
        case REACT_CONSUMER_TYPE:
          return (type._context.displayName || "Context") + ".Consumer";
        case REACT_FORWARD_REF_TYPE:
          var innerType = type.render;
          type = type.displayName;
          type || (type = innerType.displayName || innerType.name || "", type = "" !== type ? "ForwardRef(" + type + ")" : "ForwardRef");
          return type;
        case REACT_MEMO_TYPE:
          return innerType = type.displayName || null, null !== innerType ? innerType : getComponentNameFromType(type.type) || "Memo";
        case REACT_LAZY_TYPE:
          innerType = type._payload;
          type = type._init;
          try {
            return getComponentNameFromType(type(innerType));
          } catch (x2) {
          }
      }
    return null;
  }
  var emptyContextObject = {}, currentActiveSnapshot = null;
  function popToNearestCommonAncestor(prev, next) {
    if (prev !== next) {
      prev.context._currentValue2 = prev.parentValue;
      prev = prev.parent;
      var parentNext = next.parent;
      if (null === prev) {
        if (null !== parentNext) throw Error(formatProdErrorMessage(401));
      } else {
        if (null === parentNext) throw Error(formatProdErrorMessage(401));
        popToNearestCommonAncestor(prev, parentNext);
      }
      next.context._currentValue2 = next.value;
    }
  }
  function popAllPrevious(prev) {
    prev.context._currentValue2 = prev.parentValue;
    prev = prev.parent;
    null !== prev && popAllPrevious(prev);
  }
  function pushAllNext(next) {
    var parentNext = next.parent;
    null !== parentNext && pushAllNext(parentNext);
    next.context._currentValue2 = next.value;
  }
  function popPreviousToCommonLevel(prev, next) {
    prev.context._currentValue2 = prev.parentValue;
    prev = prev.parent;
    if (null === prev) throw Error(formatProdErrorMessage(402));
    prev.depth === next.depth ? popToNearestCommonAncestor(prev, next) : popPreviousToCommonLevel(prev, next);
  }
  function popNextToCommonLevel(prev, next) {
    var parentNext = next.parent;
    if (null === parentNext) throw Error(formatProdErrorMessage(402));
    prev.depth === parentNext.depth ? popToNearestCommonAncestor(prev, parentNext) : popNextToCommonLevel(prev, parentNext);
    next.context._currentValue2 = next.value;
  }
  function switchContext(newSnapshot) {
    var prev = currentActiveSnapshot;
    prev !== newSnapshot && (null === prev ? pushAllNext(newSnapshot) : null === newSnapshot ? popAllPrevious(prev) : prev.depth === newSnapshot.depth ? popToNearestCommonAncestor(prev, newSnapshot) : prev.depth > newSnapshot.depth ? popPreviousToCommonLevel(prev, newSnapshot) : popNextToCommonLevel(prev, newSnapshot), currentActiveSnapshot = newSnapshot);
  }
  var classComponentUpdater = {
    enqueueSetState: function(inst, payload) {
      inst = inst._reactInternals;
      null !== inst.queue && inst.queue.push(payload);
    },
    enqueueReplaceState: function(inst, payload) {
      inst = inst._reactInternals;
      inst.replace = true;
      inst.queue = [payload];
    },
    enqueueForceUpdate: function() {
    }
  }, emptyTreeContext = { id: 1, overflow: "" };
  function pushTreeContext(baseContext, totalChildren, index2) {
    var baseIdWithLeadingBit = baseContext.id;
    baseContext = baseContext.overflow;
    var baseLength = 32 - clz32(baseIdWithLeadingBit) - 1;
    baseIdWithLeadingBit &= ~(1 << baseLength);
    index2 += 1;
    var length = 32 - clz32(totalChildren) + baseLength;
    if (30 < length) {
      var numberOfOverflowBits = baseLength - baseLength % 5;
      length = (baseIdWithLeadingBit & (1 << numberOfOverflowBits) - 1).toString(32);
      baseIdWithLeadingBit >>= numberOfOverflowBits;
      baseLength -= numberOfOverflowBits;
      return {
        id: 1 << 32 - clz32(totalChildren) + baseLength | index2 << baseLength | baseIdWithLeadingBit,
        overflow: length + baseContext
      };
    }
    return {
      id: 1 << length | index2 << baseLength | baseIdWithLeadingBit,
      overflow: baseContext
    };
  }
  var clz32 = Math.clz32 ? Math.clz32 : clz32Fallback, log = Math.log, LN2 = Math.LN2;
  function clz32Fallback(x2) {
    x2 >>>= 0;
    return 0 === x2 ? 32 : 31 - (log(x2) / LN2 | 0) | 0;
  }
  function noop2() {
  }
  var SuspenseException = Error(formatProdErrorMessage(460));
  function trackUsedThenable(thenableState2, thenable, index2) {
    index2 = thenableState2[index2];
    void 0 === index2 ? thenableState2.push(thenable) : index2 !== thenable && (thenable.then(noop2, noop2), thenable = index2);
    switch (thenable.status) {
      case "fulfilled":
        return thenable.value;
      case "rejected":
        throw thenable.reason;
      default:
        "string" === typeof thenable.status ? thenable.then(noop2, noop2) : (thenableState2 = thenable, thenableState2.status = "pending", thenableState2.then(
          function(fulfilledValue) {
            if ("pending" === thenable.status) {
              var fulfilledThenable = thenable;
              fulfilledThenable.status = "fulfilled";
              fulfilledThenable.value = fulfilledValue;
            }
          },
          function(error) {
            if ("pending" === thenable.status) {
              var rejectedThenable = thenable;
              rejectedThenable.status = "rejected";
              rejectedThenable.reason = error;
            }
          }
        ));
        switch (thenable.status) {
          case "fulfilled":
            return thenable.value;
          case "rejected":
            throw thenable.reason;
        }
        suspendedThenable = thenable;
        throw SuspenseException;
    }
  }
  var suspendedThenable = null;
  function getSuspendedThenable() {
    if (null === suspendedThenable) throw Error(formatProdErrorMessage(459));
    var thenable = suspendedThenable;
    suspendedThenable = null;
    return thenable;
  }
  function is(x2, y2) {
    return x2 === y2 && (0 !== x2 || 1 / x2 === 1 / y2) || x2 !== x2 && y2 !== y2;
  }
  var objectIs = "function" === typeof Object.is ? Object.is : is, currentlyRenderingComponent = null, currentlyRenderingTask = null, currentlyRenderingRequest = null, currentlyRenderingKeyPath = null, firstWorkInProgressHook = null, workInProgressHook = null, isReRender = false, didScheduleRenderPhaseUpdate = false, localIdCounter = 0, actionStateCounter = 0, actionStateMatchingIndex = -1, thenableIndexCounter = 0, thenableState = null, renderPhaseUpdates = null, numberOfReRenders = 0;
  function resolveCurrentlyRenderingComponent() {
    if (null === currentlyRenderingComponent)
      throw Error(formatProdErrorMessage(321));
    return currentlyRenderingComponent;
  }
  function createHook() {
    if (0 < numberOfReRenders) throw Error(formatProdErrorMessage(312));
    return { memoizedState: null, queue: null, next: null };
  }
  function createWorkInProgressHook() {
    null === workInProgressHook ? null === firstWorkInProgressHook ? (isReRender = false, firstWorkInProgressHook = workInProgressHook = createHook()) : (isReRender = true, workInProgressHook = firstWorkInProgressHook) : null === workInProgressHook.next ? (isReRender = false, workInProgressHook = workInProgressHook.next = createHook()) : (isReRender = true, workInProgressHook = workInProgressHook.next);
    return workInProgressHook;
  }
  function getThenableStateAfterSuspending() {
    var state = thenableState;
    thenableState = null;
    return state;
  }
  function resetHooksState() {
    currentlyRenderingKeyPath = currentlyRenderingRequest = currentlyRenderingTask = currentlyRenderingComponent = null;
    didScheduleRenderPhaseUpdate = false;
    firstWorkInProgressHook = null;
    numberOfReRenders = 0;
    workInProgressHook = renderPhaseUpdates = null;
  }
  function basicStateReducer(state, action2) {
    return "function" === typeof action2 ? action2(state) : action2;
  }
  function useReducer(reducer, initialArg, init) {
    currentlyRenderingComponent = resolveCurrentlyRenderingComponent();
    workInProgressHook = createWorkInProgressHook();
    if (isReRender) {
      var queue = workInProgressHook.queue;
      initialArg = queue.dispatch;
      if (null !== renderPhaseUpdates && (init = renderPhaseUpdates.get(queue), void 0 !== init)) {
        renderPhaseUpdates.delete(queue);
        queue = workInProgressHook.memoizedState;
        do
          queue = reducer(queue, init.action), init = init.next;
        while (null !== init);
        workInProgressHook.memoizedState = queue;
        return [queue, initialArg];
      }
      return [workInProgressHook.memoizedState, initialArg];
    }
    reducer = reducer === basicStateReducer ? "function" === typeof initialArg ? initialArg() : initialArg : void 0 !== init ? init(initialArg) : initialArg;
    workInProgressHook.memoizedState = reducer;
    reducer = workInProgressHook.queue = { last: null, dispatch: null };
    reducer = reducer.dispatch = dispatchAction.bind(
      null,
      currentlyRenderingComponent,
      reducer
    );
    return [workInProgressHook.memoizedState, reducer];
  }
  function useMemo(nextCreate, deps) {
    currentlyRenderingComponent = resolveCurrentlyRenderingComponent();
    workInProgressHook = createWorkInProgressHook();
    deps = void 0 === deps ? null : deps;
    if (null !== workInProgressHook) {
      var prevState = workInProgressHook.memoizedState;
      if (null !== prevState && null !== deps) {
        var prevDeps = prevState[1];
        a: if (null === prevDeps) prevDeps = false;
        else {
          for (var i = 0; i < prevDeps.length && i < deps.length; i++)
            if (!objectIs(deps[i], prevDeps[i])) {
              prevDeps = false;
              break a;
            }
          prevDeps = true;
        }
        if (prevDeps) return prevState[0];
      }
    }
    nextCreate = nextCreate();
    workInProgressHook.memoizedState = [nextCreate, deps];
    return nextCreate;
  }
  function dispatchAction(componentIdentity, queue, action2) {
    if (25 <= numberOfReRenders) throw Error(formatProdErrorMessage(301));
    if (componentIdentity === currentlyRenderingComponent)
      if (didScheduleRenderPhaseUpdate = true, componentIdentity = { action: action2, next: null }, null === renderPhaseUpdates && (renderPhaseUpdates = /* @__PURE__ */ new Map()), action2 = renderPhaseUpdates.get(queue), void 0 === action2)
        renderPhaseUpdates.set(queue, componentIdentity);
      else {
        for (queue = action2; null !== queue.next; ) queue = queue.next;
        queue.next = componentIdentity;
      }
  }
  function throwOnUseEffectEventCall() {
    throw Error(formatProdErrorMessage(440));
  }
  function unsupportedStartTransition() {
    throw Error(formatProdErrorMessage(394));
  }
  function unsupportedSetOptimisticState() {
    throw Error(formatProdErrorMessage(479));
  }
  function useActionState(action2, initialState, permalink) {
    resolveCurrentlyRenderingComponent();
    var actionStateHookIndex = actionStateCounter++, request = currentlyRenderingRequest;
    if ("function" === typeof action2.$$FORM_ACTION) {
      var nextPostbackStateKey = null, componentKeyPath = currentlyRenderingKeyPath;
      request = request.formState;
      var isSignatureEqual = action2.$$IS_SIGNATURE_EQUAL;
      if (null !== request && "function" === typeof isSignatureEqual) {
        var postbackKey = request[1];
        isSignatureEqual.call(action2, request[2], request[3]) && (nextPostbackStateKey = void 0 !== permalink ? "p" + permalink : "k" + murmurhash3_32_gc(
          JSON.stringify([componentKeyPath, null, actionStateHookIndex]),
          0
        ), postbackKey === nextPostbackStateKey && (actionStateMatchingIndex = actionStateHookIndex, initialState = request[0]));
      }
      var boundAction = action2.bind(null, initialState);
      action2 = function(payload) {
        boundAction(payload);
      };
      "function" === typeof boundAction.$$FORM_ACTION && (action2.$$FORM_ACTION = function(prefix2) {
        prefix2 = boundAction.$$FORM_ACTION(prefix2);
        void 0 !== permalink && (permalink += "", prefix2.action = permalink);
        var formData = prefix2.data;
        formData && (null === nextPostbackStateKey && (nextPostbackStateKey = void 0 !== permalink ? "p" + permalink : "k" + murmurhash3_32_gc(
          JSON.stringify([
            componentKeyPath,
            null,
            actionStateHookIndex
          ]),
          0
        )), formData.append("$ACTION_KEY", nextPostbackStateKey));
        return prefix2;
      });
      return [initialState, action2, false];
    }
    var boundAction$22 = action2.bind(null, initialState);
    return [
      initialState,
      function(payload) {
        boundAction$22(payload);
      },
      false
    ];
  }
  function unwrapThenable(thenable) {
    var index2 = thenableIndexCounter;
    thenableIndexCounter += 1;
    null === thenableState && (thenableState = []);
    return trackUsedThenable(thenableState, thenable, index2);
  }
  function unsupportedRefresh() {
    throw Error(formatProdErrorMessage(393));
  }
  var HooksDispatcher = {
    readContext: function(context) {
      return context._currentValue2;
    },
    use: function(usable) {
      if (null !== usable && "object" === typeof usable) {
        if ("function" === typeof usable.then) return unwrapThenable(usable);
        if (usable.$$typeof === REACT_CONTEXT_TYPE)
          return usable._currentValue2;
      }
      throw Error(formatProdErrorMessage(438, String(usable)));
    },
    useContext: function(context) {
      resolveCurrentlyRenderingComponent();
      return context._currentValue2;
    },
    useMemo,
    useReducer,
    useRef: function(initialValue) {
      currentlyRenderingComponent = resolveCurrentlyRenderingComponent();
      workInProgressHook = createWorkInProgressHook();
      var previousRef = workInProgressHook.memoizedState;
      return null === previousRef ? (initialValue = { current: initialValue }, workInProgressHook.memoizedState = initialValue) : previousRef;
    },
    useState: function(initialState) {
      return useReducer(basicStateReducer, initialState);
    },
    useInsertionEffect: noop2,
    useLayoutEffect: noop2,
    useCallback: function(callback, deps) {
      return useMemo(function() {
        return callback;
      }, deps);
    },
    useImperativeHandle: noop2,
    useEffect: noop2,
    useDebugValue: noop2,
    useDeferredValue: function(value, initialValue) {
      resolveCurrentlyRenderingComponent();
      return void 0 !== initialValue ? initialValue : value;
    },
    useTransition: function() {
      resolveCurrentlyRenderingComponent();
      return [false, unsupportedStartTransition];
    },
    useId: function() {
      var JSCompiler_inline_result = currentlyRenderingTask.treeContext;
      var overflow = JSCompiler_inline_result.overflow;
      JSCompiler_inline_result = JSCompiler_inline_result.id;
      JSCompiler_inline_result = (JSCompiler_inline_result & ~(1 << 32 - clz32(JSCompiler_inline_result) - 1)).toString(32) + overflow;
      var resumableState = currentResumableState;
      if (null === resumableState) throw Error(formatProdErrorMessage(404));
      overflow = localIdCounter++;
      JSCompiler_inline_result = "_" + resumableState.idPrefix + "R_" + JSCompiler_inline_result;
      0 < overflow && (JSCompiler_inline_result += "H" + overflow.toString(32));
      return JSCompiler_inline_result + "_";
    },
    useSyncExternalStore: function(subscribe, getSnapshot, getServerSnapshot) {
      if (void 0 === getServerSnapshot)
        throw Error(formatProdErrorMessage(407));
      return getServerSnapshot();
    },
    useOptimistic: function(passthrough) {
      resolveCurrentlyRenderingComponent();
      return [passthrough, unsupportedSetOptimisticState];
    },
    useActionState,
    useFormState: useActionState,
    useHostTransitionStatus: function() {
      resolveCurrentlyRenderingComponent();
      return sharedNotPendingObject;
    },
    useMemoCache: function(size) {
      for (var data = Array(size), i = 0; i < size; i++)
        data[i] = REACT_MEMO_CACHE_SENTINEL;
      return data;
    },
    useCacheRefresh: function() {
      return unsupportedRefresh;
    },
    useEffectEvent: function() {
      return throwOnUseEffectEventCall;
    }
  }, currentResumableState = null, DefaultAsyncDispatcher = {
    getCacheForType: function() {
      throw Error(formatProdErrorMessage(248));
    },
    cacheSignal: function() {
      throw Error(formatProdErrorMessage(248));
    }
  }, prefix, suffix;
  function describeBuiltInComponentFrame(name) {
    if (void 0 === prefix)
      try {
        throw Error();
      } catch (x2) {
        var match = x2.stack.trim().match(/\n( *(at )?)/);
        prefix = match && match[1] || "";
        suffix = -1 < x2.stack.indexOf("\n    at") ? " (<anonymous>)" : -1 < x2.stack.indexOf("@") ? "@unknown:0:0" : "";
      }
    return "\n" + prefix + name + suffix;
  }
  var reentry = false;
  function describeNativeComponentFrame(fn, construct) {
    if (!fn || reentry) return "";
    reentry = true;
    var previousPrepareStackTrace = Error.prepareStackTrace;
    Error.prepareStackTrace = void 0;
    try {
      var RunInRootFrame = {
        DetermineComponentFrameRoot: function() {
          try {
            if (construct) {
              var Fake = function() {
                throw Error();
              };
              Object.defineProperty(Fake.prototype, "props", {
                set: function() {
                  throw Error();
                }
              });
              if ("object" === typeof Reflect && Reflect.construct) {
                try {
                  Reflect.construct(Fake, []);
                } catch (x2) {
                  var control = x2;
                }
                Reflect.construct(fn, [], Fake);
              } else {
                try {
                  Fake.call();
                } catch (x$24) {
                  control = x$24;
                }
                fn.call(Fake.prototype);
              }
            } else {
              try {
                throw Error();
              } catch (x$25) {
                control = x$25;
              }
              (Fake = fn()) && "function" === typeof Fake.catch && Fake.catch(function() {
              });
            }
          } catch (sample) {
            if (sample && control && "string" === typeof sample.stack)
              return [sample.stack, control.stack];
          }
          return [null, null];
        }
      };
      RunInRootFrame.DetermineComponentFrameRoot.displayName = "DetermineComponentFrameRoot";
      var namePropDescriptor = Object.getOwnPropertyDescriptor(
        RunInRootFrame.DetermineComponentFrameRoot,
        "name"
      );
      namePropDescriptor && namePropDescriptor.configurable && Object.defineProperty(
        RunInRootFrame.DetermineComponentFrameRoot,
        "name",
        { value: "DetermineComponentFrameRoot" }
      );
      var _RunInRootFrame$Deter = RunInRootFrame.DetermineComponentFrameRoot(), sampleStack = _RunInRootFrame$Deter[0], controlStack = _RunInRootFrame$Deter[1];
      if (sampleStack && controlStack) {
        var sampleLines = sampleStack.split("\n"), controlLines = controlStack.split("\n");
        for (namePropDescriptor = RunInRootFrame = 0; RunInRootFrame < sampleLines.length && !sampleLines[RunInRootFrame].includes("DetermineComponentFrameRoot"); )
          RunInRootFrame++;
        for (; namePropDescriptor < controlLines.length && !controlLines[namePropDescriptor].includes(
          "DetermineComponentFrameRoot"
        ); )
          namePropDescriptor++;
        if (RunInRootFrame === sampleLines.length || namePropDescriptor === controlLines.length)
          for (RunInRootFrame = sampleLines.length - 1, namePropDescriptor = controlLines.length - 1; 1 <= RunInRootFrame && 0 <= namePropDescriptor && sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]; )
            namePropDescriptor--;
        for (; 1 <= RunInRootFrame && 0 <= namePropDescriptor; RunInRootFrame--, namePropDescriptor--)
          if (sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]) {
            if (1 !== RunInRootFrame || 1 !== namePropDescriptor) {
              do
                if (RunInRootFrame--, namePropDescriptor--, 0 > namePropDescriptor || sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]) {
                  var frame2 = "\n" + sampleLines[RunInRootFrame].replace(" at new ", " at ");
                  fn.displayName && frame2.includes("<anonymous>") && (frame2 = frame2.replace("<anonymous>", fn.displayName));
                  return frame2;
                }
              while (1 <= RunInRootFrame && 0 <= namePropDescriptor);
            }
            break;
          }
      }
    } finally {
      reentry = false, Error.prepareStackTrace = previousPrepareStackTrace;
    }
    return (previousPrepareStackTrace = fn ? fn.displayName || fn.name : "") ? describeBuiltInComponentFrame(previousPrepareStackTrace) : "";
  }
  function describeComponentStackByType(type) {
    if ("string" === typeof type) return describeBuiltInComponentFrame(type);
    if ("function" === typeof type)
      return type.prototype && type.prototype.isReactComponent ? describeNativeComponentFrame(type, true) : describeNativeComponentFrame(type, false);
    if ("object" === typeof type && null !== type) {
      switch (type.$$typeof) {
        case REACT_FORWARD_REF_TYPE:
          return describeNativeComponentFrame(type.render, false);
        case REACT_MEMO_TYPE:
          return describeNativeComponentFrame(type.type, false);
        case REACT_LAZY_TYPE:
          var lazyComponent = type, payload = lazyComponent._payload;
          lazyComponent = lazyComponent._init;
          try {
            type = lazyComponent(payload);
          } catch (x2) {
            return describeBuiltInComponentFrame("Lazy");
          }
          return describeComponentStackByType(type);
      }
      if ("string" === typeof type.name) {
        a: {
          payload = type.name;
          lazyComponent = type.env;
          var location = type.debugLocation;
          if (null != location && (type = Error.prepareStackTrace, Error.prepareStackTrace = void 0, location = location.stack, Error.prepareStackTrace = type, location.startsWith("Error: react-stack-top-frame\n") && (location = location.slice(29)), type = location.indexOf("\n"), -1 !== type && (location = location.slice(type + 1)), type = location.indexOf("react_stack_bottom_frame"), -1 !== type && (type = location.lastIndexOf("\n", type)), type = -1 !== type ? location = location.slice(0, type) : "", location = type.lastIndexOf("\n"), type = -1 === location ? type : type.slice(location + 1), -1 !== type.indexOf(payload))) {
            payload = "\n" + type;
            break a;
          }
          payload = describeBuiltInComponentFrame(
            payload + (lazyComponent ? " [" + lazyComponent + "]" : "")
          );
        }
        return payload;
      }
    }
    switch (type) {
      case REACT_SUSPENSE_LIST_TYPE:
        return describeBuiltInComponentFrame("SuspenseList");
      case REACT_SUSPENSE_TYPE:
        return describeBuiltInComponentFrame("Suspense");
    }
    return "";
  }
  function isEligibleForOutlining(request, boundary) {
    return (500 < boundary.byteSize || false) && null === boundary.contentPreamble;
  }
  function defaultErrorHandler(error) {
    if ("object" === typeof error && null !== error && "string" === typeof error.environmentName) {
      var JSCompiler_inline_result = error.environmentName;
      error = [error].slice(0);
      "string" === typeof error[0] ? error.splice(
        0,
        1,
        "[%s] " + error[0],
        " " + JSCompiler_inline_result + " "
      ) : error.splice(0, 0, "[%s]", " " + JSCompiler_inline_result + " ");
      error.unshift(console);
      JSCompiler_inline_result = bind.apply(console.error, error);
      JSCompiler_inline_result();
    } else console.error(error);
    return null;
  }
  function RequestInstance(resumableState, renderState, rootFormatContext, progressiveChunkSize, onError2, onAllReady, onShellReady, onShellError, onFatalError, onPostpone, formState) {
    var abortSet = /* @__PURE__ */ new Set();
    this.destination = null;
    this.flushScheduled = false;
    this.resumableState = resumableState;
    this.renderState = renderState;
    this.rootFormatContext = rootFormatContext;
    this.progressiveChunkSize = void 0 === progressiveChunkSize ? 12800 : progressiveChunkSize;
    this.status = 10;
    this.fatalError = null;
    this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;
    this.completedPreambleSegments = this.completedRootSegment = null;
    this.byteSize = 0;
    this.abortableTasks = abortSet;
    this.pingedTasks = [];
    this.clientRenderedBoundaries = [];
    this.completedBoundaries = [];
    this.partialBoundaries = [];
    this.trackedPostpones = null;
    this.onError = void 0 === onError2 ? defaultErrorHandler : onError2;
    this.onPostpone = void 0 === onPostpone ? noop2 : onPostpone;
    this.onAllReady = void 0 === onAllReady ? noop2 : onAllReady;
    this.onShellReady = void 0 === onShellReady ? noop2 : onShellReady;
    this.onShellError = void 0 === onShellError ? noop2 : onShellError;
    this.onFatalError = void 0 === onFatalError ? noop2 : onFatalError;
    this.formState = void 0 === formState ? null : formState;
  }
  function createRequest(children, resumableState, renderState, rootFormatContext, progressiveChunkSize, onError2, onAllReady, onShellReady, onShellError, onFatalError, onPostpone, formState) {
    resumableState = new RequestInstance(
      resumableState,
      renderState,
      rootFormatContext,
      progressiveChunkSize,
      onError2,
      onAllReady,
      onShellReady,
      onShellError,
      onFatalError,
      onPostpone,
      formState
    );
    renderState = createPendingSegment(
      resumableState,
      0,
      null,
      rootFormatContext,
      false,
      false
    );
    renderState.parentFlushed = true;
    children = createRenderTask(
      resumableState,
      null,
      children,
      -1,
      null,
      renderState,
      null,
      null,
      resumableState.abortableTasks,
      null,
      rootFormatContext,
      null,
      emptyTreeContext,
      null,
      null
    );
    pushComponentStack(children);
    resumableState.pingedTasks.push(children);
    return resumableState;
  }
  var currentRequest = null;
  function pingTask(request, task) {
    request.pingedTasks.push(task);
    1 === request.pingedTasks.length && (request.flushScheduled = null !== request.destination, performWork(request));
  }
  function createSuspenseBoundary(request, row, fallbackAbortableTasks, contentPreamble, fallbackPreamble) {
    fallbackAbortableTasks = {
      status: 0,
      rootSegmentID: -1,
      parentFlushed: false,
      pendingTasks: 0,
      row,
      completedSegments: [],
      byteSize: 0,
      fallbackAbortableTasks,
      errorDigest: null,
      contentState: createHoistableState(),
      fallbackState: createHoistableState(),
      contentPreamble,
      fallbackPreamble,
      trackedContentKeyPath: null,
      trackedFallbackNode: null
    };
    null !== row && (row.pendingTasks++, contentPreamble = row.boundaries, null !== contentPreamble && (request.allPendingTasks++, fallbackAbortableTasks.pendingTasks++, contentPreamble.push(fallbackAbortableTasks)), request = row.inheritedHoistables, null !== request && hoistHoistables(fallbackAbortableTasks.contentState, request));
    return fallbackAbortableTasks;
  }
  function createRenderTask(request, thenableState2, node, childIndex, blockedBoundary, blockedSegment, blockedPreamble, hoistableState, abortSet, keyPath, formatContext, context, treeContext, row, componentStack) {
    request.allPendingTasks++;
    null === blockedBoundary ? request.pendingRootTasks++ : blockedBoundary.pendingTasks++;
    null !== row && row.pendingTasks++;
    var task = {
      replay: null,
      node,
      childIndex,
      ping: function() {
        return pingTask(request, task);
      },
      blockedBoundary,
      blockedSegment,
      blockedPreamble,
      hoistableState,
      abortSet,
      keyPath,
      formatContext,
      context,
      treeContext,
      row,
      componentStack,
      thenableState: thenableState2
    };
    abortSet.add(task);
    return task;
  }
  function createReplayTask(request, thenableState2, replay, node, childIndex, blockedBoundary, hoistableState, abortSet, keyPath, formatContext, context, treeContext, row, componentStack) {
    request.allPendingTasks++;
    null === blockedBoundary ? request.pendingRootTasks++ : blockedBoundary.pendingTasks++;
    null !== row && row.pendingTasks++;
    replay.pendingTasks++;
    var task = {
      replay,
      node,
      childIndex,
      ping: function() {
        return pingTask(request, task);
      },
      blockedBoundary,
      blockedSegment: null,
      blockedPreamble: null,
      hoistableState,
      abortSet,
      keyPath,
      formatContext,
      context,
      treeContext,
      row,
      componentStack,
      thenableState: thenableState2
    };
    abortSet.add(task);
    return task;
  }
  function createPendingSegment(request, index2, boundary, parentFormatContext, lastPushedText, textEmbedded) {
    return {
      status: 0,
      parentFlushed: false,
      id: -1,
      index: index2,
      chunks: [],
      children: [],
      preambleChildren: [],
      parentFormatContext,
      boundary,
      lastPushedText,
      textEmbedded
    };
  }
  function pushComponentStack(task) {
    var node = task.node;
    if ("object" === typeof node && null !== node)
      switch (node.$$typeof) {
        case REACT_ELEMENT_TYPE:
          task.componentStack = { parent: task.componentStack, type: node.type };
      }
  }
  function replaceSuspenseComponentStackWithSuspenseFallbackStack(componentStack) {
    return null === componentStack ? null : { parent: componentStack.parent, type: "Suspense Fallback" };
  }
  function getThrownInfo(node$jscomp$0) {
    var errorInfo = {};
    node$jscomp$0 && Object.defineProperty(errorInfo, "componentStack", {
      configurable: true,
      enumerable: true,
      get: function() {
        try {
          var info = "", node = node$jscomp$0;
          do
            info += describeComponentStackByType(node.type), node = node.parent;
          while (node);
          var JSCompiler_inline_result = info;
        } catch (x2) {
          JSCompiler_inline_result = "\nError generating stack: " + x2.message + "\n" + x2.stack;
        }
        Object.defineProperty(errorInfo, "componentStack", {
          value: JSCompiler_inline_result
        });
        return JSCompiler_inline_result;
      }
    });
    return errorInfo;
  }
  function logRecoverableError(request, error, errorInfo) {
    request = request.onError;
    error = request(error, errorInfo);
    if (null == error || "string" === typeof error) return error;
  }
  function fatalError(request, error) {
    var onShellError = request.onShellError, onFatalError = request.onFatalError;
    onShellError(error);
    onFatalError(error);
    null !== request.destination ? (request.status = 14, request.destination.destroy(error)) : (request.status = 13, request.fatalError = error);
  }
  function finishSuspenseListRow(request, row) {
    unblockSuspenseListRow(request, row.next, row.hoistables);
  }
  function unblockSuspenseListRow(request, unblockedRow, inheritedHoistables) {
    for (; null !== unblockedRow; ) {
      null !== inheritedHoistables && (hoistHoistables(unblockedRow.hoistables, inheritedHoistables), unblockedRow.inheritedHoistables = inheritedHoistables);
      var unblockedBoundaries = unblockedRow.boundaries;
      if (null !== unblockedBoundaries) {
        unblockedRow.boundaries = null;
        for (var i = 0; i < unblockedBoundaries.length; i++) {
          var unblockedBoundary = unblockedBoundaries[i];
          null !== inheritedHoistables && hoistHoistables(unblockedBoundary.contentState, inheritedHoistables);
          finishedTask(request, unblockedBoundary, null, null);
        }
      }
      unblockedRow.pendingTasks--;
      if (0 < unblockedRow.pendingTasks) break;
      inheritedHoistables = unblockedRow.hoistables;
      unblockedRow = unblockedRow.next;
    }
  }
  function tryToResolveTogetherRow(request, togetherRow) {
    var boundaries = togetherRow.boundaries;
    if (null !== boundaries && togetherRow.pendingTasks === boundaries.length) {
      for (var allCompleteAndInlinable = true, i = 0; i < boundaries.length; i++) {
        var rowBoundary = boundaries[i];
        if (1 !== rowBoundary.pendingTasks || rowBoundary.parentFlushed || isEligibleForOutlining(request, rowBoundary)) {
          allCompleteAndInlinable = false;
          break;
        }
      }
      allCompleteAndInlinable && unblockSuspenseListRow(request, togetherRow, togetherRow.hoistables);
    }
  }
  function createSuspenseListRow(previousRow) {
    var newRow = {
      pendingTasks: 1,
      boundaries: null,
      hoistables: createHoistableState(),
      inheritedHoistables: null,
      together: false,
      next: null
    };
    null !== previousRow && 0 < previousRow.pendingTasks && (newRow.pendingTasks++, newRow.boundaries = [], previousRow.next = newRow);
    return newRow;
  }
  function renderSuspenseListRows(request, task, keyPath, rows, revealOrder) {
    var prevKeyPath = task.keyPath, prevTreeContext = task.treeContext, prevRow = task.row;
    task.keyPath = keyPath;
    keyPath = rows.length;
    var previousSuspenseListRow = null;
    if (null !== task.replay) {
      var resumeSlots = task.replay.slots;
      if (null !== resumeSlots && "object" === typeof resumeSlots)
        for (var n = 0; n < keyPath; n++) {
          var i = "backwards" !== revealOrder && "unstable_legacy-backwards" !== revealOrder ? n : keyPath - 1 - n, node = rows[i];
          task.row = previousSuspenseListRow = createSuspenseListRow(
            previousSuspenseListRow
          );
          task.treeContext = pushTreeContext(prevTreeContext, keyPath, i);
          var resumeSegmentID = resumeSlots[i];
          "number" === typeof resumeSegmentID ? (resumeNode(request, task, resumeSegmentID, node, i), delete resumeSlots[i]) : renderNode(request, task, node, i);
          0 === --previousSuspenseListRow.pendingTasks && finishSuspenseListRow(request, previousSuspenseListRow);
        }
      else
        for (resumeSlots = 0; resumeSlots < keyPath; resumeSlots++)
          n = "backwards" !== revealOrder && "unstable_legacy-backwards" !== revealOrder ? resumeSlots : keyPath - 1 - resumeSlots, i = rows[n], task.row = previousSuspenseListRow = createSuspenseListRow(previousSuspenseListRow), task.treeContext = pushTreeContext(prevTreeContext, keyPath, n), renderNode(request, task, i, n), 0 === --previousSuspenseListRow.pendingTasks && finishSuspenseListRow(request, previousSuspenseListRow);
    } else if ("backwards" !== revealOrder && "unstable_legacy-backwards" !== revealOrder)
      for (revealOrder = 0; revealOrder < keyPath; revealOrder++)
        resumeSlots = rows[revealOrder], task.row = previousSuspenseListRow = createSuspenseListRow(previousSuspenseListRow), task.treeContext = pushTreeContext(
          prevTreeContext,
          keyPath,
          revealOrder
        ), renderNode(request, task, resumeSlots, revealOrder), 0 === --previousSuspenseListRow.pendingTasks && finishSuspenseListRow(request, previousSuspenseListRow);
    else {
      revealOrder = task.blockedSegment;
      resumeSlots = revealOrder.children.length;
      n = revealOrder.chunks.length;
      for (i = keyPath - 1; 0 <= i; i--) {
        node = rows[i];
        task.row = previousSuspenseListRow = createSuspenseListRow(
          previousSuspenseListRow
        );
        task.treeContext = pushTreeContext(prevTreeContext, keyPath, i);
        resumeSegmentID = createPendingSegment(
          request,
          n,
          null,
          task.formatContext,
          0 === i ? revealOrder.lastPushedText : true,
          true
        );
        revealOrder.children.splice(resumeSlots, 0, resumeSegmentID);
        task.blockedSegment = resumeSegmentID;
        try {
          renderNode(request, task, node, i), pushSegmentFinale(
            resumeSegmentID.chunks,
            request.renderState,
            resumeSegmentID.lastPushedText,
            resumeSegmentID.textEmbedded
          ), resumeSegmentID.status = 1, 0 === --previousSuspenseListRow.pendingTasks && finishSuspenseListRow(request, previousSuspenseListRow);
        } catch (thrownValue) {
          throw resumeSegmentID.status = 12 === request.status ? 3 : 4, thrownValue;
        }
      }
      task.blockedSegment = revealOrder;
      revealOrder.lastPushedText = false;
    }
    null !== prevRow && null !== previousSuspenseListRow && 0 < previousSuspenseListRow.pendingTasks && (prevRow.pendingTasks++, previousSuspenseListRow.next = prevRow);
    task.treeContext = prevTreeContext;
    task.row = prevRow;
    task.keyPath = prevKeyPath;
  }
  function renderWithHooks(request, task, keyPath, Component, props, secondArg) {
    var prevThenableState = task.thenableState;
    task.thenableState = null;
    currentlyRenderingComponent = {};
    currentlyRenderingTask = task;
    currentlyRenderingRequest = request;
    currentlyRenderingKeyPath = keyPath;
    actionStateCounter = localIdCounter = 0;
    actionStateMatchingIndex = -1;
    thenableIndexCounter = 0;
    thenableState = prevThenableState;
    for (request = Component(props, secondArg); didScheduleRenderPhaseUpdate; )
      didScheduleRenderPhaseUpdate = false, actionStateCounter = localIdCounter = 0, actionStateMatchingIndex = -1, thenableIndexCounter = 0, numberOfReRenders += 1, workInProgressHook = null, request = Component(props, secondArg);
    resetHooksState();
    return request;
  }
  function finishFunctionComponent(request, task, keyPath, children, hasId, actionStateCount, actionStateMatchingIndex2) {
    var didEmitActionStateMarkers = false;
    if (0 !== actionStateCount && null !== request.formState) {
      var segment = task.blockedSegment;
      if (null !== segment) {
        didEmitActionStateMarkers = true;
        segment = segment.chunks;
        for (var i = 0; i < actionStateCount; i++)
          i === actionStateMatchingIndex2 ? segment.push("<!--F!-->") : segment.push("<!--F-->");
      }
    }
    actionStateCount = task.keyPath;
    task.keyPath = keyPath;
    hasId ? (keyPath = task.treeContext, task.treeContext = pushTreeContext(keyPath, 1, 0), renderNode(request, task, children, -1), task.treeContext = keyPath) : didEmitActionStateMarkers ? renderNode(request, task, children, -1) : renderNodeDestructive(request, task, children, -1);
    task.keyPath = actionStateCount;
  }
  function renderElement(request, task, keyPath, type, props, ref) {
    if ("function" === typeof type)
      if (type.prototype && type.prototype.isReactComponent) {
        var newProps = props;
        if ("ref" in props) {
          newProps = {};
          for (var propName in props)
            "ref" !== propName && (newProps[propName] = props[propName]);
        }
        var defaultProps = type.defaultProps;
        if (defaultProps) {
          newProps === props && (newProps = assign({}, newProps, props));
          for (var propName$43 in defaultProps)
            void 0 === newProps[propName$43] && (newProps[propName$43] = defaultProps[propName$43]);
        }
        props = newProps;
        newProps = emptyContextObject;
        defaultProps = type.contextType;
        "object" === typeof defaultProps && null !== defaultProps && (newProps = defaultProps._currentValue2);
        newProps = new type(props, newProps);
        var initialState = void 0 !== newProps.state ? newProps.state : null;
        newProps.updater = classComponentUpdater;
        newProps.props = props;
        newProps.state = initialState;
        defaultProps = { queue: [], replace: false };
        newProps._reactInternals = defaultProps;
        ref = type.contextType;
        newProps.context = "object" === typeof ref && null !== ref ? ref._currentValue2 : emptyContextObject;
        ref = type.getDerivedStateFromProps;
        "function" === typeof ref && (ref = ref(props, initialState), initialState = null === ref || void 0 === ref ? initialState : assign({}, initialState, ref), newProps.state = initialState);
        if ("function" !== typeof type.getDerivedStateFromProps && "function" !== typeof newProps.getSnapshotBeforeUpdate && ("function" === typeof newProps.UNSAFE_componentWillMount || "function" === typeof newProps.componentWillMount))
          if (type = newProps.state, "function" === typeof newProps.componentWillMount && newProps.componentWillMount(), "function" === typeof newProps.UNSAFE_componentWillMount && newProps.UNSAFE_componentWillMount(), type !== newProps.state && classComponentUpdater.enqueueReplaceState(
            newProps,
            newProps.state,
            null
          ), null !== defaultProps.queue && 0 < defaultProps.queue.length)
            if (type = defaultProps.queue, ref = defaultProps.replace, defaultProps.queue = null, defaultProps.replace = false, ref && 1 === type.length)
              newProps.state = type[0];
            else {
              defaultProps = ref ? type[0] : newProps.state;
              initialState = true;
              for (ref = ref ? 1 : 0; ref < type.length; ref++)
                propName$43 = type[ref], propName$43 = "function" === typeof propName$43 ? propName$43.call(newProps, defaultProps, props, void 0) : propName$43, null != propName$43 && (initialState ? (initialState = false, defaultProps = assign({}, defaultProps, propName$43)) : assign(defaultProps, propName$43));
              newProps.state = defaultProps;
            }
          else defaultProps.queue = null;
        type = newProps.render();
        if (12 === request.status) throw null;
        props = task.keyPath;
        task.keyPath = keyPath;
        renderNodeDestructive(request, task, type, -1);
        task.keyPath = props;
      } else {
        type = renderWithHooks(request, task, keyPath, type, props, void 0);
        if (12 === request.status) throw null;
        finishFunctionComponent(
          request,
          task,
          keyPath,
          type,
          0 !== localIdCounter,
          actionStateCounter,
          actionStateMatchingIndex
        );
      }
    else if ("string" === typeof type)
      if (newProps = task.blockedSegment, null === newProps)
        newProps = props.children, defaultProps = task.formatContext, initialState = task.keyPath, task.formatContext = getChildFormatContext(defaultProps, type, props), task.keyPath = keyPath, renderNode(request, task, newProps, -1), task.formatContext = defaultProps, task.keyPath = initialState;
      else {
        initialState = pushStartInstance(
          newProps.chunks,
          type,
          props,
          request.resumableState,
          request.renderState,
          task.blockedPreamble,
          task.hoistableState,
          task.formatContext,
          newProps.lastPushedText
        );
        newProps.lastPushedText = false;
        defaultProps = task.formatContext;
        ref = task.keyPath;
        task.keyPath = keyPath;
        if (3 === (task.formatContext = getChildFormatContext(defaultProps, type, props)).insertionMode) {
          keyPath = createPendingSegment(
            request,
            0,
            null,
            task.formatContext,
            false,
            false
          );
          newProps.preambleChildren.push(keyPath);
          task.blockedSegment = keyPath;
          try {
            keyPath.status = 6, renderNode(request, task, initialState, -1), pushSegmentFinale(
              keyPath.chunks,
              request.renderState,
              keyPath.lastPushedText,
              keyPath.textEmbedded
            ), keyPath.status = 1;
          } finally {
            task.blockedSegment = newProps;
          }
        } else renderNode(request, task, initialState, -1);
        task.formatContext = defaultProps;
        task.keyPath = ref;
        a: {
          task = newProps.chunks;
          request = request.resumableState;
          switch (type) {
            case "title":
            case "style":
            case "script":
            case "area":
            case "base":
            case "br":
            case "col":
            case "embed":
            case "hr":
            case "img":
            case "input":
            case "keygen":
            case "link":
            case "meta":
            case "param":
            case "source":
            case "track":
            case "wbr":
              break a;
            case "body":
              if (1 >= defaultProps.insertionMode) {
                request.hasBody = true;
                break a;
              }
              break;
            case "html":
              if (0 === defaultProps.insertionMode) {
                request.hasHtml = true;
                break a;
              }
              break;
            case "head":
              if (1 >= defaultProps.insertionMode) break a;
          }
          task.push(endChunkForTag(type));
        }
        newProps.lastPushedText = false;
      }
    else {
      switch (type) {
        case REACT_LEGACY_HIDDEN_TYPE:
        case REACT_STRICT_MODE_TYPE:
        case REACT_PROFILER_TYPE:
        case REACT_FRAGMENT_TYPE:
          type = task.keyPath;
          task.keyPath = keyPath;
          renderNodeDestructive(request, task, props.children, -1);
          task.keyPath = type;
          return;
        case REACT_ACTIVITY_TYPE:
          type = task.blockedSegment;
          null === type ? "hidden" !== props.mode && (type = task.keyPath, task.keyPath = keyPath, renderNode(request, task, props.children, -1), task.keyPath = type) : "hidden" !== props.mode && (request.renderState.generateStaticMarkup || type.chunks.push("<!--&-->"), type.lastPushedText = false, newProps = task.keyPath, task.keyPath = keyPath, renderNode(request, task, props.children, -1), task.keyPath = newProps, request.renderState.generateStaticMarkup || type.chunks.push("<!--/&-->"), type.lastPushedText = false);
          return;
        case REACT_SUSPENSE_LIST_TYPE:
          a: {
            type = props.children;
            props = props.revealOrder;
            if ("forwards" === props || "backwards" === props || "unstable_legacy-backwards" === props) {
              if (isArrayImpl(type)) {
                renderSuspenseListRows(request, task, keyPath, type, props);
                break a;
              }
              if (newProps = getIteratorFn(type)) {
                if (newProps = newProps.call(type)) {
                  defaultProps = newProps.next();
                  if (!defaultProps.done) {
                    do
                      defaultProps = newProps.next();
                    while (!defaultProps.done);
                    renderSuspenseListRows(request, task, keyPath, type, props);
                  }
                  break a;
                }
              }
            }
            "together" === props ? (props = task.keyPath, newProps = task.row, defaultProps = task.row = createSuspenseListRow(null), defaultProps.boundaries = [], defaultProps.together = true, task.keyPath = keyPath, renderNodeDestructive(request, task, type, -1), 0 === --defaultProps.pendingTasks && finishSuspenseListRow(request, defaultProps), task.keyPath = props, task.row = newProps, null !== newProps && 0 < defaultProps.pendingTasks && (newProps.pendingTasks++, defaultProps.next = newProps)) : (props = task.keyPath, task.keyPath = keyPath, renderNodeDestructive(request, task, type, -1), task.keyPath = props);
          }
          return;
        case REACT_VIEW_TRANSITION_TYPE:
        case REACT_SCOPE_TYPE:
          throw Error(formatProdErrorMessage(343));
        case REACT_SUSPENSE_TYPE:
          a: if (null !== task.replay) {
            type = task.keyPath;
            newProps = task.formatContext;
            defaultProps = task.row;
            task.keyPath = keyPath;
            task.formatContext = getSuspenseContentFormatContext(
              request.resumableState,
              newProps
            );
            task.row = null;
            keyPath = props.children;
            try {
              renderNode(request, task, keyPath, -1);
            } finally {
              task.keyPath = type, task.formatContext = newProps, task.row = defaultProps;
            }
          } else {
            type = task.keyPath;
            ref = task.formatContext;
            var prevRow = task.row, parentBoundary = task.blockedBoundary;
            propName$43 = task.blockedPreamble;
            var parentHoistableState = task.hoistableState;
            propName = task.blockedSegment;
            var fallback = props.fallback;
            props = props.children;
            var fallbackAbortSet = /* @__PURE__ */ new Set();
            var newBoundary = createSuspenseBoundary(
              request,
              task.row,
              fallbackAbortSet,
              null,
              null
            );
            null !== request.trackedPostpones && (newBoundary.trackedContentKeyPath = keyPath);
            var boundarySegment = createPendingSegment(
              request,
              propName.chunks.length,
              newBoundary,
              task.formatContext,
              false,
              false
            );
            propName.children.push(boundarySegment);
            propName.lastPushedText = false;
            var contentRootSegment = createPendingSegment(
              request,
              0,
              null,
              task.formatContext,
              false,
              false
            );
            contentRootSegment.parentFlushed = true;
            if (null !== request.trackedPostpones) {
              newProps = task.componentStack;
              defaultProps = [keyPath[0], "Suspense Fallback", keyPath[2]];
              initialState = [defaultProps[1], defaultProps[2], [], null];
              request.trackedPostpones.workingMap.set(defaultProps, initialState);
              newBoundary.trackedFallbackNode = initialState;
              task.blockedSegment = boundarySegment;
              task.blockedPreamble = newBoundary.fallbackPreamble;
              task.keyPath = defaultProps;
              task.formatContext = getSuspenseFallbackFormatContext(
                request.resumableState,
                ref
              );
              task.componentStack = replaceSuspenseComponentStackWithSuspenseFallbackStack(newProps);
              boundarySegment.status = 6;
              try {
                renderNode(request, task, fallback, -1), pushSegmentFinale(
                  boundarySegment.chunks,
                  request.renderState,
                  boundarySegment.lastPushedText,
                  boundarySegment.textEmbedded
                ), boundarySegment.status = 1;
              } catch (thrownValue) {
                throw boundarySegment.status = 12 === request.status ? 3 : 4, thrownValue;
              } finally {
                task.blockedSegment = propName, task.blockedPreamble = propName$43, task.keyPath = type, task.formatContext = ref;
              }
              task = createRenderTask(
                request,
                null,
                props,
                -1,
                newBoundary,
                contentRootSegment,
                newBoundary.contentPreamble,
                newBoundary.contentState,
                task.abortSet,
                keyPath,
                getSuspenseContentFormatContext(
                  request.resumableState,
                  task.formatContext
                ),
                task.context,
                task.treeContext,
                null,
                newProps
              );
              pushComponentStack(task);
              request.pingedTasks.push(task);
            } else {
              task.blockedBoundary = newBoundary;
              task.blockedPreamble = newBoundary.contentPreamble;
              task.hoistableState = newBoundary.contentState;
              task.blockedSegment = contentRootSegment;
              task.keyPath = keyPath;
              task.formatContext = getSuspenseContentFormatContext(
                request.resumableState,
                ref
              );
              task.row = null;
              contentRootSegment.status = 6;
              try {
                if (renderNode(request, task, props, -1), pushSegmentFinale(
                  contentRootSegment.chunks,
                  request.renderState,
                  contentRootSegment.lastPushedText,
                  contentRootSegment.textEmbedded
                ), contentRootSegment.status = 1, queueCompletedSegment(newBoundary, contentRootSegment), 0 === newBoundary.pendingTasks && 0 === newBoundary.status) {
                  if (newBoundary.status = 1, !isEligibleForOutlining(request, newBoundary)) {
                    null !== prevRow && 0 === --prevRow.pendingTasks && finishSuspenseListRow(request, prevRow);
                    0 === request.pendingRootTasks && task.blockedPreamble && preparePreamble(request);
                    break a;
                  }
                } else
                  null !== prevRow && prevRow.together && tryToResolveTogetherRow(request, prevRow);
              } catch (thrownValue$30) {
                newBoundary.status = 4, 12 === request.status ? (contentRootSegment.status = 3, newProps = request.fatalError) : (contentRootSegment.status = 4, newProps = thrownValue$30), defaultProps = getThrownInfo(task.componentStack), initialState = logRecoverableError(
                  request,
                  newProps,
                  defaultProps
                ), newBoundary.errorDigest = initialState, untrackBoundary(request, newBoundary);
              } finally {
                task.blockedBoundary = parentBoundary, task.blockedPreamble = propName$43, task.hoistableState = parentHoistableState, task.blockedSegment = propName, task.keyPath = type, task.formatContext = ref, task.row = prevRow;
              }
              task = createRenderTask(
                request,
                null,
                fallback,
                -1,
                parentBoundary,
                boundarySegment,
                newBoundary.fallbackPreamble,
                newBoundary.fallbackState,
                fallbackAbortSet,
                [keyPath[0], "Suspense Fallback", keyPath[2]],
                getSuspenseFallbackFormatContext(
                  request.resumableState,
                  task.formatContext
                ),
                task.context,
                task.treeContext,
                task.row,
                replaceSuspenseComponentStackWithSuspenseFallbackStack(
                  task.componentStack
                )
              );
              pushComponentStack(task);
              request.pingedTasks.push(task);
            }
          }
          return;
      }
      if ("object" === typeof type && null !== type)
        switch (type.$$typeof) {
          case REACT_FORWARD_REF_TYPE:
            if ("ref" in props)
              for (fallback in newProps = {}, props)
                "ref" !== fallback && (newProps[fallback] = props[fallback]);
            else newProps = props;
            type = renderWithHooks(
              request,
              task,
              keyPath,
              type.render,
              newProps,
              ref
            );
            finishFunctionComponent(
              request,
              task,
              keyPath,
              type,
              0 !== localIdCounter,
              actionStateCounter,
              actionStateMatchingIndex
            );
            return;
          case REACT_MEMO_TYPE:
            renderElement(request, task, keyPath, type.type, props, ref);
            return;
          case REACT_CONTEXT_TYPE:
            defaultProps = props.children;
            newProps = task.keyPath;
            props = props.value;
            initialState = type._currentValue2;
            type._currentValue2 = props;
            ref = currentActiveSnapshot;
            currentActiveSnapshot = type = {
              parent: ref,
              depth: null === ref ? 0 : ref.depth + 1,
              context: type,
              parentValue: initialState,
              value: props
            };
            task.context = type;
            task.keyPath = keyPath;
            renderNodeDestructive(request, task, defaultProps, -1);
            request = currentActiveSnapshot;
            if (null === request) throw Error(formatProdErrorMessage(403));
            request.context._currentValue2 = request.parentValue;
            request = currentActiveSnapshot = request.parent;
            task.context = request;
            task.keyPath = newProps;
            return;
          case REACT_CONSUMER_TYPE:
            props = props.children;
            type = props(type._context._currentValue2);
            props = task.keyPath;
            task.keyPath = keyPath;
            renderNodeDestructive(request, task, type, -1);
            task.keyPath = props;
            return;
          case REACT_LAZY_TYPE:
            newProps = type._init;
            type = newProps(type._payload);
            if (12 === request.status) throw null;
            renderElement(request, task, keyPath, type, props, ref);
            return;
        }
      throw Error(
        formatProdErrorMessage(130, null == type ? type : typeof type, "")
      );
    }
  }
  function resumeNode(request, task, segmentId, node, childIndex) {
    var prevReplay = task.replay, blockedBoundary = task.blockedBoundary, resumedSegment = createPendingSegment(
      request,
      0,
      null,
      task.formatContext,
      false,
      false
    );
    resumedSegment.id = segmentId;
    resumedSegment.parentFlushed = true;
    try {
      task.replay = null, task.blockedSegment = resumedSegment, renderNode(request, task, node, childIndex), resumedSegment.status = 1, null === blockedBoundary ? request.completedRootSegment = resumedSegment : (queueCompletedSegment(blockedBoundary, resumedSegment), blockedBoundary.parentFlushed && request.partialBoundaries.push(blockedBoundary));
    } finally {
      task.replay = prevReplay, task.blockedSegment = null;
    }
  }
  function renderNodeDestructive(request, task, node, childIndex) {
    null !== task.replay && "number" === typeof task.replay.slots ? resumeNode(request, task, task.replay.slots, node, childIndex) : (task.node = node, task.childIndex = childIndex, node = task.componentStack, pushComponentStack(task), retryNode(request, task), task.componentStack = node);
  }
  function retryNode(request, task) {
    var node = task.node, childIndex = task.childIndex;
    if (null !== node) {
      if ("object" === typeof node) {
        switch (node.$$typeof) {
          case REACT_ELEMENT_TYPE:
            var type = node.type, key = node.key, props = node.props;
            node = props.ref;
            var ref = void 0 !== node ? node : null, name = getComponentNameFromType(type), keyOrIndex = null == key ? -1 === childIndex ? 0 : childIndex : key;
            key = [task.keyPath, name, keyOrIndex];
            if (null !== task.replay)
              a: {
                var replay = task.replay;
                childIndex = replay.nodes;
                for (node = 0; node < childIndex.length; node++) {
                  var node$jscomp$0 = childIndex[node];
                  if (keyOrIndex === node$jscomp$0[1]) {
                    if (4 === node$jscomp$0.length) {
                      if (null !== name && name !== node$jscomp$0[0])
                        throw Error(
                          formatProdErrorMessage(490, node$jscomp$0[0], name)
                        );
                      var childNodes = node$jscomp$0[2];
                      name = node$jscomp$0[3];
                      keyOrIndex = task.node;
                      task.replay = {
                        nodes: childNodes,
                        slots: name,
                        pendingTasks: 1
                      };
                      try {
                        renderElement(request, task, key, type, props, ref);
                        if (1 === task.replay.pendingTasks && 0 < task.replay.nodes.length)
                          throw Error(formatProdErrorMessage(488));
                        task.replay.pendingTasks--;
                      } catch (x2) {
                        if ("object" === typeof x2 && null !== x2 && (x2 === SuspenseException || "function" === typeof x2.then))
                          throw task.node === keyOrIndex ? task.replay = replay : childIndex.splice(node, 1), x2;
                        task.replay.pendingTasks--;
                        props = getThrownInfo(task.componentStack);
                        key = request;
                        request = task.blockedBoundary;
                        type = x2;
                        props = logRecoverableError(key, type, props);
                        abortRemainingReplayNodes(
                          key,
                          request,
                          childNodes,
                          name,
                          type,
                          props
                        );
                      }
                      task.replay = replay;
                    } else {
                      if (type !== REACT_SUSPENSE_TYPE)
                        throw Error(
                          formatProdErrorMessage(
                            490,
                            "Suspense",
                            getComponentNameFromType(type) || "Unknown"
                          )
                        );
                      b: {
                        replay = void 0;
                        type = node$jscomp$0[5];
                        ref = node$jscomp$0[2];
                        name = node$jscomp$0[3];
                        keyOrIndex = null === node$jscomp$0[4] ? [] : node$jscomp$0[4][2];
                        node$jscomp$0 = null === node$jscomp$0[4] ? null : node$jscomp$0[4][3];
                        var prevKeyPath = task.keyPath, prevContext = task.formatContext, prevRow = task.row, previousReplaySet = task.replay, parentBoundary = task.blockedBoundary, parentHoistableState = task.hoistableState, content = props.children, fallback = props.fallback, fallbackAbortSet = /* @__PURE__ */ new Set();
                        props = createSuspenseBoundary(
                          request,
                          task.row,
                          fallbackAbortSet,
                          null,
                          null
                        );
                        props.parentFlushed = true;
                        props.rootSegmentID = type;
                        task.blockedBoundary = props;
                        task.hoistableState = props.contentState;
                        task.keyPath = key;
                        task.formatContext = getSuspenseContentFormatContext(
                          request.resumableState,
                          prevContext
                        );
                        task.row = null;
                        task.replay = {
                          nodes: ref,
                          slots: name,
                          pendingTasks: 1
                        };
                        try {
                          renderNode(request, task, content, -1);
                          if (1 === task.replay.pendingTasks && 0 < task.replay.nodes.length)
                            throw Error(formatProdErrorMessage(488));
                          task.replay.pendingTasks--;
                          if (0 === props.pendingTasks && 0 === props.status) {
                            props.status = 1;
                            request.completedBoundaries.push(props);
                            break b;
                          }
                        } catch (error) {
                          props.status = 4, childNodes = getThrownInfo(task.componentStack), replay = logRecoverableError(
                            request,
                            error,
                            childNodes
                          ), props.errorDigest = replay, task.replay.pendingTasks--, request.clientRenderedBoundaries.push(props);
                        } finally {
                          task.blockedBoundary = parentBoundary, task.hoistableState = parentHoistableState, task.replay = previousReplaySet, task.keyPath = prevKeyPath, task.formatContext = prevContext, task.row = prevRow;
                        }
                        childNodes = createReplayTask(
                          request,
                          null,
                          {
                            nodes: keyOrIndex,
                            slots: node$jscomp$0,
                            pendingTasks: 0
                          },
                          fallback,
                          -1,
                          parentBoundary,
                          props.fallbackState,
                          fallbackAbortSet,
                          [key[0], "Suspense Fallback", key[2]],
                          getSuspenseFallbackFormatContext(
                            request.resumableState,
                            task.formatContext
                          ),
                          task.context,
                          task.treeContext,
                          task.row,
                          replaceSuspenseComponentStackWithSuspenseFallbackStack(
                            task.componentStack
                          )
                        );
                        pushComponentStack(childNodes);
                        request.pingedTasks.push(childNodes);
                      }
                    }
                    childIndex.splice(node, 1);
                    break a;
                  }
                }
              }
            else renderElement(request, task, key, type, props, ref);
            return;
          case REACT_PORTAL_TYPE:
            throw Error(formatProdErrorMessage(257));
          case REACT_LAZY_TYPE:
            childNodes = node._init;
            node = childNodes(node._payload);
            if (12 === request.status) throw null;
            renderNodeDestructive(request, task, node, childIndex);
            return;
        }
        if (isArrayImpl(node)) {
          renderChildrenArray(request, task, node, childIndex);
          return;
        }
        if (childNodes = getIteratorFn(node)) {
          if (childNodes = childNodes.call(node)) {
            node = childNodes.next();
            if (!node.done) {
              props = [];
              do
                props.push(node.value), node = childNodes.next();
              while (!node.done);
              renderChildrenArray(request, task, props, childIndex);
            }
            return;
          }
        }
        if ("function" === typeof node.then)
          return task.thenableState = null, renderNodeDestructive(request, task, unwrapThenable(node), childIndex);
        if (node.$$typeof === REACT_CONTEXT_TYPE)
          return renderNodeDestructive(
            request,
            task,
            node._currentValue2,
            childIndex
          );
        childIndex = Object.prototype.toString.call(node);
        throw Error(
          formatProdErrorMessage(
            31,
            "[object Object]" === childIndex ? "object with keys {" + Object.keys(node).join(", ") + "}" : childIndex
          )
        );
      }
      if ("string" === typeof node)
        childIndex = task.blockedSegment, null !== childIndex && (childIndex.lastPushedText = pushTextInstance(
          childIndex.chunks,
          node,
          request.renderState,
          childIndex.lastPushedText
        ));
      else if ("number" === typeof node || "bigint" === typeof node)
        childIndex = task.blockedSegment, null !== childIndex && (childIndex.lastPushedText = pushTextInstance(
          childIndex.chunks,
          "" + node,
          request.renderState,
          childIndex.lastPushedText
        ));
    }
  }
  function renderChildrenArray(request, task, children, childIndex) {
    var prevKeyPath = task.keyPath;
    if (-1 !== childIndex && (task.keyPath = [task.keyPath, "Fragment", childIndex], null !== task.replay)) {
      for (var replay = task.replay, replayNodes = replay.nodes, j2 = 0; j2 < replayNodes.length; j2++) {
        var node = replayNodes[j2];
        if (node[1] === childIndex) {
          childIndex = node[2];
          node = node[3];
          task.replay = { nodes: childIndex, slots: node, pendingTasks: 1 };
          try {
            renderChildrenArray(request, task, children, -1);
            if (1 === task.replay.pendingTasks && 0 < task.replay.nodes.length)
              throw Error(formatProdErrorMessage(488));
            task.replay.pendingTasks--;
          } catch (x2) {
            if ("object" === typeof x2 && null !== x2 && (x2 === SuspenseException || "function" === typeof x2.then))
              throw x2;
            task.replay.pendingTasks--;
            children = getThrownInfo(task.componentStack);
            var boundary = task.blockedBoundary, error = x2;
            children = logRecoverableError(request, error, children);
            abortRemainingReplayNodes(
              request,
              boundary,
              childIndex,
              node,
              error,
              children
            );
          }
          task.replay = replay;
          replayNodes.splice(j2, 1);
          break;
        }
      }
      task.keyPath = prevKeyPath;
      return;
    }
    replay = task.treeContext;
    replayNodes = children.length;
    if (null !== task.replay && (j2 = task.replay.slots, null !== j2 && "object" === typeof j2)) {
      for (childIndex = 0; childIndex < replayNodes; childIndex++)
        node = children[childIndex], task.treeContext = pushTreeContext(replay, replayNodes, childIndex), boundary = j2[childIndex], "number" === typeof boundary ? (resumeNode(request, task, boundary, node, childIndex), delete j2[childIndex]) : renderNode(request, task, node, childIndex);
      task.treeContext = replay;
      task.keyPath = prevKeyPath;
      return;
    }
    for (j2 = 0; j2 < replayNodes; j2++)
      childIndex = children[j2], task.treeContext = pushTreeContext(replay, replayNodes, j2), renderNode(request, task, childIndex, j2);
    task.treeContext = replay;
    task.keyPath = prevKeyPath;
  }
  function trackPostponedBoundary(request, trackedPostpones, boundary) {
    boundary.status = 5;
    boundary.rootSegmentID = request.nextSegmentId++;
    request = boundary.trackedContentKeyPath;
    if (null === request) throw Error(formatProdErrorMessage(486));
    var fallbackReplayNode = boundary.trackedFallbackNode, children = [], boundaryNode = trackedPostpones.workingMap.get(request);
    if (void 0 === boundaryNode)
      return boundary = [
        request[1],
        request[2],
        children,
        null,
        fallbackReplayNode,
        boundary.rootSegmentID
      ], trackedPostpones.workingMap.set(request, boundary), addToReplayParent(boundary, request[0], trackedPostpones), boundary;
    boundaryNode[4] = fallbackReplayNode;
    boundaryNode[5] = boundary.rootSegmentID;
    return boundaryNode;
  }
  function trackPostpone(request, trackedPostpones, task, segment) {
    segment.status = 5;
    var keyPath = task.keyPath, boundary = task.blockedBoundary;
    if (null === boundary)
      segment.id = request.nextSegmentId++, trackedPostpones.rootSlots = segment.id, null !== request.completedRootSegment && (request.completedRootSegment.status = 5);
    else {
      if (null !== boundary && 0 === boundary.status) {
        var boundaryNode = trackPostponedBoundary(
          request,
          trackedPostpones,
          boundary
        );
        if (boundary.trackedContentKeyPath === keyPath && -1 === task.childIndex) {
          -1 === segment.id && (segment.id = segment.parentFlushed ? boundary.rootSegmentID : request.nextSegmentId++);
          boundaryNode[3] = segment.id;
          return;
        }
      }
      -1 === segment.id && (segment.id = segment.parentFlushed && null !== boundary ? boundary.rootSegmentID : request.nextSegmentId++);
      if (-1 === task.childIndex)
        null === keyPath ? trackedPostpones.rootSlots = segment.id : (task = trackedPostpones.workingMap.get(keyPath), void 0 === task ? (task = [keyPath[1], keyPath[2], [], segment.id], addToReplayParent(task, keyPath[0], trackedPostpones)) : task[3] = segment.id);
      else {
        if (null === keyPath)
          if (request = trackedPostpones.rootSlots, null === request)
            request = trackedPostpones.rootSlots = {};
          else {
            if ("number" === typeof request)
              throw Error(formatProdErrorMessage(491));
          }
        else if (boundary = trackedPostpones.workingMap, boundaryNode = boundary.get(keyPath), void 0 === boundaryNode)
          request = {}, boundaryNode = [keyPath[1], keyPath[2], [], request], boundary.set(keyPath, boundaryNode), addToReplayParent(boundaryNode, keyPath[0], trackedPostpones);
        else if (request = boundaryNode[3], null === request)
          request = boundaryNode[3] = {};
        else if ("number" === typeof request)
          throw Error(formatProdErrorMessage(491));
        request[task.childIndex] = segment.id;
      }
    }
  }
  function untrackBoundary(request, boundary) {
    request = request.trackedPostpones;
    null !== request && (boundary = boundary.trackedContentKeyPath, null !== boundary && (boundary = request.workingMap.get(boundary), void 0 !== boundary && (boundary.length = 4, boundary[2] = [], boundary[3] = null)));
  }
  function spawnNewSuspendedReplayTask(request, task, thenableState2) {
    return createReplayTask(
      request,
      thenableState2,
      task.replay,
      task.node,
      task.childIndex,
      task.blockedBoundary,
      task.hoistableState,
      task.abortSet,
      task.keyPath,
      task.formatContext,
      task.context,
      task.treeContext,
      task.row,
      task.componentStack
    );
  }
  function spawnNewSuspendedRenderTask(request, task, thenableState2) {
    var segment = task.blockedSegment, newSegment = createPendingSegment(
      request,
      segment.chunks.length,
      null,
      task.formatContext,
      segment.lastPushedText,
      true
    );
    segment.children.push(newSegment);
    segment.lastPushedText = false;
    return createRenderTask(
      request,
      thenableState2,
      task.node,
      task.childIndex,
      task.blockedBoundary,
      newSegment,
      task.blockedPreamble,
      task.hoistableState,
      task.abortSet,
      task.keyPath,
      task.formatContext,
      task.context,
      task.treeContext,
      task.row,
      task.componentStack
    );
  }
  function renderNode(request, task, node, childIndex) {
    var previousFormatContext = task.formatContext, previousContext = task.context, previousKeyPath = task.keyPath, previousTreeContext = task.treeContext, previousComponentStack = task.componentStack, segment = task.blockedSegment;
    if (null === segment) {
      segment = task.replay;
      try {
        return renderNodeDestructive(request, task, node, childIndex);
      } catch (thrownValue) {
        if (resetHooksState(), node = thrownValue === SuspenseException ? getSuspendedThenable() : thrownValue, 12 !== request.status && "object" === typeof node && null !== node) {
          if ("function" === typeof node.then) {
            childIndex = thrownValue === SuspenseException ? getThenableStateAfterSuspending() : null;
            request = spawnNewSuspendedReplayTask(request, task, childIndex).ping;
            node.then(request, request);
            task.formatContext = previousFormatContext;
            task.context = previousContext;
            task.keyPath = previousKeyPath;
            task.treeContext = previousTreeContext;
            task.componentStack = previousComponentStack;
            task.replay = segment;
            switchContext(previousContext);
            return;
          }
          if ("Maximum call stack size exceeded" === node.message) {
            node = thrownValue === SuspenseException ? getThenableStateAfterSuspending() : null;
            node = spawnNewSuspendedReplayTask(request, task, node);
            request.pingedTasks.push(node);
            task.formatContext = previousFormatContext;
            task.context = previousContext;
            task.keyPath = previousKeyPath;
            task.treeContext = previousTreeContext;
            task.componentStack = previousComponentStack;
            task.replay = segment;
            switchContext(previousContext);
            return;
          }
        }
      }
    } else {
      var childrenLength = segment.children.length, chunkLength = segment.chunks.length;
      try {
        return renderNodeDestructive(request, task, node, childIndex);
      } catch (thrownValue$62) {
        if (resetHooksState(), segment.children.length = childrenLength, segment.chunks.length = chunkLength, node = thrownValue$62 === SuspenseException ? getSuspendedThenable() : thrownValue$62, 12 !== request.status && "object" === typeof node && null !== node) {
          if ("function" === typeof node.then) {
            segment = node;
            node = thrownValue$62 === SuspenseException ? getThenableStateAfterSuspending() : null;
            request = spawnNewSuspendedRenderTask(request, task, node).ping;
            segment.then(request, request);
            task.formatContext = previousFormatContext;
            task.context = previousContext;
            task.keyPath = previousKeyPath;
            task.treeContext = previousTreeContext;
            task.componentStack = previousComponentStack;
            switchContext(previousContext);
            return;
          }
          if ("Maximum call stack size exceeded" === node.message) {
            segment = thrownValue$62 === SuspenseException ? getThenableStateAfterSuspending() : null;
            segment = spawnNewSuspendedRenderTask(request, task, segment);
            request.pingedTasks.push(segment);
            task.formatContext = previousFormatContext;
            task.context = previousContext;
            task.keyPath = previousKeyPath;
            task.treeContext = previousTreeContext;
            task.componentStack = previousComponentStack;
            switchContext(previousContext);
            return;
          }
        }
      }
    }
    task.formatContext = previousFormatContext;
    task.context = previousContext;
    task.keyPath = previousKeyPath;
    task.treeContext = previousTreeContext;
    switchContext(previousContext);
    throw node;
  }
  function abortTaskSoft(task) {
    var boundary = task.blockedBoundary, segment = task.blockedSegment;
    null !== segment && (segment.status = 3, finishedTask(this, boundary, task.row, segment));
  }
  function abortRemainingReplayNodes(request$jscomp$0, boundary, nodes, slots, error, errorDigest$jscomp$0) {
    for (var i = 0; i < nodes.length; i++) {
      var node = nodes[i];
      if (4 === node.length)
        abortRemainingReplayNodes(
          request$jscomp$0,
          boundary,
          node[2],
          node[3],
          error,
          errorDigest$jscomp$0
        );
      else {
        node = node[5];
        var request = request$jscomp$0, errorDigest = errorDigest$jscomp$0, resumedBoundary = createSuspenseBoundary(
          request,
          null,
          /* @__PURE__ */ new Set(),
          null,
          null
        );
        resumedBoundary.parentFlushed = true;
        resumedBoundary.rootSegmentID = node;
        resumedBoundary.status = 4;
        resumedBoundary.errorDigest = errorDigest;
        resumedBoundary.parentFlushed && request.clientRenderedBoundaries.push(resumedBoundary);
      }
    }
    nodes.length = 0;
    if (null !== slots) {
      if (null === boundary) throw Error(formatProdErrorMessage(487));
      4 !== boundary.status && (boundary.status = 4, boundary.errorDigest = errorDigest$jscomp$0, boundary.parentFlushed && request$jscomp$0.clientRenderedBoundaries.push(boundary));
      if ("object" === typeof slots) for (var index2 in slots) delete slots[index2];
    }
  }
  function abortTask(task, request, error) {
    var boundary = task.blockedBoundary, segment = task.blockedSegment;
    if (null !== segment) {
      if (6 === segment.status) return;
      segment.status = 3;
    }
    var errorInfo = getThrownInfo(task.componentStack);
    if (null === boundary) {
      if (13 !== request.status && 14 !== request.status) {
        boundary = task.replay;
        if (null === boundary) {
          null !== request.trackedPostpones && null !== segment ? (boundary = request.trackedPostpones, logRecoverableError(request, error, errorInfo), trackPostpone(request, boundary, task, segment), finishedTask(request, null, task.row, segment)) : (logRecoverableError(request, error, errorInfo), fatalError(request, error));
          return;
        }
        boundary.pendingTasks--;
        0 === boundary.pendingTasks && 0 < boundary.nodes.length && (segment = logRecoverableError(request, error, errorInfo), abortRemainingReplayNodes(
          request,
          null,
          boundary.nodes,
          boundary.slots,
          error,
          segment
        ));
        request.pendingRootTasks--;
        0 === request.pendingRootTasks && completeShell(request);
      }
    } else {
      var trackedPostpones$63 = request.trackedPostpones;
      if (4 !== boundary.status) {
        if (null !== trackedPostpones$63 && null !== segment)
          return logRecoverableError(request, error, errorInfo), trackPostpone(request, trackedPostpones$63, task, segment), boundary.fallbackAbortableTasks.forEach(function(fallbackTask) {
            return abortTask(fallbackTask, request, error);
          }), boundary.fallbackAbortableTasks.clear(), finishedTask(request, boundary, task.row, segment);
        boundary.status = 4;
        segment = logRecoverableError(request, error, errorInfo);
        boundary.status = 4;
        boundary.errorDigest = segment;
        untrackBoundary(request, boundary);
        boundary.parentFlushed && request.clientRenderedBoundaries.push(boundary);
      }
      boundary.pendingTasks--;
      segment = boundary.row;
      null !== segment && 0 === --segment.pendingTasks && finishSuspenseListRow(request, segment);
      boundary.fallbackAbortableTasks.forEach(function(fallbackTask) {
        return abortTask(fallbackTask, request, error);
      });
      boundary.fallbackAbortableTasks.clear();
    }
    task = task.row;
    null !== task && 0 === --task.pendingTasks && finishSuspenseListRow(request, task);
    request.allPendingTasks--;
    0 === request.allPendingTasks && completeAll(request);
  }
  function safelyEmitEarlyPreloads(request, shellComplete) {
    try {
      var renderState = request.renderState, onHeaders = renderState.onHeaders;
      if (onHeaders) {
        var headers = renderState.headers;
        if (headers) {
          renderState.headers = null;
          var linkHeader = headers.preconnects;
          headers.fontPreloads && (linkHeader && (linkHeader += ", "), linkHeader += headers.fontPreloads);
          headers.highImagePreloads && (linkHeader && (linkHeader += ", "), linkHeader += headers.highImagePreloads);
          if (!shellComplete) {
            var queueIter = renderState.styles.values(), queueStep = queueIter.next();
            b: for (; 0 < headers.remainingCapacity && !queueStep.done; queueStep = queueIter.next())
              for (var sheetIter = queueStep.value.sheets.values(), sheetStep = sheetIter.next(); 0 < headers.remainingCapacity && !sheetStep.done; sheetStep = sheetIter.next()) {
                var sheet = sheetStep.value, props = sheet.props, key = props.href, props$jscomp$0 = sheet.props, header = getPreloadAsHeader(props$jscomp$0.href, "style", {
                  crossOrigin: props$jscomp$0.crossOrigin,
                  integrity: props$jscomp$0.integrity,
                  nonce: props$jscomp$0.nonce,
                  type: props$jscomp$0.type,
                  fetchPriority: props$jscomp$0.fetchPriority,
                  referrerPolicy: props$jscomp$0.referrerPolicy,
                  media: props$jscomp$0.media
                });
                if (0 <= (headers.remainingCapacity -= header.length + 2))
                  renderState.resets.style[key] = PRELOAD_NO_CREDS, linkHeader && (linkHeader += ", "), linkHeader += header, renderState.resets.style[key] = "string" === typeof props.crossOrigin || "string" === typeof props.integrity ? [props.crossOrigin, props.integrity] : PRELOAD_NO_CREDS;
                else break b;
              }
          }
          linkHeader ? onHeaders({ Link: linkHeader }) : onHeaders({});
        }
      }
    } catch (error) {
      logRecoverableError(request, error, {});
    }
  }
  function completeShell(request) {
    null === request.trackedPostpones && safelyEmitEarlyPreloads(request, true);
    null === request.trackedPostpones && preparePreamble(request);
    request.onShellError = noop2;
    request = request.onShellReady;
    request();
  }
  function completeAll(request) {
    safelyEmitEarlyPreloads(
      request,
      null === request.trackedPostpones ? true : null === request.completedRootSegment || 5 !== request.completedRootSegment.status
    );
    preparePreamble(request);
    request = request.onAllReady;
    request();
  }
  function queueCompletedSegment(boundary, segment) {
    if (0 === segment.chunks.length && 1 === segment.children.length && null === segment.children[0].boundary && -1 === segment.children[0].id) {
      var childSegment = segment.children[0];
      childSegment.id = segment.id;
      childSegment.parentFlushed = true;
      1 !== childSegment.status && 3 !== childSegment.status && 4 !== childSegment.status || queueCompletedSegment(boundary, childSegment);
    } else boundary.completedSegments.push(segment);
  }
  function finishedTask(request, boundary, row, segment) {
    null !== row && (0 === --row.pendingTasks ? finishSuspenseListRow(request, row) : row.together && tryToResolveTogetherRow(request, row));
    request.allPendingTasks--;
    if (null === boundary) {
      if (null !== segment && segment.parentFlushed) {
        if (null !== request.completedRootSegment)
          throw Error(formatProdErrorMessage(389));
        request.completedRootSegment = segment;
      }
      request.pendingRootTasks--;
      0 === request.pendingRootTasks && completeShell(request);
    } else if (boundary.pendingTasks--, 4 !== boundary.status)
      if (0 === boundary.pendingTasks)
        if (0 === boundary.status && (boundary.status = 1), null !== segment && segment.parentFlushed && (1 === segment.status || 3 === segment.status) && queueCompletedSegment(boundary, segment), boundary.parentFlushed && request.completedBoundaries.push(boundary), 1 === boundary.status)
          row = boundary.row, null !== row && hoistHoistables(row.hoistables, boundary.contentState), isEligibleForOutlining(request, boundary) || (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request), boundary.fallbackAbortableTasks.clear(), null !== row && 0 === --row.pendingTasks && finishSuspenseListRow(request, row)), 0 === request.pendingRootTasks && null === request.trackedPostpones && null !== boundary.contentPreamble && preparePreamble(request);
        else {
          if (5 === boundary.status && (boundary = boundary.row, null !== boundary)) {
            if (null !== request.trackedPostpones) {
              row = request.trackedPostpones;
              var postponedRow = boundary.next;
              if (null !== postponedRow && (segment = postponedRow.boundaries, null !== segment))
                for (postponedRow.boundaries = null, postponedRow = 0; postponedRow < segment.length; postponedRow++) {
                  var postponedBoundary = segment[postponedRow];
                  trackPostponedBoundary(request, row, postponedBoundary);
                  finishedTask(request, postponedBoundary, null, null);
                }
            }
            0 === --boundary.pendingTasks && finishSuspenseListRow(request, boundary);
          }
        }
      else
        null === segment || !segment.parentFlushed || 1 !== segment.status && 3 !== segment.status || (queueCompletedSegment(boundary, segment), 1 === boundary.completedSegments.length && boundary.parentFlushed && request.partialBoundaries.push(boundary)), boundary = boundary.row, null !== boundary && boundary.together && tryToResolveTogetherRow(request, boundary);
    0 === request.allPendingTasks && completeAll(request);
  }
  function performWork(request$jscomp$2) {
    if (14 !== request$jscomp$2.status && 13 !== request$jscomp$2.status) {
      var prevContext = currentActiveSnapshot, prevDispatcher = ReactSharedInternals.H;
      ReactSharedInternals.H = HooksDispatcher;
      var prevAsyncDispatcher = ReactSharedInternals.A;
      ReactSharedInternals.A = DefaultAsyncDispatcher;
      var prevRequest = currentRequest;
      currentRequest = request$jscomp$2;
      var prevResumableState = currentResumableState;
      currentResumableState = request$jscomp$2.resumableState;
      try {
        var pingedTasks = request$jscomp$2.pingedTasks, i;
        for (i = 0; i < pingedTasks.length; i++) {
          var task = pingedTasks[i], request = request$jscomp$2, segment = task.blockedSegment;
          if (null === segment) {
            var request$jscomp$0 = request;
            if (0 !== task.replay.pendingTasks) {
              switchContext(task.context);
              try {
                "number" === typeof task.replay.slots ? resumeNode(
                  request$jscomp$0,
                  task,
                  task.replay.slots,
                  task.node,
                  task.childIndex
                ) : retryNode(request$jscomp$0, task);
                if (1 === task.replay.pendingTasks && 0 < task.replay.nodes.length)
                  throw Error(formatProdErrorMessage(488));
                task.replay.pendingTasks--;
                task.abortSet.delete(task);
                finishedTask(
                  request$jscomp$0,
                  task.blockedBoundary,
                  task.row,
                  null
                );
              } catch (thrownValue) {
                resetHooksState();
                var x2 = thrownValue === SuspenseException ? getSuspendedThenable() : thrownValue;
                if ("object" === typeof x2 && null !== x2 && "function" === typeof x2.then) {
                  var ping = task.ping;
                  x2.then(ping, ping);
                  task.thenableState = thrownValue === SuspenseException ? getThenableStateAfterSuspending() : null;
                } else {
                  task.replay.pendingTasks--;
                  task.abortSet.delete(task);
                  var errorInfo = getThrownInfo(task.componentStack);
                  request = void 0;
                  var request$jscomp$1 = request$jscomp$0, boundary = task.blockedBoundary, error$jscomp$0 = 12 === request$jscomp$0.status ? request$jscomp$0.fatalError : x2, replayNodes = task.replay.nodes, resumeSlots = task.replay.slots;
                  request = logRecoverableError(
                    request$jscomp$1,
                    error$jscomp$0,
                    errorInfo
                  );
                  abortRemainingReplayNodes(
                    request$jscomp$1,
                    boundary,
                    replayNodes,
                    resumeSlots,
                    error$jscomp$0,
                    request
                  );
                  request$jscomp$0.pendingRootTasks--;
                  0 === request$jscomp$0.pendingRootTasks && completeShell(request$jscomp$0);
                  request$jscomp$0.allPendingTasks--;
                  0 === request$jscomp$0.allPendingTasks && completeAll(request$jscomp$0);
                }
              } finally {
              }
            }
          } else if (request$jscomp$0 = void 0, request$jscomp$1 = segment, 0 === request$jscomp$1.status) {
            request$jscomp$1.status = 6;
            switchContext(task.context);
            var childrenLength = request$jscomp$1.children.length, chunkLength = request$jscomp$1.chunks.length;
            try {
              retryNode(request, task), pushSegmentFinale(
                request$jscomp$1.chunks,
                request.renderState,
                request$jscomp$1.lastPushedText,
                request$jscomp$1.textEmbedded
              ), task.abortSet.delete(task), request$jscomp$1.status = 1, finishedTask(
                request,
                task.blockedBoundary,
                task.row,
                request$jscomp$1
              );
            } catch (thrownValue) {
              resetHooksState();
              request$jscomp$1.children.length = childrenLength;
              request$jscomp$1.chunks.length = chunkLength;
              var x$jscomp$0 = thrownValue === SuspenseException ? getSuspendedThenable() : 12 === request.status ? request.fatalError : thrownValue;
              if (12 === request.status && null !== request.trackedPostpones) {
                var trackedPostpones = request.trackedPostpones, thrownInfo = getThrownInfo(task.componentStack);
                task.abortSet.delete(task);
                logRecoverableError(request, x$jscomp$0, thrownInfo);
                trackPostpone(request, trackedPostpones, task, request$jscomp$1);
                finishedTask(
                  request,
                  task.blockedBoundary,
                  task.row,
                  request$jscomp$1
                );
              } else if ("object" === typeof x$jscomp$0 && null !== x$jscomp$0 && "function" === typeof x$jscomp$0.then) {
                request$jscomp$1.status = 0;
                task.thenableState = thrownValue === SuspenseException ? getThenableStateAfterSuspending() : null;
                var ping$jscomp$0 = task.ping;
                x$jscomp$0.then(ping$jscomp$0, ping$jscomp$0);
              } else {
                var errorInfo$jscomp$0 = getThrownInfo(task.componentStack);
                task.abortSet.delete(task);
                request$jscomp$1.status = 4;
                var boundary$jscomp$0 = task.blockedBoundary, row = task.row;
                null !== row && 0 === --row.pendingTasks && finishSuspenseListRow(request, row);
                request.allPendingTasks--;
                request$jscomp$0 = logRecoverableError(
                  request,
                  x$jscomp$0,
                  errorInfo$jscomp$0
                );
                if (null === boundary$jscomp$0) fatalError(request, x$jscomp$0);
                else if (boundary$jscomp$0.pendingTasks--, 4 !== boundary$jscomp$0.status) {
                  boundary$jscomp$0.status = 4;
                  boundary$jscomp$0.errorDigest = request$jscomp$0;
                  untrackBoundary(request, boundary$jscomp$0);
                  var boundaryRow = boundary$jscomp$0.row;
                  null !== boundaryRow && 0 === --boundaryRow.pendingTasks && finishSuspenseListRow(request, boundaryRow);
                  boundary$jscomp$0.parentFlushed && request.clientRenderedBoundaries.push(boundary$jscomp$0);
                  0 === request.pendingRootTasks && null === request.trackedPostpones && null !== boundary$jscomp$0.contentPreamble && preparePreamble(request);
                }
                0 === request.allPendingTasks && completeAll(request);
              }
            } finally {
            }
          }
        }
        pingedTasks.splice(0, i);
        null !== request$jscomp$2.destination && flushCompletedQueues(request$jscomp$2, request$jscomp$2.destination);
      } catch (error) {
        logRecoverableError(request$jscomp$2, error, {}), fatalError(request$jscomp$2, error);
      } finally {
        currentResumableState = prevResumableState, ReactSharedInternals.H = prevDispatcher, ReactSharedInternals.A = prevAsyncDispatcher, prevDispatcher === HooksDispatcher && switchContext(prevContext), currentRequest = prevRequest;
      }
    }
  }
  function preparePreambleFromSubtree(request, segment, collectedPreambleSegments) {
    segment.preambleChildren.length && collectedPreambleSegments.push(segment.preambleChildren);
    for (var pendingPreambles = false, i = 0; i < segment.children.length; i++)
      pendingPreambles = preparePreambleFromSegment(
        request,
        segment.children[i],
        collectedPreambleSegments
      ) || pendingPreambles;
    return pendingPreambles;
  }
  function preparePreambleFromSegment(request, segment, collectedPreambleSegments) {
    var boundary = segment.boundary;
    if (null === boundary)
      return preparePreambleFromSubtree(
        request,
        segment,
        collectedPreambleSegments
      );
    var preamble = boundary.contentPreamble, fallbackPreamble = boundary.fallbackPreamble;
    if (null === preamble || null === fallbackPreamble) return false;
    switch (boundary.status) {
      case 1:
        hoistPreambleState(request.renderState, preamble);
        request.byteSize += boundary.byteSize;
        segment = boundary.completedSegments[0];
        if (!segment) throw Error(formatProdErrorMessage(391));
        return preparePreambleFromSubtree(
          request,
          segment,
          collectedPreambleSegments
        );
      case 5:
        if (null !== request.trackedPostpones) return true;
      case 4:
        if (1 === segment.status)
          return hoistPreambleState(request.renderState, fallbackPreamble), preparePreambleFromSubtree(
            request,
            segment,
            collectedPreambleSegments
          );
      default:
        return true;
    }
  }
  function preparePreamble(request) {
    if (request.completedRootSegment && null === request.completedPreambleSegments) {
      var collectedPreambleSegments = [], originalRequestByteSize = request.byteSize, hasPendingPreambles = preparePreambleFromSegment(
        request,
        request.completedRootSegment,
        collectedPreambleSegments
      ), preamble = request.renderState.preamble;
      false === hasPendingPreambles || preamble.headChunks && preamble.bodyChunks ? request.completedPreambleSegments = collectedPreambleSegments : request.byteSize = originalRequestByteSize;
    }
  }
  function flushSubtree(request, destination, segment, hoistableState) {
    segment.parentFlushed = true;
    switch (segment.status) {
      case 0:
        segment.id = request.nextSegmentId++;
      case 5:
        return hoistableState = segment.id, segment.lastPushedText = false, segment.textEmbedded = false, request = request.renderState, destination.push('<template id="'), destination.push(request.placeholderPrefix), request = hoistableState.toString(16), destination.push(request), destination.push('"></template>');
      case 1:
        segment.status = 2;
        var r2 = true, chunks = segment.chunks, chunkIdx = 0;
        segment = segment.children;
        for (var childIdx = 0; childIdx < segment.length; childIdx++) {
          for (r2 = segment[childIdx]; chunkIdx < r2.index; chunkIdx++)
            destination.push(chunks[chunkIdx]);
          r2 = flushSegment(request, destination, r2, hoistableState);
        }
        for (; chunkIdx < chunks.length - 1; chunkIdx++)
          destination.push(chunks[chunkIdx]);
        chunkIdx < chunks.length && (r2 = destination.push(chunks[chunkIdx]));
        return r2;
      case 3:
        return true;
      default:
        throw Error(formatProdErrorMessage(390));
    }
  }
  var flushedByteSize = 0;
  function flushSegment(request, destination, segment, hoistableState) {
    var boundary = segment.boundary;
    if (null === boundary)
      return flushSubtree(request, destination, segment, hoistableState);
    boundary.parentFlushed = true;
    if (4 === boundary.status) {
      var row = boundary.row;
      null !== row && 0 === --row.pendingTasks && finishSuspenseListRow(request, row);
      request.renderState.generateStaticMarkup || (boundary = boundary.errorDigest, destination.push("<!--$!-->"), destination.push("<template"), boundary && (destination.push(' data-dgst="'), boundary = escapeTextForBrowser(boundary), destination.push(boundary), destination.push('"')), destination.push("></template>"));
      flushSubtree(request, destination, segment, hoistableState);
      request = request.renderState.generateStaticMarkup ? true : destination.push("<!--/$-->");
      return request;
    }
    if (1 !== boundary.status)
      return 0 === boundary.status && (boundary.rootSegmentID = request.nextSegmentId++), 0 < boundary.completedSegments.length && request.partialBoundaries.push(boundary), writeStartPendingSuspenseBoundary(
        destination,
        request.renderState,
        boundary.rootSegmentID
      ), hoistableState && hoistHoistables(hoistableState, boundary.fallbackState), flushSubtree(request, destination, segment, hoistableState), destination.push("<!--/$-->");
    if (!flushingPartialBoundaries && isEligibleForOutlining(request, boundary) && flushedByteSize + boundary.byteSize > request.progressiveChunkSize)
      return boundary.rootSegmentID = request.nextSegmentId++, request.completedBoundaries.push(boundary), writeStartPendingSuspenseBoundary(
        destination,
        request.renderState,
        boundary.rootSegmentID
      ), flushSubtree(request, destination, segment, hoistableState), destination.push("<!--/$-->");
    flushedByteSize += boundary.byteSize;
    hoistableState && hoistHoistables(hoistableState, boundary.contentState);
    segment = boundary.row;
    null !== segment && isEligibleForOutlining(request, boundary) && 0 === --segment.pendingTasks && finishSuspenseListRow(request, segment);
    request.renderState.generateStaticMarkup || destination.push("<!--$-->");
    segment = boundary.completedSegments;
    if (1 !== segment.length) throw Error(formatProdErrorMessage(391));
    flushSegment(request, destination, segment[0], hoistableState);
    request = request.renderState.generateStaticMarkup ? true : destination.push("<!--/$-->");
    return request;
  }
  function flushSegmentContainer(request, destination, segment, hoistableState) {
    writeStartSegment(
      destination,
      request.renderState,
      segment.parentFormatContext,
      segment.id
    );
    flushSegment(request, destination, segment, hoistableState);
    return writeEndSegment(destination, segment.parentFormatContext);
  }
  function flushCompletedBoundary(request, destination, boundary) {
    flushedByteSize = boundary.byteSize;
    for (var completedSegments = boundary.completedSegments, i = 0; i < completedSegments.length; i++)
      flushPartiallyCompletedSegment(
        request,
        destination,
        boundary,
        completedSegments[i]
      );
    completedSegments.length = 0;
    completedSegments = boundary.row;
    null !== completedSegments && isEligibleForOutlining(request, boundary) && 0 === --completedSegments.pendingTasks && finishSuspenseListRow(request, completedSegments);
    writeHoistablesForBoundary(
      destination,
      boundary.contentState,
      request.renderState
    );
    completedSegments = request.resumableState;
    request = request.renderState;
    i = boundary.rootSegmentID;
    boundary = boundary.contentState;
    var requiresStyleInsertion = request.stylesToHoist;
    request.stylesToHoist = false;
    destination.push(request.startInlineScript);
    destination.push(">");
    requiresStyleInsertion ? (0 === (completedSegments.instructions & 4) && (completedSegments.instructions |= 4, destination.push(
      '$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};'
    )), 0 === (completedSegments.instructions & 2) && (completedSegments.instructions |= 2, destination.push(
      '$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};\n$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};'
    )), 0 === (completedSegments.instructions & 8) ? (completedSegments.instructions |= 8, destination.push(
      '$RM=new Map;$RR=function(n,w,p){function u(q){this._p=null;q()}for(var r=new Map,t=document,h,b,e=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=[],k=0;b=e[k++];)"not all"===b.getAttribute("media")?v.push(b):("LINK"===b.tagName&&$RM.set(b.getAttribute("href"),b),r.set(b.dataset.precedence,h=b));e=0;b=[];var l,a;for(k=!0;;){if(k){var f=p[e++];if(!f){k=!1;e=0;continue}var c=!1,m=0;var d=f[m++];if(a=$RM.get(d)){var g=a._p;c=!0}else{a=t.createElement("link");a.href=d;a.rel=\n"stylesheet";for(a.dataset.precedence=l=f[m++];g=f[m++];)a.setAttribute(g,f[m++]);g=a._p=new Promise(function(q,x){a.onload=u.bind(a,q);a.onerror=u.bind(a,x)});$RM.set(d,a)}d=a.getAttribute("media");!g||d&&!matchMedia(d).matches||b.push(g);if(c)continue}else{a=v[e++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=r.get(l)||h;c===h&&(h=a);r.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=t.head,c.insertBefore(a,c.firstChild))}if(p=document.getElementById(n))p.previousSibling.data=\n"$~";Promise.all(b).then($RC.bind(null,n,w),$RX.bind(null,n,"CSS failed to load"))};$RR("'
    )) : destination.push('$RR("')) : (0 === (completedSegments.instructions & 2) && (completedSegments.instructions |= 2, destination.push(
      '$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};\n$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};'
    )), destination.push('$RC("'));
    completedSegments = i.toString(16);
    destination.push(request.boundaryPrefix);
    destination.push(completedSegments);
    destination.push('","');
    destination.push(request.segmentPrefix);
    destination.push(completedSegments);
    requiresStyleInsertion ? (destination.push('",'), writeStyleResourceDependenciesInJS(destination, boundary)) : destination.push('"');
    boundary = destination.push(")<\/script>");
    return writeBootstrap(destination, request) && boundary;
  }
  function flushPartiallyCompletedSegment(request, destination, boundary, segment) {
    if (2 === segment.status) return true;
    var hoistableState = boundary.contentState, segmentID = segment.id;
    if (-1 === segmentID) {
      if (-1 === (segment.id = boundary.rootSegmentID))
        throw Error(formatProdErrorMessage(392));
      return flushSegmentContainer(request, destination, segment, hoistableState);
    }
    if (segmentID === boundary.rootSegmentID)
      return flushSegmentContainer(request, destination, segment, hoistableState);
    flushSegmentContainer(request, destination, segment, hoistableState);
    boundary = request.resumableState;
    request = request.renderState;
    destination.push(request.startInlineScript);
    destination.push(">");
    0 === (boundary.instructions & 1) ? (boundary.instructions |= 1, destination.push(
      '$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'
    )) : destination.push('$RS("');
    destination.push(request.segmentPrefix);
    segmentID = segmentID.toString(16);
    destination.push(segmentID);
    destination.push('","');
    destination.push(request.placeholderPrefix);
    destination.push(segmentID);
    destination = destination.push('")<\/script>');
    return destination;
  }
  var flushingPartialBoundaries = false;
  function flushCompletedQueues(request, destination) {
    try {
      if (!(0 < request.pendingRootTasks)) {
        var i, completedRootSegment = request.completedRootSegment;
        if (null !== completedRootSegment) {
          if (5 === completedRootSegment.status) return;
          var completedPreambleSegments = request.completedPreambleSegments;
          if (null === completedPreambleSegments) return;
          flushedByteSize = request.byteSize;
          var resumableState = request.resumableState, renderState = request.renderState, preamble = renderState.preamble, htmlChunks = preamble.htmlChunks, headChunks = preamble.headChunks, i$jscomp$0;
          if (htmlChunks) {
            for (i$jscomp$0 = 0; i$jscomp$0 < htmlChunks.length; i$jscomp$0++)
              destination.push(htmlChunks[i$jscomp$0]);
            if (headChunks)
              for (i$jscomp$0 = 0; i$jscomp$0 < headChunks.length; i$jscomp$0++)
                destination.push(headChunks[i$jscomp$0]);
            else {
              var chunk = startChunkForTag("head");
              destination.push(chunk);
              destination.push(">");
            }
          } else if (headChunks)
            for (i$jscomp$0 = 0; i$jscomp$0 < headChunks.length; i$jscomp$0++)
              destination.push(headChunks[i$jscomp$0]);
          var charsetChunks = renderState.charsetChunks;
          for (i$jscomp$0 = 0; i$jscomp$0 < charsetChunks.length; i$jscomp$0++)
            destination.push(charsetChunks[i$jscomp$0]);
          charsetChunks.length = 0;
          renderState.preconnects.forEach(flushResource, destination);
          renderState.preconnects.clear();
          var viewportChunks = renderState.viewportChunks;
          for (i$jscomp$0 = 0; i$jscomp$0 < viewportChunks.length; i$jscomp$0++)
            destination.push(viewportChunks[i$jscomp$0]);
          viewportChunks.length = 0;
          renderState.fontPreloads.forEach(flushResource, destination);
          renderState.fontPreloads.clear();
          renderState.highImagePreloads.forEach(flushResource, destination);
          renderState.highImagePreloads.clear();
          currentlyFlushingRenderState = renderState;
          renderState.styles.forEach(flushStylesInPreamble, destination);
          currentlyFlushingRenderState = null;
          var importMapChunks = renderState.importMapChunks;
          for (i$jscomp$0 = 0; i$jscomp$0 < importMapChunks.length; i$jscomp$0++)
            destination.push(importMapChunks[i$jscomp$0]);
          importMapChunks.length = 0;
          renderState.bootstrapScripts.forEach(flushResource, destination);
          renderState.scripts.forEach(flushResource, destination);
          renderState.scripts.clear();
          renderState.bulkPreloads.forEach(flushResource, destination);
          renderState.bulkPreloads.clear();
          resumableState.instructions |= 32;
          var hoistableChunks = renderState.hoistableChunks;
          for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)
            destination.push(hoistableChunks[i$jscomp$0]);
          for (resumableState = hoistableChunks.length = 0; resumableState < completedPreambleSegments.length; resumableState++) {
            var segments2 = completedPreambleSegments[resumableState];
            for (renderState = 0; renderState < segments2.length; renderState++)
              flushSegment(request, destination, segments2[renderState], null);
          }
          var preamble$jscomp$0 = request.renderState.preamble, headChunks$jscomp$0 = preamble$jscomp$0.headChunks;
          if (preamble$jscomp$0.htmlChunks || headChunks$jscomp$0) {
            var chunk$jscomp$0 = endChunkForTag("head");
            destination.push(chunk$jscomp$0);
          }
          var bodyChunks = preamble$jscomp$0.bodyChunks;
          if (bodyChunks)
            for (completedPreambleSegments = 0; completedPreambleSegments < bodyChunks.length; completedPreambleSegments++)
              destination.push(bodyChunks[completedPreambleSegments]);
          flushSegment(request, destination, completedRootSegment, null);
          request.completedRootSegment = null;
          var renderState$jscomp$0 = request.renderState;
          if (0 !== request.allPendingTasks || 0 !== request.clientRenderedBoundaries.length || 0 !== request.completedBoundaries.length || null !== request.trackedPostpones && (0 !== request.trackedPostpones.rootNodes.length || null !== request.trackedPostpones.rootSlots)) {
            var resumableState$jscomp$0 = request.resumableState;
            if (0 === (resumableState$jscomp$0.instructions & 64)) {
              resumableState$jscomp$0.instructions |= 64;
              destination.push(renderState$jscomp$0.startInlineScript);
              if (0 === (resumableState$jscomp$0.instructions & 32)) {
                resumableState$jscomp$0.instructions |= 32;
                var shellId = "_" + resumableState$jscomp$0.idPrefix + "R_";
                destination.push(' id="');
                var chunk$jscomp$1 = escapeTextForBrowser(shellId);
                destination.push(chunk$jscomp$1);
                destination.push('"');
              }
              destination.push(">");
              destination.push(
                "requestAnimationFrame(function(){$RT=performance.now()});"
              );
              destination.push("<\/script>");
            }
          }
          writeBootstrap(destination, renderState$jscomp$0);
        }
        var renderState$jscomp$1 = request.renderState;
        completedRootSegment = 0;
        var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;
        for (completedRootSegment = 0; completedRootSegment < viewportChunks$jscomp$0.length; completedRootSegment++)
          destination.push(viewportChunks$jscomp$0[completedRootSegment]);
        viewportChunks$jscomp$0.length = 0;
        renderState$jscomp$1.preconnects.forEach(flushResource, destination);
        renderState$jscomp$1.preconnects.clear();
        renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);
        renderState$jscomp$1.fontPreloads.clear();
        renderState$jscomp$1.highImagePreloads.forEach(
          flushResource,
          destination
        );
        renderState$jscomp$1.highImagePreloads.clear();
        renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);
        renderState$jscomp$1.scripts.forEach(flushResource, destination);
        renderState$jscomp$1.scripts.clear();
        renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);
        renderState$jscomp$1.bulkPreloads.clear();
        var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;
        for (completedRootSegment = 0; completedRootSegment < hoistableChunks$jscomp$0.length; completedRootSegment++)
          destination.push(hoistableChunks$jscomp$0[completedRootSegment]);
        hoistableChunks$jscomp$0.length = 0;
        var clientRenderedBoundaries = request.clientRenderedBoundaries;
        for (i = 0; i < clientRenderedBoundaries.length; i++) {
          var boundary = clientRenderedBoundaries[i];
          renderState$jscomp$1 = destination;
          var resumableState$jscomp$1 = request.resumableState, renderState$jscomp$2 = request.renderState, id2 = boundary.rootSegmentID, errorDigest = boundary.errorDigest;
          renderState$jscomp$1.push(renderState$jscomp$2.startInlineScript);
          renderState$jscomp$1.push(">");
          0 === (resumableState$jscomp$1.instructions & 4) ? (resumableState$jscomp$1.instructions |= 4, renderState$jscomp$1.push(
            '$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("'
          )) : renderState$jscomp$1.push('$RX("');
          renderState$jscomp$1.push(renderState$jscomp$2.boundaryPrefix);
          var chunk$jscomp$2 = id2.toString(16);
          renderState$jscomp$1.push(chunk$jscomp$2);
          renderState$jscomp$1.push('"');
          if (errorDigest) {
            renderState$jscomp$1.push(",");
            var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(
              errorDigest || ""
            );
            renderState$jscomp$1.push(chunk$jscomp$3);
          }
          var JSCompiler_inline_result = renderState$jscomp$1.push(")<\/script>");
          if (!JSCompiler_inline_result) {
            request.destination = null;
            i++;
            clientRenderedBoundaries.splice(0, i);
            return;
          }
        }
        clientRenderedBoundaries.splice(0, i);
        var completedBoundaries = request.completedBoundaries;
        for (i = 0; i < completedBoundaries.length; i++)
          if (!flushCompletedBoundary(request, destination, completedBoundaries[i])) {
            request.destination = null;
            i++;
            completedBoundaries.splice(0, i);
            return;
          }
        completedBoundaries.splice(0, i);
        flushingPartialBoundaries = true;
        var partialBoundaries = request.partialBoundaries;
        for (i = 0; i < partialBoundaries.length; i++) {
          var boundary$69 = partialBoundaries[i];
          a: {
            clientRenderedBoundaries = request;
            boundary = destination;
            flushedByteSize = boundary$69.byteSize;
            var completedSegments = boundary$69.completedSegments;
            for (JSCompiler_inline_result = 0; JSCompiler_inline_result < completedSegments.length; JSCompiler_inline_result++)
              if (!flushPartiallyCompletedSegment(
                clientRenderedBoundaries,
                boundary,
                boundary$69,
                completedSegments[JSCompiler_inline_result]
              )) {
                JSCompiler_inline_result++;
                completedSegments.splice(0, JSCompiler_inline_result);
                var JSCompiler_inline_result$jscomp$0 = false;
                break a;
              }
            completedSegments.splice(0, JSCompiler_inline_result);
            var row = boundary$69.row;
            null !== row && row.together && 1 === boundary$69.pendingTasks && (1 === row.pendingTasks ? unblockSuspenseListRow(
              clientRenderedBoundaries,
              row,
              row.hoistables
            ) : row.pendingTasks--);
            JSCompiler_inline_result$jscomp$0 = writeHoistablesForBoundary(
              boundary,
              boundary$69.contentState,
              clientRenderedBoundaries.renderState
            );
          }
          if (!JSCompiler_inline_result$jscomp$0) {
            request.destination = null;
            i++;
            partialBoundaries.splice(0, i);
            return;
          }
        }
        partialBoundaries.splice(0, i);
        flushingPartialBoundaries = false;
        var largeBoundaries = request.completedBoundaries;
        for (i = 0; i < largeBoundaries.length; i++)
          if (!flushCompletedBoundary(request, destination, largeBoundaries[i])) {
            request.destination = null;
            i++;
            largeBoundaries.splice(0, i);
            return;
          }
        largeBoundaries.splice(0, i);
      }
    } finally {
      flushingPartialBoundaries = false, 0 === request.allPendingTasks && 0 === request.clientRenderedBoundaries.length && 0 === request.completedBoundaries.length && (request.flushScheduled = false, i = request.resumableState, i.hasBody && (partialBoundaries = endChunkForTag("body"), destination.push(partialBoundaries)), i.hasHtml && (i = endChunkForTag("html"), destination.push(i)), request.status = 14, destination.push(null), request.destination = null);
    }
  }
  function enqueueFlush(request) {
    if (false === request.flushScheduled && 0 === request.pingedTasks.length && null !== request.destination) {
      request.flushScheduled = true;
      var destination = request.destination;
      destination ? flushCompletedQueues(request, destination) : request.flushScheduled = false;
    }
  }
  function startFlowing(request, destination) {
    if (13 === request.status)
      request.status = 14, destination.destroy(request.fatalError);
    else if (14 !== request.status && null === request.destination) {
      request.destination = destination;
      try {
        flushCompletedQueues(request, destination);
      } catch (error) {
        logRecoverableError(request, error, {}), fatalError(request, error);
      }
    }
  }
  function abort(request, reason) {
    if (11 === request.status || 10 === request.status) request.status = 12;
    try {
      var abortableTasks = request.abortableTasks;
      if (0 < abortableTasks.size) {
        var error = void 0 === reason ? Error(formatProdErrorMessage(432)) : "object" === typeof reason && null !== reason && "function" === typeof reason.then ? Error(formatProdErrorMessage(530)) : reason;
        request.fatalError = error;
        abortableTasks.forEach(function(task) {
          return abortTask(task, request, error);
        });
        abortableTasks.clear();
      }
      null !== request.destination && flushCompletedQueues(request, request.destination);
    } catch (error$71) {
      logRecoverableError(request, error$71, {}), fatalError(request, error$71);
    }
  }
  function addToReplayParent(node, parentKeyPath, trackedPostpones) {
    if (null === parentKeyPath) trackedPostpones.rootNodes.push(node);
    else {
      var workingMap = trackedPostpones.workingMap, parentNode = workingMap.get(parentKeyPath);
      void 0 === parentNode && (parentNode = [parentKeyPath[1], parentKeyPath[2], [], null], workingMap.set(parentKeyPath, parentNode), addToReplayParent(parentNode, parentKeyPath[0], trackedPostpones));
      parentNode[2].push(node);
    }
  }
  function onError() {
  }
  function renderToStringImpl(children, options, generateStaticMarkup, abortReason) {
    var didFatal = false, fatalError2 = null, result = "", readyToStream = false;
    options = createResumableState(options ? options.identifierPrefix : void 0);
    children = createRequest(
      children,
      options,
      createRenderState(options, generateStaticMarkup),
      createFormatContext(0, null, 0, null),
      Infinity,
      onError,
      void 0,
      function() {
        readyToStream = true;
      },
      void 0,
      void 0,
      void 0
    );
    children.flushScheduled = null !== children.destination;
    performWork(children);
    10 === children.status && (children.status = 11);
    null === children.trackedPostpones && safelyEmitEarlyPreloads(children, 0 === children.pendingRootTasks);
    abort(children, abortReason);
    startFlowing(children, {
      push: function(chunk) {
        null !== chunk && (result += chunk);
        return true;
      },
      destroy: function(error) {
        didFatal = true;
        fatalError2 = error;
      }
    });
    if (didFatal && fatalError2 !== abortReason) throw fatalError2;
    if (!readyToStream) throw Error(formatProdErrorMessage(426));
    return result;
  }
  reactDomServerLegacy_browser_production.renderToStaticMarkup = function(children, options) {
    return renderToStringImpl(
      children,
      options,
      true,
      'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server'
    );
  };
  reactDomServerLegacy_browser_production.renderToString = function(children, options) {
    return renderToStringImpl(
      children,
      options,
      false,
      'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server'
    );
  };
  reactDomServerLegacy_browser_production.version = "19.2.0";
  return reactDomServerLegacy_browser_production;
}
var hasRequiredServer_edge;
function requireServer_edge() {
  if (hasRequiredServer_edge) return server_edge;
  hasRequiredServer_edge = 1;
  var b2;
  var l;
  {
    b2 = requireReactDomServer_edge_production();
    l = requireReactDomServerLegacy_browser_production();
  }
  server_edge.version = b2.version;
  server_edge.renderToReadableStream = b2.renderToReadableStream;
  server_edge.renderToString = l.renderToString;
  server_edge.renderToStaticMarkup = l.renderToStaticMarkup;
  server_edge.resume = b2.resume;
  return server_edge;
}
var server_edgeExports = requireServer_edge();
async function handleRequest(request, responseStatusCode, responseHeaders, routerContext, loadContext) {
  let body = await server_edgeExports.renderToReadableStream(
    /* @__PURE__ */ jsxRuntimeExports.jsx(ServerRouter, { context: routerContext, url: request.url }),
    {
      signal: request.signal,
      onError(error) {
        console.error(error);
        responseStatusCode = 500;
      }
    }
  );
  if (isbot(request.headers.get("user-agent") || "")) {
    await body.allReady;
  }
  responseHeaders.set("Content-Type", "text/html");
  responseHeaders.set("X-Content-Type-Options", "nosniff");
  responseHeaders.set("X-Frame-Options", "DENY");
  responseHeaders.set("Referrer-Policy", "strict-origin-when-cross-origin");
  responseHeaders.set("Permissions-Policy", "camera=(), microphone=(), geolocation=(), payment=()");
  const isProd = loadContext.cloudflare.env.ENVIRONMENT === "production";
  if (isProd) {
    responseHeaders.set("Strict-Transport-Security", "max-age=31536000; includeSubDomains; preload");
  }
  responseHeaders.set("Content-Security-Policy", [
    "default-src 'self'",
    "script-src 'self' 'unsafe-inline' 'unsafe-eval' https://static.cloudflareinsights.com https://cdn.jsdelivr.net",
    "style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.jsdelivr.net",
    "img-src 'self' data: blob: https:",
    "media-src 'self' https: data: blob:",
    "font-src 'self' data: https://fonts.gstatic.com",
    "connect-src 'self' https://cloudflareinsights.com https://api.i-meto.com https://cdn.jsdelivr.net",
    "frame-ancestors 'none'",
    "base-uri 'self'",
    "form-action 'self'"
  ].join("; "));
  return new Response(body, {
    headers: responseHeaders,
    status: responseStatusCode
  });
}
const entryServer = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: handleRequest
}, Symbol.toStringTag, { value: "Module" }));
const LayoutGroupContext = reactExports.createContext({});
function useConstant(init) {
  const ref = reactExports.useRef(null);
  if (ref.current === null) {
    ref.current = init();
  }
  return ref.current;
}
const isBrowser = typeof window !== "undefined";
const useIsomorphicLayoutEffect = isBrowser ? reactExports.useLayoutEffect : reactExports.useEffect;
const PresenceContext = /* @__PURE__ */ reactExports.createContext(null);
function addUniqueItem(arr, item) {
  if (arr.indexOf(item) === -1)
    arr.push(item);
}
function removeItem(arr, item) {
  const index2 = arr.indexOf(item);
  if (index2 > -1)
    arr.splice(index2, 1);
}
const clamp = (min, max, v2) => {
  if (v2 > max)
    return max;
  if (v2 < min)
    return min;
  return v2;
};
let invariant = () => {
};
const MotionGlobalConfig = {};
const isNumericalString = (v2) => /^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(v2);
function isObject(value) {
  return typeof value === "object" && value !== null;
}
const isZeroValueString = (v2) => /^0[^.\s]+$/u.test(v2);
// @__NO_SIDE_EFFECTS__
function memo(callback) {
  let result;
  return () => {
    if (result === void 0)
      result = callback();
    return result;
  };
}
const noop = /* @__NO_SIDE_EFFECTS__ */ (any) => any;
const combineFunctions = (a, b2) => (v2) => b2(a(v2));
const pipe = (...transformers) => transformers.reduce(combineFunctions);
const progress = /* @__NO_SIDE_EFFECTS__ */ (from, to, value) => {
  const toFromDifference = to - from;
  return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;
};
class SubscriptionManager {
  constructor() {
    this.subscriptions = [];
  }
  add(handler) {
    addUniqueItem(this.subscriptions, handler);
    return () => removeItem(this.subscriptions, handler);
  }
  notify(a, b2, c) {
    const numSubscriptions = this.subscriptions.length;
    if (!numSubscriptions)
      return;
    if (numSubscriptions === 1) {
      this.subscriptions[0](a, b2, c);
    } else {
      for (let i = 0; i < numSubscriptions; i++) {
        const handler = this.subscriptions[i];
        handler && handler(a, b2, c);
      }
    }
  }
  getSize() {
    return this.subscriptions.length;
  }
  clear() {
    this.subscriptions.length = 0;
  }
}
const secondsToMilliseconds = /* @__NO_SIDE_EFFECTS__ */ (seconds) => seconds * 1e3;
const millisecondsToSeconds = /* @__NO_SIDE_EFFECTS__ */ (milliseconds) => milliseconds / 1e3;
function velocityPerSecond(velocity, frameDuration) {
  return frameDuration ? velocity * (1e3 / frameDuration) : 0;
}
const calcBezier = (t, a1, a2) => (((1 - 3 * a2 + 3 * a1) * t + (3 * a2 - 6 * a1)) * t + 3 * a1) * t;
const subdivisionPrecision = 1e-7;
const subdivisionMaxIterations = 12;
function binarySubdivide(x2, lowerBound, upperBound, mX1, mX2) {
  let currentX;
  let currentT;
  let i = 0;
  do {
    currentT = lowerBound + (upperBound - lowerBound) / 2;
    currentX = calcBezier(currentT, mX1, mX2) - x2;
    if (currentX > 0) {
      upperBound = currentT;
    } else {
      lowerBound = currentT;
    }
  } while (Math.abs(currentX) > subdivisionPrecision && ++i < subdivisionMaxIterations);
  return currentT;
}
function cubicBezier(mX1, mY1, mX2, mY2) {
  if (mX1 === mY1 && mX2 === mY2)
    return noop;
  const getTForX = (aX) => binarySubdivide(aX, 0, 1, mX1, mX2);
  return (t) => t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);
}
const mirrorEasing = (easing) => (p) => p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;
const reverseEasing = (easing) => (p) => 1 - easing(1 - p);
const backOut = /* @__PURE__ */ cubicBezier(0.33, 1.53, 0.69, 0.99);
const backIn = /* @__PURE__ */ reverseEasing(backOut);
const backInOut = /* @__PURE__ */ mirrorEasing(backIn);
const anticipate = (p) => (p *= 2) < 1 ? 0.5 * backIn(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));
const circIn = (p) => 1 - Math.sin(Math.acos(p));
const circOut = reverseEasing(circIn);
const circInOut = mirrorEasing(circIn);
const easeIn = /* @__PURE__ */ cubicBezier(0.42, 0, 1, 1);
const easeOut = /* @__PURE__ */ cubicBezier(0, 0, 0.58, 1);
const easeInOut = /* @__PURE__ */ cubicBezier(0.42, 0, 0.58, 1);
const isEasingArray = (ease2) => {
  return Array.isArray(ease2) && typeof ease2[0] !== "number";
};
const isBezierDefinition = (easing) => Array.isArray(easing) && typeof easing[0] === "number";
const easingLookup = {
  linear: noop,
  easeIn,
  easeInOut,
  easeOut,
  circIn,
  circInOut,
  circOut,
  backIn,
  backInOut,
  backOut,
  anticipate
};
const isValidEasing = (easing) => {
  return typeof easing === "string";
};
const easingDefinitionToFunction = (definition) => {
  if (isBezierDefinition(definition)) {
    invariant(definition.length === 4);
    const [x1, y1, x2, y2] = definition;
    return cubicBezier(x1, y1, x2, y2);
  } else if (isValidEasing(definition)) {
    return easingLookup[definition];
  }
  return definition;
};
const stepsOrder = [
  "setup",
  // Compute
  "read",
  // Read
  "resolveKeyframes",
  // Write/Read/Write/Read
  "preUpdate",
  // Compute
  "update",
  // Compute
  "preRender",
  // Compute
  "render",
  // Write
  "postRender"
  // Compute
];
function createRenderStep(runNextFrame, stepName) {
  let thisFrame = /* @__PURE__ */ new Set();
  let nextFrame = /* @__PURE__ */ new Set();
  let isProcessing = false;
  let flushNextFrame = false;
  const toKeepAlive = /* @__PURE__ */ new WeakSet();
  let latestFrameData = {
    delta: 0,
    timestamp: 0,
    isProcessing: false
  };
  function triggerCallback(callback) {
    if (toKeepAlive.has(callback)) {
      step.schedule(callback);
      runNextFrame();
    }
    callback(latestFrameData);
  }
  const step = {
    /**
     * Schedule a process to run on the next frame.
     */
    schedule: (callback, keepAlive = false, immediate = false) => {
      const addToCurrentFrame = immediate && isProcessing;
      const queue = addToCurrentFrame ? thisFrame : nextFrame;
      if (keepAlive)
        toKeepAlive.add(callback);
      if (!queue.has(callback))
        queue.add(callback);
      return callback;
    },
    /**
     * Cancel the provided callback from running on the next frame.
     */
    cancel: (callback) => {
      nextFrame.delete(callback);
      toKeepAlive.delete(callback);
    },
    /**
     * Execute all schedule callbacks.
     */
    process: (frameData2) => {
      latestFrameData = frameData2;
      if (isProcessing) {
        flushNextFrame = true;
        return;
      }
      isProcessing = true;
      [thisFrame, nextFrame] = [nextFrame, thisFrame];
      thisFrame.forEach(triggerCallback);
      thisFrame.clear();
      isProcessing = false;
      if (flushNextFrame) {
        flushNextFrame = false;
        step.process(frameData2);
      }
    }
  };
  return step;
}
const maxElapsed$1 = 40;
function createRenderBatcher(scheduleNextBatch, allowKeepAlive) {
  let runNextFrame = false;
  let useDefaultElapsed = true;
  const state = {
    delta: 0,
    timestamp: 0,
    isProcessing: false
  };
  const flagRunNextFrame = () => runNextFrame = true;
  const steps = stepsOrder.reduce((acc, key) => {
    acc[key] = createRenderStep(flagRunNextFrame);
    return acc;
  }, {});
  const { setup, read: read2, resolveKeyframes, preUpdate, update, preRender, render, postRender } = steps;
  const processBatch = () => {
    const timestamp = MotionGlobalConfig.useManualTiming ? state.timestamp : performance.now();
    runNextFrame = false;
    if (!MotionGlobalConfig.useManualTiming) {
      state.delta = useDefaultElapsed ? 1e3 / 60 : Math.max(Math.min(timestamp - state.timestamp, maxElapsed$1), 1);
    }
    state.timestamp = timestamp;
    state.isProcessing = true;
    setup.process(state);
    read2.process(state);
    resolveKeyframes.process(state);
    preUpdate.process(state);
    update.process(state);
    preRender.process(state);
    render.process(state);
    postRender.process(state);
    state.isProcessing = false;
    if (runNextFrame && allowKeepAlive) {
      useDefaultElapsed = false;
      scheduleNextBatch(processBatch);
    }
  };
  const wake = () => {
    runNextFrame = true;
    useDefaultElapsed = true;
    if (!state.isProcessing) {
      scheduleNextBatch(processBatch);
    }
  };
  const schedule = stepsOrder.reduce((acc, key) => {
    const step = steps[key];
    acc[key] = (process2, keepAlive = false, immediate = false) => {
      if (!runNextFrame)
        wake();
      return step.schedule(process2, keepAlive, immediate);
    };
    return acc;
  }, {});
  const cancel = (process2) => {
    for (let i = 0; i < stepsOrder.length; i++) {
      steps[stepsOrder[i]].cancel(process2);
    }
  };
  return { schedule, cancel, state, steps };
}
const { schedule: frame, cancel: cancelFrame, state: frameData, steps: frameSteps } = /* @__PURE__ */ createRenderBatcher(typeof requestAnimationFrame !== "undefined" ? requestAnimationFrame : noop, true);
let now;
function clearTime() {
  now = void 0;
}
const time = {
  now: () => {
    if (now === void 0) {
      time.set(frameData.isProcessing || MotionGlobalConfig.useManualTiming ? frameData.timestamp : performance.now());
    }
    return now;
  },
  set: (newTime) => {
    now = newTime;
    queueMicrotask(clearTime);
  }
};
const checkStringStartsWith = (token) => (key) => typeof key === "string" && key.startsWith(token);
const isCSSVariableName = /* @__PURE__ */ checkStringStartsWith("--");
const startsAsVariableToken = /* @__PURE__ */ checkStringStartsWith("var(--");
const isCSSVariableToken = (value) => {
  const startsWithToken = startsAsVariableToken(value);
  if (!startsWithToken)
    return false;
  return singleCssVariableRegex.test(value.split("/*")[0].trim());
};
const singleCssVariableRegex = /var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;
const number = {
  test: (v2) => typeof v2 === "number",
  parse: parseFloat,
  transform: (v2) => v2
};
const alpha = {
  ...number,
  transform: (v2) => clamp(0, 1, v2)
};
const scale = {
  ...number,
  default: 1
};
const sanitize = (v2) => Math.round(v2 * 1e5) / 1e5;
const floatRegex = /-?(?:\d+(?:\.\d+)?|\.\d+)/gu;
function isNullish(v2) {
  return v2 == null;
}
const singleColorRegex = /^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;
const isColorString = (type, testProp) => (v2) => {
  return Boolean(typeof v2 === "string" && singleColorRegex.test(v2) && v2.startsWith(type) || testProp && !isNullish(v2) && Object.prototype.hasOwnProperty.call(v2, testProp));
};
const splitColor = (aName, bName, cName) => (v2) => {
  if (typeof v2 !== "string")
    return v2;
  const [a, b2, c, alpha2] = v2.match(floatRegex);
  return {
    [aName]: parseFloat(a),
    [bName]: parseFloat(b2),
    [cName]: parseFloat(c),
    alpha: alpha2 !== void 0 ? parseFloat(alpha2) : 1
  };
};
const clampRgbUnit = (v2) => clamp(0, 255, v2);
const rgbUnit = {
  ...number,
  transform: (v2) => Math.round(clampRgbUnit(v2))
};
const rgba = {
  test: /* @__PURE__ */ isColorString("rgb", "red"),
  parse: /* @__PURE__ */ splitColor("red", "green", "blue"),
  transform: ({ red, green, blue, alpha: alpha$1 = 1 }) => "rgba(" + rgbUnit.transform(red) + ", " + rgbUnit.transform(green) + ", " + rgbUnit.transform(blue) + ", " + sanitize(alpha.transform(alpha$1)) + ")"
};
function parseHex(v2) {
  let r2 = "";
  let g = "";
  let b2 = "";
  let a = "";
  if (v2.length > 5) {
    r2 = v2.substring(1, 3);
    g = v2.substring(3, 5);
    b2 = v2.substring(5, 7);
    a = v2.substring(7, 9);
  } else {
    r2 = v2.substring(1, 2);
    g = v2.substring(2, 3);
    b2 = v2.substring(3, 4);
    a = v2.substring(4, 5);
    r2 += r2;
    g += g;
    b2 += b2;
    a += a;
  }
  return {
    red: parseInt(r2, 16),
    green: parseInt(g, 16),
    blue: parseInt(b2, 16),
    alpha: a ? parseInt(a, 16) / 255 : 1
  };
}
const hex = {
  test: /* @__PURE__ */ isColorString("#"),
  parse: parseHex,
  transform: rgba.transform
};
const createUnitType = /* @__NO_SIDE_EFFECTS__ */ (unit) => ({
  test: (v2) => typeof v2 === "string" && v2.endsWith(unit) && v2.split(" ").length === 1,
  parse: parseFloat,
  transform: (v2) => `${v2}${unit}`
});
const degrees = /* @__PURE__ */ createUnitType("deg");
const percent = /* @__PURE__ */ createUnitType("%");
const px = /* @__PURE__ */ createUnitType("px");
const vh = /* @__PURE__ */ createUnitType("vh");
const vw = /* @__PURE__ */ createUnitType("vw");
const progressPercentage = /* @__PURE__ */ (() => ({
  ...percent,
  parse: (v2) => percent.parse(v2) / 100,
  transform: (v2) => percent.transform(v2 * 100)
}))();
const hsla = {
  test: /* @__PURE__ */ isColorString("hsl", "hue"),
  parse: /* @__PURE__ */ splitColor("hue", "saturation", "lightness"),
  transform: ({ hue, saturation, lightness, alpha: alpha$1 = 1 }) => {
    return "hsla(" + Math.round(hue) + ", " + percent.transform(sanitize(saturation)) + ", " + percent.transform(sanitize(lightness)) + ", " + sanitize(alpha.transform(alpha$1)) + ")";
  }
};
const color = {
  test: (v2) => rgba.test(v2) || hex.test(v2) || hsla.test(v2),
  parse: (v2) => {
    if (rgba.test(v2)) {
      return rgba.parse(v2);
    } else if (hsla.test(v2)) {
      return hsla.parse(v2);
    } else {
      return hex.parse(v2);
    }
  },
  transform: (v2) => {
    return typeof v2 === "string" ? v2 : v2.hasOwnProperty("red") ? rgba.transform(v2) : hsla.transform(v2);
  },
  getAnimatableNone: (v2) => {
    const parsed = color.parse(v2);
    parsed.alpha = 0;
    return color.transform(parsed);
  }
};
const colorRegex = /(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;
function test(v2) {
  return isNaN(v2) && typeof v2 === "string" && (v2.match(floatRegex)?.length || 0) + (v2.match(colorRegex)?.length || 0) > 0;
}
const NUMBER_TOKEN = "number";
const COLOR_TOKEN = "color";
const VAR_TOKEN = "var";
const VAR_FUNCTION_TOKEN = "var(";
const SPLIT_TOKEN = "${}";
const complexRegex = /var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;
function analyseComplexValue(value) {
  const originalValue = value.toString();
  const values = [];
  const indexes = {
    color: [],
    number: [],
    var: []
  };
  const types = [];
  let i = 0;
  const tokenised = originalValue.replace(complexRegex, (parsedValue) => {
    if (color.test(parsedValue)) {
      indexes.color.push(i);
      types.push(COLOR_TOKEN);
      values.push(color.parse(parsedValue));
    } else if (parsedValue.startsWith(VAR_FUNCTION_TOKEN)) {
      indexes.var.push(i);
      types.push(VAR_TOKEN);
      values.push(parsedValue);
    } else {
      indexes.number.push(i);
      types.push(NUMBER_TOKEN);
      values.push(parseFloat(parsedValue));
    }
    ++i;
    return SPLIT_TOKEN;
  });
  const split = tokenised.split(SPLIT_TOKEN);
  return { values, split, indexes, types };
}
function parseComplexValue(v2) {
  return analyseComplexValue(v2).values;
}
function createTransformer(source) {
  const { split, types } = analyseComplexValue(source);
  const numSections = split.length;
  return (v2) => {
    let output = "";
    for (let i = 0; i < numSections; i++) {
      output += split[i];
      if (v2[i] !== void 0) {
        const type = types[i];
        if (type === NUMBER_TOKEN) {
          output += sanitize(v2[i]);
        } else if (type === COLOR_TOKEN) {
          output += color.transform(v2[i]);
        } else {
          output += v2[i];
        }
      }
    }
    return output;
  };
}
const convertNumbersToZero = (v2) => typeof v2 === "number" ? 0 : color.test(v2) ? color.getAnimatableNone(v2) : v2;
function getAnimatableNone$1(v2) {
  const parsed = parseComplexValue(v2);
  const transformer = createTransformer(v2);
  return transformer(parsed.map(convertNumbersToZero));
}
const complex = {
  test,
  parse: parseComplexValue,
  createTransformer,
  getAnimatableNone: getAnimatableNone$1
};
function hueToRgb(p, q2, t) {
  if (t < 0)
    t += 1;
  if (t > 1)
    t -= 1;
  if (t < 1 / 6)
    return p + (q2 - p) * 6 * t;
  if (t < 1 / 2)
    return q2;
  if (t < 2 / 3)
    return p + (q2 - p) * (2 / 3 - t) * 6;
  return p;
}
function hslaToRgba({ hue, saturation, lightness, alpha: alpha2 }) {
  hue /= 360;
  saturation /= 100;
  lightness /= 100;
  let red = 0;
  let green = 0;
  let blue = 0;
  if (!saturation) {
    red = green = blue = lightness;
  } else {
    const q2 = lightness < 0.5 ? lightness * (1 + saturation) : lightness + saturation - lightness * saturation;
    const p = 2 * lightness - q2;
    red = hueToRgb(p, q2, hue + 1 / 3);
    green = hueToRgb(p, q2, hue);
    blue = hueToRgb(p, q2, hue - 1 / 3);
  }
  return {
    red: Math.round(red * 255),
    green: Math.round(green * 255),
    blue: Math.round(blue * 255),
    alpha: alpha2
  };
}
function mixImmediate(a, b2) {
  return (p) => p > 0 ? b2 : a;
}
const mixNumber$1 = (from, to, progress2) => {
  return from + (to - from) * progress2;
};
const mixLinearColor = (from, to, v2) => {
  const fromExpo = from * from;
  const expo = v2 * (to * to - fromExpo) + fromExpo;
  return expo < 0 ? 0 : Math.sqrt(expo);
};
const colorTypes = [hex, rgba, hsla];
const getColorType = (v2) => colorTypes.find((type) => type.test(v2));
function asRGBA(color2) {
  const type = getColorType(color2);
  if (!Boolean(type))
    return false;
  let model = type.parse(color2);
  if (type === hsla) {
    model = hslaToRgba(model);
  }
  return model;
}
const mixColor = (from, to) => {
  const fromRGBA = asRGBA(from);
  const toRGBA = asRGBA(to);
  if (!fromRGBA || !toRGBA) {
    return mixImmediate(from, to);
  }
  const blended = { ...fromRGBA };
  return (v2) => {
    blended.red = mixLinearColor(fromRGBA.red, toRGBA.red, v2);
    blended.green = mixLinearColor(fromRGBA.green, toRGBA.green, v2);
    blended.blue = mixLinearColor(fromRGBA.blue, toRGBA.blue, v2);
    blended.alpha = mixNumber$1(fromRGBA.alpha, toRGBA.alpha, v2);
    return rgba.transform(blended);
  };
};
const invisibleValues = /* @__PURE__ */ new Set(["none", "hidden"]);
function mixVisibility(origin, target) {
  if (invisibleValues.has(origin)) {
    return (p) => p <= 0 ? origin : target;
  } else {
    return (p) => p >= 1 ? target : origin;
  }
}
function mixNumber(a, b2) {
  return (p) => mixNumber$1(a, b2, p);
}
function getMixer(a) {
  if (typeof a === "number") {
    return mixNumber;
  } else if (typeof a === "string") {
    return isCSSVariableToken(a) ? mixImmediate : color.test(a) ? mixColor : mixComplex;
  } else if (Array.isArray(a)) {
    return mixArray;
  } else if (typeof a === "object") {
    return color.test(a) ? mixColor : mixObject;
  }
  return mixImmediate;
}
function mixArray(a, b2) {
  const output = [...a];
  const numValues = output.length;
  const blendValue = a.map((v2, i) => getMixer(v2)(v2, b2[i]));
  return (p) => {
    for (let i = 0; i < numValues; i++) {
      output[i] = blendValue[i](p);
    }
    return output;
  };
}
function mixObject(a, b2) {
  const output = { ...a, ...b2 };
  const blendValue = {};
  for (const key in output) {
    if (a[key] !== void 0 && b2[key] !== void 0) {
      blendValue[key] = getMixer(a[key])(a[key], b2[key]);
    }
  }
  return (v2) => {
    for (const key in blendValue) {
      output[key] = blendValue[key](v2);
    }
    return output;
  };
}
function matchOrder(origin, target) {
  const orderedOrigin = [];
  const pointers = { color: 0, var: 0, number: 0 };
  for (let i = 0; i < target.values.length; i++) {
    const type = target.types[i];
    const originIndex = origin.indexes[type][pointers[type]];
    const originValue = origin.values[originIndex] ?? 0;
    orderedOrigin[i] = originValue;
    pointers[type]++;
  }
  return orderedOrigin;
}
const mixComplex = (origin, target) => {
  const template = complex.createTransformer(target);
  const originStats = analyseComplexValue(origin);
  const targetStats = analyseComplexValue(target);
  const canInterpolate = originStats.indexes.var.length === targetStats.indexes.var.length && originStats.indexes.color.length === targetStats.indexes.color.length && originStats.indexes.number.length >= targetStats.indexes.number.length;
  if (canInterpolate) {
    if (invisibleValues.has(origin) && !targetStats.values.length || invisibleValues.has(target) && !originStats.values.length) {
      return mixVisibility(origin, target);
    }
    return pipe(mixArray(matchOrder(originStats, targetStats), targetStats.values), template);
  } else {
    return mixImmediate(origin, target);
  }
};
function mix(from, to, p) {
  if (typeof from === "number" && typeof to === "number" && typeof p === "number") {
    return mixNumber$1(from, to, p);
  }
  const mixer = getMixer(from);
  return mixer(from, to);
}
const frameloopDriver = (update) => {
  const passTimestamp = ({ timestamp }) => update(timestamp);
  return {
    start: (keepAlive = true) => frame.update(passTimestamp, keepAlive),
    stop: () => cancelFrame(passTimestamp),
    /**
     * If we're processing this frame we can use the
     * framelocked timestamp to keep things in sync.
     */
    now: () => frameData.isProcessing ? frameData.timestamp : time.now()
  };
};
const generateLinearEasing = (easing, duration, resolution = 10) => {
  let points = "";
  const numPoints = Math.max(Math.round(duration / resolution), 2);
  for (let i = 0; i < numPoints; i++) {
    points += Math.round(easing(i / (numPoints - 1)) * 1e4) / 1e4 + ", ";
  }
  return `linear(${points.substring(0, points.length - 2)})`;
};
const maxGeneratorDuration = 2e4;
function calcGeneratorDuration(generator) {
  let duration = 0;
  const timeStep = 50;
  let state = generator.next(duration);
  while (!state.done && duration < maxGeneratorDuration) {
    duration += timeStep;
    state = generator.next(duration);
  }
  return duration >= maxGeneratorDuration ? Infinity : duration;
}
function createGeneratorEasing(options, scale2 = 100, createGenerator) {
  const generator = createGenerator({ ...options, keyframes: [0, scale2] });
  const duration = Math.min(calcGeneratorDuration(generator), maxGeneratorDuration);
  return {
    type: "keyframes",
    ease: (progress2) => {
      return generator.next(duration * progress2).value / scale2;
    },
    duration: /* @__PURE__ */ millisecondsToSeconds(duration)
  };
}
const velocitySampleDuration = 5;
function calcGeneratorVelocity(resolveValue, t, current) {
  const prevT = Math.max(t - velocitySampleDuration, 0);
  return velocityPerSecond(current - resolveValue(prevT), t - prevT);
}
const springDefaults = {
  // Default spring physics
  stiffness: 100,
  damping: 10,
  mass: 1,
  velocity: 0,
  // Default duration/bounce-based options
  duration: 800,
  // in ms
  bounce: 0.3,
  visualDuration: 0.3,
  // in seconds
  // Rest thresholds
  restSpeed: {
    granular: 0.01,
    default: 2
  },
  restDelta: {
    granular: 5e-3,
    default: 0.5
  },
  // Limits
  minDuration: 0.01,
  // in seconds
  maxDuration: 10,
  // in seconds
  minDamping: 0.05,
  maxDamping: 1
};
const safeMin = 1e-3;
function findSpring({ duration = springDefaults.duration, bounce = springDefaults.bounce, velocity = springDefaults.velocity, mass = springDefaults.mass }) {
  let envelope;
  let derivative;
  let dampingRatio = 1 - bounce;
  dampingRatio = clamp(springDefaults.minDamping, springDefaults.maxDamping, dampingRatio);
  duration = clamp(springDefaults.minDuration, springDefaults.maxDuration, /* @__PURE__ */ millisecondsToSeconds(duration));
  if (dampingRatio < 1) {
    envelope = (undampedFreq2) => {
      const exponentialDecay = undampedFreq2 * dampingRatio;
      const delta = exponentialDecay * duration;
      const a = exponentialDecay - velocity;
      const b2 = calcAngularFreq(undampedFreq2, dampingRatio);
      const c = Math.exp(-delta);
      return safeMin - a / b2 * c;
    };
    derivative = (undampedFreq2) => {
      const exponentialDecay = undampedFreq2 * dampingRatio;
      const delta = exponentialDecay * duration;
      const d2 = delta * velocity + velocity;
      const e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq2, 2) * duration;
      const f = Math.exp(-delta);
      const g = calcAngularFreq(Math.pow(undampedFreq2, 2), dampingRatio);
      const factor = -envelope(undampedFreq2) + safeMin > 0 ? -1 : 1;
      return factor * ((d2 - e) * f) / g;
    };
  } else {
    envelope = (undampedFreq2) => {
      const a = Math.exp(-undampedFreq2 * duration);
      const b2 = (undampedFreq2 - velocity) * duration + 1;
      return -safeMin + a * b2;
    };
    derivative = (undampedFreq2) => {
      const a = Math.exp(-undampedFreq2 * duration);
      const b2 = (velocity - undampedFreq2) * (duration * duration);
      return a * b2;
    };
  }
  const initialGuess = 5 / duration;
  const undampedFreq = approximateRoot(envelope, derivative, initialGuess);
  duration = /* @__PURE__ */ secondsToMilliseconds(duration);
  if (isNaN(undampedFreq)) {
    return {
      stiffness: springDefaults.stiffness,
      damping: springDefaults.damping,
      duration
    };
  } else {
    const stiffness = Math.pow(undampedFreq, 2) * mass;
    return {
      stiffness,
      damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),
      duration
    };
  }
}
const rootIterations = 12;
function approximateRoot(envelope, derivative, initialGuess) {
  let result = initialGuess;
  for (let i = 1; i < rootIterations; i++) {
    result = result - envelope(result) / derivative(result);
  }
  return result;
}
function calcAngularFreq(undampedFreq, dampingRatio) {
  return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);
}
const durationKeys = ["duration", "bounce"];
const physicsKeys = ["stiffness", "damping", "mass"];
function isSpringType(options, keys2) {
  return keys2.some((key) => options[key] !== void 0);
}
function getSpringOptions(options) {
  let springOptions = {
    velocity: springDefaults.velocity,
    stiffness: springDefaults.stiffness,
    damping: springDefaults.damping,
    mass: springDefaults.mass,
    isResolvedFromDuration: false,
    ...options
  };
  if (!isSpringType(options, physicsKeys) && isSpringType(options, durationKeys)) {
    if (options.visualDuration) {
      const visualDuration = options.visualDuration;
      const root2 = 2 * Math.PI / (visualDuration * 1.2);
      const stiffness = root2 * root2;
      const damping = 2 * clamp(0.05, 1, 1 - (options.bounce || 0)) * Math.sqrt(stiffness);
      springOptions = {
        ...springOptions,
        mass: springDefaults.mass,
        stiffness,
        damping
      };
    } else {
      const derived = findSpring(options);
      springOptions = {
        ...springOptions,
        ...derived,
        mass: springDefaults.mass
      };
      springOptions.isResolvedFromDuration = true;
    }
  }
  return springOptions;
}
function spring(optionsOrVisualDuration = springDefaults.visualDuration, bounce = springDefaults.bounce) {
  const options = typeof optionsOrVisualDuration !== "object" ? {
    visualDuration: optionsOrVisualDuration,
    keyframes: [0, 1],
    bounce
  } : optionsOrVisualDuration;
  let { restSpeed, restDelta } = options;
  const origin = options.keyframes[0];
  const target = options.keyframes[options.keyframes.length - 1];
  const state = { done: false, value: origin };
  const { stiffness, damping, mass, duration, velocity, isResolvedFromDuration } = getSpringOptions({
    ...options,
    velocity: -/* @__PURE__ */ millisecondsToSeconds(options.velocity || 0)
  });
  const initialVelocity = velocity || 0;
  const dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));
  const initialDelta = target - origin;
  const undampedAngularFreq = /* @__PURE__ */ millisecondsToSeconds(Math.sqrt(stiffness / mass));
  const isGranularScale = Math.abs(initialDelta) < 5;
  restSpeed || (restSpeed = isGranularScale ? springDefaults.restSpeed.granular : springDefaults.restSpeed.default);
  restDelta || (restDelta = isGranularScale ? springDefaults.restDelta.granular : springDefaults.restDelta.default);
  let resolveSpring;
  if (dampingRatio < 1) {
    const angularFreq = calcAngularFreq(undampedAngularFreq, dampingRatio);
    resolveSpring = (t) => {
      const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);
      return target - envelope * ((initialVelocity + dampingRatio * undampedAngularFreq * initialDelta) / angularFreq * Math.sin(angularFreq * t) + initialDelta * Math.cos(angularFreq * t));
    };
  } else if (dampingRatio === 1) {
    resolveSpring = (t) => target - Math.exp(-undampedAngularFreq * t) * (initialDelta + (initialVelocity + undampedAngularFreq * initialDelta) * t);
  } else {
    const dampedAngularFreq = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);
    resolveSpring = (t) => {
      const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);
      const freqForT = Math.min(dampedAngularFreq * t, 300);
      return target - envelope * ((initialVelocity + dampingRatio * undampedAngularFreq * initialDelta) * Math.sinh(freqForT) + dampedAngularFreq * initialDelta * Math.cosh(freqForT)) / dampedAngularFreq;
    };
  }
  const generator = {
    calculatedDuration: isResolvedFromDuration ? duration || null : null,
    next: (t) => {
      const current = resolveSpring(t);
      if (!isResolvedFromDuration) {
        let currentVelocity = t === 0 ? initialVelocity : 0;
        if (dampingRatio < 1) {
          currentVelocity = t === 0 ? /* @__PURE__ */ secondsToMilliseconds(initialVelocity) : calcGeneratorVelocity(resolveSpring, t, current);
        }
        const isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;
        const isBelowDisplacementThreshold = Math.abs(target - current) <= restDelta;
        state.done = isBelowVelocityThreshold && isBelowDisplacementThreshold;
      } else {
        state.done = t >= duration;
      }
      state.value = state.done ? target : current;
      return state;
    },
    toString: () => {
      const calculatedDuration = Math.min(calcGeneratorDuration(generator), maxGeneratorDuration);
      const easing = generateLinearEasing((progress2) => generator.next(calculatedDuration * progress2).value, calculatedDuration, 30);
      return calculatedDuration + "ms " + easing;
    },
    toTransition: () => {
    }
  };
  return generator;
}
spring.applyToOptions = (options) => {
  const generatorOptions = createGeneratorEasing(options, 100, spring);
  options.ease = generatorOptions.ease;
  options.duration = /* @__PURE__ */ secondsToMilliseconds(generatorOptions.duration);
  options.type = "keyframes";
  return options;
};
function inertia({ keyframes: keyframes2, velocity = 0, power = 0.8, timeConstant = 325, bounceDamping = 10, bounceStiffness = 500, modifyTarget, min, max, restDelta = 0.5, restSpeed }) {
  const origin = keyframes2[0];
  const state = {
    done: false,
    value: origin
  };
  const isOutOfBounds = (v2) => min !== void 0 && v2 < min || max !== void 0 && v2 > max;
  const nearestBoundary = (v2) => {
    if (min === void 0)
      return max;
    if (max === void 0)
      return min;
    return Math.abs(min - v2) < Math.abs(max - v2) ? min : max;
  };
  let amplitude = power * velocity;
  const ideal = origin + amplitude;
  const target = modifyTarget === void 0 ? ideal : modifyTarget(ideal);
  if (target !== ideal)
    amplitude = target - origin;
  const calcDelta = (t) => -amplitude * Math.exp(-t / timeConstant);
  const calcLatest = (t) => target + calcDelta(t);
  const applyFriction = (t) => {
    const delta = calcDelta(t);
    const latest = calcLatest(t);
    state.done = Math.abs(delta) <= restDelta;
    state.value = state.done ? target : latest;
  };
  let timeReachedBoundary;
  let spring$1;
  const checkCatchBoundary = (t) => {
    if (!isOutOfBounds(state.value))
      return;
    timeReachedBoundary = t;
    spring$1 = spring({
      keyframes: [state.value, nearestBoundary(state.value)],
      velocity: calcGeneratorVelocity(calcLatest, t, state.value),
      // TODO: This should be passing * 1000
      damping: bounceDamping,
      stiffness: bounceStiffness,
      restDelta,
      restSpeed
    });
  };
  checkCatchBoundary(0);
  return {
    calculatedDuration: null,
    next: (t) => {
      let hasUpdatedFrame = false;
      if (!spring$1 && timeReachedBoundary === void 0) {
        hasUpdatedFrame = true;
        applyFriction(t);
        checkCatchBoundary(t);
      }
      if (timeReachedBoundary !== void 0 && t >= timeReachedBoundary) {
        return spring$1.next(t - timeReachedBoundary);
      } else {
        !hasUpdatedFrame && applyFriction(t);
        return state;
      }
    }
  };
}
function createMixers(output, ease2, customMixer) {
  const mixers = [];
  const mixerFactory = customMixer || MotionGlobalConfig.mix || mix;
  const numMixers = output.length - 1;
  for (let i = 0; i < numMixers; i++) {
    let mixer = mixerFactory(output[i], output[i + 1]);
    if (ease2) {
      const easingFunction = Array.isArray(ease2) ? ease2[i] || noop : ease2;
      mixer = pipe(easingFunction, mixer);
    }
    mixers.push(mixer);
  }
  return mixers;
}
function interpolate(input, output, { clamp: isClamp = true, ease: ease2, mixer } = {}) {
  const inputLength = input.length;
  invariant(inputLength === output.length);
  if (inputLength === 1)
    return () => output[0];
  if (inputLength === 2 && output[0] === output[1])
    return () => output[1];
  const isZeroDeltaRange = input[0] === input[1];
  if (input[0] > input[inputLength - 1]) {
    input = [...input].reverse();
    output = [...output].reverse();
  }
  const mixers = createMixers(output, ease2, mixer);
  const numMixers = mixers.length;
  const interpolator = (v2) => {
    if (isZeroDeltaRange && v2 < input[0])
      return output[0];
    let i = 0;
    if (numMixers > 1) {
      for (; i < input.length - 2; i++) {
        if (v2 < input[i + 1])
          break;
      }
    }
    const progressInRange = /* @__PURE__ */ progress(input[i], input[i + 1], v2);
    return mixers[i](progressInRange);
  };
  return isClamp ? (v2) => interpolator(clamp(input[0], input[inputLength - 1], v2)) : interpolator;
}
function fillOffset(offset, remaining) {
  const min = offset[offset.length - 1];
  for (let i = 1; i <= remaining; i++) {
    const offsetProgress = /* @__PURE__ */ progress(0, remaining, i);
    offset.push(mixNumber$1(min, 1, offsetProgress));
  }
}
function defaultOffset$1(arr) {
  const offset = [0];
  fillOffset(offset, arr.length - 1);
  return offset;
}
function convertOffsetToTimes(offset, duration) {
  return offset.map((o) => o * duration);
}
function defaultEasing(values, easing) {
  return values.map(() => easing || easeInOut).splice(0, values.length - 1);
}
function keyframes({ duration = 300, keyframes: keyframeValues, times, ease: ease2 = "easeInOut" }) {
  const easingFunctions = isEasingArray(ease2) ? ease2.map(easingDefinitionToFunction) : easingDefinitionToFunction(ease2);
  const state = {
    done: false,
    value: keyframeValues[0]
  };
  const absoluteTimes = convertOffsetToTimes(
    // Only use the provided offsets if they're the correct length
    // TODO Maybe we should warn here if there's a length mismatch
    times && times.length === keyframeValues.length ? times : defaultOffset$1(keyframeValues),
    duration
  );
  const mapTimeToKeyframe = interpolate(absoluteTimes, keyframeValues, {
    ease: Array.isArray(easingFunctions) ? easingFunctions : defaultEasing(keyframeValues, easingFunctions)
  });
  return {
    calculatedDuration: duration,
    next: (t) => {
      state.value = mapTimeToKeyframe(t);
      state.done = t >= duration;
      return state;
    }
  };
}
const isNotNull$1 = (value) => value !== null;
function getFinalKeyframe$1(keyframes2, { repeat, repeatType = "loop" }, finalKeyframe, speed = 1) {
  const resolvedKeyframes = keyframes2.filter(isNotNull$1);
  const useFirstKeyframe = speed < 0 || repeat && repeatType !== "loop" && repeat % 2 === 1;
  const index2 = useFirstKeyframe ? 0 : resolvedKeyframes.length - 1;
  return !index2 || finalKeyframe === void 0 ? resolvedKeyframes[index2] : finalKeyframe;
}
const transitionTypeMap = {
  decay: inertia,
  inertia,
  tween: keyframes,
  keyframes,
  spring
};
function replaceTransitionType(transition) {
  if (typeof transition.type === "string") {
    transition.type = transitionTypeMap[transition.type];
  }
}
class WithPromise {
  constructor() {
    this.updateFinished();
  }
  get finished() {
    return this._finished;
  }
  updateFinished() {
    this._finished = new Promise((resolve) => {
      this.resolve = resolve;
    });
  }
  notifyFinished() {
    this.resolve();
  }
  /**
   * Allows the animation to be awaited.
   *
   * @deprecated Use `finished` instead.
   */
  then(onResolve, onReject) {
    return this.finished.then(onResolve, onReject);
  }
}
const percentToProgress = (percent2) => percent2 / 100;
class JSAnimation extends WithPromise {
  constructor(options) {
    super();
    this.state = "idle";
    this.startTime = null;
    this.isStopped = false;
    this.currentTime = 0;
    this.holdTime = null;
    this.playbackSpeed = 1;
    this.stop = () => {
      const { motionValue: motionValue2 } = this.options;
      if (motionValue2 && motionValue2.updatedAt !== time.now()) {
        this.tick(time.now());
      }
      this.isStopped = true;
      if (this.state === "idle")
        return;
      this.teardown();
      this.options.onStop?.();
    };
    this.options = options;
    this.initAnimation();
    this.play();
    if (options.autoplay === false)
      this.pause();
  }
  initAnimation() {
    const { options } = this;
    replaceTransitionType(options);
    const { type = keyframes, repeat = 0, repeatDelay = 0, repeatType, velocity = 0 } = options;
    let { keyframes: keyframes$1 } = options;
    const generatorFactory = type || keyframes;
    if (generatorFactory !== keyframes && typeof keyframes$1[0] !== "number") {
      this.mixKeyframes = pipe(percentToProgress, mix(keyframes$1[0], keyframes$1[1]));
      keyframes$1 = [0, 100];
    }
    const generator = generatorFactory({ ...options, keyframes: keyframes$1 });
    if (repeatType === "mirror") {
      this.mirroredGenerator = generatorFactory({
        ...options,
        keyframes: [...keyframes$1].reverse(),
        velocity: -velocity
      });
    }
    if (generator.calculatedDuration === null) {
      generator.calculatedDuration = calcGeneratorDuration(generator);
    }
    const { calculatedDuration } = generator;
    this.calculatedDuration = calculatedDuration;
    this.resolvedDuration = calculatedDuration + repeatDelay;
    this.totalDuration = this.resolvedDuration * (repeat + 1) - repeatDelay;
    this.generator = generator;
  }
  updateTime(timestamp) {
    const animationTime = Math.round(timestamp - this.startTime) * this.playbackSpeed;
    if (this.holdTime !== null) {
      this.currentTime = this.holdTime;
    } else {
      this.currentTime = animationTime;
    }
  }
  tick(timestamp, sample = false) {
    const { generator, totalDuration, mixKeyframes, mirroredGenerator, resolvedDuration, calculatedDuration } = this;
    if (this.startTime === null)
      return generator.next(0);
    const { delay: delay2 = 0, keyframes: keyframes2, repeat, repeatType, repeatDelay, type, onUpdate, finalKeyframe } = this.options;
    if (this.speed > 0) {
      this.startTime = Math.min(this.startTime, timestamp);
    } else if (this.speed < 0) {
      this.startTime = Math.min(timestamp - totalDuration / this.speed, this.startTime);
    }
    if (sample) {
      this.currentTime = timestamp;
    } else {
      this.updateTime(timestamp);
    }
    const timeWithoutDelay = this.currentTime - delay2 * (this.playbackSpeed >= 0 ? 1 : -1);
    const isInDelayPhase = this.playbackSpeed >= 0 ? timeWithoutDelay < 0 : timeWithoutDelay > totalDuration;
    this.currentTime = Math.max(timeWithoutDelay, 0);
    if (this.state === "finished" && this.holdTime === null) {
      this.currentTime = totalDuration;
    }
    let elapsed = this.currentTime;
    let frameGenerator = generator;
    if (repeat) {
      const progress2 = Math.min(this.currentTime, totalDuration) / resolvedDuration;
      let currentIteration = Math.floor(progress2);
      let iterationProgress = progress2 % 1;
      if (!iterationProgress && progress2 >= 1) {
        iterationProgress = 1;
      }
      iterationProgress === 1 && currentIteration--;
      currentIteration = Math.min(currentIteration, repeat + 1);
      const isOddIteration = Boolean(currentIteration % 2);
      if (isOddIteration) {
        if (repeatType === "reverse") {
          iterationProgress = 1 - iterationProgress;
          if (repeatDelay) {
            iterationProgress -= repeatDelay / resolvedDuration;
          }
        } else if (repeatType === "mirror") {
          frameGenerator = mirroredGenerator;
        }
      }
      elapsed = clamp(0, 1, iterationProgress) * resolvedDuration;
    }
    const state = isInDelayPhase ? { done: false, value: keyframes2[0] } : frameGenerator.next(elapsed);
    if (mixKeyframes) {
      state.value = mixKeyframes(state.value);
    }
    let { done } = state;
    if (!isInDelayPhase && calculatedDuration !== null) {
      done = this.playbackSpeed >= 0 ? this.currentTime >= totalDuration : this.currentTime <= 0;
    }
    const isAnimationFinished = this.holdTime === null && (this.state === "finished" || this.state === "running" && done);
    if (isAnimationFinished && type !== inertia) {
      state.value = getFinalKeyframe$1(keyframes2, this.options, finalKeyframe, this.speed);
    }
    if (onUpdate) {
      onUpdate(state.value);
    }
    if (isAnimationFinished) {
      this.finish();
    }
    return state;
  }
  /**
   * Allows the returned animation to be awaited or promise-chained. Currently
   * resolves when the animation finishes at all but in a future update could/should
   * reject if its cancels.
   */
  then(resolve, reject) {
    return this.finished.then(resolve, reject);
  }
  get duration() {
    return /* @__PURE__ */ millisecondsToSeconds(this.calculatedDuration);
  }
  get iterationDuration() {
    const { delay: delay2 = 0 } = this.options || {};
    return this.duration + /* @__PURE__ */ millisecondsToSeconds(delay2);
  }
  get time() {
    return /* @__PURE__ */ millisecondsToSeconds(this.currentTime);
  }
  set time(newTime) {
    newTime = /* @__PURE__ */ secondsToMilliseconds(newTime);
    this.currentTime = newTime;
    if (this.startTime === null || this.holdTime !== null || this.playbackSpeed === 0) {
      this.holdTime = newTime;
    } else if (this.driver) {
      this.startTime = this.driver.now() - newTime / this.playbackSpeed;
    }
    this.driver?.start(false);
  }
  get speed() {
    return this.playbackSpeed;
  }
  set speed(newSpeed) {
    this.updateTime(time.now());
    const hasChanged = this.playbackSpeed !== newSpeed;
    this.playbackSpeed = newSpeed;
    if (hasChanged) {
      this.time = /* @__PURE__ */ millisecondsToSeconds(this.currentTime);
    }
  }
  play() {
    if (this.isStopped)
      return;
    const { driver = frameloopDriver, startTime } = this.options;
    if (!this.driver) {
      this.driver = driver((timestamp) => this.tick(timestamp));
    }
    this.options.onPlay?.();
    const now2 = this.driver.now();
    if (this.state === "finished") {
      this.updateFinished();
      this.startTime = now2;
    } else if (this.holdTime !== null) {
      this.startTime = now2 - this.holdTime;
    } else if (!this.startTime) {
      this.startTime = startTime ?? now2;
    }
    if (this.state === "finished" && this.speed < 0) {
      this.startTime += this.calculatedDuration;
    }
    this.holdTime = null;
    this.state = "running";
    this.driver.start();
  }
  pause() {
    this.state = "paused";
    this.updateTime(time.now());
    this.holdTime = this.currentTime;
  }
  complete() {
    if (this.state !== "running") {
      this.play();
    }
    this.state = "finished";
    this.holdTime = null;
  }
  finish() {
    this.notifyFinished();
    this.teardown();
    this.state = "finished";
    this.options.onComplete?.();
  }
  cancel() {
    this.holdTime = null;
    this.startTime = 0;
    this.tick(0);
    this.teardown();
    this.options.onCancel?.();
  }
  teardown() {
    this.state = "idle";
    this.stopDriver();
    this.startTime = this.holdTime = null;
  }
  stopDriver() {
    if (!this.driver)
      return;
    this.driver.stop();
    this.driver = void 0;
  }
  sample(sampleTime) {
    this.startTime = 0;
    return this.tick(sampleTime, true);
  }
  attachTimeline(timeline) {
    if (this.options.allowFlatten) {
      this.options.type = "keyframes";
      this.options.ease = "linear";
      this.initAnimation();
    }
    this.driver?.stop();
    return timeline.observe(this);
  }
}
function fillWildcards(keyframes2) {
  for (let i = 1; i < keyframes2.length; i++) {
    keyframes2[i] ?? (keyframes2[i] = keyframes2[i - 1]);
  }
}
const radToDeg = (rad) => rad * 180 / Math.PI;
const rotate = (v2) => {
  const angle = radToDeg(Math.atan2(v2[1], v2[0]));
  return rebaseAngle(angle);
};
const matrix2dParsers = {
  x: 4,
  y: 5,
  translateX: 4,
  translateY: 5,
  scaleX: 0,
  scaleY: 3,
  scale: (v2) => (Math.abs(v2[0]) + Math.abs(v2[3])) / 2,
  rotate,
  rotateZ: rotate,
  skewX: (v2) => radToDeg(Math.atan(v2[1])),
  skewY: (v2) => radToDeg(Math.atan(v2[2])),
  skew: (v2) => (Math.abs(v2[1]) + Math.abs(v2[2])) / 2
};
const rebaseAngle = (angle) => {
  angle = angle % 360;
  if (angle < 0)
    angle += 360;
  return angle;
};
const rotateZ = rotate;
const scaleX = (v2) => Math.sqrt(v2[0] * v2[0] + v2[1] * v2[1]);
const scaleY = (v2) => Math.sqrt(v2[4] * v2[4] + v2[5] * v2[5]);
const matrix3dParsers = {
  x: 12,
  y: 13,
  z: 14,
  translateX: 12,
  translateY: 13,
  translateZ: 14,
  scaleX,
  scaleY,
  scale: (v2) => (scaleX(v2) + scaleY(v2)) / 2,
  rotateX: (v2) => rebaseAngle(radToDeg(Math.atan2(v2[6], v2[5]))),
  rotateY: (v2) => rebaseAngle(radToDeg(Math.atan2(-v2[2], v2[0]))),
  rotateZ,
  rotate: rotateZ,
  skewX: (v2) => radToDeg(Math.atan(v2[4])),
  skewY: (v2) => radToDeg(Math.atan(v2[1])),
  skew: (v2) => (Math.abs(v2[1]) + Math.abs(v2[4])) / 2
};
function defaultTransformValue(name) {
  return name.includes("scale") ? 1 : 0;
}
function parseValueFromTransform(transform2, name) {
  if (!transform2 || transform2 === "none") {
    return defaultTransformValue(name);
  }
  const matrix3dMatch = transform2.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);
  let parsers;
  let match;
  if (matrix3dMatch) {
    parsers = matrix3dParsers;
    match = matrix3dMatch;
  } else {
    const matrix2dMatch = transform2.match(/^matrix\(([-\d.e\s,]+)\)$/u);
    parsers = matrix2dParsers;
    match = matrix2dMatch;
  }
  if (!match) {
    return defaultTransformValue(name);
  }
  const valueParser = parsers[name];
  const values = match[1].split(",").map(convertTransformToNumber);
  return typeof valueParser === "function" ? valueParser(values) : values[valueParser];
}
const readTransformValue = (instance, name) => {
  const { transform: transform2 = "none" } = getComputedStyle(instance);
  return parseValueFromTransform(transform2, name);
};
function convertTransformToNumber(value) {
  return parseFloat(value.trim());
}
const transformPropOrder = [
  "transformPerspective",
  "x",
  "y",
  "z",
  "translateX",
  "translateY",
  "translateZ",
  "scale",
  "scaleX",
  "scaleY",
  "rotate",
  "rotateX",
  "rotateY",
  "rotateZ",
  "skew",
  "skewX",
  "skewY"
];
const transformProps = /* @__PURE__ */ (() => new Set(transformPropOrder))();
const isNumOrPxType = (v2) => v2 === number || v2 === px;
const transformKeys = /* @__PURE__ */ new Set(["x", "y", "z"]);
const nonTranslationalTransformKeys = transformPropOrder.filter((key) => !transformKeys.has(key));
function removeNonTranslationalTransform(visualElement) {
  const removedTransforms = [];
  nonTranslationalTransformKeys.forEach((key) => {
    const value = visualElement.getValue(key);
    if (value !== void 0) {
      removedTransforms.push([key, value.get()]);
      value.set(key.startsWith("scale") ? 1 : 0);
    }
  });
  return removedTransforms;
}
const positionalValues = {
  // Dimensions
  width: ({ x: x2 }, { paddingLeft = "0", paddingRight = "0" }) => x2.max - x2.min - parseFloat(paddingLeft) - parseFloat(paddingRight),
  height: ({ y: y2 }, { paddingTop = "0", paddingBottom = "0" }) => y2.max - y2.min - parseFloat(paddingTop) - parseFloat(paddingBottom),
  top: (_bbox, { top }) => parseFloat(top),
  left: (_bbox, { left }) => parseFloat(left),
  bottom: ({ y: y2 }, { top }) => parseFloat(top) + (y2.max - y2.min),
  right: ({ x: x2 }, { left }) => parseFloat(left) + (x2.max - x2.min),
  // Transform
  x: (_bbox, { transform: transform2 }) => parseValueFromTransform(transform2, "x"),
  y: (_bbox, { transform: transform2 }) => parseValueFromTransform(transform2, "y")
};
positionalValues.translateX = positionalValues.x;
positionalValues.translateY = positionalValues.y;
const toResolve = /* @__PURE__ */ new Set();
let isScheduled = false;
let anyNeedsMeasurement = false;
let isForced = false;
function measureAllKeyframes() {
  if (anyNeedsMeasurement) {
    const resolversToMeasure = Array.from(toResolve).filter((resolver) => resolver.needsMeasurement);
    const elementsToMeasure = new Set(resolversToMeasure.map((resolver) => resolver.element));
    const transformsToRestore = /* @__PURE__ */ new Map();
    elementsToMeasure.forEach((element) => {
      const removedTransforms = removeNonTranslationalTransform(element);
      if (!removedTransforms.length)
        return;
      transformsToRestore.set(element, removedTransforms);
      element.render();
    });
    resolversToMeasure.forEach((resolver) => resolver.measureInitialState());
    elementsToMeasure.forEach((element) => {
      element.render();
      const restore = transformsToRestore.get(element);
      if (restore) {
        restore.forEach(([key, value]) => {
          element.getValue(key)?.set(value);
        });
      }
    });
    resolversToMeasure.forEach((resolver) => resolver.measureEndState());
    resolversToMeasure.forEach((resolver) => {
      if (resolver.suspendedScrollY !== void 0) {
        window.scrollTo(0, resolver.suspendedScrollY);
      }
    });
  }
  anyNeedsMeasurement = false;
  isScheduled = false;
  toResolve.forEach((resolver) => resolver.complete(isForced));
  toResolve.clear();
}
function readAllKeyframes() {
  toResolve.forEach((resolver) => {
    resolver.readKeyframes();
    if (resolver.needsMeasurement) {
      anyNeedsMeasurement = true;
    }
  });
}
function flushKeyframeResolvers() {
  isForced = true;
  readAllKeyframes();
  measureAllKeyframes();
  isForced = false;
}
class KeyframeResolver {
  constructor(unresolvedKeyframes, onComplete, name, motionValue2, element, isAsync = false) {
    this.state = "pending";
    this.isAsync = false;
    this.needsMeasurement = false;
    this.unresolvedKeyframes = [...unresolvedKeyframes];
    this.onComplete = onComplete;
    this.name = name;
    this.motionValue = motionValue2;
    this.element = element;
    this.isAsync = isAsync;
  }
  scheduleResolve() {
    this.state = "scheduled";
    if (this.isAsync) {
      toResolve.add(this);
      if (!isScheduled) {
        isScheduled = true;
        frame.read(readAllKeyframes);
        frame.resolveKeyframes(measureAllKeyframes);
      }
    } else {
      this.readKeyframes();
      this.complete();
    }
  }
  readKeyframes() {
    const { unresolvedKeyframes, name, element, motionValue: motionValue2 } = this;
    if (unresolvedKeyframes[0] === null) {
      const currentValue = motionValue2?.get();
      const finalKeyframe = unresolvedKeyframes[unresolvedKeyframes.length - 1];
      if (currentValue !== void 0) {
        unresolvedKeyframes[0] = currentValue;
      } else if (element && name) {
        const valueAsRead = element.readValue(name, finalKeyframe);
        if (valueAsRead !== void 0 && valueAsRead !== null) {
          unresolvedKeyframes[0] = valueAsRead;
        }
      }
      if (unresolvedKeyframes[0] === void 0) {
        unresolvedKeyframes[0] = finalKeyframe;
      }
      if (motionValue2 && currentValue === void 0) {
        motionValue2.set(unresolvedKeyframes[0]);
      }
    }
    fillWildcards(unresolvedKeyframes);
  }
  setFinalKeyframe() {
  }
  measureInitialState() {
  }
  renderEndStyles() {
  }
  measureEndState() {
  }
  complete(isForcedComplete = false) {
    this.state = "complete";
    this.onComplete(this.unresolvedKeyframes, this.finalKeyframe, isForcedComplete);
    toResolve.delete(this);
  }
  cancel() {
    if (this.state === "scheduled") {
      toResolve.delete(this);
      this.state = "pending";
    }
  }
  resume() {
    if (this.state === "pending")
      this.scheduleResolve();
  }
}
const isCSSVar = (name) => name.startsWith("--");
function setStyle(element, name, value) {
  isCSSVar(name) ? element.style.setProperty(name, value) : element.style[name] = value;
}
const supportsScrollTimeline = /* @__PURE__ */ memo(() => window.ScrollTimeline !== void 0);
const supportsFlags = {};
function memoSupports(callback, supportsFlag) {
  const memoized = /* @__PURE__ */ memo(callback);
  return () => supportsFlags[supportsFlag] ?? memoized();
}
const supportsLinearEasing = /* @__PURE__ */ memoSupports(() => {
  try {
    document.createElement("div").animate({ opacity: 0 }, { easing: "linear(0, 1)" });
  } catch (e) {
    return false;
  }
  return true;
}, "linearEasing");
const cubicBezierAsString = ([a, b2, c, d2]) => `cubic-bezier(${a}, ${b2}, ${c}, ${d2})`;
const supportedWaapiEasing = {
  linear: "linear",
  ease: "ease",
  easeIn: "ease-in",
  easeOut: "ease-out",
  easeInOut: "ease-in-out",
  circIn: /* @__PURE__ */ cubicBezierAsString([0, 0.65, 0.55, 1]),
  circOut: /* @__PURE__ */ cubicBezierAsString([0.55, 0, 1, 0.45]),
  backIn: /* @__PURE__ */ cubicBezierAsString([0.31, 0.01, 0.66, -0.59]),
  backOut: /* @__PURE__ */ cubicBezierAsString([0.33, 1.53, 0.69, 0.99])
};
function mapEasingToNativeEasing(easing, duration) {
  if (!easing) {
    return void 0;
  } else if (typeof easing === "function") {
    return supportsLinearEasing() ? generateLinearEasing(easing, duration) : "ease-out";
  } else if (isBezierDefinition(easing)) {
    return cubicBezierAsString(easing);
  } else if (Array.isArray(easing)) {
    return easing.map((segmentEasing) => mapEasingToNativeEasing(segmentEasing, duration) || supportedWaapiEasing.easeOut);
  } else {
    return supportedWaapiEasing[easing];
  }
}
function startWaapiAnimation(element, valueName, keyframes2, { delay: delay2 = 0, duration = 300, repeat = 0, repeatType = "loop", ease: ease2 = "easeOut", times } = {}, pseudoElement = void 0) {
  const keyframeOptions = {
    [valueName]: keyframes2
  };
  if (times)
    keyframeOptions.offset = times;
  const easing = mapEasingToNativeEasing(ease2, duration);
  if (Array.isArray(easing))
    keyframeOptions.easing = easing;
  const options = {
    delay: delay2,
    duration,
    easing: !Array.isArray(easing) ? easing : "linear",
    fill: "both",
    iterations: repeat + 1,
    direction: repeatType === "reverse" ? "alternate" : "normal"
  };
  if (pseudoElement)
    options.pseudoElement = pseudoElement;
  const animation = element.animate(keyframeOptions, options);
  return animation;
}
function isGenerator(type) {
  return typeof type === "function" && "applyToOptions" in type;
}
function applyGeneratorOptions({ type, ...options }) {
  if (isGenerator(type) && supportsLinearEasing()) {
    return type.applyToOptions(options);
  } else {
    options.duration ?? (options.duration = 300);
    options.ease ?? (options.ease = "easeOut");
  }
  return options;
}
class NativeAnimation extends WithPromise {
  constructor(options) {
    super();
    this.finishedTime = null;
    this.isStopped = false;
    if (!options)
      return;
    const { element, name, keyframes: keyframes2, pseudoElement, allowFlatten = false, finalKeyframe, onComplete } = options;
    this.isPseudoElement = Boolean(pseudoElement);
    this.allowFlatten = allowFlatten;
    this.options = options;
    invariant(typeof options.type !== "string");
    const transition = applyGeneratorOptions(options);
    this.animation = startWaapiAnimation(element, name, keyframes2, transition, pseudoElement);
    if (transition.autoplay === false) {
      this.animation.pause();
    }
    this.animation.onfinish = () => {
      this.finishedTime = this.time;
      if (!pseudoElement) {
        const keyframe = getFinalKeyframe$1(keyframes2, this.options, finalKeyframe, this.speed);
        if (this.updateMotionValue) {
          this.updateMotionValue(keyframe);
        } else {
          setStyle(element, name, keyframe);
        }
        this.animation.cancel();
      }
      onComplete?.();
      this.notifyFinished();
    };
  }
  play() {
    if (this.isStopped)
      return;
    this.animation.play();
    if (this.state === "finished") {
      this.updateFinished();
    }
  }
  pause() {
    this.animation.pause();
  }
  complete() {
    this.animation.finish?.();
  }
  cancel() {
    try {
      this.animation.cancel();
    } catch (e) {
    }
  }
  stop() {
    if (this.isStopped)
      return;
    this.isStopped = true;
    const { state } = this;
    if (state === "idle" || state === "finished") {
      return;
    }
    if (this.updateMotionValue) {
      this.updateMotionValue();
    } else {
      this.commitStyles();
    }
    if (!this.isPseudoElement)
      this.cancel();
  }
  /**
   * WAAPI doesn't natively have any interruption capabilities.
   *
   * In this method, we commit styles back to the DOM before cancelling
   * the animation.
   *
   * This is designed to be overridden by NativeAnimationExtended, which
   * will create a renderless JS animation and sample it twice to calculate
   * its current value, "previous" value, and therefore allow
   * Motion to also correctly calculate velocity for any subsequent animation
   * while deferring the commit until the next animation frame.
   */
  commitStyles() {
    if (!this.isPseudoElement) {
      this.animation.commitStyles?.();
    }
  }
  get duration() {
    const duration = this.animation.effect?.getComputedTiming?.().duration || 0;
    return /* @__PURE__ */ millisecondsToSeconds(Number(duration));
  }
  get iterationDuration() {
    const { delay: delay2 = 0 } = this.options || {};
    return this.duration + /* @__PURE__ */ millisecondsToSeconds(delay2);
  }
  get time() {
    return /* @__PURE__ */ millisecondsToSeconds(Number(this.animation.currentTime) || 0);
  }
  set time(newTime) {
    this.finishedTime = null;
    this.animation.currentTime = /* @__PURE__ */ secondsToMilliseconds(newTime);
  }
  /**
   * The playback speed of the animation.
   * 1 = normal speed, 2 = double speed, 0.5 = half speed.
   */
  get speed() {
    return this.animation.playbackRate;
  }
  set speed(newSpeed) {
    if (newSpeed < 0)
      this.finishedTime = null;
    this.animation.playbackRate = newSpeed;
  }
  get state() {
    return this.finishedTime !== null ? "finished" : this.animation.playState;
  }
  get startTime() {
    return Number(this.animation.startTime);
  }
  set startTime(newStartTime) {
    this.animation.startTime = newStartTime;
  }
  /**
   * Attaches a timeline to the animation, for instance the `ScrollTimeline`.
   */
  attachTimeline({ timeline, observe }) {
    if (this.allowFlatten) {
      this.animation.effect?.updateTiming({ easing: "linear" });
    }
    this.animation.onfinish = null;
    if (timeline && supportsScrollTimeline()) {
      this.animation.timeline = timeline;
      return noop;
    } else {
      return observe(this);
    }
  }
}
const unsupportedEasingFunctions = {
  anticipate,
  backInOut,
  circInOut
};
function isUnsupportedEase(key) {
  return key in unsupportedEasingFunctions;
}
function replaceStringEasing(transition) {
  if (typeof transition.ease === "string" && isUnsupportedEase(transition.ease)) {
    transition.ease = unsupportedEasingFunctions[transition.ease];
  }
}
const sampleDelta = 10;
class NativeAnimationExtended extends NativeAnimation {
  constructor(options) {
    replaceStringEasing(options);
    replaceTransitionType(options);
    super(options);
    if (options.startTime) {
      this.startTime = options.startTime;
    }
    this.options = options;
  }
  /**
   * WAAPI doesn't natively have any interruption capabilities.
   *
   * Rather than read commited styles back out of the DOM, we can
   * create a renderless JS animation and sample it twice to calculate
   * its current value, "previous" value, and therefore allow
   * Motion to calculate velocity for any subsequent animation.
   */
  updateMotionValue(value) {
    const { motionValue: motionValue2, onUpdate, onComplete, element, ...options } = this.options;
    if (!motionValue2)
      return;
    if (value !== void 0) {
      motionValue2.set(value);
      return;
    }
    const sampleAnimation = new JSAnimation({
      ...options,
      autoplay: false
    });
    const sampleTime = /* @__PURE__ */ secondsToMilliseconds(this.finishedTime ?? this.time);
    motionValue2.setWithVelocity(sampleAnimation.sample(sampleTime - sampleDelta).value, sampleAnimation.sample(sampleTime).value, sampleDelta);
    sampleAnimation.stop();
  }
}
const isAnimatable = (value, name) => {
  if (name === "zIndex")
    return false;
  if (typeof value === "number" || Array.isArray(value))
    return true;
  if (typeof value === "string" && // It's animatable if we have a string
  (complex.test(value) || value === "0") && // And it contains numbers and/or colors
  !value.startsWith("url(")) {
    return true;
  }
  return false;
};
function hasKeyframesChanged(keyframes2) {
  const current = keyframes2[0];
  if (keyframes2.length === 1)
    return true;
  for (let i = 0; i < keyframes2.length; i++) {
    if (keyframes2[i] !== current)
      return true;
  }
}
function canAnimate(keyframes2, name, type, velocity) {
  const originKeyframe = keyframes2[0];
  if (originKeyframe === null)
    return false;
  if (name === "display" || name === "visibility")
    return true;
  const targetKeyframe = keyframes2[keyframes2.length - 1];
  const isOriginAnimatable = isAnimatable(originKeyframe, name);
  const isTargetAnimatable = isAnimatable(targetKeyframe, name);
  if (!isOriginAnimatable || !isTargetAnimatable) {
    return false;
  }
  return hasKeyframesChanged(keyframes2) || (type === "spring" || isGenerator(type)) && velocity;
}
function makeAnimationInstant(options) {
  options.duration = 0;
  options.type = "keyframes";
}
const acceleratedValues = /* @__PURE__ */ new Set([
  "opacity",
  "clipPath",
  "filter",
  "transform"
  // TODO: Could be re-enabled now we have support for linear() easing
  // "background-color"
]);
const supportsWaapi = /* @__PURE__ */ memo(() => Object.hasOwnProperty.call(Element.prototype, "animate"));
function supportsBrowserAnimation(options) {
  const { motionValue: motionValue2, name, repeatDelay, repeatType, damping, type } = options;
  const subject = motionValue2?.owner?.current;
  if (!(subject instanceof HTMLElement)) {
    return false;
  }
  const { onUpdate, transformTemplate } = motionValue2.owner.getProps();
  return supportsWaapi() && name && acceleratedValues.has(name) && (name !== "transform" || !transformTemplate) && /**
   * If we're outputting values to onUpdate then we can't use WAAPI as there's
   * no way to read the value from WAAPI every frame.
   */
  !onUpdate && !repeatDelay && repeatType !== "mirror" && damping !== 0 && type !== "inertia";
}
const MAX_RESOLVE_DELAY = 40;
class AsyncMotionValueAnimation extends WithPromise {
  constructor({ autoplay = true, delay: delay2 = 0, type = "keyframes", repeat = 0, repeatDelay = 0, repeatType = "loop", keyframes: keyframes2, name, motionValue: motionValue2, element, ...options }) {
    super();
    this.stop = () => {
      if (this._animation) {
        this._animation.stop();
        this.stopTimeline?.();
      }
      this.keyframeResolver?.cancel();
    };
    this.createdAt = time.now();
    const optionsWithDefaults = {
      autoplay,
      delay: delay2,
      type,
      repeat,
      repeatDelay,
      repeatType,
      name,
      motionValue: motionValue2,
      element,
      ...options
    };
    const KeyframeResolver$1 = element?.KeyframeResolver || KeyframeResolver;
    this.keyframeResolver = new KeyframeResolver$1(keyframes2, (resolvedKeyframes, finalKeyframe, forced) => this.onKeyframesResolved(resolvedKeyframes, finalKeyframe, optionsWithDefaults, !forced), name, motionValue2, element);
    this.keyframeResolver?.scheduleResolve();
  }
  onKeyframesResolved(keyframes2, finalKeyframe, options, sync) {
    this.keyframeResolver = void 0;
    const { name, type, velocity, delay: delay2, isHandoff, onUpdate } = options;
    this.resolvedAt = time.now();
    if (!canAnimate(keyframes2, name, type, velocity)) {
      if (MotionGlobalConfig.instantAnimations || !delay2) {
        onUpdate?.(getFinalKeyframe$1(keyframes2, options, finalKeyframe));
      }
      keyframes2[0] = keyframes2[keyframes2.length - 1];
      makeAnimationInstant(options);
      options.repeat = 0;
    }
    const startTime = sync ? !this.resolvedAt ? this.createdAt : this.resolvedAt - this.createdAt > MAX_RESOLVE_DELAY ? this.resolvedAt : this.createdAt : void 0;
    const resolvedOptions = {
      startTime,
      finalKeyframe,
      ...options,
      keyframes: keyframes2
    };
    const animation = !isHandoff && supportsBrowserAnimation(resolvedOptions) ? new NativeAnimationExtended({
      ...resolvedOptions,
      element: resolvedOptions.motionValue.owner.current
    }) : new JSAnimation(resolvedOptions);
    animation.finished.then(() => this.notifyFinished()).catch(noop);
    if (this.pendingTimeline) {
      this.stopTimeline = animation.attachTimeline(this.pendingTimeline);
      this.pendingTimeline = void 0;
    }
    this._animation = animation;
  }
  get finished() {
    if (!this._animation) {
      return this._finished;
    } else {
      return this.animation.finished;
    }
  }
  then(onResolve, _onReject) {
    return this.finished.finally(onResolve).then(() => {
    });
  }
  get animation() {
    if (!this._animation) {
      this.keyframeResolver?.resume();
      flushKeyframeResolvers();
    }
    return this._animation;
  }
  get duration() {
    return this.animation.duration;
  }
  get iterationDuration() {
    return this.animation.iterationDuration;
  }
  get time() {
    return this.animation.time;
  }
  set time(newTime) {
    this.animation.time = newTime;
  }
  get speed() {
    return this.animation.speed;
  }
  get state() {
    return this.animation.state;
  }
  set speed(newSpeed) {
    this.animation.speed = newSpeed;
  }
  get startTime() {
    return this.animation.startTime;
  }
  attachTimeline(timeline) {
    if (this._animation) {
      this.stopTimeline = this.animation.attachTimeline(timeline);
    } else {
      this.pendingTimeline = timeline;
    }
    return () => this.stop();
  }
  play() {
    this.animation.play();
  }
  pause() {
    this.animation.pause();
  }
  complete() {
    this.animation.complete();
  }
  cancel() {
    if (this._animation) {
      this.animation.cancel();
    }
    this.keyframeResolver?.cancel();
  }
}
const splitCSSVariableRegex = (
  // eslint-disable-next-line redos-detector/no-unsafe-regex -- false positive, as it can match a lot of words
  /^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u
);
function parseCSSVariable(current) {
  const match = splitCSSVariableRegex.exec(current);
  if (!match)
    return [,];
  const [, token1, token2, fallback] = match;
  return [`--${token1 ?? token2}`, fallback];
}
function getVariableValue(current, element, depth = 1) {
  const [token, fallback] = parseCSSVariable(current);
  if (!token)
    return;
  const resolved = window.getComputedStyle(element).getPropertyValue(token);
  if (resolved) {
    const trimmed = resolved.trim();
    return isNumericalString(trimmed) ? parseFloat(trimmed) : trimmed;
  }
  return isCSSVariableToken(fallback) ? getVariableValue(fallback, element, depth + 1) : fallback;
}
function getValueTransition(transition, key) {
  return transition?.[key] ?? transition?.["default"] ?? transition;
}
const positionalKeys = /* @__PURE__ */ new Set([
  "width",
  "height",
  "top",
  "left",
  "right",
  "bottom",
  ...transformPropOrder
]);
const auto = {
  test: (v2) => v2 === "auto",
  parse: (v2) => v2
};
const testValueType = (v2) => (type) => type.test(v2);
const dimensionValueTypes = [number, px, percent, degrees, vw, vh, auto];
const findDimensionValueType = (v2) => dimensionValueTypes.find(testValueType(v2));
function isNone(value) {
  if (typeof value === "number") {
    return value === 0;
  } else if (value !== null) {
    return value === "none" || value === "0" || isZeroValueString(value);
  } else {
    return true;
  }
}
const maxDefaults = /* @__PURE__ */ new Set(["brightness", "contrast", "saturate", "opacity"]);
function applyDefaultFilter(v2) {
  const [name, value] = v2.slice(0, -1).split("(");
  if (name === "drop-shadow")
    return v2;
  const [number2] = value.match(floatRegex) || [];
  if (!number2)
    return v2;
  const unit = value.replace(number2, "");
  let defaultValue = maxDefaults.has(name) ? 1 : 0;
  if (number2 !== value)
    defaultValue *= 100;
  return name + "(" + defaultValue + unit + ")";
}
const functionRegex = /\b([a-z-]*)\(.*?\)/gu;
const filter = {
  ...complex,
  getAnimatableNone: (v2) => {
    const functions = v2.match(functionRegex);
    return functions ? functions.map(applyDefaultFilter).join(" ") : v2;
  }
};
const int = {
  ...number,
  transform: Math.round
};
const transformValueTypes = {
  rotate: degrees,
  rotateX: degrees,
  rotateY: degrees,
  rotateZ: degrees,
  scale,
  scaleX: scale,
  scaleY: scale,
  scaleZ: scale,
  skew: degrees,
  skewX: degrees,
  skewY: degrees,
  distance: px,
  translateX: px,
  translateY: px,
  translateZ: px,
  x: px,
  y: px,
  z: px,
  perspective: px,
  transformPerspective: px,
  opacity: alpha,
  originX: progressPercentage,
  originY: progressPercentage,
  originZ: px
};
const numberValueTypes = {
  // Border props
  borderWidth: px,
  borderTopWidth: px,
  borderRightWidth: px,
  borderBottomWidth: px,
  borderLeftWidth: px,
  borderRadius: px,
  radius: px,
  borderTopLeftRadius: px,
  borderTopRightRadius: px,
  borderBottomRightRadius: px,
  borderBottomLeftRadius: px,
  // Positioning props
  width: px,
  maxWidth: px,
  height: px,
  maxHeight: px,
  top: px,
  right: px,
  bottom: px,
  left: px,
  // Spacing props
  padding: px,
  paddingTop: px,
  paddingRight: px,
  paddingBottom: px,
  paddingLeft: px,
  margin: px,
  marginTop: px,
  marginRight: px,
  marginBottom: px,
  marginLeft: px,
  // Misc
  backgroundPositionX: px,
  backgroundPositionY: px,
  ...transformValueTypes,
  zIndex: int,
  // SVG
  fillOpacity: alpha,
  strokeOpacity: alpha,
  numOctaves: int
};
const defaultValueTypes = {
  ...numberValueTypes,
  // Color props
  color,
  backgroundColor: color,
  outlineColor: color,
  fill: color,
  stroke: color,
  // Border props
  borderColor: color,
  borderTopColor: color,
  borderRightColor: color,
  borderBottomColor: color,
  borderLeftColor: color,
  filter,
  WebkitFilter: filter
};
const getDefaultValueType = (key) => defaultValueTypes[key];
function getAnimatableNone(key, value) {
  let defaultValueType = getDefaultValueType(key);
  if (defaultValueType !== filter)
    defaultValueType = complex;
  return defaultValueType.getAnimatableNone ? defaultValueType.getAnimatableNone(value) : void 0;
}
const invalidTemplates = /* @__PURE__ */ new Set(["auto", "none", "0"]);
function makeNoneKeyframesAnimatable(unresolvedKeyframes, noneKeyframeIndexes, name) {
  let i = 0;
  let animatableTemplate = void 0;
  while (i < unresolvedKeyframes.length && !animatableTemplate) {
    const keyframe = unresolvedKeyframes[i];
    if (typeof keyframe === "string" && !invalidTemplates.has(keyframe) && analyseComplexValue(keyframe).values.length) {
      animatableTemplate = unresolvedKeyframes[i];
    }
    i++;
  }
  if (animatableTemplate && name) {
    for (const noneIndex of noneKeyframeIndexes) {
      unresolvedKeyframes[noneIndex] = getAnimatableNone(name, animatableTemplate);
    }
  }
}
class DOMKeyframesResolver extends KeyframeResolver {
  constructor(unresolvedKeyframes, onComplete, name, motionValue2, element) {
    super(unresolvedKeyframes, onComplete, name, motionValue2, element, true);
  }
  readKeyframes() {
    const { unresolvedKeyframes, element, name } = this;
    if (!element || !element.current)
      return;
    super.readKeyframes();
    for (let i = 0; i < unresolvedKeyframes.length; i++) {
      let keyframe = unresolvedKeyframes[i];
      if (typeof keyframe === "string") {
        keyframe = keyframe.trim();
        if (isCSSVariableToken(keyframe)) {
          const resolved = getVariableValue(keyframe, element.current);
          if (resolved !== void 0) {
            unresolvedKeyframes[i] = resolved;
          }
          if (i === unresolvedKeyframes.length - 1) {
            this.finalKeyframe = keyframe;
          }
        }
      }
    }
    this.resolveNoneKeyframes();
    if (!positionalKeys.has(name) || unresolvedKeyframes.length !== 2) {
      return;
    }
    const [origin, target] = unresolvedKeyframes;
    const originType = findDimensionValueType(origin);
    const targetType = findDimensionValueType(target);
    if (originType === targetType)
      return;
    if (isNumOrPxType(originType) && isNumOrPxType(targetType)) {
      for (let i = 0; i < unresolvedKeyframes.length; i++) {
        const value = unresolvedKeyframes[i];
        if (typeof value === "string") {
          unresolvedKeyframes[i] = parseFloat(value);
        }
      }
    } else if (positionalValues[name]) {
      this.needsMeasurement = true;
    }
  }
  resolveNoneKeyframes() {
    const { unresolvedKeyframes, name } = this;
    const noneKeyframeIndexes = [];
    for (let i = 0; i < unresolvedKeyframes.length; i++) {
      if (unresolvedKeyframes[i] === null || isNone(unresolvedKeyframes[i])) {
        noneKeyframeIndexes.push(i);
      }
    }
    if (noneKeyframeIndexes.length) {
      makeNoneKeyframesAnimatable(unresolvedKeyframes, noneKeyframeIndexes, name);
    }
  }
  measureInitialState() {
    const { element, unresolvedKeyframes, name } = this;
    if (!element || !element.current)
      return;
    if (name === "height") {
      this.suspendedScrollY = window.pageYOffset;
    }
    this.measuredOrigin = positionalValues[name](element.measureViewportBox(), window.getComputedStyle(element.current));
    unresolvedKeyframes[0] = this.measuredOrigin;
    const measureKeyframe = unresolvedKeyframes[unresolvedKeyframes.length - 1];
    if (measureKeyframe !== void 0) {
      element.getValue(name, measureKeyframe).jump(measureKeyframe, false);
    }
  }
  measureEndState() {
    const { element, name, unresolvedKeyframes } = this;
    if (!element || !element.current)
      return;
    const value = element.getValue(name);
    value && value.jump(this.measuredOrigin, false);
    const finalKeyframeIndex = unresolvedKeyframes.length - 1;
    const finalKeyframe = unresolvedKeyframes[finalKeyframeIndex];
    unresolvedKeyframes[finalKeyframeIndex] = positionalValues[name](element.measureViewportBox(), window.getComputedStyle(element.current));
    if (finalKeyframe !== null && this.finalKeyframe === void 0) {
      this.finalKeyframe = finalKeyframe;
    }
    if (this.removedTransforms?.length) {
      this.removedTransforms.forEach(([unsetTransformName, unsetTransformValue]) => {
        element.getValue(unsetTransformName).set(unsetTransformValue);
      });
    }
    this.resolveNoneKeyframes();
  }
}
function resolveElements(elementOrSelector, scope, selectorCache) {
  if (elementOrSelector instanceof EventTarget) {
    return [elementOrSelector];
  } else if (typeof elementOrSelector === "string") {
    let root2 = document;
    const elements = root2.querySelectorAll(elementOrSelector);
    return elements ? Array.from(elements) : [];
  }
  return Array.from(elementOrSelector);
}
const getValueAsType = (value, type) => {
  return type && typeof value === "number" ? type.transform(value) : value;
};
function isHTMLElement(element) {
  return isObject(element) && "offsetHeight" in element;
}
const MAX_VELOCITY_DELTA = 30;
const isFloat = (value) => {
  return !isNaN(parseFloat(value));
};
const collectMotionValues = {
  current: void 0
};
class MotionValue {
  /**
   * @param init - The initiating value
   * @param config - Optional configuration options
   *
   * -  `transformer`: A function to transform incoming values with.
   */
  constructor(init, options = {}) {
    this.canTrackVelocity = null;
    this.events = {};
    this.updateAndNotify = (v2) => {
      const currentTime = time.now();
      if (this.updatedAt !== currentTime) {
        this.setPrevFrameValue();
      }
      this.prev = this.current;
      this.setCurrent(v2);
      if (this.current !== this.prev) {
        this.events.change?.notify(this.current);
        if (this.dependents) {
          for (const dependent of this.dependents) {
            dependent.dirty();
          }
        }
      }
    };
    this.hasAnimated = false;
    this.setCurrent(init);
    this.owner = options.owner;
  }
  setCurrent(current) {
    this.current = current;
    this.updatedAt = time.now();
    if (this.canTrackVelocity === null && current !== void 0) {
      this.canTrackVelocity = isFloat(this.current);
    }
  }
  setPrevFrameValue(prevFrameValue = this.current) {
    this.prevFrameValue = prevFrameValue;
    this.prevUpdatedAt = this.updatedAt;
  }
  /**
   * Adds a function that will be notified when the `MotionValue` is updated.
   *
   * It returns a function that, when called, will cancel the subscription.
   *
   * When calling `onChange` inside a React component, it should be wrapped with the
   * `useEffect` hook. As it returns an unsubscribe function, this should be returned
   * from the `useEffect` function to ensure you don't add duplicate subscribers..
   *
   * ```jsx
   * export const MyComponent = () => {
   *   const x = useMotionValue(0)
   *   const y = useMotionValue(0)
   *   const opacity = useMotionValue(1)
   *
   *   useEffect(() => {
   *     function updateOpacity() {
   *       const maxXY = Math.max(x.get(), y.get())
   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])
   *       opacity.set(newOpacity)
   *     }
   *
   *     const unsubscribeX = x.on("change", updateOpacity)
   *     const unsubscribeY = y.on("change", updateOpacity)
   *
   *     return () => {
   *       unsubscribeX()
   *       unsubscribeY()
   *     }
   *   }, [])
   *
   *   return <motion.div style={{ x }} />
   * }
   * ```
   *
   * @param subscriber - A function that receives the latest value.
   * @returns A function that, when called, will cancel this subscription.
   *
   * @deprecated
   */
  onChange(subscription) {
    return this.on("change", subscription);
  }
  on(eventName, callback) {
    if (!this.events[eventName]) {
      this.events[eventName] = new SubscriptionManager();
    }
    const unsubscribe = this.events[eventName].add(callback);
    if (eventName === "change") {
      return () => {
        unsubscribe();
        frame.read(() => {
          if (!this.events.change.getSize()) {
            this.stop();
          }
        });
      };
    }
    return unsubscribe;
  }
  clearListeners() {
    for (const eventManagers in this.events) {
      this.events[eventManagers].clear();
    }
  }
  /**
   * Attaches a passive effect to the `MotionValue`.
   */
  attach(passiveEffect, stopPassiveEffect) {
    this.passiveEffect = passiveEffect;
    this.stopPassiveEffect = stopPassiveEffect;
  }
  /**
   * Sets the state of the `MotionValue`.
   *
   * @remarks
   *
   * ```jsx
   * const x = useMotionValue(0)
   * x.set(10)
   * ```
   *
   * @param latest - Latest value to set.
   * @param render - Whether to notify render subscribers. Defaults to `true`
   *
   * @public
   */
  set(v2) {
    if (!this.passiveEffect) {
      this.updateAndNotify(v2);
    } else {
      this.passiveEffect(v2, this.updateAndNotify);
    }
  }
  setWithVelocity(prev, current, delta) {
    this.set(current);
    this.prev = void 0;
    this.prevFrameValue = prev;
    this.prevUpdatedAt = this.updatedAt - delta;
  }
  /**
   * Set the state of the `MotionValue`, stopping any active animations,
   * effects, and resets velocity to `0`.
   */
  jump(v2, endAnimation = true) {
    this.updateAndNotify(v2);
    this.prev = v2;
    this.prevUpdatedAt = this.prevFrameValue = void 0;
    endAnimation && this.stop();
    if (this.stopPassiveEffect)
      this.stopPassiveEffect();
  }
  dirty() {
    this.events.change?.notify(this.current);
  }
  addDependent(dependent) {
    if (!this.dependents) {
      this.dependents = /* @__PURE__ */ new Set();
    }
    this.dependents.add(dependent);
  }
  removeDependent(dependent) {
    if (this.dependents) {
      this.dependents.delete(dependent);
    }
  }
  /**
   * Returns the latest state of `MotionValue`
   *
   * @returns - The latest state of `MotionValue`
   *
   * @public
   */
  get() {
    if (collectMotionValues.current) {
      collectMotionValues.current.push(this);
    }
    return this.current;
  }
  /**
   * @public
   */
  getPrevious() {
    return this.prev;
  }
  /**
   * Returns the latest velocity of `MotionValue`
   *
   * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.
   *
   * @public
   */
  getVelocity() {
    const currentTime = time.now();
    if (!this.canTrackVelocity || this.prevFrameValue === void 0 || currentTime - this.updatedAt > MAX_VELOCITY_DELTA) {
      return 0;
    }
    const delta = Math.min(this.updatedAt - this.prevUpdatedAt, MAX_VELOCITY_DELTA);
    return velocityPerSecond(parseFloat(this.current) - parseFloat(this.prevFrameValue), delta);
  }
  /**
   * Registers a new animation to control this `MotionValue`. Only one
   * animation can drive a `MotionValue` at one time.
   *
   * ```jsx
   * value.start()
   * ```
   *
   * @param animation - A function that starts the provided animation
   */
  start(startAnimation) {
    this.stop();
    return new Promise((resolve) => {
      this.hasAnimated = true;
      this.animation = startAnimation(resolve);
      if (this.events.animationStart) {
        this.events.animationStart.notify();
      }
    }).then(() => {
      if (this.events.animationComplete) {
        this.events.animationComplete.notify();
      }
      this.clearAnimation();
    });
  }
  /**
   * Stop the currently active animation.
   *
   * @public
   */
  stop() {
    if (this.animation) {
      this.animation.stop();
      if (this.events.animationCancel) {
        this.events.animationCancel.notify();
      }
    }
    this.clearAnimation();
  }
  /**
   * Returns `true` if this value is currently animating.
   *
   * @public
   */
  isAnimating() {
    return !!this.animation;
  }
  clearAnimation() {
    delete this.animation;
  }
  /**
   * Destroy and clean up subscribers to this `MotionValue`.
   *
   * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically
   * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually
   * created a `MotionValue` via the `motionValue` function.
   *
   * @public
   */
  destroy() {
    this.dependents?.clear();
    this.events.destroy?.notify();
    this.clearListeners();
    this.stop();
    if (this.stopPassiveEffect) {
      this.stopPassiveEffect();
    }
  }
}
function motionValue(init, options) {
  return new MotionValue(init, options);
}
const { schedule: microtask } = /* @__PURE__ */ createRenderBatcher(queueMicrotask, false);
const isDragging = {
  x: false,
  y: false
};
function isDragActive() {
  return isDragging.x || isDragging.y;
}
function setDragLock(axis) {
  if (axis === "x" || axis === "y") {
    if (isDragging[axis]) {
      return null;
    } else {
      isDragging[axis] = true;
      return () => {
        isDragging[axis] = false;
      };
    }
  } else {
    if (isDragging.x || isDragging.y) {
      return null;
    } else {
      isDragging.x = isDragging.y = true;
      return () => {
        isDragging.x = isDragging.y = false;
      };
    }
  }
}
function setupGesture(elementOrSelector, options) {
  const elements = resolveElements(elementOrSelector);
  const gestureAbortController = new AbortController();
  const eventOptions = {
    passive: true,
    ...options,
    signal: gestureAbortController.signal
  };
  const cancel = () => gestureAbortController.abort();
  return [elements, eventOptions, cancel];
}
function isValidHover(event) {
  return !(event.pointerType === "touch" || isDragActive());
}
function hover(elementOrSelector, onHoverStart, options = {}) {
  const [elements, eventOptions, cancel] = setupGesture(elementOrSelector, options);
  const onPointerEnter = (enterEvent) => {
    if (!isValidHover(enterEvent))
      return;
    const { target } = enterEvent;
    const onHoverEnd = onHoverStart(target, enterEvent);
    if (typeof onHoverEnd !== "function" || !target)
      return;
    const onPointerLeave = (leaveEvent) => {
      if (!isValidHover(leaveEvent))
        return;
      onHoverEnd(leaveEvent);
      target.removeEventListener("pointerleave", onPointerLeave);
    };
    target.addEventListener("pointerleave", onPointerLeave, eventOptions);
  };
  elements.forEach((element) => {
    element.addEventListener("pointerenter", onPointerEnter, eventOptions);
  });
  return cancel;
}
const isNodeOrChild = (parent, child) => {
  if (!child) {
    return false;
  } else if (parent === child) {
    return true;
  } else {
    return isNodeOrChild(parent, child.parentElement);
  }
};
const isPrimaryPointer = (event) => {
  if (event.pointerType === "mouse") {
    return typeof event.button !== "number" || event.button <= 0;
  } else {
    return event.isPrimary !== false;
  }
};
const focusableElements = /* @__PURE__ */ new Set([
  "BUTTON",
  "INPUT",
  "SELECT",
  "TEXTAREA",
  "A"
]);
function isElementKeyboardAccessible(element) {
  return focusableElements.has(element.tagName) || element.tabIndex !== -1;
}
const isPressing = /* @__PURE__ */ new WeakSet();
function filterEvents(callback) {
  return (event) => {
    if (event.key !== "Enter")
      return;
    callback(event);
  };
}
function firePointerEvent(target, type) {
  target.dispatchEvent(new PointerEvent("pointer" + type, { isPrimary: true, bubbles: true }));
}
const enableKeyboardPress = (focusEvent, eventOptions) => {
  const element = focusEvent.currentTarget;
  if (!element)
    return;
  const handleKeydown = filterEvents(() => {
    if (isPressing.has(element))
      return;
    firePointerEvent(element, "down");
    const handleKeyup = filterEvents(() => {
      firePointerEvent(element, "up");
    });
    const handleBlur = () => firePointerEvent(element, "cancel");
    element.addEventListener("keyup", handleKeyup, eventOptions);
    element.addEventListener("blur", handleBlur, eventOptions);
  });
  element.addEventListener("keydown", handleKeydown, eventOptions);
  element.addEventListener("blur", () => element.removeEventListener("keydown", handleKeydown), eventOptions);
};
function isValidPressEvent(event) {
  return isPrimaryPointer(event) && !isDragActive();
}
function press(targetOrSelector, onPressStart, options = {}) {
  const [targets, eventOptions, cancelEvents] = setupGesture(targetOrSelector, options);
  const startPress = (startEvent) => {
    const target = startEvent.currentTarget;
    if (!isValidPressEvent(startEvent))
      return;
    isPressing.add(target);
    const onPressEnd = onPressStart(target, startEvent);
    const onPointerEnd = (endEvent, success) => {
      window.removeEventListener("pointerup", onPointerUp);
      window.removeEventListener("pointercancel", onPointerCancel);
      if (isPressing.has(target)) {
        isPressing.delete(target);
      }
      if (!isValidPressEvent(endEvent)) {
        return;
      }
      if (typeof onPressEnd === "function") {
        onPressEnd(endEvent, { success });
      }
    };
    const onPointerUp = (upEvent) => {
      onPointerEnd(upEvent, target === window || target === document || options.useGlobalTarget || isNodeOrChild(target, upEvent.target));
    };
    const onPointerCancel = (cancelEvent) => {
      onPointerEnd(cancelEvent, false);
    };
    window.addEventListener("pointerup", onPointerUp, eventOptions);
    window.addEventListener("pointercancel", onPointerCancel, eventOptions);
  };
  targets.forEach((target) => {
    const pointerDownTarget = options.useGlobalTarget ? window : target;
    pointerDownTarget.addEventListener("pointerdown", startPress, eventOptions);
    if (isHTMLElement(target)) {
      target.addEventListener("focus", (event) => enableKeyboardPress(event, eventOptions));
      if (!isElementKeyboardAccessible(target) && !target.hasAttribute("tabindex")) {
        target.tabIndex = 0;
      }
    }
  });
  return cancelEvents;
}
function isSVGElement(element) {
  return isObject(element) && "ownerSVGElement" in element;
}
const resizeHandlers = /* @__PURE__ */ new WeakMap();
let observer;
const getSize = (borderBoxAxis, svgAxis, htmlAxis) => (target, borderBoxSize) => {
  if (borderBoxSize && borderBoxSize[0]) {
    return borderBoxSize[0][borderBoxAxis + "Size"];
  } else if (isSVGElement(target) && "getBBox" in target) {
    return target.getBBox()[svgAxis];
  } else {
    return target[htmlAxis];
  }
};
const getWidth = /* @__PURE__ */ getSize("inline", "width", "offsetWidth");
const getHeight = /* @__PURE__ */ getSize("block", "height", "offsetHeight");
function notifyTarget({ target, borderBoxSize }) {
  resizeHandlers.get(target)?.forEach((handler) => {
    handler(target, {
      get width() {
        return getWidth(target, borderBoxSize);
      },
      get height() {
        return getHeight(target, borderBoxSize);
      }
    });
  });
}
function notifyAll(entries) {
  entries.forEach(notifyTarget);
}
function createResizeObserver() {
  if (typeof ResizeObserver === "undefined")
    return;
  observer = new ResizeObserver(notifyAll);
}
function resizeElement(target, handler) {
  if (!observer)
    createResizeObserver();
  const elements = resolveElements(target);
  elements.forEach((element) => {
    let elementHandlers = resizeHandlers.get(element);
    if (!elementHandlers) {
      elementHandlers = /* @__PURE__ */ new Set();
      resizeHandlers.set(element, elementHandlers);
    }
    elementHandlers.add(handler);
    observer?.observe(element);
  });
  return () => {
    elements.forEach((element) => {
      const elementHandlers = resizeHandlers.get(element);
      elementHandlers?.delete(handler);
      if (!elementHandlers?.size) {
        observer?.unobserve(element);
      }
    });
  };
}
const windowCallbacks = /* @__PURE__ */ new Set();
let windowResizeHandler;
function createWindowResizeHandler() {
  windowResizeHandler = () => {
    const info = {
      get width() {
        return window.innerWidth;
      },
      get height() {
        return window.innerHeight;
      }
    };
    windowCallbacks.forEach((callback) => callback(info));
  };
  window.addEventListener("resize", windowResizeHandler);
}
function resizeWindow(callback) {
  windowCallbacks.add(callback);
  if (!windowResizeHandler)
    createWindowResizeHandler();
  return () => {
    windowCallbacks.delete(callback);
    if (!windowCallbacks.size && typeof windowResizeHandler === "function") {
      window.removeEventListener("resize", windowResizeHandler);
      windowResizeHandler = void 0;
    }
  };
}
function resize(a, b2) {
  return typeof a === "function" ? resizeWindow(a) : resizeElement(a, b2);
}
function observeTimeline(update, timeline) {
  let prevProgress;
  const onFrame = () => {
    const { currentTime } = timeline;
    const percentage = currentTime === null ? 0 : currentTime.value;
    const progress2 = percentage / 100;
    if (prevProgress !== progress2) {
      update(progress2);
    }
    prevProgress = progress2;
  };
  frame.preUpdate(onFrame, true);
  return () => cancelFrame(onFrame);
}
function isSVGSVGElement(element) {
  return isSVGElement(element) && element.tagName === "svg";
}
function transform(...args) {
  const useImmediate = !Array.isArray(args[0]);
  const argOffset = useImmediate ? 0 : -1;
  const inputValue = args[0 + argOffset];
  const inputRange = args[1 + argOffset];
  const outputRange = args[2 + argOffset];
  const options = args[3 + argOffset];
  const interpolator = interpolate(inputRange, outputRange, options);
  return useImmediate ? interpolator(inputValue) : interpolator;
}
const isMotionValue = (value) => Boolean(value && value.getVelocity);
const valueTypes = [...dimensionValueTypes, color, complex];
const findValueType = (v2) => valueTypes.find(testValueType(v2));
const MotionConfigContext = reactExports.createContext({
  transformPagePoint: (p) => p,
  isStatic: false,
  reducedMotion: "never"
});
function setRef(ref, value) {
  if (typeof ref === "function") {
    return ref(value);
  } else if (ref !== null && ref !== void 0) {
    ref.current = value;
  }
}
function composeRefs(...refs) {
  return (node) => {
    let hasCleanup = false;
    const cleanups = refs.map((ref) => {
      const cleanup = setRef(ref, node);
      if (!hasCleanup && typeof cleanup === "function") {
        hasCleanup = true;
      }
      return cleanup;
    });
    if (hasCleanup) {
      return () => {
        for (let i = 0; i < cleanups.length; i++) {
          const cleanup = cleanups[i];
          if (typeof cleanup === "function") {
            cleanup();
          } else {
            setRef(refs[i], null);
          }
        }
      };
    }
  };
}
function useComposedRefs(...refs) {
  return reactExports.useCallback(composeRefs(...refs), refs);
}
class PopChildMeasure extends reactExports.Component {
  getSnapshotBeforeUpdate(prevProps) {
    const element = this.props.childRef.current;
    if (element && prevProps.isPresent && !this.props.isPresent) {
      const parent = element.offsetParent;
      const parentWidth = isHTMLElement(parent) ? parent.offsetWidth || 0 : 0;
      const size = this.props.sizeRef.current;
      size.height = element.offsetHeight || 0;
      size.width = element.offsetWidth || 0;
      size.top = element.offsetTop;
      size.left = element.offsetLeft;
      size.right = parentWidth - size.width - size.left;
    }
    return null;
  }
  /**
   * Required with getSnapshotBeforeUpdate to stop React complaining.
   */
  componentDidUpdate() {
  }
  render() {
    return this.props.children;
  }
}
function PopChild({ children, isPresent, anchorX, root: root2 }) {
  const id2 = reactExports.useId();
  const ref = reactExports.useRef(null);
  const size = reactExports.useRef({
    width: 0,
    height: 0,
    top: 0,
    left: 0,
    right: 0
  });
  const { nonce } = reactExports.useContext(MotionConfigContext);
  const composedRef = useComposedRefs(ref, children?.ref);
  reactExports.useInsertionEffect(() => {
    const { width, height, top, left, right } = size.current;
    if (isPresent || !ref.current || !width || !height)
      return;
    const x2 = anchorX === "left" ? `left: ${left}` : `right: ${right}`;
    ref.current.dataset.motionPopId = id2;
    const style = document.createElement("style");
    if (nonce)
      style.nonce = nonce;
    const parent = root2 ?? document.head;
    parent.appendChild(style);
    if (style.sheet) {
      style.sheet.insertRule(`
          [data-motion-pop-id="${id2}"] {
            position: absolute !important;
            width: ${width}px !important;
            height: ${height}px !important;
            ${x2}px !important;
            top: ${top}px !important;
          }
        `);
    }
    return () => {
      if (parent.contains(style)) {
        parent.removeChild(style);
      }
    };
  }, [isPresent]);
  return jsxRuntimeExports.jsx(PopChildMeasure, { isPresent, childRef: ref, sizeRef: size, children: reactExports.cloneElement(children, { ref: composedRef }) });
}
const PresenceChild = ({ children, initial, isPresent, onExitComplete, custom, presenceAffectsLayout, mode: mode2, anchorX, root: root2 }) => {
  const presenceChildren = useConstant(newChildrenMap);
  const id2 = reactExports.useId();
  let isReusedContext = true;
  let context = reactExports.useMemo(() => {
    isReusedContext = false;
    return {
      id: id2,
      initial,
      isPresent,
      custom,
      onExitComplete: (childId) => {
        presenceChildren.set(childId, true);
        for (const isComplete of presenceChildren.values()) {
          if (!isComplete)
            return;
        }
        onExitComplete && onExitComplete();
      },
      register: (childId) => {
        presenceChildren.set(childId, false);
        return () => presenceChildren.delete(childId);
      }
    };
  }, [isPresent, presenceChildren, onExitComplete]);
  if (presenceAffectsLayout && isReusedContext) {
    context = { ...context };
  }
  reactExports.useMemo(() => {
    presenceChildren.forEach((_2, key) => presenceChildren.set(key, false));
  }, [isPresent]);
  reactExports.useEffect(() => {
    !isPresent && !presenceChildren.size && onExitComplete && onExitComplete();
  }, [isPresent]);
  if (mode2 === "popLayout") {
    children = jsxRuntimeExports.jsx(PopChild, { isPresent, anchorX, root: root2, children });
  }
  return jsxRuntimeExports.jsx(PresenceContext.Provider, { value: context, children });
};
function newChildrenMap() {
  return /* @__PURE__ */ new Map();
}
function usePresence(subscribe = true) {
  const context = reactExports.useContext(PresenceContext);
  if (context === null)
    return [true, null];
  const { isPresent, onExitComplete, register: register2 } = context;
  const id2 = reactExports.useId();
  reactExports.useEffect(() => {
    if (subscribe) {
      return register2(id2);
    }
  }, [subscribe]);
  const safeToRemove = reactExports.useCallback(() => subscribe && onExitComplete && onExitComplete(id2), [id2, onExitComplete, subscribe]);
  return !isPresent && onExitComplete ? [false, safeToRemove] : [true];
}
const getChildKey = (child) => child.key || "";
function onlyElements(children) {
  const filtered = [];
  reactExports.Children.forEach(children, (child) => {
    if (reactExports.isValidElement(child))
      filtered.push(child);
  });
  return filtered;
}
const AnimatePresence = ({ children, custom, initial = true, onExitComplete, presenceAffectsLayout = true, mode: mode2 = "sync", propagate = false, anchorX = "left", root: root2 }) => {
  const [isParentPresent, safeToRemove] = usePresence(propagate);
  const presentChildren = reactExports.useMemo(() => onlyElements(children), [children]);
  const presentKeys = propagate && !isParentPresent ? [] : presentChildren.map(getChildKey);
  const isInitialRender = reactExports.useRef(true);
  const pendingPresentChildren = reactExports.useRef(presentChildren);
  const exitComplete = useConstant(() => /* @__PURE__ */ new Map());
  const [diffedChildren, setDiffedChildren] = reactExports.useState(presentChildren);
  const [renderedChildren, setRenderedChildren] = reactExports.useState(presentChildren);
  useIsomorphicLayoutEffect(() => {
    isInitialRender.current = false;
    pendingPresentChildren.current = presentChildren;
    for (let i = 0; i < renderedChildren.length; i++) {
      const key = getChildKey(renderedChildren[i]);
      if (!presentKeys.includes(key)) {
        if (exitComplete.get(key) !== true) {
          exitComplete.set(key, false);
        }
      } else {
        exitComplete.delete(key);
      }
    }
  }, [renderedChildren, presentKeys.length, presentKeys.join("-")]);
  const exitingChildren = [];
  if (presentChildren !== diffedChildren) {
    let nextChildren = [...presentChildren];
    for (let i = 0; i < renderedChildren.length; i++) {
      const child = renderedChildren[i];
      const key = getChildKey(child);
      if (!presentKeys.includes(key)) {
        nextChildren.splice(i, 0, child);
        exitingChildren.push(child);
      }
    }
    if (mode2 === "wait" && exitingChildren.length) {
      nextChildren = exitingChildren;
    }
    setRenderedChildren(onlyElements(nextChildren));
    setDiffedChildren(presentChildren);
    return null;
  }
  const { forceRender } = reactExports.useContext(LayoutGroupContext);
  return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, { children: renderedChildren.map((child) => {
    const key = getChildKey(child);
    const isPresent = propagate && !isParentPresent ? false : presentChildren === renderedChildren || presentKeys.includes(key);
    const onExit = () => {
      if (exitComplete.has(key)) {
        exitComplete.set(key, true);
      } else {
        return;
      }
      let isEveryExitComplete = true;
      exitComplete.forEach((isExitComplete) => {
        if (!isExitComplete)
          isEveryExitComplete = false;
      });
      if (isEveryExitComplete) {
        forceRender?.();
        setRenderedChildren(pendingPresentChildren.current);
        propagate && safeToRemove?.();
        onExitComplete && onExitComplete();
      }
    };
    return jsxRuntimeExports.jsx(PresenceChild, { isPresent, initial: !isInitialRender.current || initial ? void 0 : false, custom, presenceAffectsLayout, mode: mode2, root: root2, onExitComplete: isPresent ? void 0 : onExit, anchorX, children: child }, key);
  }) });
};
const LazyContext = reactExports.createContext({ strict: false });
const featureProps = {
  animation: [
    "animate",
    "variants",
    "whileHover",
    "whileTap",
    "exit",
    "whileInView",
    "whileFocus",
    "whileDrag"
  ],
  exit: ["exit"],
  drag: ["drag", "dragControls"],
  focus: ["whileFocus"],
  hover: ["whileHover", "onHoverStart", "onHoverEnd"],
  tap: ["whileTap", "onTap", "onTapStart", "onTapCancel"],
  pan: ["onPan", "onPanStart", "onPanSessionStart", "onPanEnd"],
  inView: ["whileInView", "onViewportEnter", "onViewportLeave"],
  layout: ["layout", "layoutId"]
};
const featureDefinitions = {};
for (const key in featureProps) {
  featureDefinitions[key] = {
    isEnabled: (props) => featureProps[key].some((name) => !!props[name])
  };
}
function loadFeatures(features) {
  for (const key in features) {
    featureDefinitions[key] = {
      ...featureDefinitions[key],
      ...features[key]
    };
  }
}
const validMotionProps = /* @__PURE__ */ new Set([
  "animate",
  "exit",
  "variants",
  "initial",
  "style",
  "values",
  "variants",
  "transition",
  "transformTemplate",
  "custom",
  "inherit",
  "onBeforeLayoutMeasure",
  "onAnimationStart",
  "onAnimationComplete",
  "onUpdate",
  "onDragStart",
  "onDrag",
  "onDragEnd",
  "onMeasureDragConstraints",
  "onDirectionLock",
  "onDragTransitionEnd",
  "_dragX",
  "_dragY",
  "onHoverStart",
  "onHoverEnd",
  "onViewportEnter",
  "onViewportLeave",
  "globalTapTarget",
  "ignoreStrict",
  "viewport"
]);
function isValidMotionProp(key) {
  return key.startsWith("while") || key.startsWith("drag") && key !== "draggable" || key.startsWith("layout") || key.startsWith("onTap") || key.startsWith("onPan") || key.startsWith("onLayout") || validMotionProps.has(key);
}
let shouldForward = (key) => !isValidMotionProp(key);
function loadExternalIsValidProp(isValidProp) {
  if (typeof isValidProp !== "function")
    return;
  shouldForward = (key) => key.startsWith("on") ? !isValidMotionProp(key) : isValidProp(key);
}
try {
  loadExternalIsValidProp(require("@emotion/is-prop-valid").default);
} catch {
}
function filterProps(props, isDom, forwardMotionProps) {
  const filteredProps = {};
  for (const key in props) {
    if (key === "values" && typeof props.values === "object")
      continue;
    if (shouldForward(key) || forwardMotionProps === true && isValidMotionProp(key) || !isDom && !isValidMotionProp(key) || // If trying to use native HTML drag events, forward drag listeners
    props["draggable"] && key.startsWith("onDrag")) {
      filteredProps[key] = props[key];
    }
  }
  return filteredProps;
}
const MotionContext = /* @__PURE__ */ reactExports.createContext({});
function isAnimationControls(v2) {
  return v2 !== null && typeof v2 === "object" && typeof v2.start === "function";
}
function isVariantLabel(v2) {
  return typeof v2 === "string" || Array.isArray(v2);
}
const variantPriorityOrder = [
  "animate",
  "whileInView",
  "whileFocus",
  "whileHover",
  "whileTap",
  "whileDrag",
  "exit"
];
const variantProps = ["initial", ...variantPriorityOrder];
function isControllingVariants(props) {
  return isAnimationControls(props.animate) || variantProps.some((name) => isVariantLabel(props[name]));
}
function isVariantNode(props) {
  return Boolean(isControllingVariants(props) || props.variants);
}
function getCurrentTreeVariants(props, context) {
  if (isControllingVariants(props)) {
    const { initial, animate } = props;
    return {
      initial: initial === false || isVariantLabel(initial) ? initial : void 0,
      animate: isVariantLabel(animate) ? animate : void 0
    };
  }
  return props.inherit !== false ? context : {};
}
function useCreateMotionContext(props) {
  const { initial, animate } = getCurrentTreeVariants(props, reactExports.useContext(MotionContext));
  return reactExports.useMemo(() => ({ initial, animate }), [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)]);
}
function variantLabelsAsDependency(prop) {
  return Array.isArray(prop) ? prop.join(" ") : prop;
}
const scaleCorrectors = {};
function addScaleCorrector(correctors) {
  for (const key in correctors) {
    scaleCorrectors[key] = correctors[key];
    if (isCSSVariableName(key)) {
      scaleCorrectors[key].isCSSVariable = true;
    }
  }
}
function isForcedMotionValue(key, { layout: layout2, layoutId }) {
  return transformProps.has(key) || key.startsWith("origin") || (layout2 || layoutId !== void 0) && (!!scaleCorrectors[key] || key === "opacity");
}
const translateAlias = {
  x: "translateX",
  y: "translateY",
  z: "translateZ",
  transformPerspective: "perspective"
};
const numTransforms = transformPropOrder.length;
function buildTransform(latestValues, transform2, transformTemplate) {
  let transformString = "";
  let transformIsDefault = true;
  for (let i = 0; i < numTransforms; i++) {
    const key = transformPropOrder[i];
    const value = latestValues[key];
    if (value === void 0)
      continue;
    let valueIsDefault = true;
    if (typeof value === "number") {
      valueIsDefault = value === (key.startsWith("scale") ? 1 : 0);
    } else {
      valueIsDefault = parseFloat(value) === 0;
    }
    if (!valueIsDefault || transformTemplate) {
      const valueAsType = getValueAsType(value, numberValueTypes[key]);
      if (!valueIsDefault) {
        transformIsDefault = false;
        const transformName = translateAlias[key] || key;
        transformString += `${transformName}(${valueAsType}) `;
      }
      if (transformTemplate) {
        transform2[key] = valueAsType;
      }
    }
  }
  transformString = transformString.trim();
  if (transformTemplate) {
    transformString = transformTemplate(transform2, transformIsDefault ? "" : transformString);
  } else if (transformIsDefault) {
    transformString = "none";
  }
  return transformString;
}
function buildHTMLStyles(state, latestValues, transformTemplate) {
  const { style, vars, transformOrigin } = state;
  let hasTransform2 = false;
  let hasTransformOrigin = false;
  for (const key in latestValues) {
    const value = latestValues[key];
    if (transformProps.has(key)) {
      hasTransform2 = true;
      continue;
    } else if (isCSSVariableName(key)) {
      vars[key] = value;
      continue;
    } else {
      const valueAsType = getValueAsType(value, numberValueTypes[key]);
      if (key.startsWith("origin")) {
        hasTransformOrigin = true;
        transformOrigin[key] = valueAsType;
      } else {
        style[key] = valueAsType;
      }
    }
  }
  if (!latestValues.transform) {
    if (hasTransform2 || transformTemplate) {
      style.transform = buildTransform(latestValues, state.transform, transformTemplate);
    } else if (style.transform) {
      style.transform = "none";
    }
  }
  if (hasTransformOrigin) {
    const { originX = "50%", originY = "50%", originZ = 0 } = transformOrigin;
    style.transformOrigin = `${originX} ${originY} ${originZ}`;
  }
}
const createHtmlRenderState = () => ({
  style: {},
  transform: {},
  transformOrigin: {},
  vars: {}
});
function copyRawValuesOnly(target, source, props) {
  for (const key in source) {
    if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {
      target[key] = source[key];
    }
  }
}
function useInitialMotionValues({ transformTemplate }, visualState) {
  return reactExports.useMemo(() => {
    const state = createHtmlRenderState();
    buildHTMLStyles(state, visualState, transformTemplate);
    return Object.assign({}, state.vars, state.style);
  }, [visualState]);
}
function useStyle(props, visualState) {
  const styleProp = props.style || {};
  const style = {};
  copyRawValuesOnly(style, styleProp, props);
  Object.assign(style, useInitialMotionValues(props, visualState));
  return style;
}
function useHTMLProps(props, visualState) {
  const htmlProps = {};
  const style = useStyle(props, visualState);
  if (props.drag && props.dragListener !== false) {
    htmlProps.draggable = false;
    style.userSelect = style.WebkitUserSelect = style.WebkitTouchCallout = "none";
    style.touchAction = props.drag === true ? "none" : `pan-${props.drag === "x" ? "y" : "x"}`;
  }
  if (props.tabIndex === void 0 && (props.onTap || props.onTapStart || props.whileTap)) {
    htmlProps.tabIndex = 0;
  }
  htmlProps.style = style;
  return htmlProps;
}
const dashKeys = {
  offset: "stroke-dashoffset",
  array: "stroke-dasharray"
};
const camelKeys = {
  offset: "strokeDashoffset",
  array: "strokeDasharray"
};
function buildSVGPath(attrs, length, spacing = 1, offset = 0, useDashCase = true) {
  attrs.pathLength = 1;
  const keys2 = useDashCase ? dashKeys : camelKeys;
  attrs[keys2.offset] = px.transform(-offset);
  const pathLength = px.transform(length);
  const pathSpacing = px.transform(spacing);
  attrs[keys2.array] = `${pathLength} ${pathSpacing}`;
}
function buildSVGAttrs(state, {
  attrX,
  attrY,
  attrScale,
  pathLength,
  pathSpacing = 1,
  pathOffset = 0,
  // This is object creation, which we try to avoid per-frame.
  ...latest
}, isSVGTag2, transformTemplate, styleProp) {
  buildHTMLStyles(state, latest, transformTemplate);
  if (isSVGTag2) {
    if (state.style.viewBox) {
      state.attrs.viewBox = state.style.viewBox;
    }
    return;
  }
  state.attrs = state.style;
  state.style = {};
  const { attrs, style } = state;
  if (attrs.transform) {
    style.transform = attrs.transform;
    delete attrs.transform;
  }
  if (style.transform || attrs.transformOrigin) {
    style.transformOrigin = attrs.transformOrigin ?? "50% 50%";
    delete attrs.transformOrigin;
  }
  if (style.transform) {
    style.transformBox = styleProp?.transformBox ?? "fill-box";
    delete attrs.transformBox;
  }
  if (attrX !== void 0)
    attrs.x = attrX;
  if (attrY !== void 0)
    attrs.y = attrY;
  if (attrScale !== void 0)
    attrs.scale = attrScale;
  if (pathLength !== void 0) {
    buildSVGPath(attrs, pathLength, pathSpacing, pathOffset, false);
  }
}
const createSvgRenderState = () => ({
  ...createHtmlRenderState(),
  attrs: {}
});
const isSVGTag = (tag) => typeof tag === "string" && tag.toLowerCase() === "svg";
function useSVGProps(props, visualState, _isStatic, Component) {
  const visualProps = reactExports.useMemo(() => {
    const state = createSvgRenderState();
    buildSVGAttrs(state, visualState, isSVGTag(Component), props.transformTemplate, props.style);
    return {
      ...state.attrs,
      style: { ...state.style }
    };
  }, [visualState]);
  if (props.style) {
    const rawStyles = {};
    copyRawValuesOnly(rawStyles, props.style, props);
    visualProps.style = { ...rawStyles, ...visualProps.style };
  }
  return visualProps;
}
const lowercaseSVGElements = [
  "animate",
  "circle",
  "defs",
  "desc",
  "ellipse",
  "g",
  "image",
  "line",
  "filter",
  "marker",
  "mask",
  "metadata",
  "path",
  "pattern",
  "polygon",
  "polyline",
  "rect",
  "stop",
  "switch",
  "symbol",
  "svg",
  "text",
  "tspan",
  "use",
  "view"
];
function isSVGComponent(Component) {
  if (
    /**
     * If it's not a string, it's a custom React component. Currently we only support
     * HTML custom React components.
     */
    typeof Component !== "string" || /**
     * If it contains a dash, the element is a custom HTML webcomponent.
     */
    Component.includes("-")
  ) {
    return false;
  } else if (
    /**
     * If it's in our list of lowercase SVG tags, it's an SVG component
     */
    lowercaseSVGElements.indexOf(Component) > -1 || /**
     * If it contains a capital letter, it's an SVG component
     */
    /[A-Z]/u.test(Component)
  ) {
    return true;
  }
  return false;
}
function useRender(Component, props, ref, { latestValues }, isStatic, forwardMotionProps = false) {
  const useVisualProps = isSVGComponent(Component) ? useSVGProps : useHTMLProps;
  const visualProps = useVisualProps(props, latestValues, isStatic, Component);
  const filteredProps = filterProps(props, typeof Component === "string", forwardMotionProps);
  const elementProps = Component !== reactExports.Fragment ? { ...filteredProps, ...visualProps, ref } : {};
  const { children } = props;
  const renderedChildren = reactExports.useMemo(() => isMotionValue(children) ? children.get() : children, [children]);
  return reactExports.createElement(Component, {
    ...elementProps,
    children: renderedChildren
  });
}
function getValueState(visualElement) {
  const state = [{}, {}];
  visualElement?.values.forEach((value, key) => {
    state[0][key] = value.get();
    state[1][key] = value.getVelocity();
  });
  return state;
}
function resolveVariantFromProps(props, definition, custom, visualElement) {
  if (typeof definition === "function") {
    const [current, velocity] = getValueState(visualElement);
    definition = definition(custom !== void 0 ? custom : props.custom, current, velocity);
  }
  if (typeof definition === "string") {
    definition = props.variants && props.variants[definition];
  }
  if (typeof definition === "function") {
    const [current, velocity] = getValueState(visualElement);
    definition = definition(custom !== void 0 ? custom : props.custom, current, velocity);
  }
  return definition;
}
function resolveMotionValue(value) {
  return isMotionValue(value) ? value.get() : value;
}
function makeState({ scrapeMotionValuesFromProps: scrapeMotionValuesFromProps2, createRenderState }, props, context, presenceContext) {
  const state = {
    latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps2),
    renderState: createRenderState()
  };
  return state;
}
function makeLatestValues(props, context, presenceContext, scrapeMotionValues) {
  const values = {};
  const motionValues = scrapeMotionValues(props, {});
  for (const key in motionValues) {
    values[key] = resolveMotionValue(motionValues[key]);
  }
  let { initial, animate } = props;
  const isControllingVariants$1 = isControllingVariants(props);
  const isVariantNode$1 = isVariantNode(props);
  if (context && isVariantNode$1 && !isControllingVariants$1 && props.inherit !== false) {
    if (initial === void 0)
      initial = context.initial;
    if (animate === void 0)
      animate = context.animate;
  }
  let isInitialAnimationBlocked = presenceContext ? presenceContext.initial === false : false;
  isInitialAnimationBlocked = isInitialAnimationBlocked || initial === false;
  const variantToSet = isInitialAnimationBlocked ? animate : initial;
  if (variantToSet && typeof variantToSet !== "boolean" && !isAnimationControls(variantToSet)) {
    const list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];
    for (let i = 0; i < list.length; i++) {
      const resolved = resolveVariantFromProps(props, list[i]);
      if (resolved) {
        const { transitionEnd, transition, ...target } = resolved;
        for (const key in target) {
          let valueTarget = target[key];
          if (Array.isArray(valueTarget)) {
            const index2 = isInitialAnimationBlocked ? valueTarget.length - 1 : 0;
            valueTarget = valueTarget[index2];
          }
          if (valueTarget !== null) {
            values[key] = valueTarget;
          }
        }
        for (const key in transitionEnd) {
          values[key] = transitionEnd[key];
        }
      }
    }
  }
  return values;
}
const makeUseVisualState = (config) => (props, isStatic) => {
  const context = reactExports.useContext(MotionContext);
  const presenceContext = reactExports.useContext(PresenceContext);
  const make = () => makeState(config, props, context, presenceContext);
  return isStatic ? make() : useConstant(make);
};
function scrapeMotionValuesFromProps$1(props, prevProps, visualElement) {
  const { style } = props;
  const newValues = {};
  for (const key in style) {
    if (isMotionValue(style[key]) || prevProps.style && isMotionValue(prevProps.style[key]) || isForcedMotionValue(key, props) || visualElement?.getValue(key)?.liveStyle !== void 0) {
      newValues[key] = style[key];
    }
  }
  return newValues;
}
const useHTMLVisualState = /* @__PURE__ */ makeUseVisualState({
  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps$1,
  createRenderState: createHtmlRenderState
});
function scrapeMotionValuesFromProps(props, prevProps, visualElement) {
  const newValues = scrapeMotionValuesFromProps$1(props, prevProps, visualElement);
  for (const key in props) {
    if (isMotionValue(props[key]) || isMotionValue(prevProps[key])) {
      const targetKey = transformPropOrder.indexOf(key) !== -1 ? "attr" + key.charAt(0).toUpperCase() + key.substring(1) : key;
      newValues[targetKey] = props[key];
    }
  }
  return newValues;
}
const useSVGVisualState = /* @__PURE__ */ makeUseVisualState({
  scrapeMotionValuesFromProps,
  createRenderState: createSvgRenderState
});
const motionComponentSymbol = Symbol.for("motionComponentSymbol");
function isRefObject(ref) {
  return ref && typeof ref === "object" && Object.prototype.hasOwnProperty.call(ref, "current");
}
function useMotionRef(visualState, visualElement, externalRef) {
  return reactExports.useCallback(
    (instance) => {
      if (instance) {
        visualState.onMount && visualState.onMount(instance);
      }
      if (visualElement) {
        if (instance) {
          visualElement.mount(instance);
        } else {
          visualElement.unmount();
        }
      }
      if (externalRef) {
        if (typeof externalRef === "function") {
          externalRef(instance);
        } else if (isRefObject(externalRef)) {
          externalRef.current = instance;
        }
      }
    },
    /**
     * Include externalRef in dependencies to ensure the callback updates
     * when the ref changes, allowing proper ref forwarding.
     */
    [visualElement]
  );
}
const camelToDash = (str) => str.replace(/([a-z])([A-Z])/gu, "$1-$2").toLowerCase();
const optimizedAppearDataId = "framerAppearId";
const optimizedAppearDataAttribute = "data-" + camelToDash(optimizedAppearDataId);
const SwitchLayoutGroupContext = reactExports.createContext({});
function useVisualElement(Component, visualState, props, createVisualElement, ProjectionNodeConstructor) {
  const { visualElement: parent } = reactExports.useContext(MotionContext);
  const lazyContext = reactExports.useContext(LazyContext);
  const presenceContext = reactExports.useContext(PresenceContext);
  const reducedMotionConfig = reactExports.useContext(MotionConfigContext).reducedMotion;
  const visualElementRef = reactExports.useRef(null);
  createVisualElement = createVisualElement || lazyContext.renderer;
  if (!visualElementRef.current && createVisualElement) {
    visualElementRef.current = createVisualElement(Component, {
      visualState,
      parent,
      props,
      presenceContext,
      blockInitialAnimation: presenceContext ? presenceContext.initial === false : false,
      reducedMotionConfig
    });
  }
  const visualElement = visualElementRef.current;
  const initialLayoutGroupConfig = reactExports.useContext(SwitchLayoutGroupContext);
  if (visualElement && !visualElement.projection && ProjectionNodeConstructor && (visualElement.type === "html" || visualElement.type === "svg")) {
    createProjectionNode$1(visualElementRef.current, props, ProjectionNodeConstructor, initialLayoutGroupConfig);
  }
  const isMounted = reactExports.useRef(false);
  reactExports.useInsertionEffect(() => {
    if (visualElement && isMounted.current) {
      visualElement.update(props, presenceContext);
    }
  });
  const optimisedAppearId = props[optimizedAppearDataAttribute];
  const wantsHandoff = reactExports.useRef(Boolean(optimisedAppearId) && !window.MotionHandoffIsComplete?.(optimisedAppearId) && window.MotionHasOptimisedAnimation?.(optimisedAppearId));
  useIsomorphicLayoutEffect(() => {
    if (!visualElement)
      return;
    isMounted.current = true;
    window.MotionIsMounted = true;
    visualElement.updateFeatures();
    visualElement.scheduleRenderMicrotask();
    if (wantsHandoff.current && visualElement.animationState) {
      visualElement.animationState.animateChanges();
    }
  });
  reactExports.useEffect(() => {
    if (!visualElement)
      return;
    if (!wantsHandoff.current && visualElement.animationState) {
      visualElement.animationState.animateChanges();
    }
    if (wantsHandoff.current) {
      queueMicrotask(() => {
        window.MotionHandoffMarkAsComplete?.(optimisedAppearId);
      });
      wantsHandoff.current = false;
    }
    visualElement.enteringChildren = void 0;
  });
  return visualElement;
}
function createProjectionNode$1(visualElement, props, ProjectionNodeConstructor, initialPromotionConfig) {
  const { layoutId, layout: layout2, drag: drag2, dragConstraints, layoutScroll, layoutRoot, layoutCrossfade } = props;
  visualElement.projection = new ProjectionNodeConstructor(visualElement.latestValues, props["data-framer-portal-id"] ? void 0 : getClosestProjectingNode(visualElement.parent));
  visualElement.projection.setOptions({
    layoutId,
    layout: layout2,
    alwaysMeasureLayout: Boolean(drag2) || dragConstraints && isRefObject(dragConstraints),
    visualElement,
    /**
     * TODO: Update options in an effect. This could be tricky as it'll be too late
     * to update by the time layout animations run.
     * We also need to fix this safeToRemove by linking it up to the one returned by usePresence,
     * ensuring it gets called if there's no potential layout animations.
     *
     */
    animationType: typeof layout2 === "string" ? layout2 : "both",
    initialPromotionConfig,
    crossfade: layoutCrossfade,
    layoutScroll,
    layoutRoot
  });
}
function getClosestProjectingNode(visualElement) {
  if (!visualElement)
    return void 0;
  return visualElement.options.allowProjection !== false ? visualElement.projection : getClosestProjectingNode(visualElement.parent);
}
function createMotionComponent(Component, { forwardMotionProps = false } = {}, preloadedFeatures, createVisualElement) {
  preloadedFeatures && loadFeatures(preloadedFeatures);
  const useVisualState = isSVGComponent(Component) ? useSVGVisualState : useHTMLVisualState;
  function MotionDOMComponent(props, externalRef) {
    let MeasureLayout2;
    const configAndProps = {
      ...reactExports.useContext(MotionConfigContext),
      ...props,
      layoutId: useLayoutId(props)
    };
    const { isStatic } = configAndProps;
    const context = useCreateMotionContext(props);
    const visualState = useVisualState(props, isStatic);
    if (!isStatic && isBrowser) {
      useStrictMode();
      const layoutProjection = getProjectionFunctionality(configAndProps);
      MeasureLayout2 = layoutProjection.MeasureLayout;
      context.visualElement = useVisualElement(Component, visualState, configAndProps, createVisualElement, layoutProjection.ProjectionNode);
    }
    return jsxRuntimeExports.jsxs(MotionContext.Provider, { value: context, children: [MeasureLayout2 && context.visualElement ? jsxRuntimeExports.jsx(MeasureLayout2, { visualElement: context.visualElement, ...configAndProps }) : null, useRender(Component, props, useMotionRef(visualState, context.visualElement, externalRef), visualState, isStatic, forwardMotionProps)] });
  }
  MotionDOMComponent.displayName = `motion.${typeof Component === "string" ? Component : `create(${Component.displayName ?? Component.name ?? ""})`}`;
  const ForwardRefMotionComponent = reactExports.forwardRef(MotionDOMComponent);
  ForwardRefMotionComponent[motionComponentSymbol] = Component;
  return ForwardRefMotionComponent;
}
function useLayoutId({ layoutId }) {
  const layoutGroupId = reactExports.useContext(LayoutGroupContext).id;
  return layoutGroupId && layoutId !== void 0 ? layoutGroupId + "-" + layoutId : layoutId;
}
function useStrictMode(configAndProps, preloadedFeatures) {
  reactExports.useContext(LazyContext).strict;
}
function getProjectionFunctionality(props) {
  const { drag: drag2, layout: layout2 } = featureDefinitions;
  if (!drag2 && !layout2)
    return {};
  const combined = { ...drag2, ...layout2 };
  return {
    MeasureLayout: drag2?.isEnabled(props) || layout2?.isEnabled(props) ? combined.MeasureLayout : void 0,
    ProjectionNode: combined.ProjectionNode
  };
}
function createMotionProxy(preloadedFeatures, createVisualElement) {
  if (typeof Proxy === "undefined") {
    return createMotionComponent;
  }
  const componentCache = /* @__PURE__ */ new Map();
  const factory = (Component, options) => {
    return createMotionComponent(Component, options, preloadedFeatures, createVisualElement);
  };
  const deprecatedFactoryFunction = (Component, options) => {
    return factory(Component, options);
  };
  return new Proxy(deprecatedFactoryFunction, {
    /**
     * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.
     * The prop name is passed through as `key` and we can use that to generate a `motion`
     * DOM component with that name.
     */
    get: (_target, key) => {
      if (key === "create")
        return factory;
      if (!componentCache.has(key)) {
        componentCache.set(key, createMotionComponent(key, void 0, preloadedFeatures, createVisualElement));
      }
      return componentCache.get(key);
    }
  });
}
function convertBoundingBoxToBox({ top, left, right, bottom }) {
  return {
    x: { min: left, max: right },
    y: { min: top, max: bottom }
  };
}
function convertBoxToBoundingBox({ x: x2, y: y2 }) {
  return { top: y2.min, right: x2.max, bottom: y2.max, left: x2.min };
}
function transformBoxPoints(point2, transformPoint2) {
  if (!transformPoint2)
    return point2;
  const topLeft = transformPoint2({ x: point2.left, y: point2.top });
  const bottomRight = transformPoint2({ x: point2.right, y: point2.bottom });
  return {
    top: topLeft.y,
    left: topLeft.x,
    bottom: bottomRight.y,
    right: bottomRight.x
  };
}
function isIdentityScale(scale2) {
  return scale2 === void 0 || scale2 === 1;
}
function hasScale({ scale: scale2, scaleX: scaleX2, scaleY: scaleY2 }) {
  return !isIdentityScale(scale2) || !isIdentityScale(scaleX2) || !isIdentityScale(scaleY2);
}
function hasTransform(values) {
  return hasScale(values) || has2DTranslate(values) || values.z || values.rotate || values.rotateX || values.rotateY || values.skewX || values.skewY;
}
function has2DTranslate(values) {
  return is2DTranslate(values.x) || is2DTranslate(values.y);
}
function is2DTranslate(value) {
  return value && value !== "0%";
}
function scalePoint(point2, scale2, originPoint) {
  const distanceFromOrigin = point2 - originPoint;
  const scaled = scale2 * distanceFromOrigin;
  return originPoint + scaled;
}
function applyPointDelta(point2, translate, scale2, originPoint, boxScale) {
  if (boxScale !== void 0) {
    point2 = scalePoint(point2, boxScale, originPoint);
  }
  return scalePoint(point2, scale2, originPoint) + translate;
}
function applyAxisDelta(axis, translate = 0, scale2 = 1, originPoint, boxScale) {
  axis.min = applyPointDelta(axis.min, translate, scale2, originPoint, boxScale);
  axis.max = applyPointDelta(axis.max, translate, scale2, originPoint, boxScale);
}
function applyBoxDelta(box, { x: x2, y: y2 }) {
  applyAxisDelta(box.x, x2.translate, x2.scale, x2.originPoint);
  applyAxisDelta(box.y, y2.translate, y2.scale, y2.originPoint);
}
const TREE_SCALE_SNAP_MIN = 0.999999999999;
const TREE_SCALE_SNAP_MAX = 1.0000000000001;
function applyTreeDeltas(box, treeScale, treePath, isSharedTransition = false) {
  const treeLength = treePath.length;
  if (!treeLength)
    return;
  treeScale.x = treeScale.y = 1;
  let node;
  let delta;
  for (let i = 0; i < treeLength; i++) {
    node = treePath[i];
    delta = node.projectionDelta;
    const { visualElement } = node.options;
    if (visualElement && visualElement.props.style && visualElement.props.style.display === "contents") {
      continue;
    }
    if (isSharedTransition && node.options.layoutScroll && node.scroll && node !== node.root) {
      transformBox(box, {
        x: -node.scroll.offset.x,
        y: -node.scroll.offset.y
      });
    }
    if (delta) {
      treeScale.x *= delta.x.scale;
      treeScale.y *= delta.y.scale;
      applyBoxDelta(box, delta);
    }
    if (isSharedTransition && hasTransform(node.latestValues)) {
      transformBox(box, node.latestValues);
    }
  }
  if (treeScale.x < TREE_SCALE_SNAP_MAX && treeScale.x > TREE_SCALE_SNAP_MIN) {
    treeScale.x = 1;
  }
  if (treeScale.y < TREE_SCALE_SNAP_MAX && treeScale.y > TREE_SCALE_SNAP_MIN) {
    treeScale.y = 1;
  }
}
function translateAxis(axis, distance2) {
  axis.min = axis.min + distance2;
  axis.max = axis.max + distance2;
}
function transformAxis(axis, axisTranslate, axisScale, boxScale, axisOrigin = 0.5) {
  const originPoint = mixNumber$1(axis.min, axis.max, axisOrigin);
  applyAxisDelta(axis, axisTranslate, axisScale, originPoint, boxScale);
}
function transformBox(box, transform2) {
  transformAxis(box.x, transform2.x, transform2.scaleX, transform2.scale, transform2.originX);
  transformAxis(box.y, transform2.y, transform2.scaleY, transform2.scale, transform2.originY);
}
function measureViewportBox(instance, transformPoint2) {
  return convertBoundingBoxToBox(transformBoxPoints(instance.getBoundingClientRect(), transformPoint2));
}
function measurePageBox(element, rootProjectionNode2, transformPagePoint) {
  const viewportBox = measureViewportBox(element, transformPagePoint);
  const { scroll: scroll2 } = rootProjectionNode2;
  if (scroll2) {
    translateAxis(viewportBox.x, scroll2.offset.x);
    translateAxis(viewportBox.y, scroll2.offset.y);
  }
  return viewportBox;
}
const createAxisDelta = () => ({
  translate: 0,
  scale: 1,
  origin: 0,
  originPoint: 0
});
const createDelta = () => ({
  x: createAxisDelta(),
  y: createAxisDelta()
});
const createAxis = () => ({ min: 0, max: 0 });
const createBox = () => ({
  x: createAxis(),
  y: createAxis()
});
const prefersReducedMotion = { current: null };
const hasReducedMotionListener = { current: false };
function initPrefersReducedMotion() {
  hasReducedMotionListener.current = true;
  if (!isBrowser)
    return;
  if (window.matchMedia) {
    const motionMediaQuery = window.matchMedia("(prefers-reduced-motion)");
    const setReducedMotionPreferences = () => prefersReducedMotion.current = motionMediaQuery.matches;
    motionMediaQuery.addEventListener("change", setReducedMotionPreferences);
    setReducedMotionPreferences();
  } else {
    prefersReducedMotion.current = false;
  }
}
const visualElementStore = /* @__PURE__ */ new WeakMap();
function updateMotionValuesFromProps(element, next, prev) {
  for (const key in next) {
    const nextValue = next[key];
    const prevValue = prev[key];
    if (isMotionValue(nextValue)) {
      element.addValue(key, nextValue);
    } else if (isMotionValue(prevValue)) {
      element.addValue(key, motionValue(nextValue, { owner: element }));
    } else if (prevValue !== nextValue) {
      if (element.hasValue(key)) {
        const existingValue = element.getValue(key);
        if (existingValue.liveStyle === true) {
          existingValue.jump(nextValue);
        } else if (!existingValue.hasAnimated) {
          existingValue.set(nextValue);
        }
      } else {
        const latestValue = element.getStaticValue(key);
        element.addValue(key, motionValue(latestValue !== void 0 ? latestValue : nextValue, { owner: element }));
      }
    }
  }
  for (const key in prev) {
    if (next[key] === void 0)
      element.removeValue(key);
  }
  return next;
}
const propEventHandlers = [
  "AnimationStart",
  "AnimationComplete",
  "Update",
  "BeforeLayoutMeasure",
  "LayoutMeasure",
  "LayoutAnimationStart",
  "LayoutAnimationComplete"
];
class VisualElement {
  /**
   * This method takes React props and returns found MotionValues. For example, HTML
   * MotionValues will be found within the style prop, whereas for Three.js within attribute arrays.
   *
   * This isn't an abstract method as it needs calling in the constructor, but it is
   * intended to be one.
   */
  scrapeMotionValuesFromProps(_props, _prevProps, _visualElement) {
    return {};
  }
  constructor({ parent, props, presenceContext, reducedMotionConfig, blockInitialAnimation, visualState }, options = {}) {
    this.current = null;
    this.children = /* @__PURE__ */ new Set();
    this.isVariantNode = false;
    this.isControllingVariants = false;
    this.shouldReduceMotion = null;
    this.values = /* @__PURE__ */ new Map();
    this.KeyframeResolver = KeyframeResolver;
    this.features = {};
    this.valueSubscriptions = /* @__PURE__ */ new Map();
    this.prevMotionValues = {};
    this.events = {};
    this.propEventSubscriptions = {};
    this.notifyUpdate = () => this.notify("Update", this.latestValues);
    this.render = () => {
      if (!this.current)
        return;
      this.triggerBuild();
      this.renderInstance(this.current, this.renderState, this.props.style, this.projection);
    };
    this.renderScheduledAt = 0;
    this.scheduleRender = () => {
      const now2 = time.now();
      if (this.renderScheduledAt < now2) {
        this.renderScheduledAt = now2;
        frame.render(this.render, false, true);
      }
    };
    const { latestValues, renderState } = visualState;
    this.latestValues = latestValues;
    this.baseTarget = { ...latestValues };
    this.initialValues = props.initial ? { ...latestValues } : {};
    this.renderState = renderState;
    this.parent = parent;
    this.props = props;
    this.presenceContext = presenceContext;
    this.depth = parent ? parent.depth + 1 : 0;
    this.reducedMotionConfig = reducedMotionConfig;
    this.options = options;
    this.blockInitialAnimation = Boolean(blockInitialAnimation);
    this.isControllingVariants = isControllingVariants(props);
    this.isVariantNode = isVariantNode(props);
    if (this.isVariantNode) {
      this.variantChildren = /* @__PURE__ */ new Set();
    }
    this.manuallyAnimateOnMount = Boolean(parent && parent.current);
    const { willChange, ...initialMotionValues } = this.scrapeMotionValuesFromProps(props, {}, this);
    for (const key in initialMotionValues) {
      const value = initialMotionValues[key];
      if (latestValues[key] !== void 0 && isMotionValue(value)) {
        value.set(latestValues[key]);
      }
    }
  }
  mount(instance) {
    this.current = instance;
    visualElementStore.set(instance, this);
    if (this.projection && !this.projection.instance) {
      this.projection.mount(instance);
    }
    if (this.parent && this.isVariantNode && !this.isControllingVariants) {
      this.removeFromVariantTree = this.parent.addVariantChild(this);
    }
    this.values.forEach((value, key) => this.bindToMotionValue(key, value));
    if (!hasReducedMotionListener.current) {
      initPrefersReducedMotion();
    }
    this.shouldReduceMotion = this.reducedMotionConfig === "never" ? false : this.reducedMotionConfig === "always" ? true : prefersReducedMotion.current;
    this.parent?.addChild(this);
    this.update(this.props, this.presenceContext);
  }
  unmount() {
    this.projection && this.projection.unmount();
    cancelFrame(this.notifyUpdate);
    cancelFrame(this.render);
    this.valueSubscriptions.forEach((remove) => remove());
    this.valueSubscriptions.clear();
    this.removeFromVariantTree && this.removeFromVariantTree();
    this.parent?.removeChild(this);
    for (const key in this.events) {
      this.events[key].clear();
    }
    for (const key in this.features) {
      const feature = this.features[key];
      if (feature) {
        feature.unmount();
        feature.isMounted = false;
      }
    }
    this.current = null;
  }
  addChild(child) {
    this.children.add(child);
    this.enteringChildren ?? (this.enteringChildren = /* @__PURE__ */ new Set());
    this.enteringChildren.add(child);
  }
  removeChild(child) {
    this.children.delete(child);
    this.enteringChildren && this.enteringChildren.delete(child);
  }
  bindToMotionValue(key, value) {
    if (this.valueSubscriptions.has(key)) {
      this.valueSubscriptions.get(key)();
    }
    const valueIsTransform = transformProps.has(key);
    if (valueIsTransform && this.onBindTransform) {
      this.onBindTransform();
    }
    const removeOnChange = value.on("change", (latestValue) => {
      this.latestValues[key] = latestValue;
      this.props.onUpdate && frame.preRender(this.notifyUpdate);
      if (valueIsTransform && this.projection) {
        this.projection.isTransformDirty = true;
      }
      this.scheduleRender();
    });
    let removeSyncCheck;
    if (window.MotionCheckAppearSync) {
      removeSyncCheck = window.MotionCheckAppearSync(this, key, value);
    }
    this.valueSubscriptions.set(key, () => {
      removeOnChange();
      if (removeSyncCheck)
        removeSyncCheck();
      if (value.owner)
        value.stop();
    });
  }
  sortNodePosition(other) {
    if (!this.current || !this.sortInstanceNodePosition || this.type !== other.type) {
      return 0;
    }
    return this.sortInstanceNodePosition(this.current, other.current);
  }
  updateFeatures() {
    let key = "animation";
    for (key in featureDefinitions) {
      const featureDefinition = featureDefinitions[key];
      if (!featureDefinition)
        continue;
      const { isEnabled, Feature: FeatureConstructor } = featureDefinition;
      if (!this.features[key] && FeatureConstructor && isEnabled(this.props)) {
        this.features[key] = new FeatureConstructor(this);
      }
      if (this.features[key]) {
        const feature = this.features[key];
        if (feature.isMounted) {
          feature.update();
        } else {
          feature.mount();
          feature.isMounted = true;
        }
      }
    }
  }
  triggerBuild() {
    this.build(this.renderState, this.latestValues, this.props);
  }
  /**
   * Measure the current viewport box with or without transforms.
   * Only measures axis-aligned boxes, rotate and skew must be manually
   * removed with a re-render to work.
   */
  measureViewportBox() {
    return this.current ? this.measureInstanceViewportBox(this.current, this.props) : createBox();
  }
  getStaticValue(key) {
    return this.latestValues[key];
  }
  setStaticValue(key, value) {
    this.latestValues[key] = value;
  }
  /**
   * Update the provided props. Ensure any newly-added motion values are
   * added to our map, old ones removed, and listeners updated.
   */
  update(props, presenceContext) {
    if (props.transformTemplate || this.props.transformTemplate) {
      this.scheduleRender();
    }
    this.prevProps = this.props;
    this.props = props;
    this.prevPresenceContext = this.presenceContext;
    this.presenceContext = presenceContext;
    for (let i = 0; i < propEventHandlers.length; i++) {
      const key = propEventHandlers[i];
      if (this.propEventSubscriptions[key]) {
        this.propEventSubscriptions[key]();
        delete this.propEventSubscriptions[key];
      }
      const listenerName = "on" + key;
      const listener = props[listenerName];
      if (listener) {
        this.propEventSubscriptions[key] = this.on(key, listener);
      }
    }
    this.prevMotionValues = updateMotionValuesFromProps(this, this.scrapeMotionValuesFromProps(props, this.prevProps, this), this.prevMotionValues);
    if (this.handleChildMotionValue) {
      this.handleChildMotionValue();
    }
  }
  getProps() {
    return this.props;
  }
  /**
   * Returns the variant definition with a given name.
   */
  getVariant(name) {
    return this.props.variants ? this.props.variants[name] : void 0;
  }
  /**
   * Returns the defined default transition on this component.
   */
  getDefaultTransition() {
    return this.props.transition;
  }
  getTransformPagePoint() {
    return this.props.transformPagePoint;
  }
  getClosestVariantNode() {
    return this.isVariantNode ? this : this.parent ? this.parent.getClosestVariantNode() : void 0;
  }
  /**
   * Add a child visual element to our set of children.
   */
  addVariantChild(child) {
    const closestVariantNode = this.getClosestVariantNode();
    if (closestVariantNode) {
      closestVariantNode.variantChildren && closestVariantNode.variantChildren.add(child);
      return () => closestVariantNode.variantChildren.delete(child);
    }
  }
  /**
   * Add a motion value and bind it to this visual element.
   */
  addValue(key, value) {
    const existingValue = this.values.get(key);
    if (value !== existingValue) {
      if (existingValue)
        this.removeValue(key);
      this.bindToMotionValue(key, value);
      this.values.set(key, value);
      this.latestValues[key] = value.get();
    }
  }
  /**
   * Remove a motion value and unbind any active subscriptions.
   */
  removeValue(key) {
    this.values.delete(key);
    const unsubscribe = this.valueSubscriptions.get(key);
    if (unsubscribe) {
      unsubscribe();
      this.valueSubscriptions.delete(key);
    }
    delete this.latestValues[key];
    this.removeValueFromRenderState(key, this.renderState);
  }
  /**
   * Check whether we have a motion value for this key
   */
  hasValue(key) {
    return this.values.has(key);
  }
  getValue(key, defaultValue) {
    if (this.props.values && this.props.values[key]) {
      return this.props.values[key];
    }
    let value = this.values.get(key);
    if (value === void 0 && defaultValue !== void 0) {
      value = motionValue(defaultValue === null ? void 0 : defaultValue, { owner: this });
      this.addValue(key, value);
    }
    return value;
  }
  /**
   * If we're trying to animate to a previously unencountered value,
   * we need to check for it in our state and as a last resort read it
   * directly from the instance (which might have performance implications).
   */
  readValue(key, target) {
    let value = this.latestValues[key] !== void 0 || !this.current ? this.latestValues[key] : this.getBaseTargetFromProps(this.props, key) ?? this.readValueFromInstance(this.current, key, this.options);
    if (value !== void 0 && value !== null) {
      if (typeof value === "string" && (isNumericalString(value) || isZeroValueString(value))) {
        value = parseFloat(value);
      } else if (!findValueType(value) && complex.test(target)) {
        value = getAnimatableNone(key, target);
      }
      this.setBaseTarget(key, isMotionValue(value) ? value.get() : value);
    }
    return isMotionValue(value) ? value.get() : value;
  }
  /**
   * Set the base target to later animate back to. This is currently
   * only hydrated on creation and when we first read a value.
   */
  setBaseTarget(key, value) {
    this.baseTarget[key] = value;
  }
  /**
   * Find the base target for a value thats been removed from all animation
   * props.
   */
  getBaseTarget(key) {
    const { initial } = this.props;
    let valueFromInitial;
    if (typeof initial === "string" || typeof initial === "object") {
      const variant = resolveVariantFromProps(this.props, initial, this.presenceContext?.custom);
      if (variant) {
        valueFromInitial = variant[key];
      }
    }
    if (initial && valueFromInitial !== void 0) {
      return valueFromInitial;
    }
    const target = this.getBaseTargetFromProps(this.props, key);
    if (target !== void 0 && !isMotionValue(target))
      return target;
    return this.initialValues[key] !== void 0 && valueFromInitial === void 0 ? void 0 : this.baseTarget[key];
  }
  on(eventName, callback) {
    if (!this.events[eventName]) {
      this.events[eventName] = new SubscriptionManager();
    }
    return this.events[eventName].add(callback);
  }
  notify(eventName, ...args) {
    if (this.events[eventName]) {
      this.events[eventName].notify(...args);
    }
  }
  scheduleRenderMicrotask() {
    microtask.render(this.render);
  }
}
class DOMVisualElement extends VisualElement {
  constructor() {
    super(...arguments);
    this.KeyframeResolver = DOMKeyframesResolver;
  }
  sortInstanceNodePosition(a, b2) {
    return a.compareDocumentPosition(b2) & 2 ? 1 : -1;
  }
  getBaseTargetFromProps(props, key) {
    return props.style ? props.style[key] : void 0;
  }
  removeValueFromRenderState(key, { vars, style }) {
    delete vars[key];
    delete style[key];
  }
  handleChildMotionValue() {
    if (this.childSubscription) {
      this.childSubscription();
      delete this.childSubscription;
    }
    const { children } = this.props;
    if (isMotionValue(children)) {
      this.childSubscription = children.on("change", (latest) => {
        if (this.current) {
          this.current.textContent = `${latest}`;
        }
      });
    }
  }
}
function renderHTML(element, { style, vars }, styleProp, projection) {
  const elementStyle = element.style;
  let key;
  for (key in style) {
    elementStyle[key] = style[key];
  }
  projection?.applyProjectionStyles(elementStyle, styleProp);
  for (key in vars) {
    elementStyle.setProperty(key, vars[key]);
  }
}
function getComputedStyle$1(element) {
  return window.getComputedStyle(element);
}
class HTMLVisualElement extends DOMVisualElement {
  constructor() {
    super(...arguments);
    this.type = "html";
    this.renderInstance = renderHTML;
  }
  readValueFromInstance(instance, key) {
    if (transformProps.has(key)) {
      return this.projection?.isProjecting ? defaultTransformValue(key) : readTransformValue(instance, key);
    } else {
      const computedStyle = getComputedStyle$1(instance);
      const value = (isCSSVariableName(key) ? computedStyle.getPropertyValue(key) : computedStyle[key]) || 0;
      return typeof value === "string" ? value.trim() : value;
    }
  }
  measureInstanceViewportBox(instance, { transformPagePoint }) {
    return measureViewportBox(instance, transformPagePoint);
  }
  build(renderState, latestValues, props) {
    buildHTMLStyles(renderState, latestValues, props.transformTemplate);
  }
  scrapeMotionValuesFromProps(props, prevProps, visualElement) {
    return scrapeMotionValuesFromProps$1(props, prevProps, visualElement);
  }
}
const camelCaseAttributes = /* @__PURE__ */ new Set([
  "baseFrequency",
  "diffuseConstant",
  "kernelMatrix",
  "kernelUnitLength",
  "keySplines",
  "keyTimes",
  "limitingConeAngle",
  "markerHeight",
  "markerWidth",
  "numOctaves",
  "targetX",
  "targetY",
  "surfaceScale",
  "specularConstant",
  "specularExponent",
  "stdDeviation",
  "tableValues",
  "viewBox",
  "gradientTransform",
  "pathLength",
  "startOffset",
  "textLength",
  "lengthAdjust"
]);
function renderSVG(element, renderState, _styleProp, projection) {
  renderHTML(element, renderState, void 0, projection);
  for (const key in renderState.attrs) {
    element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);
  }
}
class SVGVisualElement extends DOMVisualElement {
  constructor() {
    super(...arguments);
    this.type = "svg";
    this.isSVGTag = false;
    this.measureInstanceViewportBox = createBox;
  }
  getBaseTargetFromProps(props, key) {
    return props[key];
  }
  readValueFromInstance(instance, key) {
    if (transformProps.has(key)) {
      const defaultType = getDefaultValueType(key);
      return defaultType ? defaultType.default || 0 : 0;
    }
    key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;
    return instance.getAttribute(key);
  }
  scrapeMotionValuesFromProps(props, prevProps, visualElement) {
    return scrapeMotionValuesFromProps(props, prevProps, visualElement);
  }
  build(renderState, latestValues, props) {
    buildSVGAttrs(renderState, latestValues, this.isSVGTag, props.transformTemplate, props.style);
  }
  renderInstance(instance, renderState, styleProp, projection) {
    renderSVG(instance, renderState, styleProp, projection);
  }
  mount(instance) {
    this.isSVGTag = isSVGTag(instance.tagName);
    super.mount(instance);
  }
}
const createDomVisualElement = (Component, options) => {
  return isSVGComponent(Component) ? new SVGVisualElement(options) : new HTMLVisualElement(options, {
    allowProjection: Component !== reactExports.Fragment
  });
};
function resolveVariant(visualElement, definition, custom) {
  const props = visualElement.getProps();
  return resolveVariantFromProps(props, definition, custom !== void 0 ? custom : props.custom, visualElement);
}
const isKeyframesTarget = (v2) => {
  return Array.isArray(v2);
};
function setMotionValue(visualElement, key, value) {
  if (visualElement.hasValue(key)) {
    visualElement.getValue(key).set(value);
  } else {
    visualElement.addValue(key, motionValue(value));
  }
}
function resolveFinalValueInKeyframes(v2) {
  return isKeyframesTarget(v2) ? v2[v2.length - 1] || 0 : v2;
}
function setTarget(visualElement, definition) {
  const resolved = resolveVariant(visualElement, definition);
  let { transitionEnd = {}, transition = {}, ...target } = resolved || {};
  target = { ...target, ...transitionEnd };
  for (const key in target) {
    const value = resolveFinalValueInKeyframes(target[key]);
    setMotionValue(visualElement, key, value);
  }
}
function isWillChangeMotionValue(value) {
  return Boolean(isMotionValue(value) && value.add);
}
function addValueToWillChange(visualElement, key) {
  const willChange = visualElement.getValue("willChange");
  if (isWillChangeMotionValue(willChange)) {
    return willChange.add(key);
  } else if (!willChange && MotionGlobalConfig.WillChange) {
    const newWillChange = new MotionGlobalConfig.WillChange("auto");
    visualElement.addValue("willChange", newWillChange);
    newWillChange.add(key);
  }
}
function getOptimisedAppearId(visualElement) {
  return visualElement.props[optimizedAppearDataAttribute];
}
const isNotNull = (value) => value !== null;
function getFinalKeyframe(keyframes2, { repeat, repeatType = "loop" }, finalKeyframe) {
  const resolvedKeyframes = keyframes2.filter(isNotNull);
  const index2 = repeat && repeatType !== "loop" && repeat % 2 === 1 ? 0 : resolvedKeyframes.length - 1;
  return resolvedKeyframes[index2];
}
const underDampedSpring = {
  type: "spring",
  stiffness: 500,
  damping: 25,
  restSpeed: 10
};
const criticallyDampedSpring = (target) => ({
  type: "spring",
  stiffness: 550,
  damping: target === 0 ? 2 * Math.sqrt(550) : 30,
  restSpeed: 10
});
const keyframesTransition = {
  type: "keyframes",
  duration: 0.8
};
const ease = {
  type: "keyframes",
  ease: [0.25, 0.1, 0.35, 1],
  duration: 0.3
};
const getDefaultTransition = (valueKey, { keyframes: keyframes2 }) => {
  if (keyframes2.length > 2) {
    return keyframesTransition;
  } else if (transformProps.has(valueKey)) {
    return valueKey.startsWith("scale") ? criticallyDampedSpring(keyframes2[1]) : underDampedSpring;
  }
  return ease;
};
function isTransitionDefined({ when, delay: _delay, delayChildren, staggerChildren, staggerDirection, repeat, repeatType, repeatDelay, from, elapsed, ...transition }) {
  return !!Object.keys(transition).length;
}
const animateMotionValue = (name, value, target, transition = {}, element, isHandoff) => (onComplete) => {
  const valueTransition = getValueTransition(transition, name) || {};
  const delay2 = valueTransition.delay || transition.delay || 0;
  let { elapsed = 0 } = transition;
  elapsed = elapsed - /* @__PURE__ */ secondsToMilliseconds(delay2);
  const options = {
    keyframes: Array.isArray(target) ? target : [null, target],
    ease: "easeOut",
    velocity: value.getVelocity(),
    ...valueTransition,
    delay: -elapsed,
    onUpdate: (v2) => {
      value.set(v2);
      valueTransition.onUpdate && valueTransition.onUpdate(v2);
    },
    onComplete: () => {
      onComplete();
      valueTransition.onComplete && valueTransition.onComplete();
    },
    name,
    motionValue: value,
    element: isHandoff ? void 0 : element
  };
  if (!isTransitionDefined(valueTransition)) {
    Object.assign(options, getDefaultTransition(name, options));
  }
  options.duration && (options.duration = /* @__PURE__ */ secondsToMilliseconds(options.duration));
  options.repeatDelay && (options.repeatDelay = /* @__PURE__ */ secondsToMilliseconds(options.repeatDelay));
  if (options.from !== void 0) {
    options.keyframes[0] = options.from;
  }
  let shouldSkip = false;
  if (options.type === false || options.duration === 0 && !options.repeatDelay) {
    makeAnimationInstant(options);
    if (options.delay === 0) {
      shouldSkip = true;
    }
  }
  if (MotionGlobalConfig.instantAnimations || MotionGlobalConfig.skipAnimations) {
    shouldSkip = true;
    makeAnimationInstant(options);
    options.delay = 0;
  }
  options.allowFlatten = !valueTransition.type && !valueTransition.ease;
  if (shouldSkip && !isHandoff && value.get() !== void 0) {
    const finalKeyframe = getFinalKeyframe(options.keyframes, valueTransition);
    if (finalKeyframe !== void 0) {
      frame.update(() => {
        options.onUpdate(finalKeyframe);
        options.onComplete();
      });
      return;
    }
  }
  return valueTransition.isSync ? new JSAnimation(options) : new AsyncMotionValueAnimation(options);
};
function shouldBlockAnimation({ protectedKeys, needsAnimating }, key) {
  const shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;
  needsAnimating[key] = false;
  return shouldBlock;
}
function animateTarget(visualElement, targetAndTransition, { delay: delay2 = 0, transitionOverride, type } = {}) {
  let { transition = visualElement.getDefaultTransition(), transitionEnd, ...target } = targetAndTransition;
  if (transitionOverride)
    transition = transitionOverride;
  const animations2 = [];
  const animationTypeState = type && visualElement.animationState && visualElement.animationState.getState()[type];
  for (const key in target) {
    const value = visualElement.getValue(key, visualElement.latestValues[key] ?? null);
    const valueTarget = target[key];
    if (valueTarget === void 0 || animationTypeState && shouldBlockAnimation(animationTypeState, key)) {
      continue;
    }
    const valueTransition = {
      delay: delay2,
      ...getValueTransition(transition || {}, key)
    };
    const currentValue = value.get();
    if (currentValue !== void 0 && !value.isAnimating && !Array.isArray(valueTarget) && valueTarget === currentValue && !valueTransition.velocity) {
      continue;
    }
    let isHandoff = false;
    if (window.MotionHandoffAnimation) {
      const appearId = getOptimisedAppearId(visualElement);
      if (appearId) {
        const startTime = window.MotionHandoffAnimation(appearId, key, frame);
        if (startTime !== null) {
          valueTransition.startTime = startTime;
          isHandoff = true;
        }
      }
    }
    addValueToWillChange(visualElement, key);
    value.start(animateMotionValue(key, value, valueTarget, visualElement.shouldReduceMotion && positionalKeys.has(key) ? { type: false } : valueTransition, visualElement, isHandoff));
    const animation = value.animation;
    if (animation) {
      animations2.push(animation);
    }
  }
  if (transitionEnd) {
    Promise.all(animations2).then(() => {
      frame.update(() => {
        transitionEnd && setTarget(visualElement, transitionEnd);
      });
    });
  }
  return animations2;
}
function calcChildStagger(children, child, delayChildren, staggerChildren = 0, staggerDirection = 1) {
  const index2 = Array.from(children).sort((a, b2) => a.sortNodePosition(b2)).indexOf(child);
  const numChildren = children.size;
  const maxStaggerDuration = (numChildren - 1) * staggerChildren;
  const delayIsFunction = typeof delayChildren === "function";
  return delayIsFunction ? delayChildren(index2, numChildren) : staggerDirection === 1 ? index2 * staggerChildren : maxStaggerDuration - index2 * staggerChildren;
}
function animateVariant(visualElement, variant, options = {}) {
  const resolved = resolveVariant(visualElement, variant, options.type === "exit" ? visualElement.presenceContext?.custom : void 0);
  let { transition = visualElement.getDefaultTransition() || {} } = resolved || {};
  if (options.transitionOverride) {
    transition = options.transitionOverride;
  }
  const getAnimation = resolved ? () => Promise.all(animateTarget(visualElement, resolved, options)) : () => Promise.resolve();
  const getChildAnimations = visualElement.variantChildren && visualElement.variantChildren.size ? (forwardDelay = 0) => {
    const { delayChildren = 0, staggerChildren, staggerDirection } = transition;
    return animateChildren(visualElement, variant, forwardDelay, delayChildren, staggerChildren, staggerDirection, options);
  } : () => Promise.resolve();
  const { when } = transition;
  if (when) {
    const [first, last] = when === "beforeChildren" ? [getAnimation, getChildAnimations] : [getChildAnimations, getAnimation];
    return first().then(() => last());
  } else {
    return Promise.all([getAnimation(), getChildAnimations(options.delay)]);
  }
}
function animateChildren(visualElement, variant, delay2 = 0, delayChildren = 0, staggerChildren = 0, staggerDirection = 1, options) {
  const animations2 = [];
  for (const child of visualElement.variantChildren) {
    child.notify("AnimationStart", variant);
    animations2.push(animateVariant(child, variant, {
      ...options,
      delay: delay2 + (typeof delayChildren === "function" ? 0 : delayChildren) + calcChildStagger(visualElement.variantChildren, child, delayChildren, staggerChildren, staggerDirection)
    }).then(() => child.notify("AnimationComplete", variant)));
  }
  return Promise.all(animations2);
}
function animateVisualElement(visualElement, definition, options = {}) {
  visualElement.notify("AnimationStart", definition);
  let animation;
  if (Array.isArray(definition)) {
    const animations2 = definition.map((variant) => animateVariant(visualElement, variant, options));
    animation = Promise.all(animations2);
  } else if (typeof definition === "string") {
    animation = animateVariant(visualElement, definition, options);
  } else {
    const resolvedDefinition = typeof definition === "function" ? resolveVariant(visualElement, definition, options.custom) : definition;
    animation = Promise.all(animateTarget(visualElement, resolvedDefinition, options));
  }
  return animation.then(() => {
    visualElement.notify("AnimationComplete", definition);
  });
}
function shallowCompare(next, prev) {
  if (!Array.isArray(prev))
    return false;
  const prevLength = prev.length;
  if (prevLength !== next.length)
    return false;
  for (let i = 0; i < prevLength; i++) {
    if (prev[i] !== next[i])
      return false;
  }
  return true;
}
const numVariantProps = variantProps.length;
function getVariantContext(visualElement) {
  if (!visualElement)
    return void 0;
  if (!visualElement.isControllingVariants) {
    const context2 = visualElement.parent ? getVariantContext(visualElement.parent) || {} : {};
    if (visualElement.props.initial !== void 0) {
      context2.initial = visualElement.props.initial;
    }
    return context2;
  }
  const context = {};
  for (let i = 0; i < numVariantProps; i++) {
    const name = variantProps[i];
    const prop = visualElement.props[name];
    if (isVariantLabel(prop) || prop === false) {
      context[name] = prop;
    }
  }
  return context;
}
const reversePriorityOrder = [...variantPriorityOrder].reverse();
const numAnimationTypes = variantPriorityOrder.length;
function animateList(visualElement) {
  return (animations2) => Promise.all(animations2.map(({ animation, options }) => animateVisualElement(visualElement, animation, options)));
}
function createAnimationState(visualElement) {
  let animate = animateList(visualElement);
  let state = createState();
  let isInitialRender = true;
  const buildResolvedTypeValues = (type) => (acc, definition) => {
    const resolved = resolveVariant(visualElement, definition, type === "exit" ? visualElement.presenceContext?.custom : void 0);
    if (resolved) {
      const { transition, transitionEnd, ...target } = resolved;
      acc = { ...acc, ...target, ...transitionEnd };
    }
    return acc;
  };
  function setAnimateFunction(makeAnimator) {
    animate = makeAnimator(visualElement);
  }
  function animateChanges(changedActiveType) {
    const { props } = visualElement;
    const context = getVariantContext(visualElement.parent) || {};
    const animations2 = [];
    const removedKeys = /* @__PURE__ */ new Set();
    let encounteredKeys = {};
    let removedVariantIndex = Infinity;
    for (let i = 0; i < numAnimationTypes; i++) {
      const type = reversePriorityOrder[i];
      const typeState = state[type];
      const prop = props[type] !== void 0 ? props[type] : context[type];
      const propIsVariant = isVariantLabel(prop);
      const activeDelta = type === changedActiveType ? typeState.isActive : null;
      if (activeDelta === false)
        removedVariantIndex = i;
      let isInherited = prop === context[type] && prop !== props[type] && propIsVariant;
      if (isInherited && isInitialRender && visualElement.manuallyAnimateOnMount) {
        isInherited = false;
      }
      typeState.protectedKeys = { ...encounteredKeys };
      if (
        // If it isn't active and hasn't *just* been set as inactive
        !typeState.isActive && activeDelta === null || // If we didn't and don't have any defined prop for this animation type
        !prop && !typeState.prevProp || // Or if the prop doesn't define an animation
        isAnimationControls(prop) || typeof prop === "boolean"
      ) {
        continue;
      }
      const variantDidChange = checkVariantsDidChange(typeState.prevProp, prop);
      let shouldAnimateType = variantDidChange || // If we're making this variant active, we want to always make it active
      type === changedActiveType && typeState.isActive && !isInherited && propIsVariant || // If we removed a higher-priority variant (i is in reverse order)
      i > removedVariantIndex && propIsVariant;
      let handledRemovedValues = false;
      const definitionList = Array.isArray(prop) ? prop : [prop];
      let resolvedValues = definitionList.reduce(buildResolvedTypeValues(type), {});
      if (activeDelta === false)
        resolvedValues = {};
      const { prevResolvedValues = {} } = typeState;
      const allKeys = {
        ...prevResolvedValues,
        ...resolvedValues
      };
      const markToAnimate = (key) => {
        shouldAnimateType = true;
        if (removedKeys.has(key)) {
          handledRemovedValues = true;
          removedKeys.delete(key);
        }
        typeState.needsAnimating[key] = true;
        const motionValue2 = visualElement.getValue(key);
        if (motionValue2)
          motionValue2.liveStyle = false;
      };
      for (const key in allKeys) {
        const next = resolvedValues[key];
        const prev = prevResolvedValues[key];
        if (encounteredKeys.hasOwnProperty(key))
          continue;
        let valueHasChanged = false;
        if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {
          valueHasChanged = !shallowCompare(next, prev);
        } else {
          valueHasChanged = next !== prev;
        }
        if (valueHasChanged) {
          if (next !== void 0 && next !== null) {
            markToAnimate(key);
          } else {
            removedKeys.add(key);
          }
        } else if (next !== void 0 && removedKeys.has(key)) {
          markToAnimate(key);
        } else {
          typeState.protectedKeys[key] = true;
        }
      }
      typeState.prevProp = prop;
      typeState.prevResolvedValues = resolvedValues;
      if (typeState.isActive) {
        encounteredKeys = { ...encounteredKeys, ...resolvedValues };
      }
      if (isInitialRender && visualElement.blockInitialAnimation) {
        shouldAnimateType = false;
      }
      const willAnimateViaParent = isInherited && variantDidChange;
      const needsAnimating = !willAnimateViaParent || handledRemovedValues;
      if (shouldAnimateType && needsAnimating) {
        animations2.push(...definitionList.map((animation) => {
          const options = { type };
          if (typeof animation === "string" && isInitialRender && !willAnimateViaParent && visualElement.manuallyAnimateOnMount && visualElement.parent) {
            const { parent } = visualElement;
            const parentVariant = resolveVariant(parent, animation);
            if (parent.enteringChildren && parentVariant) {
              const { delayChildren } = parentVariant.transition || {};
              options.delay = calcChildStagger(parent.enteringChildren, visualElement, delayChildren);
            }
          }
          return {
            animation,
            options
          };
        }));
      }
    }
    if (removedKeys.size) {
      const fallbackAnimation = {};
      if (typeof props.initial !== "boolean") {
        const initialTransition = resolveVariant(visualElement, Array.isArray(props.initial) ? props.initial[0] : props.initial);
        if (initialTransition && initialTransition.transition) {
          fallbackAnimation.transition = initialTransition.transition;
        }
      }
      removedKeys.forEach((key) => {
        const fallbackTarget = visualElement.getBaseTarget(key);
        const motionValue2 = visualElement.getValue(key);
        if (motionValue2)
          motionValue2.liveStyle = true;
        fallbackAnimation[key] = fallbackTarget ?? null;
      });
      animations2.push({ animation: fallbackAnimation });
    }
    let shouldAnimate = Boolean(animations2.length);
    if (isInitialRender && (props.initial === false || props.initial === props.animate) && !visualElement.manuallyAnimateOnMount) {
      shouldAnimate = false;
    }
    isInitialRender = false;
    return shouldAnimate ? animate(animations2) : Promise.resolve();
  }
  function setActive(type, isActive) {
    if (state[type].isActive === isActive)
      return Promise.resolve();
    visualElement.variantChildren?.forEach((child) => child.animationState?.setActive(type, isActive));
    state[type].isActive = isActive;
    const animations2 = animateChanges(type);
    for (const key in state) {
      state[key].protectedKeys = {};
    }
    return animations2;
  }
  return {
    animateChanges,
    setActive,
    setAnimateFunction,
    getState: () => state,
    reset: () => {
      state = createState();
    }
  };
}
function checkVariantsDidChange(prev, next) {
  if (typeof next === "string") {
    return next !== prev;
  } else if (Array.isArray(next)) {
    return !shallowCompare(next, prev);
  }
  return false;
}
function createTypeState(isActive = false) {
  return {
    isActive,
    protectedKeys: {},
    needsAnimating: {},
    prevResolvedValues: {}
  };
}
function createState() {
  return {
    animate: createTypeState(true),
    whileInView: createTypeState(),
    whileHover: createTypeState(),
    whileTap: createTypeState(),
    whileDrag: createTypeState(),
    whileFocus: createTypeState(),
    exit: createTypeState()
  };
}
class Feature {
  constructor(node) {
    this.isMounted = false;
    this.node = node;
  }
  update() {
  }
}
class AnimationFeature extends Feature {
  /**
   * We dynamically generate the AnimationState manager as it contains a reference
   * to the underlying animation library. We only want to load that if we load this,
   * so people can optionally code split it out using the `m` component.
   */
  constructor(node) {
    super(node);
    node.animationState || (node.animationState = createAnimationState(node));
  }
  updateAnimationControlsSubscription() {
    const { animate } = this.node.getProps();
    if (isAnimationControls(animate)) {
      this.unmountControls = animate.subscribe(this.node);
    }
  }
  /**
   * Subscribe any provided AnimationControls to the component's VisualElement
   */
  mount() {
    this.updateAnimationControlsSubscription();
  }
  update() {
    const { animate } = this.node.getProps();
    const { animate: prevAnimate } = this.node.prevProps || {};
    if (animate !== prevAnimate) {
      this.updateAnimationControlsSubscription();
    }
  }
  unmount() {
    this.node.animationState.reset();
    this.unmountControls?.();
  }
}
let id$1 = 0;
class ExitAnimationFeature extends Feature {
  constructor() {
    super(...arguments);
    this.id = id$1++;
  }
  update() {
    if (!this.node.presenceContext)
      return;
    const { isPresent, onExitComplete } = this.node.presenceContext;
    const { isPresent: prevIsPresent } = this.node.prevPresenceContext || {};
    if (!this.node.animationState || isPresent === prevIsPresent) {
      return;
    }
    const exitAnimation = this.node.animationState.setActive("exit", !isPresent);
    if (onExitComplete && !isPresent) {
      exitAnimation.then(() => {
        onExitComplete(this.id);
      });
    }
  }
  mount() {
    const { register: register2, onExitComplete } = this.node.presenceContext || {};
    if (onExitComplete) {
      onExitComplete(this.id);
    }
    if (register2) {
      this.unmount = register2(this.id);
    }
  }
  unmount() {
  }
}
const animations = {
  animation: {
    Feature: AnimationFeature
  },
  exit: {
    Feature: ExitAnimationFeature
  }
};
function addDomEvent(target, eventName, handler, options = { passive: true }) {
  target.addEventListener(eventName, handler, options);
  return () => target.removeEventListener(eventName, handler);
}
function extractEventInfo(event) {
  return {
    point: {
      x: event.pageX,
      y: event.pageY
    }
  };
}
const addPointerInfo = (handler) => {
  return (event) => isPrimaryPointer(event) && handler(event, extractEventInfo(event));
};
function addPointerEvent(target, eventName, handler, options) {
  return addDomEvent(target, eventName, addPointerInfo(handler), options);
}
const SCALE_PRECISION = 1e-4;
const SCALE_MIN = 1 - SCALE_PRECISION;
const SCALE_MAX = 1 + SCALE_PRECISION;
const TRANSLATE_PRECISION = 0.01;
const TRANSLATE_MIN = 0 - TRANSLATE_PRECISION;
const TRANSLATE_MAX = 0 + TRANSLATE_PRECISION;
function calcLength(axis) {
  return axis.max - axis.min;
}
function isNear(value, target, maxDistance) {
  return Math.abs(value - target) <= maxDistance;
}
function calcAxisDelta(delta, source, target, origin = 0.5) {
  delta.origin = origin;
  delta.originPoint = mixNumber$1(source.min, source.max, delta.origin);
  delta.scale = calcLength(target) / calcLength(source);
  delta.translate = mixNumber$1(target.min, target.max, delta.origin) - delta.originPoint;
  if (delta.scale >= SCALE_MIN && delta.scale <= SCALE_MAX || isNaN(delta.scale)) {
    delta.scale = 1;
  }
  if (delta.translate >= TRANSLATE_MIN && delta.translate <= TRANSLATE_MAX || isNaN(delta.translate)) {
    delta.translate = 0;
  }
}
function calcBoxDelta(delta, source, target, origin) {
  calcAxisDelta(delta.x, source.x, target.x, origin ? origin.originX : void 0);
  calcAxisDelta(delta.y, source.y, target.y, origin ? origin.originY : void 0);
}
function calcRelativeAxis(target, relative, parent) {
  target.min = parent.min + relative.min;
  target.max = target.min + calcLength(relative);
}
function calcRelativeBox(target, relative, parent) {
  calcRelativeAxis(target.x, relative.x, parent.x);
  calcRelativeAxis(target.y, relative.y, parent.y);
}
function calcRelativeAxisPosition(target, layout2, parent) {
  target.min = layout2.min - parent.min;
  target.max = target.min + calcLength(layout2);
}
function calcRelativePosition(target, layout2, parent) {
  calcRelativeAxisPosition(target.x, layout2.x, parent.x);
  calcRelativeAxisPosition(target.y, layout2.y, parent.y);
}
function eachAxis(callback) {
  return [callback("x"), callback("y")];
}
const getContextWindow = ({ current }) => {
  return current ? current.ownerDocument.defaultView : null;
};
const distance = (a, b2) => Math.abs(a - b2);
function distance2D(a, b2) {
  const xDelta = distance(a.x, b2.x);
  const yDelta = distance(a.y, b2.y);
  return Math.sqrt(xDelta ** 2 + yDelta ** 2);
}
class PanSession {
  constructor(event, handlers, { transformPagePoint, contextWindow = window, dragSnapToOrigin = false, distanceThreshold = 3 } = {}) {
    this.startEvent = null;
    this.lastMoveEvent = null;
    this.lastMoveEventInfo = null;
    this.handlers = {};
    this.contextWindow = window;
    this.updatePoint = () => {
      if (!(this.lastMoveEvent && this.lastMoveEventInfo))
        return;
      const info2 = getPanInfo(this.lastMoveEventInfo, this.history);
      const isPanStarted = this.startEvent !== null;
      const isDistancePastThreshold = distance2D(info2.offset, { x: 0, y: 0 }) >= this.distanceThreshold;
      if (!isPanStarted && !isDistancePastThreshold)
        return;
      const { point: point3 } = info2;
      const { timestamp: timestamp2 } = frameData;
      this.history.push({ ...point3, timestamp: timestamp2 });
      const { onStart, onMove } = this.handlers;
      if (!isPanStarted) {
        onStart && onStart(this.lastMoveEvent, info2);
        this.startEvent = this.lastMoveEvent;
      }
      onMove && onMove(this.lastMoveEvent, info2);
    };
    this.handlePointerMove = (event2, info2) => {
      this.lastMoveEvent = event2;
      this.lastMoveEventInfo = transformPoint(info2, this.transformPagePoint);
      frame.update(this.updatePoint, true);
    };
    this.handlePointerUp = (event2, info2) => {
      this.end();
      const { onEnd, onSessionEnd, resumeAnimation } = this.handlers;
      if (this.dragSnapToOrigin)
        resumeAnimation && resumeAnimation();
      if (!(this.lastMoveEvent && this.lastMoveEventInfo))
        return;
      const panInfo = getPanInfo(event2.type === "pointercancel" ? this.lastMoveEventInfo : transformPoint(info2, this.transformPagePoint), this.history);
      if (this.startEvent && onEnd) {
        onEnd(event2, panInfo);
      }
      onSessionEnd && onSessionEnd(event2, panInfo);
    };
    if (!isPrimaryPointer(event))
      return;
    this.dragSnapToOrigin = dragSnapToOrigin;
    this.handlers = handlers;
    this.transformPagePoint = transformPagePoint;
    this.distanceThreshold = distanceThreshold;
    this.contextWindow = contextWindow || window;
    const info = extractEventInfo(event);
    const initialInfo = transformPoint(info, this.transformPagePoint);
    const { point: point2 } = initialInfo;
    const { timestamp } = frameData;
    this.history = [{ ...point2, timestamp }];
    const { onSessionStart } = handlers;
    onSessionStart && onSessionStart(event, getPanInfo(initialInfo, this.history));
    this.removeListeners = pipe(addPointerEvent(this.contextWindow, "pointermove", this.handlePointerMove), addPointerEvent(this.contextWindow, "pointerup", this.handlePointerUp), addPointerEvent(this.contextWindow, "pointercancel", this.handlePointerUp));
  }
  updateHandlers(handlers) {
    this.handlers = handlers;
  }
  end() {
    this.removeListeners && this.removeListeners();
    cancelFrame(this.updatePoint);
  }
}
function transformPoint(info, transformPagePoint) {
  return transformPagePoint ? { point: transformPagePoint(info.point) } : info;
}
function subtractPoint(a, b2) {
  return { x: a.x - b2.x, y: a.y - b2.y };
}
function getPanInfo({ point: point2 }, history) {
  return {
    point: point2,
    delta: subtractPoint(point2, lastDevicePoint(history)),
    offset: subtractPoint(point2, startDevicePoint(history)),
    velocity: getVelocity(history, 0.1)
  };
}
function startDevicePoint(history) {
  return history[0];
}
function lastDevicePoint(history) {
  return history[history.length - 1];
}
function getVelocity(history, timeDelta) {
  if (history.length < 2) {
    return { x: 0, y: 0 };
  }
  let i = history.length - 1;
  let timestampedPoint = null;
  const lastPoint = lastDevicePoint(history);
  while (i >= 0) {
    timestampedPoint = history[i];
    if (lastPoint.timestamp - timestampedPoint.timestamp > /* @__PURE__ */ secondsToMilliseconds(timeDelta)) {
      break;
    }
    i--;
  }
  if (!timestampedPoint) {
    return { x: 0, y: 0 };
  }
  const time2 = /* @__PURE__ */ millisecondsToSeconds(lastPoint.timestamp - timestampedPoint.timestamp);
  if (time2 === 0) {
    return { x: 0, y: 0 };
  }
  const currentVelocity = {
    x: (lastPoint.x - timestampedPoint.x) / time2,
    y: (lastPoint.y - timestampedPoint.y) / time2
  };
  if (currentVelocity.x === Infinity) {
    currentVelocity.x = 0;
  }
  if (currentVelocity.y === Infinity) {
    currentVelocity.y = 0;
  }
  return currentVelocity;
}
function applyConstraints(point2, { min, max }, elastic) {
  if (min !== void 0 && point2 < min) {
    point2 = elastic ? mixNumber$1(min, point2, elastic.min) : Math.max(point2, min);
  } else if (max !== void 0 && point2 > max) {
    point2 = elastic ? mixNumber$1(max, point2, elastic.max) : Math.min(point2, max);
  }
  return point2;
}
function calcRelativeAxisConstraints(axis, min, max) {
  return {
    min: min !== void 0 ? axis.min + min : void 0,
    max: max !== void 0 ? axis.max + max - (axis.max - axis.min) : void 0
  };
}
function calcRelativeConstraints(layoutBox, { top, left, bottom, right }) {
  return {
    x: calcRelativeAxisConstraints(layoutBox.x, left, right),
    y: calcRelativeAxisConstraints(layoutBox.y, top, bottom)
  };
}
function calcViewportAxisConstraints(layoutAxis, constraintsAxis) {
  let min = constraintsAxis.min - layoutAxis.min;
  let max = constraintsAxis.max - layoutAxis.max;
  if (constraintsAxis.max - constraintsAxis.min < layoutAxis.max - layoutAxis.min) {
    [min, max] = [max, min];
  }
  return { min, max };
}
function calcViewportConstraints(layoutBox, constraintsBox) {
  return {
    x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),
    y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y)
  };
}
function calcOrigin(source, target) {
  let origin = 0.5;
  const sourceLength = calcLength(source);
  const targetLength = calcLength(target);
  if (targetLength > sourceLength) {
    origin = /* @__PURE__ */ progress(target.min, target.max - sourceLength, source.min);
  } else if (sourceLength > targetLength) {
    origin = /* @__PURE__ */ progress(source.min, source.max - targetLength, target.min);
  }
  return clamp(0, 1, origin);
}
function rebaseAxisConstraints(layout2, constraints) {
  const relativeConstraints = {};
  if (constraints.min !== void 0) {
    relativeConstraints.min = constraints.min - layout2.min;
  }
  if (constraints.max !== void 0) {
    relativeConstraints.max = constraints.max - layout2.min;
  }
  return relativeConstraints;
}
const defaultElastic = 0.35;
function resolveDragElastic(dragElastic = defaultElastic) {
  if (dragElastic === false) {
    dragElastic = 0;
  } else if (dragElastic === true) {
    dragElastic = defaultElastic;
  }
  return {
    x: resolveAxisElastic(dragElastic, "left", "right"),
    y: resolveAxisElastic(dragElastic, "top", "bottom")
  };
}
function resolveAxisElastic(dragElastic, minLabel, maxLabel) {
  return {
    min: resolvePointElastic(dragElastic, minLabel),
    max: resolvePointElastic(dragElastic, maxLabel)
  };
}
function resolvePointElastic(dragElastic, label) {
  return typeof dragElastic === "number" ? dragElastic : dragElastic[label] || 0;
}
const elementDragControls = /* @__PURE__ */ new WeakMap();
class VisualElementDragControls {
  constructor(visualElement) {
    this.openDragLock = null;
    this.isDragging = false;
    this.currentDirection = null;
    this.originPoint = { x: 0, y: 0 };
    this.constraints = false;
    this.hasMutatedConstraints = false;
    this.elastic = createBox();
    this.latestPointerEvent = null;
    this.latestPanInfo = null;
    this.visualElement = visualElement;
  }
  start(originEvent, { snapToCursor = false, distanceThreshold } = {}) {
    const { presenceContext } = this.visualElement;
    if (presenceContext && presenceContext.isPresent === false)
      return;
    const onSessionStart = (event) => {
      const { dragSnapToOrigin: dragSnapToOrigin2 } = this.getProps();
      dragSnapToOrigin2 ? this.pauseAnimation() : this.stopAnimation();
      if (snapToCursor) {
        this.snapToCursor(extractEventInfo(event).point);
      }
    };
    const onStart = (event, info) => {
      const { drag: drag2, dragPropagation, onDragStart } = this.getProps();
      if (drag2 && !dragPropagation) {
        if (this.openDragLock)
          this.openDragLock();
        this.openDragLock = setDragLock(drag2);
        if (!this.openDragLock)
          return;
      }
      this.latestPointerEvent = event;
      this.latestPanInfo = info;
      this.isDragging = true;
      this.currentDirection = null;
      this.resolveConstraints();
      if (this.visualElement.projection) {
        this.visualElement.projection.isAnimationBlocked = true;
        this.visualElement.projection.target = void 0;
      }
      eachAxis((axis) => {
        let current = this.getAxisMotionValue(axis).get() || 0;
        if (percent.test(current)) {
          const { projection } = this.visualElement;
          if (projection && projection.layout) {
            const measuredAxis = projection.layout.layoutBox[axis];
            if (measuredAxis) {
              const length = calcLength(measuredAxis);
              current = length * (parseFloat(current) / 100);
            }
          }
        }
        this.originPoint[axis] = current;
      });
      if (onDragStart) {
        frame.postRender(() => onDragStart(event, info));
      }
      addValueToWillChange(this.visualElement, "transform");
      const { animationState } = this.visualElement;
      animationState && animationState.setActive("whileDrag", true);
    };
    const onMove = (event, info) => {
      this.latestPointerEvent = event;
      this.latestPanInfo = info;
      const { dragPropagation, dragDirectionLock, onDirectionLock, onDrag } = this.getProps();
      if (!dragPropagation && !this.openDragLock)
        return;
      const { offset } = info;
      if (dragDirectionLock && this.currentDirection === null) {
        this.currentDirection = getCurrentDirection(offset);
        if (this.currentDirection !== null) {
          onDirectionLock && onDirectionLock(this.currentDirection);
        }
        return;
      }
      this.updateAxis("x", info.point, offset);
      this.updateAxis("y", info.point, offset);
      this.visualElement.render();
      onDrag && onDrag(event, info);
    };
    const onSessionEnd = (event, info) => {
      this.latestPointerEvent = event;
      this.latestPanInfo = info;
      this.stop(event, info);
      this.latestPointerEvent = null;
      this.latestPanInfo = null;
    };
    const resumeAnimation = () => eachAxis((axis) => this.getAnimationState(axis) === "paused" && this.getAxisMotionValue(axis).animation?.play());
    const { dragSnapToOrigin } = this.getProps();
    this.panSession = new PanSession(originEvent, {
      onSessionStart,
      onStart,
      onMove,
      onSessionEnd,
      resumeAnimation
    }, {
      transformPagePoint: this.visualElement.getTransformPagePoint(),
      dragSnapToOrigin,
      distanceThreshold,
      contextWindow: getContextWindow(this.visualElement)
    });
  }
  /**
   * @internal
   */
  stop(event, panInfo) {
    const finalEvent = event || this.latestPointerEvent;
    const finalPanInfo = panInfo || this.latestPanInfo;
    const isDragging2 = this.isDragging;
    this.cancel();
    if (!isDragging2 || !finalPanInfo || !finalEvent)
      return;
    const { velocity } = finalPanInfo;
    this.startAnimation(velocity);
    const { onDragEnd } = this.getProps();
    if (onDragEnd) {
      frame.postRender(() => onDragEnd(finalEvent, finalPanInfo));
    }
  }
  /**
   * @internal
   */
  cancel() {
    this.isDragging = false;
    const { projection, animationState } = this.visualElement;
    if (projection) {
      projection.isAnimationBlocked = false;
    }
    this.panSession && this.panSession.end();
    this.panSession = void 0;
    const { dragPropagation } = this.getProps();
    if (!dragPropagation && this.openDragLock) {
      this.openDragLock();
      this.openDragLock = null;
    }
    animationState && animationState.setActive("whileDrag", false);
  }
  updateAxis(axis, _point, offset) {
    const { drag: drag2 } = this.getProps();
    if (!offset || !shouldDrag(axis, drag2, this.currentDirection))
      return;
    const axisValue = this.getAxisMotionValue(axis);
    let next = this.originPoint[axis] + offset[axis];
    if (this.constraints && this.constraints[axis]) {
      next = applyConstraints(next, this.constraints[axis], this.elastic[axis]);
    }
    axisValue.set(next);
  }
  resolveConstraints() {
    const { dragConstraints, dragElastic } = this.getProps();
    const layout2 = this.visualElement.projection && !this.visualElement.projection.layout ? this.visualElement.projection.measure(false) : this.visualElement.projection?.layout;
    const prevConstraints = this.constraints;
    if (dragConstraints && isRefObject(dragConstraints)) {
      if (!this.constraints) {
        this.constraints = this.resolveRefConstraints();
      }
    } else {
      if (dragConstraints && layout2) {
        this.constraints = calcRelativeConstraints(layout2.layoutBox, dragConstraints);
      } else {
        this.constraints = false;
      }
    }
    this.elastic = resolveDragElastic(dragElastic);
    if (prevConstraints !== this.constraints && layout2 && this.constraints && !this.hasMutatedConstraints) {
      eachAxis((axis) => {
        if (this.constraints !== false && this.getAxisMotionValue(axis)) {
          this.constraints[axis] = rebaseAxisConstraints(layout2.layoutBox[axis], this.constraints[axis]);
        }
      });
    }
  }
  resolveRefConstraints() {
    const { dragConstraints: constraints, onMeasureDragConstraints } = this.getProps();
    if (!constraints || !isRefObject(constraints))
      return false;
    const constraintsElement = constraints.current;
    const { projection } = this.visualElement;
    if (!projection || !projection.layout)
      return false;
    const constraintsBox = measurePageBox(constraintsElement, projection.root, this.visualElement.getTransformPagePoint());
    let measuredConstraints = calcViewportConstraints(projection.layout.layoutBox, constraintsBox);
    if (onMeasureDragConstraints) {
      const userConstraints = onMeasureDragConstraints(convertBoxToBoundingBox(measuredConstraints));
      this.hasMutatedConstraints = !!userConstraints;
      if (userConstraints) {
        measuredConstraints = convertBoundingBoxToBox(userConstraints);
      }
    }
    return measuredConstraints;
  }
  startAnimation(velocity) {
    const { drag: drag2, dragMomentum, dragElastic, dragTransition, dragSnapToOrigin, onDragTransitionEnd } = this.getProps();
    const constraints = this.constraints || {};
    const momentumAnimations = eachAxis((axis) => {
      if (!shouldDrag(axis, drag2, this.currentDirection)) {
        return;
      }
      let transition = constraints && constraints[axis] || {};
      if (dragSnapToOrigin)
        transition = { min: 0, max: 0 };
      const bounceStiffness = dragElastic ? 200 : 1e6;
      const bounceDamping = dragElastic ? 40 : 1e7;
      const inertia2 = {
        type: "inertia",
        velocity: dragMomentum ? velocity[axis] : 0,
        bounceStiffness,
        bounceDamping,
        timeConstant: 750,
        restDelta: 1,
        restSpeed: 10,
        ...dragTransition,
        ...transition
      };
      return this.startAxisValueAnimation(axis, inertia2);
    });
    return Promise.all(momentumAnimations).then(onDragTransitionEnd);
  }
  startAxisValueAnimation(axis, transition) {
    const axisValue = this.getAxisMotionValue(axis);
    addValueToWillChange(this.visualElement, axis);
    return axisValue.start(animateMotionValue(axis, axisValue, 0, transition, this.visualElement, false));
  }
  stopAnimation() {
    eachAxis((axis) => this.getAxisMotionValue(axis).stop());
  }
  pauseAnimation() {
    eachAxis((axis) => this.getAxisMotionValue(axis).animation?.pause());
  }
  getAnimationState(axis) {
    return this.getAxisMotionValue(axis).animation?.state;
  }
  /**
   * Drag works differently depending on which props are provided.
   *
   * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.
   * - Otherwise, we apply the delta to the x/y motion values.
   */
  getAxisMotionValue(axis) {
    const dragKey = `_drag${axis.toUpperCase()}`;
    const props = this.visualElement.getProps();
    const externalMotionValue = props[dragKey];
    return externalMotionValue ? externalMotionValue : this.visualElement.getValue(axis, (props.initial ? props.initial[axis] : void 0) || 0);
  }
  snapToCursor(point2) {
    eachAxis((axis) => {
      const { drag: drag2 } = this.getProps();
      if (!shouldDrag(axis, drag2, this.currentDirection))
        return;
      const { projection } = this.visualElement;
      const axisValue = this.getAxisMotionValue(axis);
      if (projection && projection.layout) {
        const { min, max } = projection.layout.layoutBox[axis];
        axisValue.set(point2[axis] - mixNumber$1(min, max, 0.5));
      }
    });
  }
  /**
   * When the viewport resizes we want to check if the measured constraints
   * have changed and, if so, reposition the element within those new constraints
   * relative to where it was before the resize.
   */
  scalePositionWithinConstraints() {
    if (!this.visualElement.current)
      return;
    const { drag: drag2, dragConstraints } = this.getProps();
    const { projection } = this.visualElement;
    if (!isRefObject(dragConstraints) || !projection || !this.constraints)
      return;
    this.stopAnimation();
    const boxProgress = { x: 0, y: 0 };
    eachAxis((axis) => {
      const axisValue = this.getAxisMotionValue(axis);
      if (axisValue && this.constraints !== false) {
        const latest = axisValue.get();
        boxProgress[axis] = calcOrigin({ min: latest, max: latest }, this.constraints[axis]);
      }
    });
    const { transformTemplate } = this.visualElement.getProps();
    this.visualElement.current.style.transform = transformTemplate ? transformTemplate({}, "") : "none";
    projection.root && projection.root.updateScroll();
    projection.updateLayout();
    this.resolveConstraints();
    eachAxis((axis) => {
      if (!shouldDrag(axis, drag2, null))
        return;
      const axisValue = this.getAxisMotionValue(axis);
      const { min, max } = this.constraints[axis];
      axisValue.set(mixNumber$1(min, max, boxProgress[axis]));
    });
  }
  addListeners() {
    if (!this.visualElement.current)
      return;
    elementDragControls.set(this.visualElement, this);
    const element = this.visualElement.current;
    const stopPointerListener = addPointerEvent(element, "pointerdown", (event) => {
      const { drag: drag2, dragListener = true } = this.getProps();
      drag2 && dragListener && this.start(event);
    });
    const measureDragConstraints = () => {
      const { dragConstraints } = this.getProps();
      if (isRefObject(dragConstraints) && dragConstraints.current) {
        this.constraints = this.resolveRefConstraints();
      }
    };
    const { projection } = this.visualElement;
    const stopMeasureLayoutListener = projection.addEventListener("measure", measureDragConstraints);
    if (projection && !projection.layout) {
      projection.root && projection.root.updateScroll();
      projection.updateLayout();
    }
    frame.read(measureDragConstraints);
    const stopResizeListener = addDomEvent(window, "resize", () => this.scalePositionWithinConstraints());
    const stopLayoutUpdateListener = projection.addEventListener("didUpdate", (({ delta, hasLayoutChanged }) => {
      if (this.isDragging && hasLayoutChanged) {
        eachAxis((axis) => {
          const motionValue2 = this.getAxisMotionValue(axis);
          if (!motionValue2)
            return;
          this.originPoint[axis] += delta[axis].translate;
          motionValue2.set(motionValue2.get() + delta[axis].translate);
        });
        this.visualElement.render();
      }
    }));
    return () => {
      stopResizeListener();
      stopPointerListener();
      stopMeasureLayoutListener();
      stopLayoutUpdateListener && stopLayoutUpdateListener();
    };
  }
  getProps() {
    const props = this.visualElement.getProps();
    const { drag: drag2 = false, dragDirectionLock = false, dragPropagation = false, dragConstraints = false, dragElastic = defaultElastic, dragMomentum = true } = props;
    return {
      ...props,
      drag: drag2,
      dragDirectionLock,
      dragPropagation,
      dragConstraints,
      dragElastic,
      dragMomentum
    };
  }
}
function shouldDrag(direction, drag2, currentDirection) {
  return (drag2 === true || drag2 === direction) && (currentDirection === null || currentDirection === direction);
}
function getCurrentDirection(offset, lockThreshold = 10) {
  let direction = null;
  if (Math.abs(offset.y) > lockThreshold) {
    direction = "y";
  } else if (Math.abs(offset.x) > lockThreshold) {
    direction = "x";
  }
  return direction;
}
class DragGesture extends Feature {
  constructor(node) {
    super(node);
    this.removeGroupControls = noop;
    this.removeListeners = noop;
    this.controls = new VisualElementDragControls(node);
  }
  mount() {
    const { dragControls } = this.node.getProps();
    if (dragControls) {
      this.removeGroupControls = dragControls.subscribe(this.controls);
    }
    this.removeListeners = this.controls.addListeners() || noop;
  }
  unmount() {
    this.removeGroupControls();
    this.removeListeners();
  }
}
const asyncHandler = (handler) => (event, info) => {
  if (handler) {
    frame.postRender(() => handler(event, info));
  }
};
class PanGesture extends Feature {
  constructor() {
    super(...arguments);
    this.removePointerDownListener = noop;
  }
  onPointerDown(pointerDownEvent) {
    this.session = new PanSession(pointerDownEvent, this.createPanHandlers(), {
      transformPagePoint: this.node.getTransformPagePoint(),
      contextWindow: getContextWindow(this.node)
    });
  }
  createPanHandlers() {
    const { onPanSessionStart, onPanStart, onPan, onPanEnd } = this.node.getProps();
    return {
      onSessionStart: asyncHandler(onPanSessionStart),
      onStart: asyncHandler(onPanStart),
      onMove: onPan,
      onEnd: (event, info) => {
        delete this.session;
        if (onPanEnd) {
          frame.postRender(() => onPanEnd(event, info));
        }
      }
    };
  }
  mount() {
    this.removePointerDownListener = addPointerEvent(this.node.current, "pointerdown", (event) => this.onPointerDown(event));
  }
  update() {
    this.session && this.session.updateHandlers(this.createPanHandlers());
  }
  unmount() {
    this.removePointerDownListener();
    this.session && this.session.end();
  }
}
const globalProjectionState = {
  /**
   * Global flag as to whether the tree has animated since the last time
   * we resized the window
   */
  hasAnimatedSinceResize: true,
  /**
   * We set this to true once, on the first update. Any nodes added to the tree beyond that
   * update will be given a `data-projection-id` attribute.
   */
  hasEverUpdated: false
};
function pixelsToPercent(pixels, axis) {
  if (axis.max === axis.min)
    return 0;
  return pixels / (axis.max - axis.min) * 100;
}
const correctBorderRadius = {
  correct: (latest, node) => {
    if (!node.target)
      return latest;
    if (typeof latest === "string") {
      if (px.test(latest)) {
        latest = parseFloat(latest);
      } else {
        return latest;
      }
    }
    const x2 = pixelsToPercent(latest, node.target.x);
    const y2 = pixelsToPercent(latest, node.target.y);
    return `${x2}% ${y2}%`;
  }
};
const correctBoxShadow = {
  correct: (latest, { treeScale, projectionDelta }) => {
    const original = latest;
    const shadow = complex.parse(latest);
    if (shadow.length > 5)
      return original;
    const template = complex.createTransformer(latest);
    const offset = typeof shadow[0] !== "number" ? 1 : 0;
    const xScale = projectionDelta.x.scale * treeScale.x;
    const yScale = projectionDelta.y.scale * treeScale.y;
    shadow[0 + offset] /= xScale;
    shadow[1 + offset] /= yScale;
    const averageScale = mixNumber$1(xScale, yScale, 0.5);
    if (typeof shadow[2 + offset] === "number")
      shadow[2 + offset] /= averageScale;
    if (typeof shadow[3 + offset] === "number")
      shadow[3 + offset] /= averageScale;
    return template(shadow);
  }
};
let hasTakenAnySnapshot = false;
class MeasureLayoutWithContext extends reactExports.Component {
  /**
   * This only mounts projection nodes for components that
   * need measuring, we might want to do it for all components
   * in order to incorporate transforms
   */
  componentDidMount() {
    const { visualElement, layoutGroup, switchLayoutGroup, layoutId } = this.props;
    const { projection } = visualElement;
    addScaleCorrector(defaultScaleCorrectors);
    if (projection) {
      if (layoutGroup.group)
        layoutGroup.group.add(projection);
      if (switchLayoutGroup && switchLayoutGroup.register && layoutId) {
        switchLayoutGroup.register(projection);
      }
      if (hasTakenAnySnapshot) {
        projection.root.didUpdate();
      }
      projection.addEventListener("animationComplete", () => {
        this.safeToRemove();
      });
      projection.setOptions({
        ...projection.options,
        onExitComplete: () => this.safeToRemove()
      });
    }
    globalProjectionState.hasEverUpdated = true;
  }
  getSnapshotBeforeUpdate(prevProps) {
    const { layoutDependency, visualElement, drag: drag2, isPresent } = this.props;
    const { projection } = visualElement;
    if (!projection)
      return null;
    projection.isPresent = isPresent;
    hasTakenAnySnapshot = true;
    if (drag2 || prevProps.layoutDependency !== layoutDependency || layoutDependency === void 0 || prevProps.isPresent !== isPresent) {
      projection.willUpdate();
    } else {
      this.safeToRemove();
    }
    if (prevProps.isPresent !== isPresent) {
      if (isPresent) {
        projection.promote();
      } else if (!projection.relegate()) {
        frame.postRender(() => {
          const stack = projection.getStack();
          if (!stack || !stack.members.length) {
            this.safeToRemove();
          }
        });
      }
    }
    return null;
  }
  componentDidUpdate() {
    const { projection } = this.props.visualElement;
    if (projection) {
      projection.root.didUpdate();
      microtask.postRender(() => {
        if (!projection.currentAnimation && projection.isLead()) {
          this.safeToRemove();
        }
      });
    }
  }
  componentWillUnmount() {
    const { visualElement, layoutGroup, switchLayoutGroup: promoteContext } = this.props;
    const { projection } = visualElement;
    hasTakenAnySnapshot = true;
    if (projection) {
      projection.scheduleCheckAfterUnmount();
      if (layoutGroup && layoutGroup.group)
        layoutGroup.group.remove(projection);
      if (promoteContext && promoteContext.deregister)
        promoteContext.deregister(projection);
    }
  }
  safeToRemove() {
    const { safeToRemove } = this.props;
    safeToRemove && safeToRemove();
  }
  render() {
    return null;
  }
}
function MeasureLayout(props) {
  const [isPresent, safeToRemove] = usePresence();
  const layoutGroup = reactExports.useContext(LayoutGroupContext);
  return jsxRuntimeExports.jsx(MeasureLayoutWithContext, { ...props, layoutGroup, switchLayoutGroup: reactExports.useContext(SwitchLayoutGroupContext), isPresent, safeToRemove });
}
const defaultScaleCorrectors = {
  borderRadius: {
    ...correctBorderRadius,
    applyTo: [
      "borderTopLeftRadius",
      "borderTopRightRadius",
      "borderBottomLeftRadius",
      "borderBottomRightRadius"
    ]
  },
  borderTopLeftRadius: correctBorderRadius,
  borderTopRightRadius: correctBorderRadius,
  borderBottomLeftRadius: correctBorderRadius,
  borderBottomRightRadius: correctBorderRadius,
  boxShadow: correctBoxShadow
};
function animateSingleValue(value, keyframes2, options) {
  const motionValue$1 = isMotionValue(value) ? value : motionValue(value);
  motionValue$1.start(animateMotionValue("", motionValue$1, keyframes2, options));
  return motionValue$1.animation;
}
const compareByDepth = (a, b2) => a.depth - b2.depth;
class FlatTree {
  constructor() {
    this.children = [];
    this.isDirty = false;
  }
  add(child) {
    addUniqueItem(this.children, child);
    this.isDirty = true;
  }
  remove(child) {
    removeItem(this.children, child);
    this.isDirty = true;
  }
  forEach(callback) {
    this.isDirty && this.children.sort(compareByDepth);
    this.isDirty = false;
    this.children.forEach(callback);
  }
}
function delay(callback, timeout) {
  const start = time.now();
  const checkElapsed = ({ timestamp }) => {
    const elapsed = timestamp - start;
    if (elapsed >= timeout) {
      cancelFrame(checkElapsed);
      callback(elapsed - timeout);
    }
  };
  frame.setup(checkElapsed, true);
  return () => cancelFrame(checkElapsed);
}
const borders = ["TopLeft", "TopRight", "BottomLeft", "BottomRight"];
const numBorders = borders.length;
const asNumber = (value) => typeof value === "string" ? parseFloat(value) : value;
const isPx = (value) => typeof value === "number" || px.test(value);
function mixValues(target, follow, lead, progress2, shouldCrossfadeOpacity, isOnlyMember) {
  if (shouldCrossfadeOpacity) {
    target.opacity = mixNumber$1(0, lead.opacity ?? 1, easeCrossfadeIn(progress2));
    target.opacityExit = mixNumber$1(follow.opacity ?? 1, 0, easeCrossfadeOut(progress2));
  } else if (isOnlyMember) {
    target.opacity = mixNumber$1(follow.opacity ?? 1, lead.opacity ?? 1, progress2);
  }
  for (let i = 0; i < numBorders; i++) {
    const borderLabel = `border${borders[i]}Radius`;
    let followRadius = getRadius(follow, borderLabel);
    let leadRadius = getRadius(lead, borderLabel);
    if (followRadius === void 0 && leadRadius === void 0)
      continue;
    followRadius || (followRadius = 0);
    leadRadius || (leadRadius = 0);
    const canMix = followRadius === 0 || leadRadius === 0 || isPx(followRadius) === isPx(leadRadius);
    if (canMix) {
      target[borderLabel] = Math.max(mixNumber$1(asNumber(followRadius), asNumber(leadRadius), progress2), 0);
      if (percent.test(leadRadius) || percent.test(followRadius)) {
        target[borderLabel] += "%";
      }
    } else {
      target[borderLabel] = leadRadius;
    }
  }
  if (follow.rotate || lead.rotate) {
    target.rotate = mixNumber$1(follow.rotate || 0, lead.rotate || 0, progress2);
  }
}
function getRadius(values, radiusName) {
  return values[radiusName] !== void 0 ? values[radiusName] : values.borderRadius;
}
const easeCrossfadeIn = /* @__PURE__ */ compress(0, 0.5, circOut);
const easeCrossfadeOut = /* @__PURE__ */ compress(0.5, 0.95, noop);
function compress(min, max, easing) {
  return (p) => {
    if (p < min)
      return 0;
    if (p > max)
      return 1;
    return easing(/* @__PURE__ */ progress(min, max, p));
  };
}
function copyAxisInto(axis, originAxis) {
  axis.min = originAxis.min;
  axis.max = originAxis.max;
}
function copyBoxInto(box, originBox) {
  copyAxisInto(box.x, originBox.x);
  copyAxisInto(box.y, originBox.y);
}
function copyAxisDeltaInto(delta, originDelta) {
  delta.translate = originDelta.translate;
  delta.scale = originDelta.scale;
  delta.originPoint = originDelta.originPoint;
  delta.origin = originDelta.origin;
}
function removePointDelta(point2, translate, scale2, originPoint, boxScale) {
  point2 -= translate;
  point2 = scalePoint(point2, 1 / scale2, originPoint);
  if (boxScale !== void 0) {
    point2 = scalePoint(point2, 1 / boxScale, originPoint);
  }
  return point2;
}
function removeAxisDelta(axis, translate = 0, scale2 = 1, origin = 0.5, boxScale, originAxis = axis, sourceAxis = axis) {
  if (percent.test(translate)) {
    translate = parseFloat(translate);
    const relativeProgress = mixNumber$1(sourceAxis.min, sourceAxis.max, translate / 100);
    translate = relativeProgress - sourceAxis.min;
  }
  if (typeof translate !== "number")
    return;
  let originPoint = mixNumber$1(originAxis.min, originAxis.max, origin);
  if (axis === originAxis)
    originPoint -= translate;
  axis.min = removePointDelta(axis.min, translate, scale2, originPoint, boxScale);
  axis.max = removePointDelta(axis.max, translate, scale2, originPoint, boxScale);
}
function removeAxisTransforms(axis, transforms, [key, scaleKey, originKey], origin, sourceAxis) {
  removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale, origin, sourceAxis);
}
const xKeys = ["x", "scaleX", "originX"];
const yKeys = ["y", "scaleY", "originY"];
function removeBoxTransforms(box, transforms, originBox, sourceBox) {
  removeAxisTransforms(box.x, transforms, xKeys, originBox ? originBox.x : void 0, sourceBox ? sourceBox.x : void 0);
  removeAxisTransforms(box.y, transforms, yKeys, originBox ? originBox.y : void 0, sourceBox ? sourceBox.y : void 0);
}
function isAxisDeltaZero(delta) {
  return delta.translate === 0 && delta.scale === 1;
}
function isDeltaZero(delta) {
  return isAxisDeltaZero(delta.x) && isAxisDeltaZero(delta.y);
}
function axisEquals(a, b2) {
  return a.min === b2.min && a.max === b2.max;
}
function boxEquals(a, b2) {
  return axisEquals(a.x, b2.x) && axisEquals(a.y, b2.y);
}
function axisEqualsRounded(a, b2) {
  return Math.round(a.min) === Math.round(b2.min) && Math.round(a.max) === Math.round(b2.max);
}
function boxEqualsRounded(a, b2) {
  return axisEqualsRounded(a.x, b2.x) && axisEqualsRounded(a.y, b2.y);
}
function aspectRatio(box) {
  return calcLength(box.x) / calcLength(box.y);
}
function axisDeltaEquals(a, b2) {
  return a.translate === b2.translate && a.scale === b2.scale && a.originPoint === b2.originPoint;
}
class NodeStack {
  constructor() {
    this.members = [];
  }
  add(node) {
    addUniqueItem(this.members, node);
    node.scheduleRender();
  }
  remove(node) {
    removeItem(this.members, node);
    if (node === this.prevLead) {
      this.prevLead = void 0;
    }
    if (node === this.lead) {
      const prevLead = this.members[this.members.length - 1];
      if (prevLead) {
        this.promote(prevLead);
      }
    }
  }
  relegate(node) {
    const indexOfNode = this.members.findIndex((member) => node === member);
    if (indexOfNode === 0)
      return false;
    let prevLead;
    for (let i = indexOfNode; i >= 0; i--) {
      const member = this.members[i];
      if (member.isPresent !== false) {
        prevLead = member;
        break;
      }
    }
    if (prevLead) {
      this.promote(prevLead);
      return true;
    } else {
      return false;
    }
  }
  promote(node, preserveFollowOpacity) {
    const prevLead = this.lead;
    if (node === prevLead)
      return;
    this.prevLead = prevLead;
    this.lead = node;
    node.show();
    if (prevLead) {
      prevLead.instance && prevLead.scheduleRender();
      node.scheduleRender();
      node.resumeFrom = prevLead;
      if (preserveFollowOpacity) {
        node.resumeFrom.preserveOpacity = true;
      }
      if (prevLead.snapshot) {
        node.snapshot = prevLead.snapshot;
        node.snapshot.latestValues = prevLead.animationValues || prevLead.latestValues;
      }
      if (node.root && node.root.isUpdating) {
        node.isLayoutDirty = true;
      }
      const { crossfade } = node.options;
      if (crossfade === false) {
        prevLead.hide();
      }
    }
  }
  exitAnimationComplete() {
    this.members.forEach((node) => {
      const { options, resumingFrom } = node;
      options.onExitComplete && options.onExitComplete();
      if (resumingFrom) {
        resumingFrom.options.onExitComplete && resumingFrom.options.onExitComplete();
      }
    });
  }
  scheduleRender() {
    this.members.forEach((node) => {
      node.instance && node.scheduleRender(false);
    });
  }
  /**
   * Clear any leads that have been removed this render to prevent them from being
   * used in future animations and to prevent memory leaks
   */
  removeLeadSnapshot() {
    if (this.lead && this.lead.snapshot) {
      this.lead.snapshot = void 0;
    }
  }
}
function buildProjectionTransform(delta, treeScale, latestTransform) {
  let transform2 = "";
  const xTranslate = delta.x.translate / treeScale.x;
  const yTranslate = delta.y.translate / treeScale.y;
  const zTranslate = latestTransform?.z || 0;
  if (xTranslate || yTranslate || zTranslate) {
    transform2 = `translate3d(${xTranslate}px, ${yTranslate}px, ${zTranslate}px) `;
  }
  if (treeScale.x !== 1 || treeScale.y !== 1) {
    transform2 += `scale(${1 / treeScale.x}, ${1 / treeScale.y}) `;
  }
  if (latestTransform) {
    const { transformPerspective, rotate: rotate2, rotateX, rotateY, skewX, skewY } = latestTransform;
    if (transformPerspective)
      transform2 = `perspective(${transformPerspective}px) ${transform2}`;
    if (rotate2)
      transform2 += `rotate(${rotate2}deg) `;
    if (rotateX)
      transform2 += `rotateX(${rotateX}deg) `;
    if (rotateY)
      transform2 += `rotateY(${rotateY}deg) `;
    if (skewX)
      transform2 += `skewX(${skewX}deg) `;
    if (skewY)
      transform2 += `skewY(${skewY}deg) `;
  }
  const elementScaleX = delta.x.scale * treeScale.x;
  const elementScaleY = delta.y.scale * treeScale.y;
  if (elementScaleX !== 1 || elementScaleY !== 1) {
    transform2 += `scale(${elementScaleX}, ${elementScaleY})`;
  }
  return transform2 || "none";
}
const transformAxes = ["", "X", "Y", "Z"];
const animationTarget = 1e3;
let id = 0;
function resetDistortingTransform(key, visualElement, values, sharedAnimationValues) {
  const { latestValues } = visualElement;
  if (latestValues[key]) {
    values[key] = latestValues[key];
    visualElement.setStaticValue(key, 0);
    if (sharedAnimationValues) {
      sharedAnimationValues[key] = 0;
    }
  }
}
function cancelTreeOptimisedTransformAnimations(projectionNode) {
  projectionNode.hasCheckedOptimisedAppear = true;
  if (projectionNode.root === projectionNode)
    return;
  const { visualElement } = projectionNode.options;
  if (!visualElement)
    return;
  const appearId = getOptimisedAppearId(visualElement);
  if (window.MotionHasOptimisedAnimation(appearId, "transform")) {
    const { layout: layout2, layoutId } = projectionNode.options;
    window.MotionCancelOptimisedAnimation(appearId, "transform", frame, !(layout2 || layoutId));
  }
  const { parent } = projectionNode;
  if (parent && !parent.hasCheckedOptimisedAppear) {
    cancelTreeOptimisedTransformAnimations(parent);
  }
}
function createProjectionNode({ attachResizeListener, defaultParent, measureScroll, checkIsScrollRoot, resetTransform }) {
  return class ProjectionNode {
    constructor(latestValues = {}, parent = defaultParent?.()) {
      this.id = id++;
      this.animationId = 0;
      this.animationCommitId = 0;
      this.children = /* @__PURE__ */ new Set();
      this.options = {};
      this.isTreeAnimating = false;
      this.isAnimationBlocked = false;
      this.isLayoutDirty = false;
      this.isProjectionDirty = false;
      this.isSharedProjectionDirty = false;
      this.isTransformDirty = false;
      this.updateManuallyBlocked = false;
      this.updateBlockedByResize = false;
      this.isUpdating = false;
      this.isSVG = false;
      this.needsReset = false;
      this.shouldResetTransform = false;
      this.hasCheckedOptimisedAppear = false;
      this.treeScale = { x: 1, y: 1 };
      this.eventHandlers = /* @__PURE__ */ new Map();
      this.hasTreeAnimated = false;
      this.updateScheduled = false;
      this.scheduleUpdate = () => this.update();
      this.projectionUpdateScheduled = false;
      this.checkUpdateFailed = () => {
        if (this.isUpdating) {
          this.isUpdating = false;
          this.clearAllSnapshots();
        }
      };
      this.updateProjection = () => {
        this.projectionUpdateScheduled = false;
        this.nodes.forEach(propagateDirtyNodes);
        this.nodes.forEach(resolveTargetDelta);
        this.nodes.forEach(calcProjection);
        this.nodes.forEach(cleanDirtyNodes);
      };
      this.resolvedRelativeTargetAt = 0;
      this.hasProjected = false;
      this.isVisible = true;
      this.animationProgress = 0;
      this.sharedNodes = /* @__PURE__ */ new Map();
      this.latestValues = latestValues;
      this.root = parent ? parent.root || parent : this;
      this.path = parent ? [...parent.path, parent] : [];
      this.parent = parent;
      this.depth = parent ? parent.depth + 1 : 0;
      for (let i = 0; i < this.path.length; i++) {
        this.path[i].shouldResetTransform = true;
      }
      if (this.root === this)
        this.nodes = new FlatTree();
    }
    addEventListener(name, handler) {
      if (!this.eventHandlers.has(name)) {
        this.eventHandlers.set(name, new SubscriptionManager());
      }
      return this.eventHandlers.get(name).add(handler);
    }
    notifyListeners(name, ...args) {
      const subscriptionManager = this.eventHandlers.get(name);
      subscriptionManager && subscriptionManager.notify(...args);
    }
    hasListeners(name) {
      return this.eventHandlers.has(name);
    }
    /**
     * Lifecycles
     */
    mount(instance) {
      if (this.instance)
        return;
      this.isSVG = isSVGElement(instance) && !isSVGSVGElement(instance);
      this.instance = instance;
      const { layoutId, layout: layout2, visualElement } = this.options;
      if (visualElement && !visualElement.current) {
        visualElement.mount(instance);
      }
      this.root.nodes.add(this);
      this.parent && this.parent.children.add(this);
      if (this.root.hasTreeAnimated && (layout2 || layoutId)) {
        this.isLayoutDirty = true;
      }
      if (attachResizeListener) {
        let cancelDelay;
        let innerWidth = 0;
        const resizeUnblockUpdate = () => this.root.updateBlockedByResize = false;
        frame.read(() => {
          innerWidth = window.innerWidth;
        });
        attachResizeListener(instance, () => {
          const newInnerWidth = window.innerWidth;
          if (newInnerWidth === innerWidth)
            return;
          innerWidth = newInnerWidth;
          this.root.updateBlockedByResize = true;
          cancelDelay && cancelDelay();
          cancelDelay = delay(resizeUnblockUpdate, 250);
          if (globalProjectionState.hasAnimatedSinceResize) {
            globalProjectionState.hasAnimatedSinceResize = false;
            this.nodes.forEach(finishAnimation);
          }
        });
      }
      if (layoutId) {
        this.root.registerSharedNode(layoutId, this);
      }
      if (this.options.animate !== false && visualElement && (layoutId || layout2)) {
        this.addEventListener("didUpdate", ({ delta, hasLayoutChanged, hasRelativeLayoutChanged, layout: newLayout }) => {
          if (this.isTreeAnimationBlocked()) {
            this.target = void 0;
            this.relativeTarget = void 0;
            return;
          }
          const layoutTransition = this.options.transition || visualElement.getDefaultTransition() || defaultLayoutTransition;
          const { onLayoutAnimationStart, onLayoutAnimationComplete } = visualElement.getProps();
          const hasTargetChanged = !this.targetLayout || !boxEqualsRounded(this.targetLayout, newLayout);
          const hasOnlyRelativeTargetChanged = !hasLayoutChanged && hasRelativeLayoutChanged;
          if (this.options.layoutRoot || this.resumeFrom || hasOnlyRelativeTargetChanged || hasLayoutChanged && (hasTargetChanged || !this.currentAnimation)) {
            if (this.resumeFrom) {
              this.resumingFrom = this.resumeFrom;
              this.resumingFrom.resumingFrom = void 0;
            }
            const animationOptions = {
              ...getValueTransition(layoutTransition, "layout"),
              onPlay: onLayoutAnimationStart,
              onComplete: onLayoutAnimationComplete
            };
            if (visualElement.shouldReduceMotion || this.options.layoutRoot) {
              animationOptions.delay = 0;
              animationOptions.type = false;
            }
            this.startAnimation(animationOptions);
            this.setAnimationOrigin(delta, hasOnlyRelativeTargetChanged);
          } else {
            if (!hasLayoutChanged) {
              finishAnimation(this);
            }
            if (this.isLead() && this.options.onExitComplete) {
              this.options.onExitComplete();
            }
          }
          this.targetLayout = newLayout;
        });
      }
    }
    unmount() {
      this.options.layoutId && this.willUpdate();
      this.root.nodes.remove(this);
      const stack = this.getStack();
      stack && stack.remove(this);
      this.parent && this.parent.children.delete(this);
      this.instance = void 0;
      this.eventHandlers.clear();
      cancelFrame(this.updateProjection);
    }
    // only on the root
    blockUpdate() {
      this.updateManuallyBlocked = true;
    }
    unblockUpdate() {
      this.updateManuallyBlocked = false;
    }
    isUpdateBlocked() {
      return this.updateManuallyBlocked || this.updateBlockedByResize;
    }
    isTreeAnimationBlocked() {
      return this.isAnimationBlocked || this.parent && this.parent.isTreeAnimationBlocked() || false;
    }
    // Note: currently only running on root node
    startUpdate() {
      if (this.isUpdateBlocked())
        return;
      this.isUpdating = true;
      this.nodes && this.nodes.forEach(resetSkewAndRotation);
      this.animationId++;
    }
    getTransformTemplate() {
      const { visualElement } = this.options;
      return visualElement && visualElement.getProps().transformTemplate;
    }
    willUpdate(shouldNotifyListeners = true) {
      this.root.hasTreeAnimated = true;
      if (this.root.isUpdateBlocked()) {
        this.options.onExitComplete && this.options.onExitComplete();
        return;
      }
      if (window.MotionCancelOptimisedAnimation && !this.hasCheckedOptimisedAppear) {
        cancelTreeOptimisedTransformAnimations(this);
      }
      !this.root.isUpdating && this.root.startUpdate();
      if (this.isLayoutDirty)
        return;
      this.isLayoutDirty = true;
      for (let i = 0; i < this.path.length; i++) {
        const node = this.path[i];
        node.shouldResetTransform = true;
        node.updateScroll("snapshot");
        if (node.options.layoutRoot) {
          node.willUpdate(false);
        }
      }
      const { layoutId, layout: layout2 } = this.options;
      if (layoutId === void 0 && !layout2)
        return;
      const transformTemplate = this.getTransformTemplate();
      this.prevTransformTemplateValue = transformTemplate ? transformTemplate(this.latestValues, "") : void 0;
      this.updateSnapshot();
      shouldNotifyListeners && this.notifyListeners("willUpdate");
    }
    update() {
      this.updateScheduled = false;
      const updateWasBlocked = this.isUpdateBlocked();
      if (updateWasBlocked) {
        this.unblockUpdate();
        this.clearAllSnapshots();
        this.nodes.forEach(clearMeasurements);
        return;
      }
      if (this.animationId <= this.animationCommitId) {
        this.nodes.forEach(clearIsLayoutDirty);
        return;
      }
      this.animationCommitId = this.animationId;
      if (!this.isUpdating) {
        this.nodes.forEach(clearIsLayoutDirty);
      } else {
        this.isUpdating = false;
        this.nodes.forEach(resetTransformStyle);
        this.nodes.forEach(updateLayout);
        this.nodes.forEach(notifyLayoutUpdate);
      }
      this.clearAllSnapshots();
      const now2 = time.now();
      frameData.delta = clamp(0, 1e3 / 60, now2 - frameData.timestamp);
      frameData.timestamp = now2;
      frameData.isProcessing = true;
      frameSteps.update.process(frameData);
      frameSteps.preRender.process(frameData);
      frameSteps.render.process(frameData);
      frameData.isProcessing = false;
    }
    didUpdate() {
      if (!this.updateScheduled) {
        this.updateScheduled = true;
        microtask.read(this.scheduleUpdate);
      }
    }
    clearAllSnapshots() {
      this.nodes.forEach(clearSnapshot);
      this.sharedNodes.forEach(removeLeadSnapshots);
    }
    scheduleUpdateProjection() {
      if (!this.projectionUpdateScheduled) {
        this.projectionUpdateScheduled = true;
        frame.preRender(this.updateProjection, false, true);
      }
    }
    scheduleCheckAfterUnmount() {
      frame.postRender(() => {
        if (this.isLayoutDirty) {
          this.root.didUpdate();
        } else {
          this.root.checkUpdateFailed();
        }
      });
    }
    /**
     * Update measurements
     */
    updateSnapshot() {
      if (this.snapshot || !this.instance)
        return;
      this.snapshot = this.measure();
      if (this.snapshot && !calcLength(this.snapshot.measuredBox.x) && !calcLength(this.snapshot.measuredBox.y)) {
        this.snapshot = void 0;
      }
    }
    updateLayout() {
      if (!this.instance)
        return;
      this.updateScroll();
      if (!(this.options.alwaysMeasureLayout && this.isLead()) && !this.isLayoutDirty) {
        return;
      }
      if (this.resumeFrom && !this.resumeFrom.instance) {
        for (let i = 0; i < this.path.length; i++) {
          const node = this.path[i];
          node.updateScroll();
        }
      }
      const prevLayout = this.layout;
      this.layout = this.measure(false);
      this.layoutCorrected = createBox();
      this.isLayoutDirty = false;
      this.projectionDelta = void 0;
      this.notifyListeners("measure", this.layout.layoutBox);
      const { visualElement } = this.options;
      visualElement && visualElement.notify("LayoutMeasure", this.layout.layoutBox, prevLayout ? prevLayout.layoutBox : void 0);
    }
    updateScroll(phase = "measure") {
      let needsMeasurement = Boolean(this.options.layoutScroll && this.instance);
      if (this.scroll && this.scroll.animationId === this.root.animationId && this.scroll.phase === phase) {
        needsMeasurement = false;
      }
      if (needsMeasurement && this.instance) {
        const isRoot = checkIsScrollRoot(this.instance);
        this.scroll = {
          animationId: this.root.animationId,
          phase,
          isRoot,
          offset: measureScroll(this.instance),
          wasRoot: this.scroll ? this.scroll.isRoot : isRoot
        };
      }
    }
    resetTransform() {
      if (!resetTransform)
        return;
      const isResetRequested = this.isLayoutDirty || this.shouldResetTransform || this.options.alwaysMeasureLayout;
      const hasProjection = this.projectionDelta && !isDeltaZero(this.projectionDelta);
      const transformTemplate = this.getTransformTemplate();
      const transformTemplateValue = transformTemplate ? transformTemplate(this.latestValues, "") : void 0;
      const transformTemplateHasChanged = transformTemplateValue !== this.prevTransformTemplateValue;
      if (isResetRequested && this.instance && (hasProjection || hasTransform(this.latestValues) || transformTemplateHasChanged)) {
        resetTransform(this.instance, transformTemplateValue);
        this.shouldResetTransform = false;
        this.scheduleRender();
      }
    }
    measure(removeTransform = true) {
      const pageBox = this.measurePageBox();
      let layoutBox = this.removeElementScroll(pageBox);
      if (removeTransform) {
        layoutBox = this.removeTransform(layoutBox);
      }
      roundBox(layoutBox);
      return {
        animationId: this.root.animationId,
        measuredBox: pageBox,
        layoutBox,
        latestValues: {},
        source: this.id
      };
    }
    measurePageBox() {
      const { visualElement } = this.options;
      if (!visualElement)
        return createBox();
      const box = visualElement.measureViewportBox();
      const wasInScrollRoot = this.scroll?.wasRoot || this.path.some(checkNodeWasScrollRoot);
      if (!wasInScrollRoot) {
        const { scroll: scroll2 } = this.root;
        if (scroll2) {
          translateAxis(box.x, scroll2.offset.x);
          translateAxis(box.y, scroll2.offset.y);
        }
      }
      return box;
    }
    removeElementScroll(box) {
      const boxWithoutScroll = createBox();
      copyBoxInto(boxWithoutScroll, box);
      if (this.scroll?.wasRoot) {
        return boxWithoutScroll;
      }
      for (let i = 0; i < this.path.length; i++) {
        const node = this.path[i];
        const { scroll: scroll2, options } = node;
        if (node !== this.root && scroll2 && options.layoutScroll) {
          if (scroll2.wasRoot) {
            copyBoxInto(boxWithoutScroll, box);
          }
          translateAxis(boxWithoutScroll.x, scroll2.offset.x);
          translateAxis(boxWithoutScroll.y, scroll2.offset.y);
        }
      }
      return boxWithoutScroll;
    }
    applyTransform(box, transformOnly = false) {
      const withTransforms = createBox();
      copyBoxInto(withTransforms, box);
      for (let i = 0; i < this.path.length; i++) {
        const node = this.path[i];
        if (!transformOnly && node.options.layoutScroll && node.scroll && node !== node.root) {
          transformBox(withTransforms, {
            x: -node.scroll.offset.x,
            y: -node.scroll.offset.y
          });
        }
        if (!hasTransform(node.latestValues))
          continue;
        transformBox(withTransforms, node.latestValues);
      }
      if (hasTransform(this.latestValues)) {
        transformBox(withTransforms, this.latestValues);
      }
      return withTransforms;
    }
    removeTransform(box) {
      const boxWithoutTransform = createBox();
      copyBoxInto(boxWithoutTransform, box);
      for (let i = 0; i < this.path.length; i++) {
        const node = this.path[i];
        if (!node.instance)
          continue;
        if (!hasTransform(node.latestValues))
          continue;
        hasScale(node.latestValues) && node.updateSnapshot();
        const sourceBox = createBox();
        const nodeBox = node.measurePageBox();
        copyBoxInto(sourceBox, nodeBox);
        removeBoxTransforms(boxWithoutTransform, node.latestValues, node.snapshot ? node.snapshot.layoutBox : void 0, sourceBox);
      }
      if (hasTransform(this.latestValues)) {
        removeBoxTransforms(boxWithoutTransform, this.latestValues);
      }
      return boxWithoutTransform;
    }
    setTargetDelta(delta) {
      this.targetDelta = delta;
      this.root.scheduleUpdateProjection();
      this.isProjectionDirty = true;
    }
    setOptions(options) {
      this.options = {
        ...this.options,
        ...options,
        crossfade: options.crossfade !== void 0 ? options.crossfade : true
      };
    }
    clearMeasurements() {
      this.scroll = void 0;
      this.layout = void 0;
      this.snapshot = void 0;
      this.prevTransformTemplateValue = void 0;
      this.targetDelta = void 0;
      this.target = void 0;
      this.isLayoutDirty = false;
    }
    forceRelativeParentToResolveTarget() {
      if (!this.relativeParent)
        return;
      if (this.relativeParent.resolvedRelativeTargetAt !== frameData.timestamp) {
        this.relativeParent.resolveTargetDelta(true);
      }
    }
    resolveTargetDelta(forceRecalculation = false) {
      const lead = this.getLead();
      this.isProjectionDirty || (this.isProjectionDirty = lead.isProjectionDirty);
      this.isTransformDirty || (this.isTransformDirty = lead.isTransformDirty);
      this.isSharedProjectionDirty || (this.isSharedProjectionDirty = lead.isSharedProjectionDirty);
      const isShared = Boolean(this.resumingFrom) || this !== lead;
      const canSkip = !(forceRecalculation || isShared && this.isSharedProjectionDirty || this.isProjectionDirty || this.parent?.isProjectionDirty || this.attemptToResolveRelativeTarget || this.root.updateBlockedByResize);
      if (canSkip)
        return;
      const { layout: layout2, layoutId } = this.options;
      if (!this.layout || !(layout2 || layoutId))
        return;
      this.resolvedRelativeTargetAt = frameData.timestamp;
      if (!this.targetDelta && !this.relativeTarget) {
        const relativeParent = this.getClosestProjectingParent();
        if (relativeParent && relativeParent.layout && this.animationProgress !== 1) {
          this.relativeParent = relativeParent;
          this.forceRelativeParentToResolveTarget();
          this.relativeTarget = createBox();
          this.relativeTargetOrigin = createBox();
          calcRelativePosition(this.relativeTargetOrigin, this.layout.layoutBox, relativeParent.layout.layoutBox);
          copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);
        } else {
          this.relativeParent = this.relativeTarget = void 0;
        }
      }
      if (!this.relativeTarget && !this.targetDelta)
        return;
      if (!this.target) {
        this.target = createBox();
        this.targetWithTransforms = createBox();
      }
      if (this.relativeTarget && this.relativeTargetOrigin && this.relativeParent && this.relativeParent.target) {
        this.forceRelativeParentToResolveTarget();
        calcRelativeBox(this.target, this.relativeTarget, this.relativeParent.target);
      } else if (this.targetDelta) {
        if (Boolean(this.resumingFrom)) {
          this.target = this.applyTransform(this.layout.layoutBox);
        } else {
          copyBoxInto(this.target, this.layout.layoutBox);
        }
        applyBoxDelta(this.target, this.targetDelta);
      } else {
        copyBoxInto(this.target, this.layout.layoutBox);
      }
      if (this.attemptToResolveRelativeTarget) {
        this.attemptToResolveRelativeTarget = false;
        const relativeParent = this.getClosestProjectingParent();
        if (relativeParent && Boolean(relativeParent.resumingFrom) === Boolean(this.resumingFrom) && !relativeParent.options.layoutScroll && relativeParent.target && this.animationProgress !== 1) {
          this.relativeParent = relativeParent;
          this.forceRelativeParentToResolveTarget();
          this.relativeTarget = createBox();
          this.relativeTargetOrigin = createBox();
          calcRelativePosition(this.relativeTargetOrigin, this.target, relativeParent.target);
          copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);
        } else {
          this.relativeParent = this.relativeTarget = void 0;
        }
      }
    }
    getClosestProjectingParent() {
      if (!this.parent || hasScale(this.parent.latestValues) || has2DTranslate(this.parent.latestValues)) {
        return void 0;
      }
      if (this.parent.isProjecting()) {
        return this.parent;
      } else {
        return this.parent.getClosestProjectingParent();
      }
    }
    isProjecting() {
      return Boolean((this.relativeTarget || this.targetDelta || this.options.layoutRoot) && this.layout);
    }
    calcProjection() {
      const lead = this.getLead();
      const isShared = Boolean(this.resumingFrom) || this !== lead;
      let canSkip = true;
      if (this.isProjectionDirty || this.parent?.isProjectionDirty) {
        canSkip = false;
      }
      if (isShared && (this.isSharedProjectionDirty || this.isTransformDirty)) {
        canSkip = false;
      }
      if (this.resolvedRelativeTargetAt === frameData.timestamp) {
        canSkip = false;
      }
      if (canSkip)
        return;
      const { layout: layout2, layoutId } = this.options;
      this.isTreeAnimating = Boolean(this.parent && this.parent.isTreeAnimating || this.currentAnimation || this.pendingAnimation);
      if (!this.isTreeAnimating) {
        this.targetDelta = this.relativeTarget = void 0;
      }
      if (!this.layout || !(layout2 || layoutId))
        return;
      copyBoxInto(this.layoutCorrected, this.layout.layoutBox);
      const prevTreeScaleX = this.treeScale.x;
      const prevTreeScaleY = this.treeScale.y;
      applyTreeDeltas(this.layoutCorrected, this.treeScale, this.path, isShared);
      if (lead.layout && !lead.target && (this.treeScale.x !== 1 || this.treeScale.y !== 1)) {
        lead.target = lead.layout.layoutBox;
        lead.targetWithTransforms = createBox();
      }
      const { target } = lead;
      if (!target) {
        if (this.prevProjectionDelta) {
          this.createProjectionDeltas();
          this.scheduleRender();
        }
        return;
      }
      if (!this.projectionDelta || !this.prevProjectionDelta) {
        this.createProjectionDeltas();
      } else {
        copyAxisDeltaInto(this.prevProjectionDelta.x, this.projectionDelta.x);
        copyAxisDeltaInto(this.prevProjectionDelta.y, this.projectionDelta.y);
      }
      calcBoxDelta(this.projectionDelta, this.layoutCorrected, target, this.latestValues);
      if (this.treeScale.x !== prevTreeScaleX || this.treeScale.y !== prevTreeScaleY || !axisDeltaEquals(this.projectionDelta.x, this.prevProjectionDelta.x) || !axisDeltaEquals(this.projectionDelta.y, this.prevProjectionDelta.y)) {
        this.hasProjected = true;
        this.scheduleRender();
        this.notifyListeners("projectionUpdate", target);
      }
    }
    hide() {
      this.isVisible = false;
    }
    show() {
      this.isVisible = true;
    }
    scheduleRender(notifyAll2 = true) {
      this.options.visualElement?.scheduleRender();
      if (notifyAll2) {
        const stack = this.getStack();
        stack && stack.scheduleRender();
      }
      if (this.resumingFrom && !this.resumingFrom.instance) {
        this.resumingFrom = void 0;
      }
    }
    createProjectionDeltas() {
      this.prevProjectionDelta = createDelta();
      this.projectionDelta = createDelta();
      this.projectionDeltaWithTransform = createDelta();
    }
    setAnimationOrigin(delta, hasOnlyRelativeTargetChanged = false) {
      const snapshot = this.snapshot;
      const snapshotLatestValues = snapshot ? snapshot.latestValues : {};
      const mixedValues = { ...this.latestValues };
      const targetDelta = createDelta();
      if (!this.relativeParent || !this.relativeParent.options.layoutRoot) {
        this.relativeTarget = this.relativeTargetOrigin = void 0;
      }
      this.attemptToResolveRelativeTarget = !hasOnlyRelativeTargetChanged;
      const relativeLayout = createBox();
      const snapshotSource = snapshot ? snapshot.source : void 0;
      const layoutSource = this.layout ? this.layout.source : void 0;
      const isSharedLayoutAnimation = snapshotSource !== layoutSource;
      const stack = this.getStack();
      const isOnlyMember = !stack || stack.members.length <= 1;
      const shouldCrossfadeOpacity = Boolean(isSharedLayoutAnimation && !isOnlyMember && this.options.crossfade === true && !this.path.some(hasOpacityCrossfade));
      this.animationProgress = 0;
      let prevRelativeTarget;
      this.mixTargetDelta = (latest) => {
        const progress2 = latest / 1e3;
        mixAxisDelta(targetDelta.x, delta.x, progress2);
        mixAxisDelta(targetDelta.y, delta.y, progress2);
        this.setTargetDelta(targetDelta);
        if (this.relativeTarget && this.relativeTargetOrigin && this.layout && this.relativeParent && this.relativeParent.layout) {
          calcRelativePosition(relativeLayout, this.layout.layoutBox, this.relativeParent.layout.layoutBox);
          mixBox(this.relativeTarget, this.relativeTargetOrigin, relativeLayout, progress2);
          if (prevRelativeTarget && boxEquals(this.relativeTarget, prevRelativeTarget)) {
            this.isProjectionDirty = false;
          }
          if (!prevRelativeTarget)
            prevRelativeTarget = createBox();
          copyBoxInto(prevRelativeTarget, this.relativeTarget);
        }
        if (isSharedLayoutAnimation) {
          this.animationValues = mixedValues;
          mixValues(mixedValues, snapshotLatestValues, this.latestValues, progress2, shouldCrossfadeOpacity, isOnlyMember);
        }
        this.root.scheduleUpdateProjection();
        this.scheduleRender();
        this.animationProgress = progress2;
      };
      this.mixTargetDelta(this.options.layoutRoot ? 1e3 : 0);
    }
    startAnimation(options) {
      this.notifyListeners("animationStart");
      this.currentAnimation?.stop();
      this.resumingFrom?.currentAnimation?.stop();
      if (this.pendingAnimation) {
        cancelFrame(this.pendingAnimation);
        this.pendingAnimation = void 0;
      }
      this.pendingAnimation = frame.update(() => {
        globalProjectionState.hasAnimatedSinceResize = true;
        this.motionValue || (this.motionValue = motionValue(0));
        this.currentAnimation = animateSingleValue(this.motionValue, [0, 1e3], {
          ...options,
          velocity: 0,
          isSync: true,
          onUpdate: (latest) => {
            this.mixTargetDelta(latest);
            options.onUpdate && options.onUpdate(latest);
          },
          onStop: () => {
          },
          onComplete: () => {
            options.onComplete && options.onComplete();
            this.completeAnimation();
          }
        });
        if (this.resumingFrom) {
          this.resumingFrom.currentAnimation = this.currentAnimation;
        }
        this.pendingAnimation = void 0;
      });
    }
    completeAnimation() {
      if (this.resumingFrom) {
        this.resumingFrom.currentAnimation = void 0;
        this.resumingFrom.preserveOpacity = void 0;
      }
      const stack = this.getStack();
      stack && stack.exitAnimationComplete();
      this.resumingFrom = this.currentAnimation = this.animationValues = void 0;
      this.notifyListeners("animationComplete");
    }
    finishAnimation() {
      if (this.currentAnimation) {
        this.mixTargetDelta && this.mixTargetDelta(animationTarget);
        this.currentAnimation.stop();
      }
      this.completeAnimation();
    }
    applyTransformsToTarget() {
      const lead = this.getLead();
      let { targetWithTransforms, target, layout: layout2, latestValues } = lead;
      if (!targetWithTransforms || !target || !layout2)
        return;
      if (this !== lead && this.layout && layout2 && shouldAnimatePositionOnly(this.options.animationType, this.layout.layoutBox, layout2.layoutBox)) {
        target = this.target || createBox();
        const xLength = calcLength(this.layout.layoutBox.x);
        target.x.min = lead.target.x.min;
        target.x.max = target.x.min + xLength;
        const yLength = calcLength(this.layout.layoutBox.y);
        target.y.min = lead.target.y.min;
        target.y.max = target.y.min + yLength;
      }
      copyBoxInto(targetWithTransforms, target);
      transformBox(targetWithTransforms, latestValues);
      calcBoxDelta(this.projectionDeltaWithTransform, this.layoutCorrected, targetWithTransforms, latestValues);
    }
    registerSharedNode(layoutId, node) {
      if (!this.sharedNodes.has(layoutId)) {
        this.sharedNodes.set(layoutId, new NodeStack());
      }
      const stack = this.sharedNodes.get(layoutId);
      stack.add(node);
      const config = node.options.initialPromotionConfig;
      node.promote({
        transition: config ? config.transition : void 0,
        preserveFollowOpacity: config && config.shouldPreserveFollowOpacity ? config.shouldPreserveFollowOpacity(node) : void 0
      });
    }
    isLead() {
      const stack = this.getStack();
      return stack ? stack.lead === this : true;
    }
    getLead() {
      const { layoutId } = this.options;
      return layoutId ? this.getStack()?.lead || this : this;
    }
    getPrevLead() {
      const { layoutId } = this.options;
      return layoutId ? this.getStack()?.prevLead : void 0;
    }
    getStack() {
      const { layoutId } = this.options;
      if (layoutId)
        return this.root.sharedNodes.get(layoutId);
    }
    promote({ needsReset, transition, preserveFollowOpacity } = {}) {
      const stack = this.getStack();
      if (stack)
        stack.promote(this, preserveFollowOpacity);
      if (needsReset) {
        this.projectionDelta = void 0;
        this.needsReset = true;
      }
      if (transition)
        this.setOptions({ transition });
    }
    relegate() {
      const stack = this.getStack();
      if (stack) {
        return stack.relegate(this);
      } else {
        return false;
      }
    }
    resetSkewAndRotation() {
      const { visualElement } = this.options;
      if (!visualElement)
        return;
      let hasDistortingTransform = false;
      const { latestValues } = visualElement;
      if (latestValues.z || latestValues.rotate || latestValues.rotateX || latestValues.rotateY || latestValues.rotateZ || latestValues.skewX || latestValues.skewY) {
        hasDistortingTransform = true;
      }
      if (!hasDistortingTransform)
        return;
      const resetValues = {};
      if (latestValues.z) {
        resetDistortingTransform("z", visualElement, resetValues, this.animationValues);
      }
      for (let i = 0; i < transformAxes.length; i++) {
        resetDistortingTransform(`rotate${transformAxes[i]}`, visualElement, resetValues, this.animationValues);
        resetDistortingTransform(`skew${transformAxes[i]}`, visualElement, resetValues, this.animationValues);
      }
      visualElement.render();
      for (const key in resetValues) {
        visualElement.setStaticValue(key, resetValues[key]);
        if (this.animationValues) {
          this.animationValues[key] = resetValues[key];
        }
      }
      visualElement.scheduleRender();
    }
    applyProjectionStyles(targetStyle, styleProp) {
      if (!this.instance || this.isSVG)
        return;
      if (!this.isVisible) {
        targetStyle.visibility = "hidden";
        return;
      }
      const transformTemplate = this.getTransformTemplate();
      if (this.needsReset) {
        this.needsReset = false;
        targetStyle.visibility = "";
        targetStyle.opacity = "";
        targetStyle.pointerEvents = resolveMotionValue(styleProp?.pointerEvents) || "";
        targetStyle.transform = transformTemplate ? transformTemplate(this.latestValues, "") : "none";
        return;
      }
      const lead = this.getLead();
      if (!this.projectionDelta || !this.layout || !lead.target) {
        if (this.options.layoutId) {
          targetStyle.opacity = this.latestValues.opacity !== void 0 ? this.latestValues.opacity : 1;
          targetStyle.pointerEvents = resolveMotionValue(styleProp?.pointerEvents) || "";
        }
        if (this.hasProjected && !hasTransform(this.latestValues)) {
          targetStyle.transform = transformTemplate ? transformTemplate({}, "") : "none";
          this.hasProjected = false;
        }
        return;
      }
      targetStyle.visibility = "";
      const valuesToRender = lead.animationValues || lead.latestValues;
      this.applyTransformsToTarget();
      let transform2 = buildProjectionTransform(this.projectionDeltaWithTransform, this.treeScale, valuesToRender);
      if (transformTemplate) {
        transform2 = transformTemplate(valuesToRender, transform2);
      }
      targetStyle.transform = transform2;
      const { x: x2, y: y2 } = this.projectionDelta;
      targetStyle.transformOrigin = `${x2.origin * 100}% ${y2.origin * 100}% 0`;
      if (lead.animationValues) {
        targetStyle.opacity = lead === this ? valuesToRender.opacity ?? this.latestValues.opacity ?? 1 : this.preserveOpacity ? this.latestValues.opacity : valuesToRender.opacityExit;
      } else {
        targetStyle.opacity = lead === this ? valuesToRender.opacity !== void 0 ? valuesToRender.opacity : "" : valuesToRender.opacityExit !== void 0 ? valuesToRender.opacityExit : 0;
      }
      for (const key in scaleCorrectors) {
        if (valuesToRender[key] === void 0)
          continue;
        const { correct, applyTo, isCSSVariable } = scaleCorrectors[key];
        const corrected = transform2 === "none" ? valuesToRender[key] : correct(valuesToRender[key], lead);
        if (applyTo) {
          const num = applyTo.length;
          for (let i = 0; i < num; i++) {
            targetStyle[applyTo[i]] = corrected;
          }
        } else {
          if (isCSSVariable) {
            this.options.visualElement.renderState.vars[key] = corrected;
          } else {
            targetStyle[key] = corrected;
          }
        }
      }
      if (this.options.layoutId) {
        targetStyle.pointerEvents = lead === this ? resolveMotionValue(styleProp?.pointerEvents) || "" : "none";
      }
    }
    clearSnapshot() {
      this.resumeFrom = this.snapshot = void 0;
    }
    // Only run on root
    resetTree() {
      this.root.nodes.forEach((node) => node.currentAnimation?.stop());
      this.root.nodes.forEach(clearMeasurements);
      this.root.sharedNodes.clear();
    }
  };
}
function updateLayout(node) {
  node.updateLayout();
}
function notifyLayoutUpdate(node) {
  const snapshot = node.resumeFrom?.snapshot || node.snapshot;
  if (node.isLead() && node.layout && snapshot && node.hasListeners("didUpdate")) {
    const { layoutBox: layout2, measuredBox: measuredLayout } = node.layout;
    const { animationType } = node.options;
    const isShared = snapshot.source !== node.layout.source;
    if (animationType === "size") {
      eachAxis((axis) => {
        const axisSnapshot = isShared ? snapshot.measuredBox[axis] : snapshot.layoutBox[axis];
        const length = calcLength(axisSnapshot);
        axisSnapshot.min = layout2[axis].min;
        axisSnapshot.max = axisSnapshot.min + length;
      });
    } else if (shouldAnimatePositionOnly(animationType, snapshot.layoutBox, layout2)) {
      eachAxis((axis) => {
        const axisSnapshot = isShared ? snapshot.measuredBox[axis] : snapshot.layoutBox[axis];
        const length = calcLength(layout2[axis]);
        axisSnapshot.max = axisSnapshot.min + length;
        if (node.relativeTarget && !node.currentAnimation) {
          node.isProjectionDirty = true;
          node.relativeTarget[axis].max = node.relativeTarget[axis].min + length;
        }
      });
    }
    const layoutDelta = createDelta();
    calcBoxDelta(layoutDelta, layout2, snapshot.layoutBox);
    const visualDelta = createDelta();
    if (isShared) {
      calcBoxDelta(visualDelta, node.applyTransform(measuredLayout, true), snapshot.measuredBox);
    } else {
      calcBoxDelta(visualDelta, layout2, snapshot.layoutBox);
    }
    const hasLayoutChanged = !isDeltaZero(layoutDelta);
    let hasRelativeLayoutChanged = false;
    if (!node.resumeFrom) {
      const relativeParent = node.getClosestProjectingParent();
      if (relativeParent && !relativeParent.resumeFrom) {
        const { snapshot: parentSnapshot, layout: parentLayout } = relativeParent;
        if (parentSnapshot && parentLayout) {
          const relativeSnapshot = createBox();
          calcRelativePosition(relativeSnapshot, snapshot.layoutBox, parentSnapshot.layoutBox);
          const relativeLayout = createBox();
          calcRelativePosition(relativeLayout, layout2, parentLayout.layoutBox);
          if (!boxEqualsRounded(relativeSnapshot, relativeLayout)) {
            hasRelativeLayoutChanged = true;
          }
          if (relativeParent.options.layoutRoot) {
            node.relativeTarget = relativeLayout;
            node.relativeTargetOrigin = relativeSnapshot;
            node.relativeParent = relativeParent;
          }
        }
      }
    }
    node.notifyListeners("didUpdate", {
      layout: layout2,
      snapshot,
      delta: visualDelta,
      layoutDelta,
      hasLayoutChanged,
      hasRelativeLayoutChanged
    });
  } else if (node.isLead()) {
    const { onExitComplete } = node.options;
    onExitComplete && onExitComplete();
  }
  node.options.transition = void 0;
}
function propagateDirtyNodes(node) {
  if (!node.parent)
    return;
  if (!node.isProjecting()) {
    node.isProjectionDirty = node.parent.isProjectionDirty;
  }
  node.isSharedProjectionDirty || (node.isSharedProjectionDirty = Boolean(node.isProjectionDirty || node.parent.isProjectionDirty || node.parent.isSharedProjectionDirty));
  node.isTransformDirty || (node.isTransformDirty = node.parent.isTransformDirty);
}
function cleanDirtyNodes(node) {
  node.isProjectionDirty = node.isSharedProjectionDirty = node.isTransformDirty = false;
}
function clearSnapshot(node) {
  node.clearSnapshot();
}
function clearMeasurements(node) {
  node.clearMeasurements();
}
function clearIsLayoutDirty(node) {
  node.isLayoutDirty = false;
}
function resetTransformStyle(node) {
  const { visualElement } = node.options;
  if (visualElement && visualElement.getProps().onBeforeLayoutMeasure) {
    visualElement.notify("BeforeLayoutMeasure");
  }
  node.resetTransform();
}
function finishAnimation(node) {
  node.finishAnimation();
  node.targetDelta = node.relativeTarget = node.target = void 0;
  node.isProjectionDirty = true;
}
function resolveTargetDelta(node) {
  node.resolveTargetDelta();
}
function calcProjection(node) {
  node.calcProjection();
}
function resetSkewAndRotation(node) {
  node.resetSkewAndRotation();
}
function removeLeadSnapshots(stack) {
  stack.removeLeadSnapshot();
}
function mixAxisDelta(output, delta, p) {
  output.translate = mixNumber$1(delta.translate, 0, p);
  output.scale = mixNumber$1(delta.scale, 1, p);
  output.origin = delta.origin;
  output.originPoint = delta.originPoint;
}
function mixAxis(output, from, to, p) {
  output.min = mixNumber$1(from.min, to.min, p);
  output.max = mixNumber$1(from.max, to.max, p);
}
function mixBox(output, from, to, p) {
  mixAxis(output.x, from.x, to.x, p);
  mixAxis(output.y, from.y, to.y, p);
}
function hasOpacityCrossfade(node) {
  return node.animationValues && node.animationValues.opacityExit !== void 0;
}
const defaultLayoutTransition = {
  duration: 0.45,
  ease: [0.4, 0, 0.1, 1]
};
const userAgentContains = (string) => typeof navigator !== "undefined" && navigator.userAgent && navigator.userAgent.toLowerCase().includes(string);
const roundPoint = userAgentContains("applewebkit/") && !userAgentContains("chrome/") ? Math.round : noop;
function roundAxis(axis) {
  axis.min = roundPoint(axis.min);
  axis.max = roundPoint(axis.max);
}
function roundBox(box) {
  roundAxis(box.x);
  roundAxis(box.y);
}
function shouldAnimatePositionOnly(animationType, snapshot, layout2) {
  return animationType === "position" || animationType === "preserve-aspect" && !isNear(aspectRatio(snapshot), aspectRatio(layout2), 0.2);
}
function checkNodeWasScrollRoot(node) {
  return node !== node.root && node.scroll?.wasRoot;
}
const DocumentProjectionNode = createProjectionNode({
  attachResizeListener: (ref, notify) => addDomEvent(ref, "resize", notify),
  measureScroll: () => ({
    x: document.documentElement.scrollLeft || document.body.scrollLeft,
    y: document.documentElement.scrollTop || document.body.scrollTop
  }),
  checkIsScrollRoot: () => true
});
const rootProjectionNode = {
  current: void 0
};
const HTMLProjectionNode = createProjectionNode({
  measureScroll: (instance) => ({
    x: instance.scrollLeft,
    y: instance.scrollTop
  }),
  defaultParent: () => {
    if (!rootProjectionNode.current) {
      const documentNode = new DocumentProjectionNode({});
      documentNode.mount(window);
      documentNode.setOptions({ layoutScroll: true });
      rootProjectionNode.current = documentNode;
    }
    return rootProjectionNode.current;
  },
  resetTransform: (instance, value) => {
    instance.style.transform = value !== void 0 ? value : "none";
  },
  checkIsScrollRoot: (instance) => Boolean(window.getComputedStyle(instance).position === "fixed")
});
const drag = {
  pan: {
    Feature: PanGesture
  },
  drag: {
    Feature: DragGesture,
    ProjectionNode: HTMLProjectionNode,
    MeasureLayout
  }
};
function handleHoverEvent(node, event, lifecycle) {
  const { props } = node;
  if (node.animationState && props.whileHover) {
    node.animationState.setActive("whileHover", lifecycle === "Start");
  }
  const eventName = "onHover" + lifecycle;
  const callback = props[eventName];
  if (callback) {
    frame.postRender(() => callback(event, extractEventInfo(event)));
  }
}
class HoverGesture extends Feature {
  mount() {
    const { current } = this.node;
    if (!current)
      return;
    this.unmount = hover(current, (_element, startEvent) => {
      handleHoverEvent(this.node, startEvent, "Start");
      return (endEvent) => handleHoverEvent(this.node, endEvent, "End");
    });
  }
  unmount() {
  }
}
class FocusGesture extends Feature {
  constructor() {
    super(...arguments);
    this.isActive = false;
  }
  onFocus() {
    let isFocusVisible = false;
    try {
      isFocusVisible = this.node.current.matches(":focus-visible");
    } catch (e) {
      isFocusVisible = true;
    }
    if (!isFocusVisible || !this.node.animationState)
      return;
    this.node.animationState.setActive("whileFocus", true);
    this.isActive = true;
  }
  onBlur() {
    if (!this.isActive || !this.node.animationState)
      return;
    this.node.animationState.setActive("whileFocus", false);
    this.isActive = false;
  }
  mount() {
    this.unmount = pipe(addDomEvent(this.node.current, "focus", () => this.onFocus()), addDomEvent(this.node.current, "blur", () => this.onBlur()));
  }
  unmount() {
  }
}
function handlePressEvent(node, event, lifecycle) {
  const { props } = node;
  if (node.current instanceof HTMLButtonElement && node.current.disabled) {
    return;
  }
  if (node.animationState && props.whileTap) {
    node.animationState.setActive("whileTap", lifecycle === "Start");
  }
  const eventName = "onTap" + (lifecycle === "End" ? "" : lifecycle);
  const callback = props[eventName];
  if (callback) {
    frame.postRender(() => callback(event, extractEventInfo(event)));
  }
}
class PressGesture extends Feature {
  mount() {
    const { current } = this.node;
    if (!current)
      return;
    this.unmount = press(current, (_element, startEvent) => {
      handlePressEvent(this.node, startEvent, "Start");
      return (endEvent, { success }) => handlePressEvent(this.node, endEvent, success ? "End" : "Cancel");
    }, { useGlobalTarget: this.node.props.globalTapTarget });
  }
  unmount() {
  }
}
const observerCallbacks = /* @__PURE__ */ new WeakMap();
const observers = /* @__PURE__ */ new WeakMap();
const fireObserverCallback = (entry2) => {
  const callback = observerCallbacks.get(entry2.target);
  callback && callback(entry2);
};
const fireAllObserverCallbacks = (entries) => {
  entries.forEach(fireObserverCallback);
};
function initIntersectionObserver({ root: root2, ...options }) {
  const lookupRoot = root2 || document;
  if (!observers.has(lookupRoot)) {
    observers.set(lookupRoot, {});
  }
  const rootObservers = observers.get(lookupRoot);
  const key = JSON.stringify(options);
  if (!rootObservers[key]) {
    rootObservers[key] = new IntersectionObserver(fireAllObserverCallbacks, { root: root2, ...options });
  }
  return rootObservers[key];
}
function observeIntersection(element, options, callback) {
  const rootInteresectionObserver = initIntersectionObserver(options);
  observerCallbacks.set(element, callback);
  rootInteresectionObserver.observe(element);
  return () => {
    observerCallbacks.delete(element);
    rootInteresectionObserver.unobserve(element);
  };
}
const thresholdNames = {
  some: 0,
  all: 1
};
class InViewFeature extends Feature {
  constructor() {
    super(...arguments);
    this.hasEnteredView = false;
    this.isInView = false;
  }
  startObserver() {
    this.unmount();
    const { viewport = {} } = this.node.getProps();
    const { root: root2, margin: rootMargin, amount = "some", once } = viewport;
    const options = {
      root: root2 ? root2.current : void 0,
      rootMargin,
      threshold: typeof amount === "number" ? amount : thresholdNames[amount]
    };
    const onIntersectionUpdate = (entry2) => {
      const { isIntersecting } = entry2;
      if (this.isInView === isIntersecting)
        return;
      this.isInView = isIntersecting;
      if (once && !isIntersecting && this.hasEnteredView) {
        return;
      } else if (isIntersecting) {
        this.hasEnteredView = true;
      }
      if (this.node.animationState) {
        this.node.animationState.setActive("whileInView", isIntersecting);
      }
      const { onViewportEnter, onViewportLeave } = this.node.getProps();
      const callback = isIntersecting ? onViewportEnter : onViewportLeave;
      callback && callback(entry2);
    };
    return observeIntersection(this.node.current, options, onIntersectionUpdate);
  }
  mount() {
    this.startObserver();
  }
  update() {
    if (typeof IntersectionObserver === "undefined")
      return;
    const { props, prevProps } = this.node;
    const hasOptionsChanged = ["amount", "margin", "root"].some(hasViewportOptionChanged(props, prevProps));
    if (hasOptionsChanged) {
      this.startObserver();
    }
  }
  unmount() {
  }
}
function hasViewportOptionChanged({ viewport = {} }, { viewport: prevViewport = {} } = {}) {
  return (name) => viewport[name] !== prevViewport[name];
}
const gestureAnimations = {
  inView: {
    Feature: InViewFeature
  },
  tap: {
    Feature: PressGesture
  },
  focus: {
    Feature: FocusGesture
  },
  hover: {
    Feature: HoverGesture
  }
};
const layout = {
  layout: {
    ProjectionNode: HTMLProjectionNode,
    MeasureLayout
  }
};
const featureBundle = {
  ...animations,
  ...gestureAnimations,
  ...drag,
  ...layout
};
const motion = /* @__PURE__ */ createMotionProxy(featureBundle, createDomVisualElement);
const maxElapsed = 50;
const createAxisInfo = () => ({
  current: 0,
  offset: [],
  progress: 0,
  scrollLength: 0,
  targetOffset: 0,
  targetLength: 0,
  containerLength: 0,
  velocity: 0
});
const createScrollInfo = () => ({
  time: 0,
  x: createAxisInfo(),
  y: createAxisInfo()
});
const keys = {
  x: {
    length: "Width",
    position: "Left"
  },
  y: {
    length: "Height",
    position: "Top"
  }
};
function updateAxisInfo(element, axisName, info, time2) {
  const axis = info[axisName];
  const { length, position } = keys[axisName];
  const prev = axis.current;
  const prevTime = info.time;
  axis.current = element[`scroll${position}`];
  axis.scrollLength = element[`scroll${length}`] - element[`client${length}`];
  axis.offset.length = 0;
  axis.offset[0] = 0;
  axis.offset[1] = axis.scrollLength;
  axis.progress = /* @__PURE__ */ progress(0, axis.scrollLength, axis.current);
  const elapsed = time2 - prevTime;
  axis.velocity = elapsed > maxElapsed ? 0 : velocityPerSecond(axis.current - prev, elapsed);
}
function updateScrollInfo(element, info, time2) {
  updateAxisInfo(element, "x", info, time2);
  updateAxisInfo(element, "y", info, time2);
  info.time = time2;
}
function calcInset(element, container) {
  const inset = { x: 0, y: 0 };
  let current = element;
  while (current && current !== container) {
    if (isHTMLElement(current)) {
      inset.x += current.offsetLeft;
      inset.y += current.offsetTop;
      current = current.offsetParent;
    } else if (current.tagName === "svg") {
      const svgBoundingBox = current.getBoundingClientRect();
      current = current.parentElement;
      const parentBoundingBox = current.getBoundingClientRect();
      inset.x += svgBoundingBox.left - parentBoundingBox.left;
      inset.y += svgBoundingBox.top - parentBoundingBox.top;
    } else if (current instanceof SVGGraphicsElement) {
      const { x: x2, y: y2 } = current.getBBox();
      inset.x += x2;
      inset.y += y2;
      let svg2 = null;
      let parent = current.parentNode;
      while (!svg2) {
        if (parent.tagName === "svg") {
          svg2 = parent;
        }
        parent = current.parentNode;
      }
      current = svg2;
    } else {
      break;
    }
  }
  return inset;
}
const namedEdges = {
  start: 0,
  center: 0.5,
  end: 1
};
function resolveEdge(edge, length, inset = 0) {
  let delta = 0;
  if (edge in namedEdges) {
    edge = namedEdges[edge];
  }
  if (typeof edge === "string") {
    const asNumber2 = parseFloat(edge);
    if (edge.endsWith("px")) {
      delta = asNumber2;
    } else if (edge.endsWith("%")) {
      edge = asNumber2 / 100;
    } else if (edge.endsWith("vw")) {
      delta = asNumber2 / 100 * document.documentElement.clientWidth;
    } else if (edge.endsWith("vh")) {
      delta = asNumber2 / 100 * document.documentElement.clientHeight;
    } else {
      edge = asNumber2;
    }
  }
  if (typeof edge === "number") {
    delta = length * edge;
  }
  return inset + delta;
}
const defaultOffset = [0, 0];
function resolveOffset(offset, containerLength, targetLength, targetInset) {
  let offsetDefinition = Array.isArray(offset) ? offset : defaultOffset;
  let targetPoint = 0;
  let containerPoint = 0;
  if (typeof offset === "number") {
    offsetDefinition = [offset, offset];
  } else if (typeof offset === "string") {
    offset = offset.trim();
    if (offset.includes(" ")) {
      offsetDefinition = offset.split(" ");
    } else {
      offsetDefinition = [offset, namedEdges[offset] ? offset : `0`];
    }
  }
  targetPoint = resolveEdge(offsetDefinition[0], targetLength, targetInset);
  containerPoint = resolveEdge(offsetDefinition[1], containerLength);
  return targetPoint - containerPoint;
}
const ScrollOffset = {
  All: [
    [0, 0],
    [1, 1]
  ]
};
const point = { x: 0, y: 0 };
function getTargetSize(target) {
  return "getBBox" in target && target.tagName !== "svg" ? target.getBBox() : { width: target.clientWidth, height: target.clientHeight };
}
function resolveOffsets(container, info, options) {
  const { offset: offsetDefinition = ScrollOffset.All } = options;
  const { target = container, axis = "y" } = options;
  const lengthLabel = axis === "y" ? "height" : "width";
  const inset = target !== container ? calcInset(target, container) : point;
  const targetSize = target === container ? { width: container.scrollWidth, height: container.scrollHeight } : getTargetSize(target);
  const containerSize = {
    width: container.clientWidth,
    height: container.clientHeight
  };
  info[axis].offset.length = 0;
  let hasChanged = !info[axis].interpolate;
  const numOffsets = offsetDefinition.length;
  for (let i = 0; i < numOffsets; i++) {
    const offset = resolveOffset(offsetDefinition[i], containerSize[lengthLabel], targetSize[lengthLabel], inset[axis]);
    if (!hasChanged && offset !== info[axis].interpolatorOffsets[i]) {
      hasChanged = true;
    }
    info[axis].offset[i] = offset;
  }
  if (hasChanged) {
    info[axis].interpolate = interpolate(info[axis].offset, defaultOffset$1(offsetDefinition), { clamp: false });
    info[axis].interpolatorOffsets = [...info[axis].offset];
  }
  info[axis].progress = clamp(0, 1, info[axis].interpolate(info[axis].current));
}
function measure(container, target = container, info) {
  info.x.targetOffset = 0;
  info.y.targetOffset = 0;
  if (target !== container) {
    let node = target;
    while (node && node !== container) {
      info.x.targetOffset += node.offsetLeft;
      info.y.targetOffset += node.offsetTop;
      node = node.offsetParent;
    }
  }
  info.x.targetLength = target === container ? target.scrollWidth : target.clientWidth;
  info.y.targetLength = target === container ? target.scrollHeight : target.clientHeight;
  info.x.containerLength = container.clientWidth;
  info.y.containerLength = container.clientHeight;
}
function createOnScrollHandler(element, onScroll, info, options = {}) {
  return {
    measure: (time2) => {
      measure(element, options.target, info);
      updateScrollInfo(element, info, time2);
      if (options.offset || options.target) {
        resolveOffsets(element, info, options);
      }
    },
    notify: () => onScroll(info)
  };
}
const scrollListeners = /* @__PURE__ */ new WeakMap();
const resizeListeners = /* @__PURE__ */ new WeakMap();
const onScrollHandlers = /* @__PURE__ */ new WeakMap();
const getEventTarget = (element) => element === document.scrollingElement ? window : element;
function scrollInfo(onScroll, { container = document.scrollingElement, ...options } = {}) {
  if (!container)
    return noop;
  let containerHandlers = onScrollHandlers.get(container);
  if (!containerHandlers) {
    containerHandlers = /* @__PURE__ */ new Set();
    onScrollHandlers.set(container, containerHandlers);
  }
  const info = createScrollInfo();
  const containerHandler = createOnScrollHandler(container, onScroll, info, options);
  containerHandlers.add(containerHandler);
  if (!scrollListeners.has(container)) {
    const measureAll = () => {
      for (const handler of containerHandlers) {
        handler.measure(frameData.timestamp);
      }
      frame.preUpdate(notifyAll2);
    };
    const notifyAll2 = () => {
      for (const handler of containerHandlers) {
        handler.notify();
      }
    };
    const listener2 = () => frame.read(measureAll);
    scrollListeners.set(container, listener2);
    const target = getEventTarget(container);
    window.addEventListener("resize", listener2, { passive: true });
    if (container !== document.documentElement) {
      resizeListeners.set(container, resize(container, listener2));
    }
    target.addEventListener("scroll", listener2, { passive: true });
    listener2();
  }
  const listener = scrollListeners.get(container);
  frame.read(listener, false, true);
  return () => {
    cancelFrame(listener);
    const currentHandlers = onScrollHandlers.get(container);
    if (!currentHandlers)
      return;
    currentHandlers.delete(containerHandler);
    if (currentHandlers.size)
      return;
    const scrollListener = scrollListeners.get(container);
    scrollListeners.delete(container);
    if (scrollListener) {
      getEventTarget(container).removeEventListener("scroll", scrollListener);
      resizeListeners.get(container)?.();
      window.removeEventListener("resize", scrollListener);
    }
  };
}
const timelineCache = /* @__PURE__ */ new Map();
function scrollTimelineFallback(options) {
  const currentTime = { value: 0 };
  const cancel = scrollInfo((info) => {
    currentTime.value = info[options.axis].progress * 100;
  }, options);
  return { currentTime, cancel };
}
function getTimeline({ source, container, ...options }) {
  const { axis } = options;
  if (source)
    container = source;
  const containerCache = timelineCache.get(container) ?? /* @__PURE__ */ new Map();
  timelineCache.set(container, containerCache);
  const targetKey = options.target ?? "self";
  const targetCache = containerCache.get(targetKey) ?? {};
  const axisKey = axis + (options.offset ?? []).join(",");
  if (!targetCache[axisKey]) {
    targetCache[axisKey] = !options.target && supportsScrollTimeline() ? new ScrollTimeline({ source: container, axis }) : scrollTimelineFallback({ container, ...options });
  }
  return targetCache[axisKey];
}
function attachToAnimation(animation, options) {
  const timeline = getTimeline(options);
  return animation.attachTimeline({
    timeline: options.target ? void 0 : timeline,
    observe: (valueAnimation) => {
      valueAnimation.pause();
      return observeTimeline((progress2) => {
        valueAnimation.time = valueAnimation.iterationDuration * progress2;
      }, timeline);
    }
  });
}
function isOnScrollWithInfo(onScroll) {
  return onScroll.length === 2;
}
function attachToFunction(onScroll, options) {
  if (isOnScrollWithInfo(onScroll)) {
    return scrollInfo((info) => {
      onScroll(info[options.axis].progress, info);
    }, options);
  } else {
    return observeTimeline(onScroll, getTimeline(options));
  }
}
function scroll(onScroll, { axis = "y", container = document.scrollingElement, ...options } = {}) {
  if (!container)
    return noop;
  const optionsWithDefaults = { axis, container, ...options };
  return typeof onScroll === "function" ? attachToFunction(onScroll, optionsWithDefaults) : attachToAnimation(onScroll, optionsWithDefaults);
}
const createScrollMotionValues = () => ({
  scrollX: motionValue(0),
  scrollY: motionValue(0),
  scrollXProgress: motionValue(0),
  scrollYProgress: motionValue(0)
});
const isRefPending = (ref) => {
  if (!ref)
    return false;
  return !ref.current;
};
function useScroll({ container, target, ...options } = {}) {
  const values = useConstant(createScrollMotionValues);
  const scrollAnimation = reactExports.useRef(null);
  const needsStart = reactExports.useRef(false);
  const start = reactExports.useCallback(() => {
    scrollAnimation.current = scroll((_progress, { x: x2, y: y2 }) => {
      values.scrollX.set(x2.current);
      values.scrollXProgress.set(x2.progress);
      values.scrollY.set(y2.current);
      values.scrollYProgress.set(y2.progress);
    }, {
      ...options,
      container: container?.current || void 0,
      target: target?.current || void 0
    });
    return () => {
      scrollAnimation.current?.();
    };
  }, [container, target, JSON.stringify(options.offset)]);
  useIsomorphicLayoutEffect(() => {
    needsStart.current = false;
    if (isRefPending(container) || isRefPending(target)) {
      needsStart.current = true;
      return;
    } else {
      return start();
    }
  }, [start]);
  reactExports.useEffect(() => {
    if (needsStart.current) {
      invariant(!isRefPending(container));
      invariant(!isRefPending(target));
      return start();
    } else {
      return;
    }
  }, [start]);
  return values;
}
function useMotionValue(initial) {
  const value = useConstant(() => motionValue(initial));
  const { isStatic } = reactExports.useContext(MotionConfigContext);
  if (isStatic) {
    const [, setLatest] = reactExports.useState(initial);
    reactExports.useEffect(() => value.on("change", setLatest), []);
  }
  return value;
}
function useCombineMotionValues(values, combineValues) {
  const value = useMotionValue(combineValues());
  const updateValue = () => value.set(combineValues());
  updateValue();
  useIsomorphicLayoutEffect(() => {
    const scheduleUpdate = () => frame.preRender(updateValue, false, true);
    const subscriptions = values.map((v2) => v2.on("change", scheduleUpdate));
    return () => {
      subscriptions.forEach((unsubscribe) => unsubscribe());
      cancelFrame(updateValue);
    };
  });
  return value;
}
function useComputed(compute) {
  collectMotionValues.current = [];
  compute();
  const value = useCombineMotionValues(collectMotionValues.current, compute);
  collectMotionValues.current = void 0;
  return value;
}
function useTransform(input, inputRangeOrTransformer, outputRange, options) {
  if (typeof input === "function") {
    return useComputed(input);
  }
  const transformer = typeof inputRangeOrTransformer === "function" ? inputRangeOrTransformer : transform(inputRangeOrTransformer, outputRange, options);
  return Array.isArray(input) ? useListTransform(input, transformer) : useListTransform([input], ([latest]) => transformer(latest));
}
function useListTransform(values, transformer) {
  const latest = useConstant(() => []);
  return useCombineMotionValues(values, () => {
    latest.length = 0;
    const numValues = values.length;
    for (let i = 0; i < numValues; i++) {
      latest[i] = values[i].get();
    }
    return transformer(latest);
  });
}
function r(e) {
  var t, f, n = "";
  if ("string" == typeof e || "number" == typeof e) n += e;
  else if ("object" == typeof e) if (Array.isArray(e)) {
    var o = e.length;
    for (t = 0; t < o; t++) e[t] && (f = r(e[t])) && (n && (n += " "), n += f);
  } else for (f in e) e[f] && (n && (n += " "), n += f);
  return n;
}
function clsx() {
  for (var e, t, f = 0, n = "", o = arguments.length; f < o; f++) (e = arguments[f]) && (t = r(e)) && (n && (n += " "), n += t);
  return n;
}
const concatArrays = (array1, array2) => {
  const combinedArray = new Array(array1.length + array2.length);
  for (let i = 0; i < array1.length; i++) {
    combinedArray[i] = array1[i];
  }
  for (let i = 0; i < array2.length; i++) {
    combinedArray[array1.length + i] = array2[i];
  }
  return combinedArray;
};
const createClassValidatorObject = (classGroupId, validator) => ({
  classGroupId,
  validator
});
const createClassPartObject = (nextPart = /* @__PURE__ */ new Map(), validators = null, classGroupId) => ({
  nextPart,
  validators,
  classGroupId
});
const CLASS_PART_SEPARATOR = "-";
const EMPTY_CONFLICTS = [];
const ARBITRARY_PROPERTY_PREFIX = "arbitrary..";
const createClassGroupUtils = (config) => {
  const classMap = createClassMap(config);
  const {
    conflictingClassGroups,
    conflictingClassGroupModifiers
  } = config;
  const getClassGroupId = (className) => {
    if (className.startsWith("[") && className.endsWith("]")) {
      return getGroupIdForArbitraryProperty(className);
    }
    const classParts = className.split(CLASS_PART_SEPARATOR);
    const startIndex = classParts[0] === "" && classParts.length > 1 ? 1 : 0;
    return getGroupRecursive(classParts, startIndex, classMap);
  };
  const getConflictingClassGroupIds = (classGroupId, hasPostfixModifier) => {
    if (hasPostfixModifier) {
      const modifierConflicts = conflictingClassGroupModifiers[classGroupId];
      const baseConflicts = conflictingClassGroups[classGroupId];
      if (modifierConflicts) {
        if (baseConflicts) {
          return concatArrays(baseConflicts, modifierConflicts);
        }
        return modifierConflicts;
      }
      return baseConflicts || EMPTY_CONFLICTS;
    }
    return conflictingClassGroups[classGroupId] || EMPTY_CONFLICTS;
  };
  return {
    getClassGroupId,
    getConflictingClassGroupIds
  };
};
const getGroupRecursive = (classParts, startIndex, classPartObject) => {
  const classPathsLength = classParts.length - startIndex;
  if (classPathsLength === 0) {
    return classPartObject.classGroupId;
  }
  const currentClassPart = classParts[startIndex];
  const nextClassPartObject = classPartObject.nextPart.get(currentClassPart);
  if (nextClassPartObject) {
    const result = getGroupRecursive(classParts, startIndex + 1, nextClassPartObject);
    if (result) return result;
  }
  const validators = classPartObject.validators;
  if (validators === null) {
    return void 0;
  }
  const classRest = startIndex === 0 ? classParts.join(CLASS_PART_SEPARATOR) : classParts.slice(startIndex).join(CLASS_PART_SEPARATOR);
  const validatorsLength = validators.length;
  for (let i = 0; i < validatorsLength; i++) {
    const validatorObj = validators[i];
    if (validatorObj.validator(classRest)) {
      return validatorObj.classGroupId;
    }
  }
  return void 0;
};
const getGroupIdForArbitraryProperty = (className) => className.slice(1, -1).indexOf(":") === -1 ? void 0 : (() => {
  const content = className.slice(1, -1);
  const colonIndex = content.indexOf(":");
  const property = content.slice(0, colonIndex);
  return property ? ARBITRARY_PROPERTY_PREFIX + property : void 0;
})();
const createClassMap = (config) => {
  const {
    theme,
    classGroups
  } = config;
  return processClassGroups(classGroups, theme);
};
const processClassGroups = (classGroups, theme) => {
  const classMap = createClassPartObject();
  for (const classGroupId in classGroups) {
    const group = classGroups[classGroupId];
    processClassesRecursively(group, classMap, classGroupId, theme);
  }
  return classMap;
};
const processClassesRecursively = (classGroup, classPartObject, classGroupId, theme) => {
  const len = classGroup.length;
  for (let i = 0; i < len; i++) {
    const classDefinition = classGroup[i];
    processClassDefinition(classDefinition, classPartObject, classGroupId, theme);
  }
};
const processClassDefinition = (classDefinition, classPartObject, classGroupId, theme) => {
  if (typeof classDefinition === "string") {
    processStringDefinition(classDefinition, classPartObject, classGroupId);
    return;
  }
  if (typeof classDefinition === "function") {
    processFunctionDefinition(classDefinition, classPartObject, classGroupId, theme);
    return;
  }
  processObjectDefinition(classDefinition, classPartObject, classGroupId, theme);
};
const processStringDefinition = (classDefinition, classPartObject, classGroupId) => {
  const classPartObjectToEdit = classDefinition === "" ? classPartObject : getPart(classPartObject, classDefinition);
  classPartObjectToEdit.classGroupId = classGroupId;
};
const processFunctionDefinition = (classDefinition, classPartObject, classGroupId, theme) => {
  if (isThemeGetter(classDefinition)) {
    processClassesRecursively(classDefinition(theme), classPartObject, classGroupId, theme);
    return;
  }
  if (classPartObject.validators === null) {
    classPartObject.validators = [];
  }
  classPartObject.validators.push(createClassValidatorObject(classGroupId, classDefinition));
};
const processObjectDefinition = (classDefinition, classPartObject, classGroupId, theme) => {
  const entries = Object.entries(classDefinition);
  const len = entries.length;
  for (let i = 0; i < len; i++) {
    const [key, value] = entries[i];
    processClassesRecursively(value, getPart(classPartObject, key), classGroupId, theme);
  }
};
const getPart = (classPartObject, path) => {
  let current = classPartObject;
  const parts = path.split(CLASS_PART_SEPARATOR);
  const len = parts.length;
  for (let i = 0; i < len; i++) {
    const part = parts[i];
    let next = current.nextPart.get(part);
    if (!next) {
      next = createClassPartObject();
      current.nextPart.set(part, next);
    }
    current = next;
  }
  return current;
};
const isThemeGetter = (func) => "isThemeGetter" in func && func.isThemeGetter === true;
const createLruCache = (maxCacheSize) => {
  if (maxCacheSize < 1) {
    return {
      get: () => void 0,
      set: () => {
      }
    };
  }
  let cacheSize = 0;
  let cache = /* @__PURE__ */ Object.create(null);
  let previousCache = /* @__PURE__ */ Object.create(null);
  const update = (key, value) => {
    cache[key] = value;
    cacheSize++;
    if (cacheSize > maxCacheSize) {
      cacheSize = 0;
      previousCache = cache;
      cache = /* @__PURE__ */ Object.create(null);
    }
  };
  return {
    get(key) {
      let value = cache[key];
      if (value !== void 0) {
        return value;
      }
      if ((value = previousCache[key]) !== void 0) {
        update(key, value);
        return value;
      }
    },
    set(key, value) {
      if (key in cache) {
        cache[key] = value;
      } else {
        update(key, value);
      }
    }
  };
};
const IMPORTANT_MODIFIER = "!";
const MODIFIER_SEPARATOR = ":";
const EMPTY_MODIFIERS = [];
const createResultObject = (modifiers, hasImportantModifier, baseClassName, maybePostfixModifierPosition, isExternal) => ({
  modifiers,
  hasImportantModifier,
  baseClassName,
  maybePostfixModifierPosition,
  isExternal
});
const createParseClassName = (config) => {
  const {
    prefix,
    experimentalParseClassName
  } = config;
  let parseClassName = (className) => {
    const modifiers = [];
    let bracketDepth = 0;
    let parenDepth = 0;
    let modifierStart = 0;
    let postfixModifierPosition;
    const len = className.length;
    for (let index2 = 0; index2 < len; index2++) {
      const currentCharacter = className[index2];
      if (bracketDepth === 0 && parenDepth === 0) {
        if (currentCharacter === MODIFIER_SEPARATOR) {
          modifiers.push(className.slice(modifierStart, index2));
          modifierStart = index2 + 1;
          continue;
        }
        if (currentCharacter === "/") {
          postfixModifierPosition = index2;
          continue;
        }
      }
      if (currentCharacter === "[") bracketDepth++;
      else if (currentCharacter === "]") bracketDepth--;
      else if (currentCharacter === "(") parenDepth++;
      else if (currentCharacter === ")") parenDepth--;
    }
    const baseClassNameWithImportantModifier = modifiers.length === 0 ? className : className.slice(modifierStart);
    let baseClassName = baseClassNameWithImportantModifier;
    let hasImportantModifier = false;
    if (baseClassNameWithImportantModifier.endsWith(IMPORTANT_MODIFIER)) {
      baseClassName = baseClassNameWithImportantModifier.slice(0, -1);
      hasImportantModifier = true;
    } else if (
      /**
       * In Tailwind CSS v3 the important modifier was at the start of the base class name. This is still supported for legacy reasons.
       * @see https://github.com/dcastil/tailwind-merge/issues/513#issuecomment-2614029864
       */
      baseClassNameWithImportantModifier.startsWith(IMPORTANT_MODIFIER)
    ) {
      baseClassName = baseClassNameWithImportantModifier.slice(1);
      hasImportantModifier = true;
    }
    const maybePostfixModifierPosition = postfixModifierPosition && postfixModifierPosition > modifierStart ? postfixModifierPosition - modifierStart : void 0;
    return createResultObject(modifiers, hasImportantModifier, baseClassName, maybePostfixModifierPosition);
  };
  if (prefix) {
    const fullPrefix = prefix + MODIFIER_SEPARATOR;
    const parseClassNameOriginal = parseClassName;
    parseClassName = (className) => className.startsWith(fullPrefix) ? parseClassNameOriginal(className.slice(fullPrefix.length)) : createResultObject(EMPTY_MODIFIERS, false, className, void 0, true);
  }
  if (experimentalParseClassName) {
    const parseClassNameOriginal = parseClassName;
    parseClassName = (className) => experimentalParseClassName({
      className,
      parseClassName: parseClassNameOriginal
    });
  }
  return parseClassName;
};
const createSortModifiers = (config) => {
  const modifierWeights = /* @__PURE__ */ new Map();
  config.orderSensitiveModifiers.forEach((mod, index2) => {
    modifierWeights.set(mod, 1e6 + index2);
  });
  return (modifiers) => {
    const result = [];
    let currentSegment = [];
    for (let i = 0; i < modifiers.length; i++) {
      const modifier = modifiers[i];
      const isArbitrary = modifier[0] === "[";
      const isOrderSensitive = modifierWeights.has(modifier);
      if (isArbitrary || isOrderSensitive) {
        if (currentSegment.length > 0) {
          currentSegment.sort();
          result.push(...currentSegment);
          currentSegment = [];
        }
        result.push(modifier);
      } else {
        currentSegment.push(modifier);
      }
    }
    if (currentSegment.length > 0) {
      currentSegment.sort();
      result.push(...currentSegment);
    }
    return result;
  };
};
const createConfigUtils = (config) => ({
  cache: createLruCache(config.cacheSize),
  parseClassName: createParseClassName(config),
  sortModifiers: createSortModifiers(config),
  ...createClassGroupUtils(config)
});
const SPLIT_CLASSES_REGEX = /\s+/;
const mergeClassList = (classList, configUtils) => {
  const {
    parseClassName,
    getClassGroupId,
    getConflictingClassGroupIds,
    sortModifiers
  } = configUtils;
  const classGroupsInConflict = [];
  const classNames = classList.trim().split(SPLIT_CLASSES_REGEX);
  let result = "";
  for (let index2 = classNames.length - 1; index2 >= 0; index2 -= 1) {
    const originalClassName = classNames[index2];
    const {
      isExternal,
      modifiers,
      hasImportantModifier,
      baseClassName,
      maybePostfixModifierPosition
    } = parseClassName(originalClassName);
    if (isExternal) {
      result = originalClassName + (result.length > 0 ? " " + result : result);
      continue;
    }
    let hasPostfixModifier = !!maybePostfixModifierPosition;
    let classGroupId = getClassGroupId(hasPostfixModifier ? baseClassName.substring(0, maybePostfixModifierPosition) : baseClassName);
    if (!classGroupId) {
      if (!hasPostfixModifier) {
        result = originalClassName + (result.length > 0 ? " " + result : result);
        continue;
      }
      classGroupId = getClassGroupId(baseClassName);
      if (!classGroupId) {
        result = originalClassName + (result.length > 0 ? " " + result : result);
        continue;
      }
      hasPostfixModifier = false;
    }
    const variantModifier = modifiers.length === 0 ? "" : modifiers.length === 1 ? modifiers[0] : sortModifiers(modifiers).join(":");
    const modifierId = hasImportantModifier ? variantModifier + IMPORTANT_MODIFIER : variantModifier;
    const classId = modifierId + classGroupId;
    if (classGroupsInConflict.indexOf(classId) > -1) {
      continue;
    }
    classGroupsInConflict.push(classId);
    const conflictGroups = getConflictingClassGroupIds(classGroupId, hasPostfixModifier);
    for (let i = 0; i < conflictGroups.length; ++i) {
      const group = conflictGroups[i];
      classGroupsInConflict.push(modifierId + group);
    }
    result = originalClassName + (result.length > 0 ? " " + result : result);
  }
  return result;
};
const twJoin = (...classLists) => {
  let index2 = 0;
  let argument;
  let resolvedValue;
  let string = "";
  while (index2 < classLists.length) {
    if (argument = classLists[index2++]) {
      if (resolvedValue = toValue(argument)) {
        string && (string += " ");
        string += resolvedValue;
      }
    }
  }
  return string;
};
const toValue = (mix2) => {
  if (typeof mix2 === "string") {
    return mix2;
  }
  let resolvedValue;
  let string = "";
  for (let k2 = 0; k2 < mix2.length; k2++) {
    if (mix2[k2]) {
      if (resolvedValue = toValue(mix2[k2])) {
        string && (string += " ");
        string += resolvedValue;
      }
    }
  }
  return string;
};
const createTailwindMerge = (createConfigFirst, ...createConfigRest) => {
  let configUtils;
  let cacheGet;
  let cacheSet;
  let functionToCall;
  const initTailwindMerge = (classList) => {
    const config = createConfigRest.reduce((previousConfig, createConfigCurrent) => createConfigCurrent(previousConfig), createConfigFirst());
    configUtils = createConfigUtils(config);
    cacheGet = configUtils.cache.get;
    cacheSet = configUtils.cache.set;
    functionToCall = tailwindMerge;
    return tailwindMerge(classList);
  };
  const tailwindMerge = (classList) => {
    const cachedResult = cacheGet(classList);
    if (cachedResult) {
      return cachedResult;
    }
    const result = mergeClassList(classList, configUtils);
    cacheSet(classList, result);
    return result;
  };
  functionToCall = initTailwindMerge;
  return (...args) => functionToCall(twJoin(...args));
};
const fallbackThemeArr = [];
const fromTheme = (key) => {
  const themeGetter = (theme) => theme[key] || fallbackThemeArr;
  themeGetter.isThemeGetter = true;
  return themeGetter;
};
const arbitraryValueRegex = /^\[(?:(\w[\w-]*):)?(.+)\]$/i;
const arbitraryVariableRegex = /^\((?:(\w[\w-]*):)?(.+)\)$/i;
const fractionRegex = /^\d+\/\d+$/;
const tshirtUnitRegex = /^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/;
const lengthUnitRegex = /\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/;
const colorFunctionRegex = /^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/;
const shadowRegex = /^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;
const imageRegex = /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;
const isFraction = (value) => fractionRegex.test(value);
const isNumber = (value) => !!value && !Number.isNaN(Number(value));
const isInteger = (value) => !!value && Number.isInteger(Number(value));
const isPercent = (value) => value.endsWith("%") && isNumber(value.slice(0, -1));
const isTshirtSize = (value) => tshirtUnitRegex.test(value);
const isAny = () => true;
const isLengthOnly = (value) => (
  // `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.
  // For example, `hsl(0 0% 0%)` would be classified as a length without this check.
  // I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.
  lengthUnitRegex.test(value) && !colorFunctionRegex.test(value)
);
const isNever = () => false;
const isShadow = (value) => shadowRegex.test(value);
const isImage = (value) => imageRegex.test(value);
const isAnyNonArbitrary = (value) => !isArbitraryValue(value) && !isArbitraryVariable(value);
const isArbitrarySize = (value) => getIsArbitraryValue(value, isLabelSize, isNever);
const isArbitraryValue = (value) => arbitraryValueRegex.test(value);
const isArbitraryLength = (value) => getIsArbitraryValue(value, isLabelLength, isLengthOnly);
const isArbitraryNumber = (value) => getIsArbitraryValue(value, isLabelNumber, isNumber);
const isArbitraryPosition = (value) => getIsArbitraryValue(value, isLabelPosition, isNever);
const isArbitraryImage = (value) => getIsArbitraryValue(value, isLabelImage, isImage);
const isArbitraryShadow = (value) => getIsArbitraryValue(value, isLabelShadow, isShadow);
const isArbitraryVariable = (value) => arbitraryVariableRegex.test(value);
const isArbitraryVariableLength = (value) => getIsArbitraryVariable(value, isLabelLength);
const isArbitraryVariableFamilyName = (value) => getIsArbitraryVariable(value, isLabelFamilyName);
const isArbitraryVariablePosition = (value) => getIsArbitraryVariable(value, isLabelPosition);
const isArbitraryVariableSize = (value) => getIsArbitraryVariable(value, isLabelSize);
const isArbitraryVariableImage = (value) => getIsArbitraryVariable(value, isLabelImage);
const isArbitraryVariableShadow = (value) => getIsArbitraryVariable(value, isLabelShadow, true);
const getIsArbitraryValue = (value, testLabel, testValue) => {
  const result = arbitraryValueRegex.exec(value);
  if (result) {
    if (result[1]) {
      return testLabel(result[1]);
    }
    return testValue(result[2]);
  }
  return false;
};
const getIsArbitraryVariable = (value, testLabel, shouldMatchNoLabel = false) => {
  const result = arbitraryVariableRegex.exec(value);
  if (result) {
    if (result[1]) {
      return testLabel(result[1]);
    }
    return shouldMatchNoLabel;
  }
  return false;
};
const isLabelPosition = (label) => label === "position" || label === "percentage";
const isLabelImage = (label) => label === "image" || label === "url";
const isLabelSize = (label) => label === "length" || label === "size" || label === "bg-size";
const isLabelLength = (label) => label === "length";
const isLabelNumber = (label) => label === "number";
const isLabelFamilyName = (label) => label === "family-name";
const isLabelShadow = (label) => label === "shadow";
const getDefaultConfig = () => {
  const themeColor = fromTheme("color");
  const themeFont = fromTheme("font");
  const themeText = fromTheme("text");
  const themeFontWeight = fromTheme("font-weight");
  const themeTracking = fromTheme("tracking");
  const themeLeading = fromTheme("leading");
  const themeBreakpoint = fromTheme("breakpoint");
  const themeContainer = fromTheme("container");
  const themeSpacing = fromTheme("spacing");
  const themeRadius = fromTheme("radius");
  const themeShadow = fromTheme("shadow");
  const themeInsetShadow = fromTheme("inset-shadow");
  const themeTextShadow = fromTheme("text-shadow");
  const themeDropShadow = fromTheme("drop-shadow");
  const themeBlur = fromTheme("blur");
  const themePerspective = fromTheme("perspective");
  const themeAspect = fromTheme("aspect");
  const themeEase = fromTheme("ease");
  const themeAnimate = fromTheme("animate");
  const scaleBreak = () => ["auto", "avoid", "all", "avoid-page", "page", "left", "right", "column"];
  const scalePosition = () => [
    "center",
    "top",
    "bottom",
    "left",
    "right",
    "top-left",
    // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378
    "left-top",
    "top-right",
    // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378
    "right-top",
    "bottom-right",
    // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378
    "right-bottom",
    "bottom-left",
    // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378
    "left-bottom"
  ];
  const scalePositionWithArbitrary = () => [...scalePosition(), isArbitraryVariable, isArbitraryValue];
  const scaleOverflow = () => ["auto", "hidden", "clip", "visible", "scroll"];
  const scaleOverscroll = () => ["auto", "contain", "none"];
  const scaleUnambiguousSpacing = () => [isArbitraryVariable, isArbitraryValue, themeSpacing];
  const scaleInset = () => [isFraction, "full", "auto", ...scaleUnambiguousSpacing()];
  const scaleGridTemplateColsRows = () => [isInteger, "none", "subgrid", isArbitraryVariable, isArbitraryValue];
  const scaleGridColRowStartAndEnd = () => ["auto", {
    span: ["full", isInteger, isArbitraryVariable, isArbitraryValue]
  }, isInteger, isArbitraryVariable, isArbitraryValue];
  const scaleGridColRowStartOrEnd = () => [isInteger, "auto", isArbitraryVariable, isArbitraryValue];
  const scaleGridAutoColsRows = () => ["auto", "min", "max", "fr", isArbitraryVariable, isArbitraryValue];
  const scaleAlignPrimaryAxis = () => ["start", "end", "center", "between", "around", "evenly", "stretch", "baseline", "center-safe", "end-safe"];
  const scaleAlignSecondaryAxis = () => ["start", "end", "center", "stretch", "center-safe", "end-safe"];
  const scaleMargin = () => ["auto", ...scaleUnambiguousSpacing()];
  const scaleSizing = () => [isFraction, "auto", "full", "dvw", "dvh", "lvw", "lvh", "svw", "svh", "min", "max", "fit", ...scaleUnambiguousSpacing()];
  const scaleColor = () => [themeColor, isArbitraryVariable, isArbitraryValue];
  const scaleBgPosition = () => [...scalePosition(), isArbitraryVariablePosition, isArbitraryPosition, {
    position: [isArbitraryVariable, isArbitraryValue]
  }];
  const scaleBgRepeat = () => ["no-repeat", {
    repeat: ["", "x", "y", "space", "round"]
  }];
  const scaleBgSize = () => ["auto", "cover", "contain", isArbitraryVariableSize, isArbitrarySize, {
    size: [isArbitraryVariable, isArbitraryValue]
  }];
  const scaleGradientStopPosition = () => [isPercent, isArbitraryVariableLength, isArbitraryLength];
  const scaleRadius = () => [
    // Deprecated since Tailwind CSS v4.0.0
    "",
    "none",
    "full",
    themeRadius,
    isArbitraryVariable,
    isArbitraryValue
  ];
  const scaleBorderWidth = () => ["", isNumber, isArbitraryVariableLength, isArbitraryLength];
  const scaleLineStyle = () => ["solid", "dashed", "dotted", "double"];
  const scaleBlendMode = () => ["normal", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "hue", "saturation", "color", "luminosity"];
  const scaleMaskImagePosition = () => [isNumber, isPercent, isArbitraryVariablePosition, isArbitraryPosition];
  const scaleBlur = () => [
    // Deprecated since Tailwind CSS v4.0.0
    "",
    "none",
    themeBlur,
    isArbitraryVariable,
    isArbitraryValue
  ];
  const scaleRotate = () => ["none", isNumber, isArbitraryVariable, isArbitraryValue];
  const scaleScale = () => ["none", isNumber, isArbitraryVariable, isArbitraryValue];
  const scaleSkew = () => [isNumber, isArbitraryVariable, isArbitraryValue];
  const scaleTranslate = () => [isFraction, "full", ...scaleUnambiguousSpacing()];
  return {
    cacheSize: 500,
    theme: {
      animate: ["spin", "ping", "pulse", "bounce"],
      aspect: ["video"],
      blur: [isTshirtSize],
      breakpoint: [isTshirtSize],
      color: [isAny],
      container: [isTshirtSize],
      "drop-shadow": [isTshirtSize],
      ease: ["in", "out", "in-out"],
      font: [isAnyNonArbitrary],
      "font-weight": ["thin", "extralight", "light", "normal", "medium", "semibold", "bold", "extrabold", "black"],
      "inset-shadow": [isTshirtSize],
      leading: ["none", "tight", "snug", "normal", "relaxed", "loose"],
      perspective: ["dramatic", "near", "normal", "midrange", "distant", "none"],
      radius: [isTshirtSize],
      shadow: [isTshirtSize],
      spacing: ["px", isNumber],
      text: [isTshirtSize],
      "text-shadow": [isTshirtSize],
      tracking: ["tighter", "tight", "normal", "wide", "wider", "widest"]
    },
    classGroups: {
      // --------------
      // --- Layout ---
      // --------------
      /**
       * Aspect Ratio
       * @see https://tailwindcss.com/docs/aspect-ratio
       */
      aspect: [{
        aspect: ["auto", "square", isFraction, isArbitraryValue, isArbitraryVariable, themeAspect]
      }],
      /**
       * Container
       * @see https://tailwindcss.com/docs/container
       * @deprecated since Tailwind CSS v4.0.0
       */
      container: ["container"],
      /**
       * Columns
       * @see https://tailwindcss.com/docs/columns
       */
      columns: [{
        columns: [isNumber, isArbitraryValue, isArbitraryVariable, themeContainer]
      }],
      /**
       * Break After
       * @see https://tailwindcss.com/docs/break-after
       */
      "break-after": [{
        "break-after": scaleBreak()
      }],
      /**
       * Break Before
       * @see https://tailwindcss.com/docs/break-before
       */
      "break-before": [{
        "break-before": scaleBreak()
      }],
      /**
       * Break Inside
       * @see https://tailwindcss.com/docs/break-inside
       */
      "break-inside": [{
        "break-inside": ["auto", "avoid", "avoid-page", "avoid-column"]
      }],
      /**
       * Box Decoration Break
       * @see https://tailwindcss.com/docs/box-decoration-break
       */
      "box-decoration": [{
        "box-decoration": ["slice", "clone"]
      }],
      /**
       * Box Sizing
       * @see https://tailwindcss.com/docs/box-sizing
       */
      box: [{
        box: ["border", "content"]
      }],
      /**
       * Display
       * @see https://tailwindcss.com/docs/display
       */
      display: ["block", "inline-block", "inline", "flex", "inline-flex", "table", "inline-table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row-group", "table-row", "flow-root", "grid", "inline-grid", "contents", "list-item", "hidden"],
      /**
       * Screen Reader Only
       * @see https://tailwindcss.com/docs/display#screen-reader-only
       */
      sr: ["sr-only", "not-sr-only"],
      /**
       * Floats
       * @see https://tailwindcss.com/docs/float
       */
      float: [{
        float: ["right", "left", "none", "start", "end"]
      }],
      /**
       * Clear
       * @see https://tailwindcss.com/docs/clear
       */
      clear: [{
        clear: ["left", "right", "both", "none", "start", "end"]
      }],
      /**
       * Isolation
       * @see https://tailwindcss.com/docs/isolation
       */
      isolation: ["isolate", "isolation-auto"],
      /**
       * Object Fit
       * @see https://tailwindcss.com/docs/object-fit
       */
      "object-fit": [{
        object: ["contain", "cover", "fill", "none", "scale-down"]
      }],
      /**
       * Object Position
       * @see https://tailwindcss.com/docs/object-position
       */
      "object-position": [{
        object: scalePositionWithArbitrary()
      }],
      /**
       * Overflow
       * @see https://tailwindcss.com/docs/overflow
       */
      overflow: [{
        overflow: scaleOverflow()
      }],
      /**
       * Overflow X
       * @see https://tailwindcss.com/docs/overflow
       */
      "overflow-x": [{
        "overflow-x": scaleOverflow()
      }],
      /**
       * Overflow Y
       * @see https://tailwindcss.com/docs/overflow
       */
      "overflow-y": [{
        "overflow-y": scaleOverflow()
      }],
      /**
       * Overscroll Behavior
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      overscroll: [{
        overscroll: scaleOverscroll()
      }],
      /**
       * Overscroll Behavior X
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      "overscroll-x": [{
        "overscroll-x": scaleOverscroll()
      }],
      /**
       * Overscroll Behavior Y
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      "overscroll-y": [{
        "overscroll-y": scaleOverscroll()
      }],
      /**
       * Position
       * @see https://tailwindcss.com/docs/position
       */
      position: ["static", "fixed", "absolute", "relative", "sticky"],
      /**
       * Top / Right / Bottom / Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      inset: [{
        inset: scaleInset()
      }],
      /**
       * Right / Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      "inset-x": [{
        "inset-x": scaleInset()
      }],
      /**
       * Top / Bottom
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      "inset-y": [{
        "inset-y": scaleInset()
      }],
      /**
       * Start
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      start: [{
        start: scaleInset()
      }],
      /**
       * End
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      end: [{
        end: scaleInset()
      }],
      /**
       * Top
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      top: [{
        top: scaleInset()
      }],
      /**
       * Right
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      right: [{
        right: scaleInset()
      }],
      /**
       * Bottom
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      bottom: [{
        bottom: scaleInset()
      }],
      /**
       * Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      left: [{
        left: scaleInset()
      }],
      /**
       * Visibility
       * @see https://tailwindcss.com/docs/visibility
       */
      visibility: ["visible", "invisible", "collapse"],
      /**
       * Z-Index
       * @see https://tailwindcss.com/docs/z-index
       */
      z: [{
        z: [isInteger, "auto", isArbitraryVariable, isArbitraryValue]
      }],
      // ------------------------
      // --- Flexbox and Grid ---
      // ------------------------
      /**
       * Flex Basis
       * @see https://tailwindcss.com/docs/flex-basis
       */
      basis: [{
        basis: [isFraction, "full", "auto", themeContainer, ...scaleUnambiguousSpacing()]
      }],
      /**
       * Flex Direction
       * @see https://tailwindcss.com/docs/flex-direction
       */
      "flex-direction": [{
        flex: ["row", "row-reverse", "col", "col-reverse"]
      }],
      /**
       * Flex Wrap
       * @see https://tailwindcss.com/docs/flex-wrap
       */
      "flex-wrap": [{
        flex: ["nowrap", "wrap", "wrap-reverse"]
      }],
      /**
       * Flex
       * @see https://tailwindcss.com/docs/flex
       */
      flex: [{
        flex: [isNumber, isFraction, "auto", "initial", "none", isArbitraryValue]
      }],
      /**
       * Flex Grow
       * @see https://tailwindcss.com/docs/flex-grow
       */
      grow: [{
        grow: ["", isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Flex Shrink
       * @see https://tailwindcss.com/docs/flex-shrink
       */
      shrink: [{
        shrink: ["", isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Order
       * @see https://tailwindcss.com/docs/order
       */
      order: [{
        order: [isInteger, "first", "last", "none", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Grid Template Columns
       * @see https://tailwindcss.com/docs/grid-template-columns
       */
      "grid-cols": [{
        "grid-cols": scaleGridTemplateColsRows()
      }],
      /**
       * Grid Column Start / End
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-start-end": [{
        col: scaleGridColRowStartAndEnd()
      }],
      /**
       * Grid Column Start
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-start": [{
        "col-start": scaleGridColRowStartOrEnd()
      }],
      /**
       * Grid Column End
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-end": [{
        "col-end": scaleGridColRowStartOrEnd()
      }],
      /**
       * Grid Template Rows
       * @see https://tailwindcss.com/docs/grid-template-rows
       */
      "grid-rows": [{
        "grid-rows": scaleGridTemplateColsRows()
      }],
      /**
       * Grid Row Start / End
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-start-end": [{
        row: scaleGridColRowStartAndEnd()
      }],
      /**
       * Grid Row Start
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-start": [{
        "row-start": scaleGridColRowStartOrEnd()
      }],
      /**
       * Grid Row End
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-end": [{
        "row-end": scaleGridColRowStartOrEnd()
      }],
      /**
       * Grid Auto Flow
       * @see https://tailwindcss.com/docs/grid-auto-flow
       */
      "grid-flow": [{
        "grid-flow": ["row", "col", "dense", "row-dense", "col-dense"]
      }],
      /**
       * Grid Auto Columns
       * @see https://tailwindcss.com/docs/grid-auto-columns
       */
      "auto-cols": [{
        "auto-cols": scaleGridAutoColsRows()
      }],
      /**
       * Grid Auto Rows
       * @see https://tailwindcss.com/docs/grid-auto-rows
       */
      "auto-rows": [{
        "auto-rows": scaleGridAutoColsRows()
      }],
      /**
       * Gap
       * @see https://tailwindcss.com/docs/gap
       */
      gap: [{
        gap: scaleUnambiguousSpacing()
      }],
      /**
       * Gap X
       * @see https://tailwindcss.com/docs/gap
       */
      "gap-x": [{
        "gap-x": scaleUnambiguousSpacing()
      }],
      /**
       * Gap Y
       * @see https://tailwindcss.com/docs/gap
       */
      "gap-y": [{
        "gap-y": scaleUnambiguousSpacing()
      }],
      /**
       * Justify Content
       * @see https://tailwindcss.com/docs/justify-content
       */
      "justify-content": [{
        justify: [...scaleAlignPrimaryAxis(), "normal"]
      }],
      /**
       * Justify Items
       * @see https://tailwindcss.com/docs/justify-items
       */
      "justify-items": [{
        "justify-items": [...scaleAlignSecondaryAxis(), "normal"]
      }],
      /**
       * Justify Self
       * @see https://tailwindcss.com/docs/justify-self
       */
      "justify-self": [{
        "justify-self": ["auto", ...scaleAlignSecondaryAxis()]
      }],
      /**
       * Align Content
       * @see https://tailwindcss.com/docs/align-content
       */
      "align-content": [{
        content: ["normal", ...scaleAlignPrimaryAxis()]
      }],
      /**
       * Align Items
       * @see https://tailwindcss.com/docs/align-items
       */
      "align-items": [{
        items: [...scaleAlignSecondaryAxis(), {
          baseline: ["", "last"]
        }]
      }],
      /**
       * Align Self
       * @see https://tailwindcss.com/docs/align-self
       */
      "align-self": [{
        self: ["auto", ...scaleAlignSecondaryAxis(), {
          baseline: ["", "last"]
        }]
      }],
      /**
       * Place Content
       * @see https://tailwindcss.com/docs/place-content
       */
      "place-content": [{
        "place-content": scaleAlignPrimaryAxis()
      }],
      /**
       * Place Items
       * @see https://tailwindcss.com/docs/place-items
       */
      "place-items": [{
        "place-items": [...scaleAlignSecondaryAxis(), "baseline"]
      }],
      /**
       * Place Self
       * @see https://tailwindcss.com/docs/place-self
       */
      "place-self": [{
        "place-self": ["auto", ...scaleAlignSecondaryAxis()]
      }],
      // Spacing
      /**
       * Padding
       * @see https://tailwindcss.com/docs/padding
       */
      p: [{
        p: scaleUnambiguousSpacing()
      }],
      /**
       * Padding X
       * @see https://tailwindcss.com/docs/padding
       */
      px: [{
        px: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Y
       * @see https://tailwindcss.com/docs/padding
       */
      py: [{
        py: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Start
       * @see https://tailwindcss.com/docs/padding
       */
      ps: [{
        ps: scaleUnambiguousSpacing()
      }],
      /**
       * Padding End
       * @see https://tailwindcss.com/docs/padding
       */
      pe: [{
        pe: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Top
       * @see https://tailwindcss.com/docs/padding
       */
      pt: [{
        pt: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Right
       * @see https://tailwindcss.com/docs/padding
       */
      pr: [{
        pr: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Bottom
       * @see https://tailwindcss.com/docs/padding
       */
      pb: [{
        pb: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Left
       * @see https://tailwindcss.com/docs/padding
       */
      pl: [{
        pl: scaleUnambiguousSpacing()
      }],
      /**
       * Margin
       * @see https://tailwindcss.com/docs/margin
       */
      m: [{
        m: scaleMargin()
      }],
      /**
       * Margin X
       * @see https://tailwindcss.com/docs/margin
       */
      mx: [{
        mx: scaleMargin()
      }],
      /**
       * Margin Y
       * @see https://tailwindcss.com/docs/margin
       */
      my: [{
        my: scaleMargin()
      }],
      /**
       * Margin Start
       * @see https://tailwindcss.com/docs/margin
       */
      ms: [{
        ms: scaleMargin()
      }],
      /**
       * Margin End
       * @see https://tailwindcss.com/docs/margin
       */
      me: [{
        me: scaleMargin()
      }],
      /**
       * Margin Top
       * @see https://tailwindcss.com/docs/margin
       */
      mt: [{
        mt: scaleMargin()
      }],
      /**
       * Margin Right
       * @see https://tailwindcss.com/docs/margin
       */
      mr: [{
        mr: scaleMargin()
      }],
      /**
       * Margin Bottom
       * @see https://tailwindcss.com/docs/margin
       */
      mb: [{
        mb: scaleMargin()
      }],
      /**
       * Margin Left
       * @see https://tailwindcss.com/docs/margin
       */
      ml: [{
        ml: scaleMargin()
      }],
      /**
       * Space Between X
       * @see https://tailwindcss.com/docs/margin#adding-space-between-children
       */
      "space-x": [{
        "space-x": scaleUnambiguousSpacing()
      }],
      /**
       * Space Between X Reverse
       * @see https://tailwindcss.com/docs/margin#adding-space-between-children
       */
      "space-x-reverse": ["space-x-reverse"],
      /**
       * Space Between Y
       * @see https://tailwindcss.com/docs/margin#adding-space-between-children
       */
      "space-y": [{
        "space-y": scaleUnambiguousSpacing()
      }],
      /**
       * Space Between Y Reverse
       * @see https://tailwindcss.com/docs/margin#adding-space-between-children
       */
      "space-y-reverse": ["space-y-reverse"],
      // --------------
      // --- Sizing ---
      // --------------
      /**
       * Size
       * @see https://tailwindcss.com/docs/width#setting-both-width-and-height
       */
      size: [{
        size: scaleSizing()
      }],
      /**
       * Width
       * @see https://tailwindcss.com/docs/width
       */
      w: [{
        w: [themeContainer, "screen", ...scaleSizing()]
      }],
      /**
       * Min-Width
       * @see https://tailwindcss.com/docs/min-width
       */
      "min-w": [{
        "min-w": [
          themeContainer,
          "screen",
          /** Deprecated. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */
          "none",
          ...scaleSizing()
        ]
      }],
      /**
       * Max-Width
       * @see https://tailwindcss.com/docs/max-width
       */
      "max-w": [{
        "max-w": [
          themeContainer,
          "screen",
          "none",
          /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */
          "prose",
          /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */
          {
            screen: [themeBreakpoint]
          },
          ...scaleSizing()
        ]
      }],
      /**
       * Height
       * @see https://tailwindcss.com/docs/height
       */
      h: [{
        h: ["screen", "lh", ...scaleSizing()]
      }],
      /**
       * Min-Height
       * @see https://tailwindcss.com/docs/min-height
       */
      "min-h": [{
        "min-h": ["screen", "lh", "none", ...scaleSizing()]
      }],
      /**
       * Max-Height
       * @see https://tailwindcss.com/docs/max-height
       */
      "max-h": [{
        "max-h": ["screen", "lh", ...scaleSizing()]
      }],
      // ------------------
      // --- Typography ---
      // ------------------
      /**
       * Font Size
       * @see https://tailwindcss.com/docs/font-size
       */
      "font-size": [{
        text: ["base", themeText, isArbitraryVariableLength, isArbitraryLength]
      }],
      /**
       * Font Smoothing
       * @see https://tailwindcss.com/docs/font-smoothing
       */
      "font-smoothing": ["antialiased", "subpixel-antialiased"],
      /**
       * Font Style
       * @see https://tailwindcss.com/docs/font-style
       */
      "font-style": ["italic", "not-italic"],
      /**
       * Font Weight
       * @see https://tailwindcss.com/docs/font-weight
       */
      "font-weight": [{
        font: [themeFontWeight, isArbitraryVariable, isArbitraryNumber]
      }],
      /**
       * Font Stretch
       * @see https://tailwindcss.com/docs/font-stretch
       */
      "font-stretch": [{
        "font-stretch": ["ultra-condensed", "extra-condensed", "condensed", "semi-condensed", "normal", "semi-expanded", "expanded", "extra-expanded", "ultra-expanded", isPercent, isArbitraryValue]
      }],
      /**
       * Font Family
       * @see https://tailwindcss.com/docs/font-family
       */
      "font-family": [{
        font: [isArbitraryVariableFamilyName, isArbitraryValue, themeFont]
      }],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-normal": ["normal-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-ordinal": ["ordinal"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-slashed-zero": ["slashed-zero"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-figure": ["lining-nums", "oldstyle-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-spacing": ["proportional-nums", "tabular-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-fraction": ["diagonal-fractions", "stacked-fractions"],
      /**
       * Letter Spacing
       * @see https://tailwindcss.com/docs/letter-spacing
       */
      tracking: [{
        tracking: [themeTracking, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Line Clamp
       * @see https://tailwindcss.com/docs/line-clamp
       */
      "line-clamp": [{
        "line-clamp": [isNumber, "none", isArbitraryVariable, isArbitraryNumber]
      }],
      /**
       * Line Height
       * @see https://tailwindcss.com/docs/line-height
       */
      leading: [{
        leading: [
          /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */
          themeLeading,
          ...scaleUnambiguousSpacing()
        ]
      }],
      /**
       * List Style Image
       * @see https://tailwindcss.com/docs/list-style-image
       */
      "list-image": [{
        "list-image": ["none", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * List Style Position
       * @see https://tailwindcss.com/docs/list-style-position
       */
      "list-style-position": [{
        list: ["inside", "outside"]
      }],
      /**
       * List Style Type
       * @see https://tailwindcss.com/docs/list-style-type
       */
      "list-style-type": [{
        list: ["disc", "decimal", "none", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Text Alignment
       * @see https://tailwindcss.com/docs/text-align
       */
      "text-alignment": [{
        text: ["left", "center", "right", "justify", "start", "end"]
      }],
      /**
       * Placeholder Color
       * @deprecated since Tailwind CSS v3.0.0
       * @see https://v3.tailwindcss.com/docs/placeholder-color
       */
      "placeholder-color": [{
        placeholder: scaleColor()
      }],
      /**
       * Text Color
       * @see https://tailwindcss.com/docs/text-color
       */
      "text-color": [{
        text: scaleColor()
      }],
      /**
       * Text Decoration
       * @see https://tailwindcss.com/docs/text-decoration
       */
      "text-decoration": ["underline", "overline", "line-through", "no-underline"],
      /**
       * Text Decoration Style
       * @see https://tailwindcss.com/docs/text-decoration-style
       */
      "text-decoration-style": [{
        decoration: [...scaleLineStyle(), "wavy"]
      }],
      /**
       * Text Decoration Thickness
       * @see https://tailwindcss.com/docs/text-decoration-thickness
       */
      "text-decoration-thickness": [{
        decoration: [isNumber, "from-font", "auto", isArbitraryVariable, isArbitraryLength]
      }],
      /**
       * Text Decoration Color
       * @see https://tailwindcss.com/docs/text-decoration-color
       */
      "text-decoration-color": [{
        decoration: scaleColor()
      }],
      /**
       * Text Underline Offset
       * @see https://tailwindcss.com/docs/text-underline-offset
       */
      "underline-offset": [{
        "underline-offset": [isNumber, "auto", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Text Transform
       * @see https://tailwindcss.com/docs/text-transform
       */
      "text-transform": ["uppercase", "lowercase", "capitalize", "normal-case"],
      /**
       * Text Overflow
       * @see https://tailwindcss.com/docs/text-overflow
       */
      "text-overflow": ["truncate", "text-ellipsis", "text-clip"],
      /**
       * Text Wrap
       * @see https://tailwindcss.com/docs/text-wrap
       */
      "text-wrap": [{
        text: ["wrap", "nowrap", "balance", "pretty"]
      }],
      /**
       * Text Indent
       * @see https://tailwindcss.com/docs/text-indent
       */
      indent: [{
        indent: scaleUnambiguousSpacing()
      }],
      /**
       * Vertical Alignment
       * @see https://tailwindcss.com/docs/vertical-align
       */
      "vertical-align": [{
        align: ["baseline", "top", "middle", "bottom", "text-top", "text-bottom", "sub", "super", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Whitespace
       * @see https://tailwindcss.com/docs/whitespace
       */
      whitespace: [{
        whitespace: ["normal", "nowrap", "pre", "pre-line", "pre-wrap", "break-spaces"]
      }],
      /**
       * Word Break
       * @see https://tailwindcss.com/docs/word-break
       */
      break: [{
        break: ["normal", "words", "all", "keep"]
      }],
      /**
       * Overflow Wrap
       * @see https://tailwindcss.com/docs/overflow-wrap
       */
      wrap: [{
        wrap: ["break-word", "anywhere", "normal"]
      }],
      /**
       * Hyphens
       * @see https://tailwindcss.com/docs/hyphens
       */
      hyphens: [{
        hyphens: ["none", "manual", "auto"]
      }],
      /**
       * Content
       * @see https://tailwindcss.com/docs/content
       */
      content: [{
        content: ["none", isArbitraryVariable, isArbitraryValue]
      }],
      // -------------------
      // --- Backgrounds ---
      // -------------------
      /**
       * Background Attachment
       * @see https://tailwindcss.com/docs/background-attachment
       */
      "bg-attachment": [{
        bg: ["fixed", "local", "scroll"]
      }],
      /**
       * Background Clip
       * @see https://tailwindcss.com/docs/background-clip
       */
      "bg-clip": [{
        "bg-clip": ["border", "padding", "content", "text"]
      }],
      /**
       * Background Origin
       * @see https://tailwindcss.com/docs/background-origin
       */
      "bg-origin": [{
        "bg-origin": ["border", "padding", "content"]
      }],
      /**
       * Background Position
       * @see https://tailwindcss.com/docs/background-position
       */
      "bg-position": [{
        bg: scaleBgPosition()
      }],
      /**
       * Background Repeat
       * @see https://tailwindcss.com/docs/background-repeat
       */
      "bg-repeat": [{
        bg: scaleBgRepeat()
      }],
      /**
       * Background Size
       * @see https://tailwindcss.com/docs/background-size
       */
      "bg-size": [{
        bg: scaleBgSize()
      }],
      /**
       * Background Image
       * @see https://tailwindcss.com/docs/background-image
       */
      "bg-image": [{
        bg: ["none", {
          linear: [{
            to: ["t", "tr", "r", "br", "b", "bl", "l", "tl"]
          }, isInteger, isArbitraryVariable, isArbitraryValue],
          radial: ["", isArbitraryVariable, isArbitraryValue],
          conic: [isInteger, isArbitraryVariable, isArbitraryValue]
        }, isArbitraryVariableImage, isArbitraryImage]
      }],
      /**
       * Background Color
       * @see https://tailwindcss.com/docs/background-color
       */
      "bg-color": [{
        bg: scaleColor()
      }],
      /**
       * Gradient Color Stops From Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-from-pos": [{
        from: scaleGradientStopPosition()
      }],
      /**
       * Gradient Color Stops Via Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-via-pos": [{
        via: scaleGradientStopPosition()
      }],
      /**
       * Gradient Color Stops To Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-to-pos": [{
        to: scaleGradientStopPosition()
      }],
      /**
       * Gradient Color Stops From
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-from": [{
        from: scaleColor()
      }],
      /**
       * Gradient Color Stops Via
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-via": [{
        via: scaleColor()
      }],
      /**
       * Gradient Color Stops To
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-to": [{
        to: scaleColor()
      }],
      // ---------------
      // --- Borders ---
      // ---------------
      /**
       * Border Radius
       * @see https://tailwindcss.com/docs/border-radius
       */
      rounded: [{
        rounded: scaleRadius()
      }],
      /**
       * Border Radius Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-s": [{
        "rounded-s": scaleRadius()
      }],
      /**
       * Border Radius End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-e": [{
        "rounded-e": scaleRadius()
      }],
      /**
       * Border Radius Top
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-t": [{
        "rounded-t": scaleRadius()
      }],
      /**
       * Border Radius Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-r": [{
        "rounded-r": scaleRadius()
      }],
      /**
       * Border Radius Bottom
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-b": [{
        "rounded-b": scaleRadius()
      }],
      /**
       * Border Radius Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-l": [{
        "rounded-l": scaleRadius()
      }],
      /**
       * Border Radius Start Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-ss": [{
        "rounded-ss": scaleRadius()
      }],
      /**
       * Border Radius Start End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-se": [{
        "rounded-se": scaleRadius()
      }],
      /**
       * Border Radius End End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-ee": [{
        "rounded-ee": scaleRadius()
      }],
      /**
       * Border Radius End Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-es": [{
        "rounded-es": scaleRadius()
      }],
      /**
       * Border Radius Top Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-tl": [{
        "rounded-tl": scaleRadius()
      }],
      /**
       * Border Radius Top Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-tr": [{
        "rounded-tr": scaleRadius()
      }],
      /**
       * Border Radius Bottom Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-br": [{
        "rounded-br": scaleRadius()
      }],
      /**
       * Border Radius Bottom Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-bl": [{
        "rounded-bl": scaleRadius()
      }],
      /**
       * Border Width
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w": [{
        border: scaleBorderWidth()
      }],
      /**
       * Border Width X
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-x": [{
        "border-x": scaleBorderWidth()
      }],
      /**
       * Border Width Y
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-y": [{
        "border-y": scaleBorderWidth()
      }],
      /**
       * Border Width Start
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-s": [{
        "border-s": scaleBorderWidth()
      }],
      /**
       * Border Width End
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-e": [{
        "border-e": scaleBorderWidth()
      }],
      /**
       * Border Width Top
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-t": [{
        "border-t": scaleBorderWidth()
      }],
      /**
       * Border Width Right
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-r": [{
        "border-r": scaleBorderWidth()
      }],
      /**
       * Border Width Bottom
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-b": [{
        "border-b": scaleBorderWidth()
      }],
      /**
       * Border Width Left
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-l": [{
        "border-l": scaleBorderWidth()
      }],
      /**
       * Divide Width X
       * @see https://tailwindcss.com/docs/border-width#between-children
       */
      "divide-x": [{
        "divide-x": scaleBorderWidth()
      }],
      /**
       * Divide Width X Reverse
       * @see https://tailwindcss.com/docs/border-width#between-children
       */
      "divide-x-reverse": ["divide-x-reverse"],
      /**
       * Divide Width Y
       * @see https://tailwindcss.com/docs/border-width#between-children
       */
      "divide-y": [{
        "divide-y": scaleBorderWidth()
      }],
      /**
       * Divide Width Y Reverse
       * @see https://tailwindcss.com/docs/border-width#between-children
       */
      "divide-y-reverse": ["divide-y-reverse"],
      /**
       * Border Style
       * @see https://tailwindcss.com/docs/border-style
       */
      "border-style": [{
        border: [...scaleLineStyle(), "hidden", "none"]
      }],
      /**
       * Divide Style
       * @see https://tailwindcss.com/docs/border-style#setting-the-divider-style
       */
      "divide-style": [{
        divide: [...scaleLineStyle(), "hidden", "none"]
      }],
      /**
       * Border Color
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color": [{
        border: scaleColor()
      }],
      /**
       * Border Color X
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-x": [{
        "border-x": scaleColor()
      }],
      /**
       * Border Color Y
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-y": [{
        "border-y": scaleColor()
      }],
      /**
       * Border Color S
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-s": [{
        "border-s": scaleColor()
      }],
      /**
       * Border Color E
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-e": [{
        "border-e": scaleColor()
      }],
      /**
       * Border Color Top
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-t": [{
        "border-t": scaleColor()
      }],
      /**
       * Border Color Right
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-r": [{
        "border-r": scaleColor()
      }],
      /**
       * Border Color Bottom
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-b": [{
        "border-b": scaleColor()
      }],
      /**
       * Border Color Left
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-l": [{
        "border-l": scaleColor()
      }],
      /**
       * Divide Color
       * @see https://tailwindcss.com/docs/divide-color
       */
      "divide-color": [{
        divide: scaleColor()
      }],
      /**
       * Outline Style
       * @see https://tailwindcss.com/docs/outline-style
       */
      "outline-style": [{
        outline: [...scaleLineStyle(), "none", "hidden"]
      }],
      /**
       * Outline Offset
       * @see https://tailwindcss.com/docs/outline-offset
       */
      "outline-offset": [{
        "outline-offset": [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Outline Width
       * @see https://tailwindcss.com/docs/outline-width
       */
      "outline-w": [{
        outline: ["", isNumber, isArbitraryVariableLength, isArbitraryLength]
      }],
      /**
       * Outline Color
       * @see https://tailwindcss.com/docs/outline-color
       */
      "outline-color": [{
        outline: scaleColor()
      }],
      // ---------------
      // --- Effects ---
      // ---------------
      /**
       * Box Shadow
       * @see https://tailwindcss.com/docs/box-shadow
       */
      shadow: [{
        shadow: [
          // Deprecated since Tailwind CSS v4.0.0
          "",
          "none",
          themeShadow,
          isArbitraryVariableShadow,
          isArbitraryShadow
        ]
      }],
      /**
       * Box Shadow Color
       * @see https://tailwindcss.com/docs/box-shadow#setting-the-shadow-color
       */
      "shadow-color": [{
        shadow: scaleColor()
      }],
      /**
       * Inset Box Shadow
       * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-shadow
       */
      "inset-shadow": [{
        "inset-shadow": ["none", themeInsetShadow, isArbitraryVariableShadow, isArbitraryShadow]
      }],
      /**
       * Inset Box Shadow Color
       * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-shadow-color
       */
      "inset-shadow-color": [{
        "inset-shadow": scaleColor()
      }],
      /**
       * Ring Width
       * @see https://tailwindcss.com/docs/box-shadow#adding-a-ring
       */
      "ring-w": [{
        ring: scaleBorderWidth()
      }],
      /**
       * Ring Width Inset
       * @see https://v3.tailwindcss.com/docs/ring-width#inset-rings
       * @deprecated since Tailwind CSS v4.0.0
       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158
       */
      "ring-w-inset": ["ring-inset"],
      /**
       * Ring Color
       * @see https://tailwindcss.com/docs/box-shadow#setting-the-ring-color
       */
      "ring-color": [{
        ring: scaleColor()
      }],
      /**
       * Ring Offset Width
       * @see https://v3.tailwindcss.com/docs/ring-offset-width
       * @deprecated since Tailwind CSS v4.0.0
       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158
       */
      "ring-offset-w": [{
        "ring-offset": [isNumber, isArbitraryLength]
      }],
      /**
       * Ring Offset Color
       * @see https://v3.tailwindcss.com/docs/ring-offset-color
       * @deprecated since Tailwind CSS v4.0.0
       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158
       */
      "ring-offset-color": [{
        "ring-offset": scaleColor()
      }],
      /**
       * Inset Ring Width
       * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-ring
       */
      "inset-ring-w": [{
        "inset-ring": scaleBorderWidth()
      }],
      /**
       * Inset Ring Color
       * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-ring-color
       */
      "inset-ring-color": [{
        "inset-ring": scaleColor()
      }],
      /**
       * Text Shadow
       * @see https://tailwindcss.com/docs/text-shadow
       */
      "text-shadow": [{
        "text-shadow": ["none", themeTextShadow, isArbitraryVariableShadow, isArbitraryShadow]
      }],
      /**
       * Text Shadow Color
       * @see https://tailwindcss.com/docs/text-shadow#setting-the-shadow-color
       */
      "text-shadow-color": [{
        "text-shadow": scaleColor()
      }],
      /**
       * Opacity
       * @see https://tailwindcss.com/docs/opacity
       */
      opacity: [{
        opacity: [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Mix Blend Mode
       * @see https://tailwindcss.com/docs/mix-blend-mode
       */
      "mix-blend": [{
        "mix-blend": [...scaleBlendMode(), "plus-darker", "plus-lighter"]
      }],
      /**
       * Background Blend Mode
       * @see https://tailwindcss.com/docs/background-blend-mode
       */
      "bg-blend": [{
        "bg-blend": scaleBlendMode()
      }],
      /**
       * Mask Clip
       * @see https://tailwindcss.com/docs/mask-clip
       */
      "mask-clip": [{
        "mask-clip": ["border", "padding", "content", "fill", "stroke", "view"]
      }, "mask-no-clip"],
      /**
       * Mask Composite
       * @see https://tailwindcss.com/docs/mask-composite
       */
      "mask-composite": [{
        mask: ["add", "subtract", "intersect", "exclude"]
      }],
      /**
       * Mask Image
       * @see https://tailwindcss.com/docs/mask-image
       */
      "mask-image-linear-pos": [{
        "mask-linear": [isNumber]
      }],
      "mask-image-linear-from-pos": [{
        "mask-linear-from": scaleMaskImagePosition()
      }],
      "mask-image-linear-to-pos": [{
        "mask-linear-to": scaleMaskImagePosition()
      }],
      "mask-image-linear-from-color": [{
        "mask-linear-from": scaleColor()
      }],
      "mask-image-linear-to-color": [{
        "mask-linear-to": scaleColor()
      }],
      "mask-image-t-from-pos": [{
        "mask-t-from": scaleMaskImagePosition()
      }],
      "mask-image-t-to-pos": [{
        "mask-t-to": scaleMaskImagePosition()
      }],
      "mask-image-t-from-color": [{
        "mask-t-from": scaleColor()
      }],
      "mask-image-t-to-color": [{
        "mask-t-to": scaleColor()
      }],
      "mask-image-r-from-pos": [{
        "mask-r-from": scaleMaskImagePosition()
      }],
      "mask-image-r-to-pos": [{
        "mask-r-to": scaleMaskImagePosition()
      }],
      "mask-image-r-from-color": [{
        "mask-r-from": scaleColor()
      }],
      "mask-image-r-to-color": [{
        "mask-r-to": scaleColor()
      }],
      "mask-image-b-from-pos": [{
        "mask-b-from": scaleMaskImagePosition()
      }],
      "mask-image-b-to-pos": [{
        "mask-b-to": scaleMaskImagePosition()
      }],
      "mask-image-b-from-color": [{
        "mask-b-from": scaleColor()
      }],
      "mask-image-b-to-color": [{
        "mask-b-to": scaleColor()
      }],
      "mask-image-l-from-pos": [{
        "mask-l-from": scaleMaskImagePosition()
      }],
      "mask-image-l-to-pos": [{
        "mask-l-to": scaleMaskImagePosition()
      }],
      "mask-image-l-from-color": [{
        "mask-l-from": scaleColor()
      }],
      "mask-image-l-to-color": [{
        "mask-l-to": scaleColor()
      }],
      "mask-image-x-from-pos": [{
        "mask-x-from": scaleMaskImagePosition()
      }],
      "mask-image-x-to-pos": [{
        "mask-x-to": scaleMaskImagePosition()
      }],
      "mask-image-x-from-color": [{
        "mask-x-from": scaleColor()
      }],
      "mask-image-x-to-color": [{
        "mask-x-to": scaleColor()
      }],
      "mask-image-y-from-pos": [{
        "mask-y-from": scaleMaskImagePosition()
      }],
      "mask-image-y-to-pos": [{
        "mask-y-to": scaleMaskImagePosition()
      }],
      "mask-image-y-from-color": [{
        "mask-y-from": scaleColor()
      }],
      "mask-image-y-to-color": [{
        "mask-y-to": scaleColor()
      }],
      "mask-image-radial": [{
        "mask-radial": [isArbitraryVariable, isArbitraryValue]
      }],
      "mask-image-radial-from-pos": [{
        "mask-radial-from": scaleMaskImagePosition()
      }],
      "mask-image-radial-to-pos": [{
        "mask-radial-to": scaleMaskImagePosition()
      }],
      "mask-image-radial-from-color": [{
        "mask-radial-from": scaleColor()
      }],
      "mask-image-radial-to-color": [{
        "mask-radial-to": scaleColor()
      }],
      "mask-image-radial-shape": [{
        "mask-radial": ["circle", "ellipse"]
      }],
      "mask-image-radial-size": [{
        "mask-radial": [{
          closest: ["side", "corner"],
          farthest: ["side", "corner"]
        }]
      }],
      "mask-image-radial-pos": [{
        "mask-radial-at": scalePosition()
      }],
      "mask-image-conic-pos": [{
        "mask-conic": [isNumber]
      }],
      "mask-image-conic-from-pos": [{
        "mask-conic-from": scaleMaskImagePosition()
      }],
      "mask-image-conic-to-pos": [{
        "mask-conic-to": scaleMaskImagePosition()
      }],
      "mask-image-conic-from-color": [{
        "mask-conic-from": scaleColor()
      }],
      "mask-image-conic-to-color": [{
        "mask-conic-to": scaleColor()
      }],
      /**
       * Mask Mode
       * @see https://tailwindcss.com/docs/mask-mode
       */
      "mask-mode": [{
        mask: ["alpha", "luminance", "match"]
      }],
      /**
       * Mask Origin
       * @see https://tailwindcss.com/docs/mask-origin
       */
      "mask-origin": [{
        "mask-origin": ["border", "padding", "content", "fill", "stroke", "view"]
      }],
      /**
       * Mask Position
       * @see https://tailwindcss.com/docs/mask-position
       */
      "mask-position": [{
        mask: scaleBgPosition()
      }],
      /**
       * Mask Repeat
       * @see https://tailwindcss.com/docs/mask-repeat
       */
      "mask-repeat": [{
        mask: scaleBgRepeat()
      }],
      /**
       * Mask Size
       * @see https://tailwindcss.com/docs/mask-size
       */
      "mask-size": [{
        mask: scaleBgSize()
      }],
      /**
       * Mask Type
       * @see https://tailwindcss.com/docs/mask-type
       */
      "mask-type": [{
        "mask-type": ["alpha", "luminance"]
      }],
      /**
       * Mask Image
       * @see https://tailwindcss.com/docs/mask-image
       */
      "mask-image": [{
        mask: ["none", isArbitraryVariable, isArbitraryValue]
      }],
      // ---------------
      // --- Filters ---
      // ---------------
      /**
       * Filter
       * @see https://tailwindcss.com/docs/filter
       */
      filter: [{
        filter: [
          // Deprecated since Tailwind CSS v3.0.0
          "",
          "none",
          isArbitraryVariable,
          isArbitraryValue
        ]
      }],
      /**
       * Blur
       * @see https://tailwindcss.com/docs/blur
       */
      blur: [{
        blur: scaleBlur()
      }],
      /**
       * Brightness
       * @see https://tailwindcss.com/docs/brightness
       */
      brightness: [{
        brightness: [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Contrast
       * @see https://tailwindcss.com/docs/contrast
       */
      contrast: [{
        contrast: [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Drop Shadow
       * @see https://tailwindcss.com/docs/drop-shadow
       */
      "drop-shadow": [{
        "drop-shadow": [
          // Deprecated since Tailwind CSS v4.0.0
          "",
          "none",
          themeDropShadow,
          isArbitraryVariableShadow,
          isArbitraryShadow
        ]
      }],
      /**
       * Drop Shadow Color
       * @see https://tailwindcss.com/docs/filter-drop-shadow#setting-the-shadow-color
       */
      "drop-shadow-color": [{
        "drop-shadow": scaleColor()
      }],
      /**
       * Grayscale
       * @see https://tailwindcss.com/docs/grayscale
       */
      grayscale: [{
        grayscale: ["", isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Hue Rotate
       * @see https://tailwindcss.com/docs/hue-rotate
       */
      "hue-rotate": [{
        "hue-rotate": [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Invert
       * @see https://tailwindcss.com/docs/invert
       */
      invert: [{
        invert: ["", isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Saturate
       * @see https://tailwindcss.com/docs/saturate
       */
      saturate: [{
        saturate: [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Sepia
       * @see https://tailwindcss.com/docs/sepia
       */
      sepia: [{
        sepia: ["", isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Filter
       * @see https://tailwindcss.com/docs/backdrop-filter
       */
      "backdrop-filter": [{
        "backdrop-filter": [
          // Deprecated since Tailwind CSS v3.0.0
          "",
          "none",
          isArbitraryVariable,
          isArbitraryValue
        ]
      }],
      /**
       * Backdrop Blur
       * @see https://tailwindcss.com/docs/backdrop-blur
       */
      "backdrop-blur": [{
        "backdrop-blur": scaleBlur()
      }],
      /**
       * Backdrop Brightness
       * @see https://tailwindcss.com/docs/backdrop-brightness
       */
      "backdrop-brightness": [{
        "backdrop-brightness": [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Contrast
       * @see https://tailwindcss.com/docs/backdrop-contrast
       */
      "backdrop-contrast": [{
        "backdrop-contrast": [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Grayscale
       * @see https://tailwindcss.com/docs/backdrop-grayscale
       */
      "backdrop-grayscale": [{
        "backdrop-grayscale": ["", isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Hue Rotate
       * @see https://tailwindcss.com/docs/backdrop-hue-rotate
       */
      "backdrop-hue-rotate": [{
        "backdrop-hue-rotate": [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Invert
       * @see https://tailwindcss.com/docs/backdrop-invert
       */
      "backdrop-invert": [{
        "backdrop-invert": ["", isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Opacity
       * @see https://tailwindcss.com/docs/backdrop-opacity
       */
      "backdrop-opacity": [{
        "backdrop-opacity": [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Saturate
       * @see https://tailwindcss.com/docs/backdrop-saturate
       */
      "backdrop-saturate": [{
        "backdrop-saturate": [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Sepia
       * @see https://tailwindcss.com/docs/backdrop-sepia
       */
      "backdrop-sepia": [{
        "backdrop-sepia": ["", isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      // --------------
      // --- Tables ---
      // --------------
      /**
       * Border Collapse
       * @see https://tailwindcss.com/docs/border-collapse
       */
      "border-collapse": [{
        border: ["collapse", "separate"]
      }],
      /**
       * Border Spacing
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing": [{
        "border-spacing": scaleUnambiguousSpacing()
      }],
      /**
       * Border Spacing X
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing-x": [{
        "border-spacing-x": scaleUnambiguousSpacing()
      }],
      /**
       * Border Spacing Y
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing-y": [{
        "border-spacing-y": scaleUnambiguousSpacing()
      }],
      /**
       * Table Layout
       * @see https://tailwindcss.com/docs/table-layout
       */
      "table-layout": [{
        table: ["auto", "fixed"]
      }],
      /**
       * Caption Side
       * @see https://tailwindcss.com/docs/caption-side
       */
      caption: [{
        caption: ["top", "bottom"]
      }],
      // ---------------------------------
      // --- Transitions and Animation ---
      // ---------------------------------
      /**
       * Transition Property
       * @see https://tailwindcss.com/docs/transition-property
       */
      transition: [{
        transition: ["", "all", "colors", "opacity", "shadow", "transform", "none", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Transition Behavior
       * @see https://tailwindcss.com/docs/transition-behavior
       */
      "transition-behavior": [{
        transition: ["normal", "discrete"]
      }],
      /**
       * Transition Duration
       * @see https://tailwindcss.com/docs/transition-duration
       */
      duration: [{
        duration: [isNumber, "initial", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Transition Timing Function
       * @see https://tailwindcss.com/docs/transition-timing-function
       */
      ease: [{
        ease: ["linear", "initial", themeEase, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Transition Delay
       * @see https://tailwindcss.com/docs/transition-delay
       */
      delay: [{
        delay: [isNumber, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Animation
       * @see https://tailwindcss.com/docs/animation
       */
      animate: [{
        animate: ["none", themeAnimate, isArbitraryVariable, isArbitraryValue]
      }],
      // ------------------
      // --- Transforms ---
      // ------------------
      /**
       * Backface Visibility
       * @see https://tailwindcss.com/docs/backface-visibility
       */
      backface: [{
        backface: ["hidden", "visible"]
      }],
      /**
       * Perspective
       * @see https://tailwindcss.com/docs/perspective
       */
      perspective: [{
        perspective: [themePerspective, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Perspective Origin
       * @see https://tailwindcss.com/docs/perspective-origin
       */
      "perspective-origin": [{
        "perspective-origin": scalePositionWithArbitrary()
      }],
      /**
       * Rotate
       * @see https://tailwindcss.com/docs/rotate
       */
      rotate: [{
        rotate: scaleRotate()
      }],
      /**
       * Rotate X
       * @see https://tailwindcss.com/docs/rotate
       */
      "rotate-x": [{
        "rotate-x": scaleRotate()
      }],
      /**
       * Rotate Y
       * @see https://tailwindcss.com/docs/rotate
       */
      "rotate-y": [{
        "rotate-y": scaleRotate()
      }],
      /**
       * Rotate Z
       * @see https://tailwindcss.com/docs/rotate
       */
      "rotate-z": [{
        "rotate-z": scaleRotate()
      }],
      /**
       * Scale
       * @see https://tailwindcss.com/docs/scale
       */
      scale: [{
        scale: scaleScale()
      }],
      /**
       * Scale X
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-x": [{
        "scale-x": scaleScale()
      }],
      /**
       * Scale Y
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-y": [{
        "scale-y": scaleScale()
      }],
      /**
       * Scale Z
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-z": [{
        "scale-z": scaleScale()
      }],
      /**
       * Scale 3D
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-3d": ["scale-3d"],
      /**
       * Skew
       * @see https://tailwindcss.com/docs/skew
       */
      skew: [{
        skew: scaleSkew()
      }],
      /**
       * Skew X
       * @see https://tailwindcss.com/docs/skew
       */
      "skew-x": [{
        "skew-x": scaleSkew()
      }],
      /**
       * Skew Y
       * @see https://tailwindcss.com/docs/skew
       */
      "skew-y": [{
        "skew-y": scaleSkew()
      }],
      /**
       * Transform
       * @see https://tailwindcss.com/docs/transform
       */
      transform: [{
        transform: [isArbitraryVariable, isArbitraryValue, "", "none", "gpu", "cpu"]
      }],
      /**
       * Transform Origin
       * @see https://tailwindcss.com/docs/transform-origin
       */
      "transform-origin": [{
        origin: scalePositionWithArbitrary()
      }],
      /**
       * Transform Style
       * @see https://tailwindcss.com/docs/transform-style
       */
      "transform-style": [{
        transform: ["3d", "flat"]
      }],
      /**
       * Translate
       * @see https://tailwindcss.com/docs/translate
       */
      translate: [{
        translate: scaleTranslate()
      }],
      /**
       * Translate X
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-x": [{
        "translate-x": scaleTranslate()
      }],
      /**
       * Translate Y
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-y": [{
        "translate-y": scaleTranslate()
      }],
      /**
       * Translate Z
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-z": [{
        "translate-z": scaleTranslate()
      }],
      /**
       * Translate None
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-none": ["translate-none"],
      // ---------------------
      // --- Interactivity ---
      // ---------------------
      /**
       * Accent Color
       * @see https://tailwindcss.com/docs/accent-color
       */
      accent: [{
        accent: scaleColor()
      }],
      /**
       * Appearance
       * @see https://tailwindcss.com/docs/appearance
       */
      appearance: [{
        appearance: ["none", "auto"]
      }],
      /**
       * Caret Color
       * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities
       */
      "caret-color": [{
        caret: scaleColor()
      }],
      /**
       * Color Scheme
       * @see https://tailwindcss.com/docs/color-scheme
       */
      "color-scheme": [{
        scheme: ["normal", "dark", "light", "light-dark", "only-dark", "only-light"]
      }],
      /**
       * Cursor
       * @see https://tailwindcss.com/docs/cursor
       */
      cursor: [{
        cursor: ["auto", "default", "pointer", "wait", "text", "move", "help", "not-allowed", "none", "context-menu", "progress", "cell", "crosshair", "vertical-text", "alias", "copy", "no-drop", "grab", "grabbing", "all-scroll", "col-resize", "row-resize", "n-resize", "e-resize", "s-resize", "w-resize", "ne-resize", "nw-resize", "se-resize", "sw-resize", "ew-resize", "ns-resize", "nesw-resize", "nwse-resize", "zoom-in", "zoom-out", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Field Sizing
       * @see https://tailwindcss.com/docs/field-sizing
       */
      "field-sizing": [{
        "field-sizing": ["fixed", "content"]
      }],
      /**
       * Pointer Events
       * @see https://tailwindcss.com/docs/pointer-events
       */
      "pointer-events": [{
        "pointer-events": ["auto", "none"]
      }],
      /**
       * Resize
       * @see https://tailwindcss.com/docs/resize
       */
      resize: [{
        resize: ["none", "", "y", "x"]
      }],
      /**
       * Scroll Behavior
       * @see https://tailwindcss.com/docs/scroll-behavior
       */
      "scroll-behavior": [{
        scroll: ["auto", "smooth"]
      }],
      /**
       * Scroll Margin
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-m": [{
        "scroll-m": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin X
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mx": [{
        "scroll-mx": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Y
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-my": [{
        "scroll-my": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Start
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-ms": [{
        "scroll-ms": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin End
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-me": [{
        "scroll-me": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Top
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mt": [{
        "scroll-mt": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Right
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mr": [{
        "scroll-mr": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Bottom
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mb": [{
        "scroll-mb": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Left
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-ml": [{
        "scroll-ml": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-p": [{
        "scroll-p": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding X
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-px": [{
        "scroll-px": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Y
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-py": [{
        "scroll-py": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Start
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-ps": [{
        "scroll-ps": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding End
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pe": [{
        "scroll-pe": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Top
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pt": [{
        "scroll-pt": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Right
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pr": [{
        "scroll-pr": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Bottom
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pb": [{
        "scroll-pb": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Left
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pl": [{
        "scroll-pl": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Snap Align
       * @see https://tailwindcss.com/docs/scroll-snap-align
       */
      "snap-align": [{
        snap: ["start", "end", "center", "align-none"]
      }],
      /**
       * Scroll Snap Stop
       * @see https://tailwindcss.com/docs/scroll-snap-stop
       */
      "snap-stop": [{
        snap: ["normal", "always"]
      }],
      /**
       * Scroll Snap Type
       * @see https://tailwindcss.com/docs/scroll-snap-type
       */
      "snap-type": [{
        snap: ["none", "x", "y", "both"]
      }],
      /**
       * Scroll Snap Type Strictness
       * @see https://tailwindcss.com/docs/scroll-snap-type
       */
      "snap-strictness": [{
        snap: ["mandatory", "proximity"]
      }],
      /**
       * Touch Action
       * @see https://tailwindcss.com/docs/touch-action
       */
      touch: [{
        touch: ["auto", "none", "manipulation"]
      }],
      /**
       * Touch Action X
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-x": [{
        "touch-pan": ["x", "left", "right"]
      }],
      /**
       * Touch Action Y
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-y": [{
        "touch-pan": ["y", "up", "down"]
      }],
      /**
       * Touch Action Pinch Zoom
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-pz": ["touch-pinch-zoom"],
      /**
       * User Select
       * @see https://tailwindcss.com/docs/user-select
       */
      select: [{
        select: ["none", "text", "all", "auto"]
      }],
      /**
       * Will Change
       * @see https://tailwindcss.com/docs/will-change
       */
      "will-change": [{
        "will-change": ["auto", "scroll", "contents", "transform", isArbitraryVariable, isArbitraryValue]
      }],
      // -----------
      // --- SVG ---
      // -----------
      /**
       * Fill
       * @see https://tailwindcss.com/docs/fill
       */
      fill: [{
        fill: ["none", ...scaleColor()]
      }],
      /**
       * Stroke Width
       * @see https://tailwindcss.com/docs/stroke-width
       */
      "stroke-w": [{
        stroke: [isNumber, isArbitraryVariableLength, isArbitraryLength, isArbitraryNumber]
      }],
      /**
       * Stroke
       * @see https://tailwindcss.com/docs/stroke
       */
      stroke: [{
        stroke: ["none", ...scaleColor()]
      }],
      // ---------------------
      // --- Accessibility ---
      // ---------------------
      /**
       * Forced Color Adjust
       * @see https://tailwindcss.com/docs/forced-color-adjust
       */
      "forced-color-adjust": [{
        "forced-color-adjust": ["auto", "none"]
      }]
    },
    conflictingClassGroups: {
      overflow: ["overflow-x", "overflow-y"],
      overscroll: ["overscroll-x", "overscroll-y"],
      inset: ["inset-x", "inset-y", "start", "end", "top", "right", "bottom", "left"],
      "inset-x": ["right", "left"],
      "inset-y": ["top", "bottom"],
      flex: ["basis", "grow", "shrink"],
      gap: ["gap-x", "gap-y"],
      p: ["px", "py", "ps", "pe", "pt", "pr", "pb", "pl"],
      px: ["pr", "pl"],
      py: ["pt", "pb"],
      m: ["mx", "my", "ms", "me", "mt", "mr", "mb", "ml"],
      mx: ["mr", "ml"],
      my: ["mt", "mb"],
      size: ["w", "h"],
      "font-size": ["leading"],
      "fvn-normal": ["fvn-ordinal", "fvn-slashed-zero", "fvn-figure", "fvn-spacing", "fvn-fraction"],
      "fvn-ordinal": ["fvn-normal"],
      "fvn-slashed-zero": ["fvn-normal"],
      "fvn-figure": ["fvn-normal"],
      "fvn-spacing": ["fvn-normal"],
      "fvn-fraction": ["fvn-normal"],
      "line-clamp": ["display", "overflow"],
      rounded: ["rounded-s", "rounded-e", "rounded-t", "rounded-r", "rounded-b", "rounded-l", "rounded-ss", "rounded-se", "rounded-ee", "rounded-es", "rounded-tl", "rounded-tr", "rounded-br", "rounded-bl"],
      "rounded-s": ["rounded-ss", "rounded-es"],
      "rounded-e": ["rounded-se", "rounded-ee"],
      "rounded-t": ["rounded-tl", "rounded-tr"],
      "rounded-r": ["rounded-tr", "rounded-br"],
      "rounded-b": ["rounded-br", "rounded-bl"],
      "rounded-l": ["rounded-tl", "rounded-bl"],
      "border-spacing": ["border-spacing-x", "border-spacing-y"],
      "border-w": ["border-w-x", "border-w-y", "border-w-s", "border-w-e", "border-w-t", "border-w-r", "border-w-b", "border-w-l"],
      "border-w-x": ["border-w-r", "border-w-l"],
      "border-w-y": ["border-w-t", "border-w-b"],
      "border-color": ["border-color-x", "border-color-y", "border-color-s", "border-color-e", "border-color-t", "border-color-r", "border-color-b", "border-color-l"],
      "border-color-x": ["border-color-r", "border-color-l"],
      "border-color-y": ["border-color-t", "border-color-b"],
      translate: ["translate-x", "translate-y", "translate-none"],
      "translate-none": ["translate", "translate-x", "translate-y", "translate-z"],
      "scroll-m": ["scroll-mx", "scroll-my", "scroll-ms", "scroll-me", "scroll-mt", "scroll-mr", "scroll-mb", "scroll-ml"],
      "scroll-mx": ["scroll-mr", "scroll-ml"],
      "scroll-my": ["scroll-mt", "scroll-mb"],
      "scroll-p": ["scroll-px", "scroll-py", "scroll-ps", "scroll-pe", "scroll-pt", "scroll-pr", "scroll-pb", "scroll-pl"],
      "scroll-px": ["scroll-pr", "scroll-pl"],
      "scroll-py": ["scroll-pt", "scroll-pb"],
      touch: ["touch-x", "touch-y", "touch-pz"],
      "touch-x": ["touch"],
      "touch-y": ["touch"],
      "touch-pz": ["touch"]
    },
    conflictingClassGroupModifiers: {
      "font-size": ["leading"]
    },
    orderSensitiveModifiers: ["*", "**", "after", "backdrop", "before", "details-content", "file", "first-letter", "first-line", "marker", "placeholder", "selection"]
  };
};
const twMerge = /* @__PURE__ */ createTailwindMerge(getDefaultConfig);
function cn$1(...inputs) {
  return twMerge(clsx(inputs));
}
function GlassCard({
  children,
  className,
  hoverEffect = true,
  variant = "warm",
  tiltEffect = false,
  ...props
}) {
  const variantClasses = variant === "warm" ? "bg-gradient-to-br from-white/80 to-orange-50/60" : "bg-gradient-to-br from-orange-50/80 to-pink-50/60";
  const hoverAnimation = hoverEffect ? {
    y: -8,
    rotateX: tiltEffect ? 2 : 0,
    //  3D 
    rotateY: tiltEffect ? -1 : 0,
    scale: 1.01,
    boxShadow: "0 20px 50px -10px rgba(255, 159, 67, 0.3), 0 0 20px rgba(255, 159, 67, 0.1)",
    borderColor: "rgba(255, 159, 67, 0.5)",
    transition: {
      type: "spring",
      stiffness: 400,
      damping: 25
    }
  } : void 0;
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    motion.div,
    {
      className: cn$1("glass-card p-6", variantClasses, className),
      style: { transformStyle: tiltEffect ? "preserve-3d" : void 0 },
      whileHover: hoverAnimation,
      whileTap: hoverEffect ? { scale: 0.98 } : {},
      initial: { opacity: 0, y: 20 },
      whileInView: { opacity: 1, y: 0 },
      viewport: { once: true },
      transition: { duration: 0.5 },
      ...props,
      children
    }
  );
}
const toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase();
const toCamelCase = (string) => string.replace(
  /^([A-Z])|[\s-_]+(\w)/g,
  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()
);
const toPascalCase = (string) => {
  const camelCase = toCamelCase(string);
  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);
};
const mergeClasses = (...classes) => classes.filter((className, index2, array) => {
  return Boolean(className) && className.trim() !== "" && array.indexOf(className) === index2;
}).join(" ").trim();
const hasA11yProp = (props) => {
  for (const prop in props) {
    if (prop.startsWith("aria-") || prop === "role" || prop === "title") {
      return true;
    }
  }
};
var defaultAttributes = {
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  strokeWidth: 2,
  strokeLinecap: "round",
  strokeLinejoin: "round"
};
const Icon = reactExports.forwardRef(
  ({
    color: color2 = "currentColor",
    size = 24,
    strokeWidth = 2,
    absoluteStrokeWidth,
    className = "",
    children,
    iconNode,
    ...rest
  }, ref) => reactExports.createElement(
    "svg",
    {
      ref,
      ...defaultAttributes,
      width: size,
      height: size,
      stroke: color2,
      strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,
      className: mergeClasses("lucide", className),
      ...!children && !hasA11yProp(rest) && { "aria-hidden": "true" },
      ...rest
    },
    [
      ...iconNode.map(([tag, attrs]) => reactExports.createElement(tag, attrs)),
      ...Array.isArray(children) ? children : [children]
    ]
  )
);
const createLucideIcon = (iconName, iconNode) => {
  const Component = reactExports.forwardRef(
    ({ className, ...props }, ref) => reactExports.createElement(Icon, {
      ref,
      iconNode,
      className: mergeClasses(
        `lucide-${toKebabCase(toPascalCase(iconName))}`,
        `lucide-${iconName}`,
        className
      ),
      ...props
    })
  );
  Component.displayName = toPascalCase(iconName);
  return Component;
};
const __iconNode$1n = [
  [
    "path",
    {
      d: "M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",
      key: "169zse"
    }
  ]
];
const Activity = createLucideIcon("activity", __iconNode$1n);
const __iconNode$1m = [
  ["path", { d: "M12 6.528V3a1 1 0 0 1 1-1h0", key: "11qiee" }],
  [
    "path",
    {
      d: "M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",
      key: "110c12"
    }
  ]
];
const Apple = createLucideIcon("apple", __iconNode$1m);
const __iconNode$1l = [
  ["rect", { width: "20", height: "5", x: "2", y: "3", rx: "1", key: "1wp1u1" }],
  ["path", { d: "M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8", key: "1s80jp" }],
  ["path", { d: "M10 12h4", key: "a56b0p" }]
];
const Archive = createLucideIcon("archive", __iconNode$1l);
const __iconNode$1k = [
  ["path", { d: "m12 19-7-7 7-7", key: "1l729n" }],
  ["path", { d: "M19 12H5", key: "x3x0zl" }]
];
const ArrowLeft = createLucideIcon("arrow-left", __iconNode$1k);
const __iconNode$1j = [
  ["path", { d: "M5 12h14", key: "1ays0h" }],
  ["path", { d: "m12 5 7 7-7 7", key: "xquz4c" }]
];
const ArrowRight = createLucideIcon("arrow-right", __iconNode$1j);
const __iconNode$1i = [
  ["path", { d: "M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5", key: "1u7htd" }],
  ["path", { d: "M15 12h.01", key: "1k8ypt" }],
  [
    "path",
    {
      d: "M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",
      key: "11xh7x"
    }
  ],
  ["path", { d: "M9 12h.01", key: "157uk2" }]
];
const Baby = createLucideIcon("baby", __iconNode$1i);
const __iconNode$1h = [
  [
    "path",
    { d: "M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z", key: "1ol0lm" }
  ],
  ["path", { d: "M8 10h8", key: "c7uz4u" }],
  ["path", { d: "M8 18h8", key: "1no2b1" }],
  ["path", { d: "M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6", key: "1fr6do" }],
  ["path", { d: "M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2", key: "donm21" }]
];
const Backpack = createLucideIcon("backpack", __iconNode$1h);
const __iconNode$1g = [
  ["path", { d: "M10.268 21a2 2 0 0 0 3.464 0", key: "vwvbt9" }],
  [
    "path",
    {
      d: "M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",
      key: "11g9vi"
    }
  ]
];
const Bell = createLucideIcon("bell", __iconNode$1g);
const __iconNode$1f = [
  [
    "path",
    {
      d: "M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",
      key: "k3hazp"
    }
  ]
];
const Book = createLucideIcon("book", __iconNode$1f);
const __iconNode$1e = [
  ["path", { d: "M12 18V5", key: "adv99a" }],
  ["path", { d: "M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4", key: "1e3is1" }],
  ["path", { d: "M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5", key: "1gqd8o" }],
  ["path", { d: "M17.997 5.125a4 4 0 0 1 2.526 5.77", key: "iwvgf7" }],
  ["path", { d: "M18 18a4 4 0 0 0 2-7.464", key: "efp6ie" }],
  ["path", { d: "M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517", key: "1gq6am" }],
  ["path", { d: "M6 18a4 4 0 0 1-2-7.464", key: "k1g0md" }],
  ["path", { d: "M6.003 5.125a4 4 0 0 0-2.526 5.77", key: "q97ue3" }]
];
const Brain = createLucideIcon("brain", __iconNode$1e);
const __iconNode$1d = [
  ["path", { d: "M8 2v4", key: "1cmpym" }],
  ["path", { d: "M16 2v4", key: "4m81vk" }],
  ["rect", { width: "18", height: "18", x: "3", y: "4", rx: "2", key: "1hopcy" }],
  ["path", { d: "M3 10h18", key: "8toen8" }]
];
const Calendar = createLucideIcon("calendar", __iconNode$1d);
const __iconNode$1c = [["path", { d: "M20 6 9 17l-5-5", key: "1gmf2c" }]];
const Check = createLucideIcon("check", __iconNode$1c);
const __iconNode$1b = [["path", { d: "m9 18 6-6-6-6", key: "mthhwq" }]];
const ChevronRight = createLucideIcon("chevron-right", __iconNode$1b);
const __iconNode$1a = [
  ["path", { d: "M10.88 21.94 15.46 14", key: "xkve6t" }],
  ["path", { d: "M21.17 8H12", key: "19dcdn" }],
  ["path", { d: "M3.95 6.06 8.54 14", key: "g8jz9m" }],
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["circle", { cx: "12", cy: "12", r: "4", key: "4exip2" }]
];
const Chromium = createLucideIcon("chromium", __iconNode$1a);
const __iconNode$19 = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["line", { x1: "12", x2: "12", y1: "8", y2: "12", key: "1pkeuh" }],
  ["line", { x1: "12", x2: "12.01", y1: "16", y2: "16", key: "4dfq90" }]
];
const CircleAlert = createLucideIcon("circle-alert", __iconNode$19);
const __iconNode$18 = [
  ["path", { d: "M21.801 10A10 10 0 1 1 17 3.335", key: "yps3ct" }],
  ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]
];
const CircleCheckBig = createLucideIcon("circle-check-big", __iconNode$18);
const __iconNode$17 = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]
];
const CircleCheck = createLucideIcon("circle-check", __iconNode$17);
const __iconNode$16 = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "m15 9-6 6", key: "1uzhvr" }],
  ["path", { d: "m9 9 6 6", key: "z0biqf" }]
];
const CircleX = createLucideIcon("circle-x", __iconNode$16);
const __iconNode$15 = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]];
const Circle = createLucideIcon("circle", __iconNode$15);
const __iconNode$14 = [
  ["path", { d: "M12 6v6l4 2", key: "mmk7yg" }],
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]
];
const Clock = createLucideIcon("clock", __iconNode$14);
const __iconNode$13 = [
  ["circle", { cx: "8", cy: "8", r: "6", key: "3yglwk" }],
  ["path", { d: "M18.09 10.37A6 6 0 1 1 10.34 18", key: "t5s6rm" }],
  ["path", { d: "M7 6h1v4", key: "1obek4" }],
  ["path", { d: "m16.71 13.88.7.71-2.82 2.82", key: "1rbuyh" }]
];
const Coins = createLucideIcon("coins", __iconNode$13);
const __iconNode$12 = [
  ["path", { d: "M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5", key: "laymnq" }],
  ["path", { d: "M8.5 8.5v.01", key: "ue8clq" }],
  ["path", { d: "M16 15.5v.01", key: "14dtrp" }],
  ["path", { d: "M12 12v.01", key: "u5ubse" }],
  ["path", { d: "M11 17v.01", key: "1hyl5a" }],
  ["path", { d: "M7 14v.01", key: "uct60s" }]
];
const Cookie = createLucideIcon("cookie", __iconNode$12);
const __iconNode$11 = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M14.83 14.83a4 4 0 1 1 0-5.66", key: "1i56pz" }]
];
const Copyright = createLucideIcon("copyright", __iconNode$11);
const __iconNode$10 = [
  ["path", { d: "M12 20v2", key: "1lh1kg" }],
  ["path", { d: "M12 2v2", key: "tus03m" }],
  ["path", { d: "M17 20v2", key: "1rnc9c" }],
  ["path", { d: "M17 2v2", key: "11trls" }],
  ["path", { d: "M2 12h2", key: "1t8f8n" }],
  ["path", { d: "M2 17h2", key: "7oei6x" }],
  ["path", { d: "M2 7h2", key: "asdhe0" }],
  ["path", { d: "M20 12h2", key: "1q8mjw" }],
  ["path", { d: "M20 17h2", key: "1fpfkl" }],
  ["path", { d: "M20 7h2", key: "1o8tra" }],
  ["path", { d: "M7 20v2", key: "4gnj0m" }],
  ["path", { d: "M7 2v2", key: "1i4yhu" }],
  ["rect", { x: "4", y: "4", width: "16", height: "16", rx: "2", key: "1vbyd7" }],
  ["rect", { x: "8", y: "8", width: "8", height: "8", rx: "1", key: "z9xiuo" }]
];
const Cpu = createLucideIcon("cpu", __iconNode$10);
const __iconNode$$ = [
  ["rect", { width: "20", height: "14", x: "2", y: "5", rx: "2", key: "ynyp8z" }],
  ["line", { x1: "2", x2: "22", y1: "10", y2: "10", key: "1b3vmo" }]
];
const CreditCard = createLucideIcon("credit-card", __iconNode$$);
const __iconNode$_ = [
  [
    "path",
    {
      d: "M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",
      key: "1vdc57"
    }
  ],
  ["path", { d: "M5 21h14", key: "11awu3" }]
];
const Crown = createLucideIcon("crown", __iconNode$_);
const __iconNode$Z = [
  ["ellipse", { cx: "12", cy: "5", rx: "9", ry: "3", key: "msslwz" }],
  ["path", { d: "M3 5V19A9 3 0 0 0 21 19V5", key: "1wlel7" }],
  ["path", { d: "M3 12A9 3 0 0 0 21 12", key: "mv7ke4" }]
];
const Database = createLucideIcon("database", __iconNode$Z);
const __iconNode$Y = [
  ["path", { d: "M12 15V3", key: "m9g1x1" }],
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }],
  ["path", { d: "m7 10 5 5 5-5", key: "brsn70" }]
];
const Download = createLucideIcon("download", __iconNode$Y);
const __iconNode$X = [
  ["circle", { cx: "12", cy: "12", r: "1", key: "41hilf" }],
  ["circle", { cx: "19", cy: "12", r: "1", key: "1wjl8i" }],
  ["circle", { cx: "5", cy: "12", r: "1", key: "1pcz8c" }]
];
const Ellipsis = createLucideIcon("ellipsis", __iconNode$X);
const __iconNode$W = [
  [
    "path",
    {
      d: "M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",
      key: "ct8e1f"
    }
  ],
  ["path", { d: "M14.084 14.158a3 3 0 0 1-4.242-4.242", key: "151rxh" }],
  [
    "path",
    {
      d: "M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",
      key: "13bj9a"
    }
  ],
  ["path", { d: "m2 2 20 20", key: "1ooewy" }]
];
const EyeOff = createLucideIcon("eye-off", __iconNode$W);
const __iconNode$V = [
  [
    "path",
    {
      d: "M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",
      key: "1nclc0"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
];
const Eye = createLucideIcon("eye", __iconNode$V);
const __iconNode$U = [
  [
    "path",
    {
      d: "M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",
      key: "1oefj6"
    }
  ],
  ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }],
  ["path", { d: "M10 9H8", key: "b1mrlr" }],
  ["path", { d: "M16 13H8", key: "t4e002" }],
  ["path", { d: "M16 17H8", key: "z1uh3a" }]
];
const FileText = createLucideIcon("file-text", __iconNode$U);
const __iconNode$T = [
  ["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", key: "afitv7" }],
  ["path", { d: "M7 3v18", key: "bbkbws" }],
  ["path", { d: "M3 7.5h4", key: "zfgn84" }],
  ["path", { d: "M3 12h18", key: "1i2n21" }],
  ["path", { d: "M3 16.5h4", key: "1230mu" }],
  ["path", { d: "M17 3v18", key: "in4fa5" }],
  ["path", { d: "M17 7.5h4", key: "myr1c1" }],
  ["path", { d: "M17 16.5h4", key: "go4c1d" }]
];
const Film = createLucideIcon("film", __iconNode$T);
const __iconNode$S = [
  [
    "path",
    {
      d: "M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",
      key: "sc7q7i"
    }
  ]
];
const Funnel = createLucideIcon("funnel", __iconNode$S);
const __iconNode$R = [
  ["line", { x1: "6", x2: "10", y1: "11", y2: "11", key: "1gktln" }],
  ["line", { x1: "8", x2: "8", y1: "9", y2: "13", key: "qnk9ow" }],
  ["line", { x1: "15", x2: "15.01", y1: "12", y2: "12", key: "krot7o" }],
  ["line", { x1: "18", x2: "18.01", y1: "10", y2: "10", key: "1lcuu1" }],
  [
    "path",
    {
      d: "M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",
      key: "mfqc10"
    }
  ]
];
const Gamepad2 = createLucideIcon("gamepad-2", __iconNode$R);
const __iconNode$Q = [
  ["path", { d: "m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381", key: "pgg06f" }],
  ["path", { d: "m16 16 6-6", key: "vzrcl6" }],
  ["path", { d: "m21.5 10.5-8-8", key: "a17d9x" }],
  ["path", { d: "m8 8 6-6", key: "18bi4p" }],
  ["path", { d: "m8.5 7.5 8 8", key: "1oyaui" }]
];
const Gavel = createLucideIcon("gavel", __iconNode$Q);
const __iconNode$P = [
  ["rect", { x: "3", y: "8", width: "18", height: "4", rx: "1", key: "bkv52" }],
  ["path", { d: "M12 8v13", key: "1c76mn" }],
  ["path", { d: "M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7", key: "6wjy6b" }],
  [
    "path",
    {
      d: "M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",
      key: "1ihvrl"
    }
  ]
];
const Gift = createLucideIcon("gift", __iconNode$P);
const __iconNode$O = [
  [
    "path",
    {
      d: "M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",
      key: "tonef"
    }
  ],
  ["path", { d: "M9 18c-4.51 2-5-2-7-2", key: "9comsn" }]
];
const Github = createLucideIcon("github", __iconNode$O);
const __iconNode$N = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20", key: "13o1zl" }],
  ["path", { d: "M2 12h20", key: "9i4pu4" }]
];
const Globe = createLucideIcon("globe", __iconNode$N);
const __iconNode$M = [
  [
    "path",
    {
      d: "M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",
      key: "mvr1a0"
    }
  ]
];
const Heart = createLucideIcon("heart", __iconNode$M);
const __iconNode$L = [
  ["path", { d: "M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "1357e3" }],
  ["path", { d: "M3 3v5h5", key: "1xhq8a" }],
  ["path", { d: "M12 7v5l4 2", key: "1fdv2h" }]
];
const History = createLucideIcon("history", __iconNode$L);
const __iconNode$K = [
  ["path", { d: "M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8", key: "5wwlr5" }],
  [
    "path",
    {
      d: "M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",
      key: "r6nss1"
    }
  ]
];
const House = createLucideIcon("house", __iconNode$K);
const __iconNode$J = [
  ["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", ry: "2", key: "1m3agn" }],
  ["circle", { cx: "9", cy: "9", r: "2", key: "af1f0g" }],
  ["path", { d: "m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21", key: "1xmnt7" }]
];
const Image$1 = createLucideIcon("image", __iconNode$J);
const __iconNode$I = [
  ["path", { d: "M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8", key: "18ogeb" }]
];
const Infinity$1 = createLucideIcon("infinity", __iconNode$I);
const __iconNode$H = [
  ["rect", { width: "7", height: "9", x: "3", y: "3", rx: "1", key: "10lvy0" }],
  ["rect", { width: "7", height: "5", x: "14", y: "3", rx: "1", key: "16une8" }],
  ["rect", { width: "7", height: "9", x: "14", y: "12", rx: "1", key: "1hutg5" }],
  ["rect", { width: "7", height: "5", x: "3", y: "16", rx: "1", key: "ldoo1y" }]
];
const LayoutDashboard = createLucideIcon("layout-dashboard", __iconNode$H);
const __iconNode$G = [["path", { d: "M21 12a9 9 0 1 1-6.219-8.56", key: "13zald" }]];
const LoaderCircle = createLucideIcon("loader-circle", __iconNode$G);
const __iconNode$F = [
  ["rect", { width: "18", height: "11", x: "3", y: "11", rx: "2", ry: "2", key: "1w4ew1" }],
  ["path", { d: "M7 11V7a5 5 0 0 1 10 0v4", key: "fwvmzm" }]
];
const Lock = createLucideIcon("lock", __iconNode$F);
const __iconNode$E = [
  ["path", { d: "m16 17 5-5-5-5", key: "1bji2h" }],
  ["path", { d: "M21 12H9", key: "dn1m92" }],
  ["path", { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4", key: "1uf3rs" }]
];
const LogOut = createLucideIcon("log-out", __iconNode$E);
const __iconNode$D = [
  ["path", { d: "m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7", key: "132q7q" }],
  ["rect", { x: "2", y: "4", width: "20", height: "16", rx: "2", key: "izxlao" }]
];
const Mail = createLucideIcon("mail", __iconNode$D);
const __iconNode$C = [
  [
    "path",
    {
      d: "M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",
      key: "1r0f0z"
    }
  ],
  ["circle", { cx: "12", cy: "10", r: "3", key: "ilqhr7" }]
];
const MapPin = createLucideIcon("map-pin", __iconNode$C);
const __iconNode$B = [
  [
    "path",
    {
      d: "M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",
      key: "1sd12s"
    }
  ]
];
const MessageCircle = createLucideIcon("message-circle", __iconNode$B);
const __iconNode$A = [
  [
    "path",
    {
      d: "M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",
      key: "vbtd3f"
    }
  ],
  ["path", { d: "M12 17v4", key: "1riwvh" }],
  ["path", { d: "M8 21h8", key: "1ev6f3" }],
  ["rect", { x: "2", y: "3", width: "20", height: "14", rx: "2", key: "x3v2xh" }]
];
const MonitorPlay = createLucideIcon("monitor-play", __iconNode$A);
const __iconNode$z = [
  ["rect", { width: "20", height: "14", x: "2", y: "3", rx: "2", key: "48i651" }],
  ["line", { x1: "8", x2: "16", y1: "21", y2: "21", key: "1svkeh" }],
  ["line", { x1: "12", x2: "12", y1: "17", y2: "21", key: "vw1qmm" }]
];
const Monitor = createLucideIcon("monitor", __iconNode$z);
const __iconNode$y = [
  [
    "path",
    {
      d: "M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",
      key: "kfwtm"
    }
  ]
];
const Moon = createLucideIcon("moon", __iconNode$y);
const __iconNode$x = [
  [
    "path",
    {
      d: "M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",
      key: "1a0edw"
    }
  ],
  ["path", { d: "M12 22V12", key: "d0xqtd" }],
  ["polyline", { points: "3.29 7 12 12 20.71 7", key: "ousv84" }],
  ["path", { d: "m7.5 4.27 9 5.15", key: "1c824w" }]
];
const Package = createLucideIcon("package", __iconNode$x);
const __iconNode$w = [
  [
    "path",
    {
      d: "M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",
      key: "e79jfc"
    }
  ],
  ["circle", { cx: "13.5", cy: "6.5", r: ".5", fill: "currentColor", key: "1okk4w" }],
  ["circle", { cx: "17.5", cy: "10.5", r: ".5", fill: "currentColor", key: "f64h9f" }],
  ["circle", { cx: "6.5", cy: "12.5", r: ".5", fill: "currentColor", key: "qy21gx" }],
  ["circle", { cx: "8.5", cy: "7.5", r: ".5", fill: "currentColor", key: "fotxhn" }]
];
const Palette = createLucideIcon("palette", __iconNode$w);
const __iconNode$v = [
  ["path", { d: "M5 12h14", key: "1ays0h" }],
  ["path", { d: "M12 5v14", key: "s699le" }]
];
const Plus = createLucideIcon("plus", __iconNode$v);
const __iconNode$u = [
  ["path", { d: "M12 2v10", key: "mnfbl" }],
  ["path", { d: "M18.4 6.6a9 9 0 1 1-12.77.04", key: "obofu9" }]
];
const Power = createLucideIcon("power", __iconNode$u);
const __iconNode$t = [
  ["path", { d: "M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8", key: "v9h5vc" }],
  ["path", { d: "M21 3v5h-5", key: "1q7to0" }],
  ["path", { d: "M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16", key: "3uifl3" }],
  ["path", { d: "M8 16H3v5", key: "1cv678" }]
];
const RefreshCw = createLucideIcon("refresh-cw", __iconNode$t);
const __iconNode$s = [
  [
    "path",
    {
      d: "M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",
      key: "1c8476"
    }
  ],
  ["path", { d: "M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7", key: "1ydtos" }],
  ["path", { d: "M7 3v4a1 1 0 0 0 1 1h7", key: "t51u73" }]
];
const Save = createLucideIcon("save", __iconNode$s);
const __iconNode$r = [
  ["path", { d: "M12 3v18", key: "108xh3" }],
  ["path", { d: "m19 8 3 8a5 5 0 0 1-6 0zV7", key: "zcdpyk" }],
  ["path", { d: "M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1", key: "1yorad" }],
  ["path", { d: "m5 8 3 8a5 5 0 0 1-6 0zV7", key: "eua70x" }],
  ["path", { d: "M7 21h10", key: "1b0cd5" }]
];
const Scale = createLucideIcon("scale", __iconNode$r);
const __iconNode$q = [
  ["path", { d: "m21 21-4.34-4.34", key: "14j7rj" }],
  ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }]
];
const Search = createLucideIcon("search", __iconNode$q);
const __iconNode$p = [
  ["rect", { width: "20", height: "8", x: "2", y: "2", rx: "2", ry: "2", key: "ngkwjq" }],
  ["rect", { width: "20", height: "8", x: "2", y: "14", rx: "2", ry: "2", key: "iecqi9" }],
  ["line", { x1: "6", x2: "6.01", y1: "6", y2: "6", key: "16zg32" }],
  ["line", { x1: "6", x2: "6.01", y1: "18", y2: "18", key: "nzw8ys" }]
];
const Server = createLucideIcon("server", __iconNode$p);
const __iconNode$o = [
  [
    "path",
    {
      d: "M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",
      key: "1i5ecw"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
];
const Settings = createLucideIcon("settings", __iconNode$o);
const __iconNode$n = [
  ["circle", { cx: "18", cy: "5", r: "3", key: "gq8acd" }],
  ["circle", { cx: "6", cy: "12", r: "3", key: "w7nqdw" }],
  ["circle", { cx: "18", cy: "19", r: "3", key: "1xt0gg" }],
  ["line", { x1: "8.59", x2: "15.42", y1: "13.51", y2: "17.49", key: "47mynk" }],
  ["line", { x1: "15.41", x2: "8.59", y1: "6.51", y2: "10.49", key: "1n3mei" }]
];
const Share2 = createLucideIcon("share-2", __iconNode$n);
const __iconNode$m = [
  [
    "path",
    {
      d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",
      key: "oel41y"
    }
  ],
  ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]
];
const ShieldCheck = createLucideIcon("shield-check", __iconNode$m);
const __iconNode$l = [
  [
    "path",
    {
      d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",
      key: "oel41y"
    }
  ]
];
const Shield = createLucideIcon("shield", __iconNode$l);
const __iconNode$k = [
  ["path", { d: "M16 10a4 4 0 0 1-8 0", key: "1ltviw" }],
  ["path", { d: "M3.103 6.034h17.794", key: "awc11p" }],
  [
    "path",
    {
      d: "M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",
      key: "o988cm"
    }
  ]
];
const ShoppingBag = createLucideIcon("shopping-bag", __iconNode$k);
const __iconNode$j = [
  ["rect", { width: "14", height: "20", x: "5", y: "2", rx: "2", ry: "2", key: "1yt0o3" }],
  ["path", { d: "M12 18h.01", key: "mhygvu" }]
];
const Smartphone = createLucideIcon("smartphone", __iconNode$j);
const __iconNode$i = [
  [
    "path",
    {
      d: "M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",
      key: "1s2grr"
    }
  ],
  ["path", { d: "M20 2v4", key: "1rf3ol" }],
  ["path", { d: "M22 4h-4", key: "gwowj6" }],
  ["circle", { cx: "4", cy: "20", r: "2", key: "6kqj1y" }]
];
const Sparkles = createLucideIcon("sparkles", __iconNode$i);
const __iconNode$h = [
  [
    "path",
    {
      d: "M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",
      key: "r04s7s"
    }
  ]
];
const Star = createLucideIcon("star", __iconNode$h);
const __iconNode$g = [
  ["circle", { cx: "12", cy: "12", r: "4", key: "4exip2" }],
  ["path", { d: "M12 2v2", key: "tus03m" }],
  ["path", { d: "M12 20v2", key: "1lh1kg" }],
  ["path", { d: "m4.93 4.93 1.41 1.41", key: "149t6j" }],
  ["path", { d: "m17.66 17.66 1.41 1.41", key: "ptbguv" }],
  ["path", { d: "M2 12h2", key: "1t8f8n" }],
  ["path", { d: "M20 12h2", key: "1q8mjw" }],
  ["path", { d: "m6.34 17.66-1.41 1.41", key: "1m8zz5" }],
  ["path", { d: "m19.07 4.93-1.41 1.41", key: "1shlcs" }]
];
const Sun = createLucideIcon("sun", __iconNode$g);
const __iconNode$f = [
  ["rect", { width: "16", height: "20", x: "4", y: "2", rx: "2", ry: "2", key: "76otgf" }],
  ["line", { x1: "12", x2: "12.01", y1: "18", y2: "18", key: "1dp563" }]
];
const Tablet = createLucideIcon("tablet", __iconNode$f);
const __iconNode$e = [
  [
    "path",
    {
      d: "M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",
      key: "vktsd0"
    }
  ],
  ["circle", { cx: "7.5", cy: "7.5", r: ".5", fill: "currentColor", key: "kqv944" }]
];
const Tag = createLucideIcon("tag", __iconNode$e);
const __iconNode$d = [
  ["path", { d: "M12 19h8", key: "baeox8" }],
  ["path", { d: "m4 17 6-6-6-6", key: "1yngyt" }]
];
const Terminal = createLucideIcon("terminal", __iconNode$d);
const __iconNode$c = [
  ["path", { d: "M10 11v6", key: "nco0om" }],
  ["path", { d: "M14 11v6", key: "outv1u" }],
  ["path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6", key: "miytrc" }],
  ["path", { d: "M3 6h18", key: "d0wm0j" }],
  ["path", { d: "M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2", key: "e791ji" }]
];
const Trash2 = createLucideIcon("trash-2", __iconNode$c);
const __iconNode$b = [
  [
    "path",
    {
      d: "m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",
      key: "wmoenq"
    }
  ],
  ["path", { d: "M12 9v4", key: "juzpu7" }],
  ["path", { d: "M12 17h.01", key: "p32p05" }]
];
const TriangleAlert = createLucideIcon("triangle-alert", __iconNode$b);
const __iconNode$a = [
  ["path", { d: "M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978", key: "1n3hpd" }],
  ["path", { d: "M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978", key: "rfe1zi" }],
  ["path", { d: "M18 9h1.5a1 1 0 0 0 0-5H18", key: "7xy6bh" }],
  ["path", { d: "M4 22h16", key: "57wxv0" }],
  ["path", { d: "M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z", key: "1mhfuq" }],
  ["path", { d: "M6 9H4.5a1 1 0 0 1 0-5H6", key: "tex48p" }]
];
const Trophy = createLucideIcon("trophy", __iconNode$a);
const __iconNode$9 = [
  ["path", { d: "m17 2-5 5-5-5", key: "16satq" }],
  ["rect", { width: "20", height: "15", x: "2", y: "7", rx: "2", key: "1e6viu" }]
];
const Tv = createLucideIcon("tv", __iconNode$9);
const __iconNode$8 = [
  [
    "path",
    {
      d: "M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",
      key: "pff0z6"
    }
  ]
];
const Twitter = createLucideIcon("twitter", __iconNode$8);
const __iconNode$7 = [
  ["path", { d: "m16 11 2 2 4-4", key: "9rsbq5" }],
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }]
];
const UserCheck = createLucideIcon("user-check", __iconNode$7);
const __iconNode$6 = [
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }],
  ["line", { x1: "19", x2: "19", y1: "8", y2: "14", key: "1bvyxn" }],
  ["line", { x1: "22", x2: "16", y1: "11", y2: "11", key: "1shjgl" }]
];
const UserPlus = createLucideIcon("user-plus", __iconNode$6);
const __iconNode$5 = [
  ["path", { d: "M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2", key: "975kel" }],
  ["circle", { cx: "12", cy: "7", r: "4", key: "17ys0d" }]
];
const User = createLucideIcon("user", __iconNode$5);
const __iconNode$4 = [
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["path", { d: "M16 3.128a4 4 0 0 1 0 7.744", key: "16gr8j" }],
  ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }]
];
const Users = createLucideIcon("users", __iconNode$4);
const __iconNode$3 = [
  [
    "path",
    {
      d: "M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",
      key: "uqj9uw"
    }
  ],
  ["path", { d: "M16 9a5 5 0 0 1 0 6", key: "1q6k2b" }],
  ["path", { d: "M19.364 18.364a9 9 0 0 0 0-12.728", key: "ijwkga" }]
];
const Volume2 = createLucideIcon("volume-2", __iconNode$3);
const __iconNode$2 = [
  ["path", { d: "M12 20h.01", key: "zekei9" }],
  ["path", { d: "M2 8.82a15 15 0 0 1 20 0", key: "dnpr2z" }],
  ["path", { d: "M5 12.859a10 10 0 0 1 14 0", key: "1x1e6c" }],
  ["path", { d: "M8.5 16.429a5 5 0 0 1 7 0", key: "1bycff" }]
];
const Wifi = createLucideIcon("wifi", __iconNode$2);
const __iconNode$1 = [
  ["path", { d: "M18 6 6 18", key: "1bl5f8" }],
  ["path", { d: "m6 6 12 12", key: "d8bk6v" }]
];
const X$1 = createLucideIcon("x", __iconNode$1);
const __iconNode = [
  [
    "path",
    {
      d: "M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",
      key: "1xq2db"
    }
  ]
];
const Zap = createLucideIcon("zap", __iconNode);
function useBroadcastChannel(channelName, handleMessage, handleMessageError) {
  const channelRef = reactExports.useRef(
    typeof window !== "undefined" && "BroadcastChannel" in window ? new BroadcastChannel(`${channelName}-channel`) : null
  );
  useChannelEventListener(channelRef, "message", handleMessage);
  useChannelEventListener(channelRef, "messageerror", handleMessageError);
  return reactExports.useCallback((data) => {
    var _a;
    (_a = channelRef == null ? void 0 : channelRef.current) == null ? void 0 : _a.postMessage(data);
  }, []);
}
function useChannelEventListener(channelRef, event, handler = () => {
}) {
  reactExports.useEffect(() => {
    const channel = channelRef.current;
    if (channel) {
      channel.addEventListener(event, handler);
      return () => channel.removeEventListener(event, handler);
    }
  }, [event, handler]);
}
function withoutTransition(callback) {
  const css = document.createElement("style");
  css.appendChild(
    document.createTextNode(
      `* {
       -webkit-transition: none !important;
       -moz-transition: none !important;
       -o-transition: none !important;
       -ms-transition: none !important;
       transition: none !important;
    }`
    )
  );
  document.head.appendChild(css);
  callback();
  setTimeout(() => {
    window.getComputedStyle(css).transition;
    document.head.removeChild(css);
  }, 100);
}
function useCorrectCssTransition({
  disableTransitions = false
} = {}) {
  return reactExports.useCallback(
    (callback) => {
      if (disableTransitions) {
        withoutTransition(() => {
          callback();
        });
      } else {
        callback();
      }
    },
    [disableTransitions]
  );
}
var Theme = /* @__PURE__ */ ((Theme2) => {
  Theme2["DARK"] = "dark";
  Theme2["LIGHT"] = "light";
  return Theme2;
})(Theme || {});
var themes = Object.values(Theme);
var ThemeContext = reactExports.createContext(void 0);
ThemeContext.displayName = "ThemeContext";
var prefersLightMQ = "(prefers-color-scheme: light)";
var getPreferredTheme = () => window.matchMedia(prefersLightMQ).matches ? "light" : "dark";
var mediaQuery = typeof window !== "undefined" ? window.matchMedia(prefersLightMQ) : null;
function ThemeProvider({
  children,
  specifiedTheme,
  themeAction,
  disableTransitionOnThemeChange = false
}) {
  const ensureCorrectTransition = useCorrectCssTransition({
    disableTransitions: disableTransitionOnThemeChange
  });
  const [theme, setTheme] = reactExports.useState(() => {
    if (specifiedTheme) {
      return themes.includes(specifiedTheme) ? specifiedTheme : null;
    }
    if (typeof window !== "object") return null;
    return getPreferredTheme();
  });
  const [themeDefinedBy, setThemeDefinedBy] = reactExports.useState(specifiedTheme ? "USER" : "SYSTEM");
  const broadcastThemeChange = useBroadcastChannel("remix-themes", (e) => {
    ensureCorrectTransition(() => {
      console.log("broadcastThemeChange", disableTransitionOnThemeChange);
      setTheme(e.data.theme);
      setThemeDefinedBy(e.data.definedBy);
    });
  });
  reactExports.useEffect(() => {
    if (themeDefinedBy === "USER") {
      return () => {
      };
    }
    const handleChange = (ev) => {
      ensureCorrectTransition(() => {
        setTheme(
          ev.matches ? "light" : "dark"
          /* DARK */
        );
      });
    };
    mediaQuery == null ? void 0 : mediaQuery.addEventListener("change", handleChange);
    return () => mediaQuery == null ? void 0 : mediaQuery.removeEventListener("change", handleChange);
  }, [ensureCorrectTransition, themeDefinedBy]);
  const handleThemeChange = reactExports.useCallback(
    (value2) => {
      const nextTheme = typeof value2 === "function" ? value2(theme) : value2;
      if (nextTheme === null) {
        const preferredTheme = getPreferredTheme();
        ensureCorrectTransition(() => {
          setTheme(preferredTheme);
          setThemeDefinedBy("SYSTEM");
          broadcastThemeChange({ theme: preferredTheme, definedBy: "SYSTEM" });
        });
        fetch(`${themeAction}`, {
          method: "POST",
          body: JSON.stringify({ theme: null })
        });
      } else {
        ensureCorrectTransition(() => {
          setTheme(nextTheme);
          setThemeDefinedBy("USER");
        });
        broadcastThemeChange({ theme: nextTheme, definedBy: "USER" });
        fetch(`${themeAction}`, {
          method: "POST",
          body: JSON.stringify({ theme: nextTheme })
        });
      }
    },
    [broadcastThemeChange, ensureCorrectTransition, theme, themeAction]
  );
  const value = reactExports.useMemo(
    () => [theme, handleThemeChange, { definedBy: themeDefinedBy }],
    [theme, handleThemeChange, themeDefinedBy]
  );
  return /* @__PURE__ */ jsxRuntimeExports.jsx(ThemeContext.Provider, { value, children });
}
var clientThemeCode = String.raw`
(() => {
  const theme = window.matchMedia(${JSON.stringify(prefersLightMQ)}).matches
    ? 'light'
    : 'dark';
  
  const cl = document.documentElement.classList;
  const dataAttr = document.documentElement.dataset.theme;

  if (dataAttr != null) {
    const themeAlreadyApplied = dataAttr === 'light' || dataAttr === 'dark';
    if (!themeAlreadyApplied) {
      document.documentElement.dataset.theme = theme;
    }
  } else {
    const themeAlreadyApplied = cl.contains('light') || cl.contains('dark');
    if (!themeAlreadyApplied) {
      cl.add(theme);
    }
  }
  
  const meta = document.querySelector('meta[name=color-scheme]');
  if (meta) {
    if (theme === 'dark') {
      meta.content = 'dark light';
    } else if (theme === 'light') {
      meta.content = 'light dark';
    }
  }
})();
`;
function PreventFlashOnWrongTheme({
  ssrTheme,
  nonce
}) {
  const [theme] = useTheme();
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      "meta",
      {
        name: "color-scheme",
        content: theme === "light" ? "light dark" : "dark light"
      }
    ),
    ssrTheme ? null : /* @__PURE__ */ jsxRuntimeExports.jsx(
      "script",
      {
        dangerouslySetInnerHTML: { __html: clientThemeCode },
        nonce,
        suppressHydrationWarning: true
      }
    )
  ] });
}
function useTheme() {
  const context = reactExports.useContext(ThemeContext);
  if (context === void 0) {
    throw new Error("useTheme must be used within a ThemeProvider");
  }
  return context;
}
function isTheme(value) {
  return typeof value === "string" && themes.includes(value);
}
var createThemeSessionResolver = (cookieThemeSession) => {
  const resolver = async (request) => {
    const session = await cookieThemeSession.getSession(
      request.headers.get("Cookie")
    );
    return {
      getTheme: () => {
        const themeValue = session.get("theme");
        return isTheme(themeValue) ? themeValue : null;
      },
      setTheme: (theme) => session.set("theme", theme),
      commit: () => cookieThemeSession.commitSession(session),
      destroy: () => cookieThemeSession.destroySession(session)
    };
  };
  return resolver;
};
var createThemeAction = (themeSessionResolver) => {
  const action2 = async ({ request }) => {
    const session = await themeSessionResolver(request);
    const { theme } = await request.json();
    if (!theme) {
      return Response.json(
        { success: true },
        { headers: { "Set-Cookie": await session.destroy() } }
      );
    }
    if (!isTheme(theme)) {
      return Response.json({
        success: false,
        message: `theme value of ${theme} is not a valid theme.`
      });
    }
    session.setTheme(theme);
    return Response.json(
      { success: true },
      {
        headers: { "Set-Cookie": await session.commit() }
      }
    );
  };
  return action2;
};
function ThemeToggle() {
  const [theme, setTheme] = useTheme();
  const isDark = theme === Theme.DARK;
  const toggleTheme = () => {
    setTheme(isDark ? Theme.LIGHT : Theme.DARK);
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    motion.button,
    {
      onClick: toggleTheme,
      className: "relative w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors flex items-center justify-center overflow-hidden",
      whileTap: { scale: 0.9 },
      whileHover: { scale: 1.05 },
      "aria-label": "Toggle Theme",
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { mode: "wait", initial: false, children: isDark ? /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.div,
        {
          initial: { y: -20, opacity: 0, rotate: -90 },
          animate: { y: 0, opacity: 1, rotate: 0 },
          exit: { y: 20, opacity: 0, rotate: 90 },
          transition: { duration: 0.25, ease: "easeInOut" },
          className: "flex items-center justify-center",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(Moon, { className: "w-5 h-5 text-blue-400" })
        },
        "moon"
      ) : /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.div,
        {
          initial: { y: -20, opacity: 0, rotate: -90 },
          animate: { y: 0, opacity: 1, rotate: 0 },
          exit: { y: 20, opacity: 0, rotate: 90 },
          transition: { duration: 0.25, ease: "easeInOut" },
          className: "flex items-center justify-center",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(Sun, { className: "w-5 h-5 text-orange-500" })
        },
        "sun"
      ) })
    }
  );
}
function cn(...inputs) {
  return twMerge(clsx(inputs));
}
function OptimizedImage({
  src,
  alt,
  className,
  aspectRatio: aspectRatio2 = "auto",
  fallbackSrc = "/placeholder.jpg",
  // Needs a real placeholder path
  ...props
}) {
  const [isLoaded, setIsLoaded] = reactExports.useState(false);
  const [hasError, setHasError] = reactExports.useState(false);
  const handleLoad = () => {
    setIsLoaded(true);
  };
  const handleError = () => {
    setHasError(true);
  };
  const finalSrc = hasError ? fallbackSrc : src;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(
    "div",
    {
      className: cn(
        "relative overflow-hidden bg-slate-200/50 dark:bg-slate-800/50",
        className
      ),
      style: {
        aspectRatio: aspectRatio2 === "auto" ? void 0 : aspectRatio2 === "video" ? "16/9" : aspectRatio2 === "square" ? "1/1" : "3/4"
      },
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { children: !isLoaded && !hasError && /* @__PURE__ */ jsxRuntimeExports.jsx(
          motion.div,
          {
            initial: { opacity: 1 },
            exit: { opacity: 0 },
            className: "absolute inset-0 z-10 flex items-center justify-center bg-slate-100 dark:bg-slate-800",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 rounded-full border-2 border-primary-start/30 border-t-primary-start animate-spin" })
          }
        ) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          motion.img,
          {
            src: finalSrc,
            alt,
            loading: "lazy",
            decoding: "async",
            className: cn(
              "w-full h-full object-cover transition-opacity duration-500",
              isLoaded ? "opacity-100" : "opacity-0"
            ),
            onLoad: handleLoad,
            onError: handleError,
            ...props
          }
        )
      ]
    }
  );
}
function OnboardingTooltip({
  stepKey,
  targetId,
  content,
  onComplete,
  position = "bottom"
}) {
  const [isVisible, setIsVisible] = reactExports.useState(false);
  const [targetRect, setTargetRect] = reactExports.useState(null);
  reactExports.useEffect(() => {
    const hasCompleted = localStorage.getItem(`onboarding_${stepKey}`);
    if (hasCompleted) return;
    const target = document.getElementById(targetId);
    if (target) {
      setTargetRect(target.getBoundingClientRect());
      setIsVisible(true);
      const updateRect = () => {
        if (target) setTargetRect(target.getBoundingClientRect());
      };
      window.addEventListener("resize", updateRect);
      window.addEventListener("scroll", updateRect, true);
      return () => {
        window.removeEventListener("resize", updateRect);
        window.removeEventListener("scroll", updateRect, true);
      };
    }
  }, [stepKey, targetId]);
  const handleDismiss = () => {
    setIsVisible(false);
    localStorage.setItem(`onboarding_${stepKey}`, "true");
    onComplete?.();
  };
  if (!isVisible || !targetRect) return null;
  const getStyle = () => {
    const gap = 12;
    const tooltipWidth = 256;
    let centerLeft = targetRect.left + targetRect.width / 2;
    let leftPos = centerLeft - tooltipWidth / 2;
    const maxLeft = window.innerWidth - tooltipWidth - 16;
    const minLeft = 16;
    let adjustedLeft = Math.max(minLeft, Math.min(leftPos, maxLeft));
    let arrowOffset = centerLeft - adjustedLeft;
    let clampedArrowOffset = Math.max(24, Math.min(arrowOffset, tooltipWidth - 24));
    switch (position) {
      case "bottom":
        return {
          container: { offset: { top: targetRect.bottom + gap, left: adjustedLeft } },
          arrow: { left: clampedArrowOffset, top: -6 }
        };
      case "top":
        return {
          container: { offset: { top: targetRect.top - gap, left: adjustedLeft, transform: "translateY(-100%)" } },
          arrow: { left: clampedArrowOffset, bottom: -6 }
        };
      default:
        return { container: { offset: {} }, arrow: { left: "50%" } };
    }
  };
  const styleData = getStyle();
  return /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
    motion.div,
    {
      initial: { opacity: 0, y: 10, scale: 0.9 },
      animate: { opacity: 1, y: 0, scale: 1 },
      exit: { opacity: 0, scale: 0.9 },
      style: {
        position: "fixed",
        zIndex: 60,
        ...styleData.container.offset
      },
      className: "max-w-xs w-64",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-primary-500 text-white p-4 rounded-2xl shadow-xl relative", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "button",
          {
            onClick: handleDismiss,
            className: "absolute top-2 right-2 p-1 hover:bg-white/20 rounded-full transition-colors",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { size: 14 })
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-bold text-sm mb-1", children: "" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-white/90 leading-relaxed mb-3", children: content }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "button",
          {
            onClick: handleDismiss,
            className: "bg-white text-primary-600 text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-white/90 transition-colors w-full",
            children: ""
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "div",
          {
            className: "absolute w-3 h-3 bg-primary-500 rotate-45 -z-10",
            style: {
              ...styleData.arrow,
              marginLeft: -6
            }
          }
        )
      ] })
    }
  ) });
}
function useUser() {
  const [user, setUser] = reactExports.useState(null);
  const [loading, setLoading] = reactExports.useState(true);
  reactExports.useEffect(() => {
    async function fetchUser() {
      try {
        const response = await fetch("/api/user/me");
        if (response.ok) {
          const data = await response.json();
          setUser(data.user);
        } else {
          setUser(null);
        }
      } catch {
        setUser(null);
      } finally {
        setLoading(false);
      }
    }
    fetchUser();
  }, []);
  return { user, loading };
}
function UserHUD({ user, compact = false }) {
  const level = user.level || 1;
  const exp = user.exp || 0;
  const maxExp = level * 100;
  const progress2 = Math.min(exp / maxExp * 100, 100);
  if (compact) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 rounded-full p-[1px] bg-gradient-to-br from-at-orange to-at-red", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full h-full rounded-full bg-white dark:bg-slate-800 flex items-center justify-center overflow-hidden", children: user.avatar_url ? /* @__PURE__ */ jsxRuntimeExports.jsx("img", { src: user.avatar_url, alt: user.username, className: "w-full h-full object-cover" }) : /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-at-orange font-bold text-xs", children: user.username?.charAt(0).toUpperCase() || "U" }) }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "absolute -bottom-1 -right-1 bg-at-purple text-white text-[8px] font-display font-bold px-1 rounded-full border border-white dark:border-slate-900 shadow-sm", children: [
        "LV.",
        level
      ] })
    ] }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3 font-display", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-end gap-1", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 text-xs", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-at-orange font-bold tracking-wider", children: [
          "LV.",
          level
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-slate-400 dark:text-slate-500", children: "/" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-slate-600 dark:text-slate-300", children: user.username })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "w-24 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden relative", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          motion.div,
          {
            className: "absolute top-0 left-0 h-full bg-gradient-to-r from-at-orange to-at-red",
            initial: { width: 0 },
            animate: { width: `${progress2}%` },
            transition: { duration: 1, ease: "easeOut" }
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-white/20 w-full h-full animate-pulse", style: { animationDuration: "2s" } })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative group cursor-pointer", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-10 h-10 clip-hexagon bg-gradient-to-br from-at-orange to-at-purple p-[2px]", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full h-full clip-hexagon bg-white dark:bg-slate-800 flex items-center justify-center overflow-hidden", children: user.avatar_url ? /* @__PURE__ */ jsxRuntimeExports.jsx("img", { src: user.avatar_url, alt: user.username, className: "w-full h-full object-cover" }) : /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-at-orange font-bold text-sm", children: user.username?.charAt(0).toUpperCase() || "U" }) }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-slate-900 animate-pulse" })
    ] })
  ] });
}
const navItems = [
  { name: "", path: "/", icon: House },
  { name: "", path: "/articles", icon: Book },
  { name: "", path: "/archive", icon: Archive },
  { name: "", path: "/gallery", icon: Image$1 },
  { name: "", path: "/bangumi", icon: Tv },
  { name: "", path: "/shop", icon: ShoppingBag }
];
function FloatingNav() {
  const { scrollY } = useScroll();
  const location = useLocation();
  const y2 = useTransform(scrollY, [0, 100], [0, -10]);
  const [isUserMenuOpen, setIsUserMenuOpen] = reactExports.useState(false);
  const [dropdownStyle, setDropdownStyle] = reactExports.useState({});
  const { user, loading } = useUser();
  const avatarButtonRef = reactExports.useRef(null);
  const [isMounted, setIsMounted] = reactExports.useState(false);
  reactExports.useEffect(() => {
    setIsMounted(true);
  }, []);
  const calculateDropdownPosition = () => {
    if (avatarButtonRef.current) {
      const rect = avatarButtonRef.current.getBoundingClientRect();
      const rightPosition = window.innerWidth - rect.right;
      const adjustedRight = Math.max(rightPosition, 16);
      setDropdownStyle({
        position: "fixed",
        top: rect.bottom + 12,
        right: adjustedRight,
        zIndex: 50
      });
    }
  };
  reactExports.useEffect(() => {
    const handleClickOutside = (event) => {
      const target = event.target;
      const dropdown = document.getElementById("user-dropdown-menu");
      if (dropdown?.contains(target)) return;
      if (avatarButtonRef.current?.contains(target)) return;
      setIsUserMenuOpen(false);
    };
    const handleScrollResize = () => {
      if (isUserMenuOpen) calculateDropdownPosition();
    };
    if (isUserMenuOpen) {
      document.addEventListener("mousedown", handleClickOutside);
      window.addEventListener("scroll", handleScrollResize, true);
      window.addEventListener("resize", handleScrollResize);
    }
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
      window.removeEventListener("scroll", handleScrollResize, true);
      window.removeEventListener("resize", handleScrollResize);
    };
  }, [isUserMenuOpen]);
  const handleAvatarClick = () => {
    if (!isUserMenuOpen) {
      calculateDropdownPosition();
    }
    setIsUserMenuOpen((prev) => !prev);
  };
  const closeDropdown = () => setIsUserMenuOpen(false);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.nav,
      {
        className: "fixed top-6 left-1/2 -translate-x-1/2 z-40 w-auto max-w-[95vw]",
        style: { y: y2 },
        initial: { opacity: 0, y: -20 },
        animate: { opacity: 1, y: 0 },
        transition: { duration: 0.5, ease: "easeOut" },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            "div",
            {
              className: "\r\n            relative flex items-center py-2.5 px-2 rounded-full\r\n            /* --- iOS  --- */\r\n            bg-white/60                 /* 1.  */\r\n            backdrop-blur-xl            /* 2.  */\r\n            border border-white/40      /* 3.  */\r\n            shadow-lg shadow-black/5    /* 4.  */\r\n            /*  */\r\n            dark:bg-slate-900/60 dark:border-white/10\r\n          ",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "hidden md:flex items-center", children: navItems.map((item) => {
                  const isActive = location.pathname === item.path;
                  return /* @__PURE__ */ jsxRuntimeExports.jsx(
                    motion.div,
                    {
                      whileHover: { scale: 1.05 },
                      whileTap: { scale: 0.92 },
                      transition: { type: "spring", stiffness: 400, damping: 25 },
                      children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
                        Link,
                        {
                          to: item.path,
                          prefetch: "intent",
                          style: { WebkitTapHighlightColor: "transparent" },
                          className: `
                      group relative block px-5 py-2 text-[15px] font-medium transition-colors duration-300 rounded-full z-10
                      /*  */
                      ${isActive ? "text-slate-800 dark:text-white" : "text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200"}
                    `,
                          children: [
                            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { id: item.path === "/shop" ? "nav-item-shop" : void 0, className: "relative z-20 flex items-center gap-1.5", children: [
                              (() => {
                                const Icon2 = item.icon;
                                return /* @__PURE__ */ jsxRuntimeExports.jsx(
                                  Icon2,
                                  {
                                    size: 16,
                                    strokeWidth: isActive ? 2.5 : 2,
                                    className: isActive ? "" : "group-hover:scale-110 transition-transform duration-300"
                                  }
                                );
                              })(),
                              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: item.name })
                            ] }),
                            isActive && /* @__PURE__ */ jsxRuntimeExports.jsx(
                              motion.div,
                              {
                                layoutId: "active-nav-indicator",
                                transition: {
                                  type: "spring",
                                  stiffness: 450,
                                  damping: 35
                                },
                                className: "absolute -bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 bg-slate-800 dark:bg-white rounded-full shadow-sm"
                              }
                            )
                          ]
                        }
                      )
                    },
                    item.name
                  );
                }) }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-px h-5 bg-black/10 dark:bg-white/10 mx-3 hidden md:block" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 pr-2", children: [
                  !isMounted ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 animate-pulse" }) : loading ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 animate-pulse" }) : user ? /* @__PURE__ */ jsxRuntimeExports.jsx(
                    motion.button,
                    {
                      ref: avatarButtonRef,
                      onClick: handleAvatarClick,
                      className: "flex items-center gap-2 focus:outline-none p-1 rounded-full hover:bg-white/20 dark:hover:bg-white/10 transition-colors",
                      whileHover: { scale: 1.05 },
                      whileTap: { scale: 0.95 },
                      children: /* @__PURE__ */ jsxRuntimeExports.jsx(UserHUD, { user, compact: true })
                    }
                  ) : /* @__PURE__ */ jsxRuntimeExports.jsx(
                    Link,
                    {
                      to: "/login",
                      className: "px-3 py-1.5 text-[14px] font-medium text-slate-500 hover:text-slate-800 transition-colors dark:text-slate-400 dark:hover:text-white",
                      children: ""
                    }
                  ),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(ThemeToggle, {})
                ] })
              ]
            }
          ),
          isMounted && /* @__PURE__ */ jsxRuntimeExports.jsx(
            OnboardingTooltip,
            {
              stepKey: "shop_nav",
              targetId: "nav-item-shop",
              content: " ",
              position: "bottom"
            }
          )
        ]
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { children: isUserMenuOpen && user && /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        id: "user-dropdown-menu",
        initial: { opacity: 0, y: 10, scale: 0.95 },
        animate: { opacity: 1, y: 0, scale: 1 },
        exit: { opacity: 0, y: 10, scale: 0.95 },
        transition: { duration: 0.2 },
        className: "w-80 rounded-2xl overflow-hidden shadow-2xl border border-white/20 dark:border-slate-700/50\r\n                       bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl",
        style: dropdownStyle,
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-4 bg-gradient-to-br from-primary-start/10 to-primary-end/10 relative overflow-hidden", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-grid-white/10 [mask-image:linear-gradient(0deg,white,rgba(255,255,255,0.6))]" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative z-10 flex items-center gap-4 mb-4", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-16 h-16 rounded-full p-[2px] bg-gradient-to-br from-at-orange to-at-red shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full h-full rounded-full bg-white dark:bg-slate-800 flex items-center justify-center overflow-hidden", children: user.avatar_url ? /* @__PURE__ */ jsxRuntimeExports.jsx(
                OptimizedImage,
                {
                  src: user.avatar_url,
                  alt: user.username,
                  aspectRatio: "square",
                  className: "w-full h-full object-cover"
                }
              ) : /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-at-orange font-bold text-2xl", children: user.username?.charAt(0).toUpperCase() || "U" }) }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-lg font-bold text-slate-800 dark:text-white truncate font-display", children: user.username }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-slate-500 dark:text-slate-400 truncate mb-1", children: user.email }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "inline-flex items-center px-2 py-0.5 rounded-full bg-at-purple/10 text-at-purple text-[10px] font-bold border border-at-purple/20", children: [
                  "LV.",
                  user.level || 1,
                  " Adventurer"
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative z-10", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between text-[10px] text-slate-500 dark:text-slate-400 mb-1 font-mono", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "EXP" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
                  user.exp || 0,
                  " / ",
                  (user.level || 1) * 100
                ] })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full h-1.5 bg-slate-200 dark:bg-slate-700/50 rounded-full overflow-hidden", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                motion.div,
                {
                  className: "h-full bg-gradient-to-r from-at-orange to-at-red",
                  initial: { width: 0 },
                  animate: { width: `${Math.min((user.exp || 0) / ((user.level || 1) * 100) * 100, 100)}%` },
                  transition: { duration: 1, ease: "easeOut" }
                }
              ) })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-3 gap-px bg-slate-100 dark:bg-slate-700/50 border-y border-slate-100 dark:border-slate-700/50", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/50 dark:bg-slate-800/50 p-3 flex flex-col items-center gap-1 hover:bg-white/80 dark:hover:bg-slate-800 transition-colors cursor-help group", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-lg group-hover:scale-110 transition-transform", children: "" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs font-bold text-slate-700 dark:text-slate-200", children: user.coins || 0 }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-[10px] text-slate-400", children: "" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/50 dark:bg-slate-800/50 p-3 flex flex-col items-center gap-1 hover:bg-white/80 dark:hover:bg-slate-800 transition-colors cursor-help group", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-lg group-hover:scale-110 transition-transform", children: "" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs font-bold text-slate-700 dark:text-slate-200", children: "5" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-[10px] text-slate-400", children: "" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/50 dark:bg-slate-800/50 p-3 flex flex-col items-center gap-1 hover:bg-white/80 dark:hover:bg-slate-800 transition-colors cursor-help group", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-lg group-hover:scale-110 transition-transform", children: "" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs font-bold text-slate-700 dark:text-slate-200", children: "12" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-[10px] text-slate-400", children: "" })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-2 space-y-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, { to: "/user/dashboard", onClick: closeDropdown, className: "flex items-center gap-3 px-3 py-2.5 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700/50 rounded-xl transition-all group", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center group-hover:scale-110 transition-transform", children: /* @__PURE__ */ jsxRuntimeExports.jsx(LayoutDashboard, { size: 16 }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium", children: "" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-[10px] text-slate-400", children: "" })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, { to: "/user/inventory", onClick: closeDropdown, className: "flex items-center gap-3 px-3 py-2.5 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700/50 rounded-xl transition-all group", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 rounded-lg bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 flex items-center justify-center group-hover:scale-110 transition-transform", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Package, { size: 16 }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium", children: "" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-[10px] text-slate-400", children: "" })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, { to: "/settings", onClick: closeDropdown, className: "flex items-center gap-3 px-3 py-2.5 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700/50 rounded-xl transition-all group", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 rounded-lg bg-slate-100 dark:bg-slate-700/50 text-slate-600 dark:text-slate-400 flex items-center justify-center group-hover:scale-110 transition-transform", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Settings, { size: 16 }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium", children: "" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-[10px] text-slate-400", children: "" })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-px bg-slate-100 dark:bg-slate-700/50 my-1" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, { to: "/logout", onClick: closeDropdown, className: "flex items-center gap-3 px-3 py-2.5 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all group", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 flex items-center justify-center group-hover:scale-110 transition-transform", children: /* @__PURE__ */ jsxRuntimeExports.jsx(LogOut, { size: 16 }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium", children: "" })
            ] })
          ] })
        ]
      }
    ) })
  ] });
}
function MobileNav() {
  const location = useLocation();
  const tabs = [
    { name: "", path: "/", icon: House },
    { name: "", path: "/articles", icon: Book },
    { name: "", path: "/bangumi", icon: Tv },
    { name: "", path: "/user/dashboard", icon: User }
  ];
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "md:hidden fixed bottom-4 left-4 right-4 z-50", children: /* @__PURE__ */ jsxRuntimeExports.jsx("nav", { className: "\r\n                flex items-center justify-around p-2 rounded-2xl\r\n                bg-white/80 dark:bg-slate-900/80 \r\n                backdrop-blur-xl border border-white/20 dark:border-white/10\r\n                shadow-lg shadow-black/5\r\n            ", children: tabs.map((tab) => {
    const isActive = location.pathname === tab.path || tab.path !== "/" && location.pathname.startsWith(tab.path);
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      Link,
      {
        to: tab.path,
        prefetch: "intent",
        className: cn(
          "relative flex flex-col items-center justify-center w-16 h-14 rounded-xl transition-colors",
          isActive ? "text-primary-start" : "text-slate-400 dark:text-slate-500"
        ),
        children: [
          isActive && /* @__PURE__ */ jsxRuntimeExports.jsx(
            motion.div,
            {
              layoutId: "mobile-nav-active",
              className: "absolute inset-0 bg-primary-start/10 dark:bg-primary-start/20 rounded-xl",
              transition: { type: "spring", stiffness: 300, damping: 30 }
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative z-10 flex flex-col items-center gap-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              motion.div,
              {
                animate: isActive ? { scale: 1.1, y: -2 } : { scale: 1, y: 0 },
                transition: { type: "spring", stiffness: 400, damping: 20 },
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(tab.icon, { size: 22, strokeWidth: isActive ? 2.5 : 2 })
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              motion.span,
              {
                className: "text-[10px] font-medium",
                animate: isActive ? { opacity: 1, y: 0 } : { opacity: 0.8, y: 0 },
                children: tab.name
              }
            )
          ] })
        ]
      },
      tab.path
    );
  }) }) });
}
function DynamicBackground({ images }) {
  const [currentIndex, setCurrentIndex] = reactExports.useState(0);
  const [nextIndex, setNextIndex] = reactExports.useState(1);
  const [isTransitioning, setIsTransitioning] = reactExports.useState(false);
  const preloadRef = reactExports.useRef(null);
  const defaultImages = [
    "https://images.unsplash.com/photo-1577056922428-a79963db266d?auto=format&fit=crop&w=1920&q=80",
    "https://images.unsplash.com/photo-1528360983277-13d9b152c6d1?auto=format&fit=crop&w=1920&q=80",
    "https://images.unsplash.com/photo-1490806843957-31f4c9a91c65?auto=format&fit=crop&w=1920&q=80",
    "https://images.unsplash.com/photo-1524413840807-0c3cb6fa808d?auto=format&fit=crop&w=1920&q=80",
    "https://images.unsplash.com/photo-1514316454349-750a7fd3da3a?auto=format&fit=crop&w=1920&q=80"
  ];
  const imageList = images && images.length > 0 ? images : defaultImages;
  const getTimeBasedImages = () => {
    const hour = (/* @__PURE__ */ new Date()).getHours();
    if (hour >= 22 || hour < 6) {
      return imageList;
    }
    return imageList;
  };
  reactExports.useEffect(() => {
    if (preloadRef.current && imageList[nextIndex]) {
      const img = new Image();
      img.src = imageList[nextIndex];
      img.onload = () => {
      };
    }
  }, [nextIndex, imageList]);
  reactExports.useEffect(() => {
    const interval = setInterval(() => {
      switchBackground();
    }, 3e4);
    return () => clearInterval(interval);
  }, [currentIndex, imageList.length]);
  const switchBackground = () => {
    setIsTransitioning(true);
    setTimeout(() => {
      setCurrentIndex((prev) => (prev + 1) % imageList.length);
      setNextIndex((prev) => (prev + 1) % imageList.length);
      setIsTransitioning(false);
    }, 500);
  };
  const currentImages = getTimeBasedImages();
  const currentImage = currentImages[currentIndex];
  const nextImage = currentImages[nextIndex];
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "fixed inset-0 z-0 overflow-hidden", style: { willChange: "transform" }, children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { mode: "wait", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        className: "absolute inset-0",
        initial: { opacity: 0 },
        animate: { opacity: 1 },
        exit: { opacity: 0 },
        transition: { duration: 1, ease: "easeInOut" },
        style: { willChange: "opacity" },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "div",
            {
              className: "absolute inset-0 bg-cover bg-center",
              style: {
                backgroundImage: `url('${currentImage}')`,
                filter: "brightness(0.95)",
                willChange: "background-image"
              }
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-b from-orange-100/20 to-pink-100/20" })
        ]
      },
      currentIndex
    ) }),
    nextImage && /* @__PURE__ */ jsxRuntimeExports.jsx(
      "img",
      {
        ref: preloadRef,
        src: nextImage,
        alt: "",
        className: "hidden",
        onLoad: () => {
        }
      }
    )
  ] });
}
const PERFORMANCE_PREFERENCE_KEY = "anime-blog-performance-level";
function isMobileDevice() {
  if (typeof window === "undefined") return false;
  if (typeof navigator === "undefined") return false;
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
    navigator.userAgent
  ) || window.innerWidth < 768;
}
function getDevicePerformance() {
  if (typeof window === "undefined") return "high";
  const savedPreference = getSavedPerformancePreference();
  if (savedPreference) return savedPreference;
  const isMobile = isMobileDevice();
  const hardwareConcurrency = navigator.hardwareConcurrency || 2;
  const deviceMemory = navigator.deviceMemory || 4;
  if (isMobile) {
    if (hardwareConcurrency >= 6 && deviceMemory >= 4) {
      return "medium";
    }
    return "low";
  }
  if (hardwareConcurrency >= 8 && deviceMemory >= 8) {
    return "high";
  } else if (hardwareConcurrency >= 4 && deviceMemory >= 4) {
    return "medium";
  }
  return "low";
}
function getSavedPerformancePreference() {
  if (typeof localStorage === "undefined") return null;
  const saved = localStorage.getItem(PERFORMANCE_PREFERENCE_KEY);
  if (saved === "high" || saved === "medium" || saved === "low") {
    return saved;
  }
  return null;
}
function shouldEnableParticles() {
  const performance2 = getDevicePerformance();
  if (performance2 === "low") return false;
  if (isMobileDevice()) return performance2 === "medium";
  return true;
}
const DUST_COLORS = ["#FFD700", "#FFA500", "#FF9F43", "#FFB84D", "#FFC966"];
const SAKURA_COLOR = "rgba(255, 182, 193, 0.6)";
function CanvasParticleSystem({
  enableDust = true,
  enableSakura = true,
  maxParticles = 30
}) {
  const canvasRef = reactExports.useRef(null);
  const particlesRef = reactExports.useRef([]);
  const animationRef = reactExports.useRef(null);
  const mouseRef = reactExports.useRef({ x: 0, y: 0 });
  const [isClient, setIsClient] = reactExports.useState(false);
  const getAdjustedMaxParticles = reactExports.useCallback(() => {
    const performance2 = getDevicePerformance();
    const isMobile = isMobileDevice();
    if (isMobile) return Math.floor(maxParticles * 0.3);
    if (performance2 === "low") return Math.floor(maxParticles * 0.4);
    if (performance2 === "medium") return Math.floor(maxParticles * 0.7);
    return maxParticles;
  }, [maxParticles]);
  const createDustParticle = reactExports.useCallback((width, height) => {
    return {
      x: Math.random() * width,
      y: height + 50,
      vx: (Math.random() - 0.5) * 0.3,
      vy: -0.3 - Math.random() * 0.5,
      size: 1 + Math.random() * 2,
      opacity: 0.3 + Math.random() * 0.4,
      color: DUST_COLORS[Math.floor(Math.random() * DUST_COLORS.length)],
      rotation: 0,
      rotationSpeed: 0,
      type: "dust",
      life: 0,
      maxLife: 600 + Math.random() * 400
      // 10-17 @ 60fps
    };
  }, []);
  const createSakuraParticle = reactExports.useCallback((width) => {
    return {
      x: Math.random() * width,
      y: -50,
      vx: (Math.random() - 0.5) * 1,
      vy: 0.5 + Math.random() * 1.5,
      size: 8 + Math.random() * 12,
      opacity: 0.4 + Math.random() * 0.4,
      color: SAKURA_COLOR,
      rotation: Math.random() * 360,
      rotationSpeed: (Math.random() - 0.5) * 2,
      type: "sakura",
      life: 0,
      maxLife: 600 + Math.random() * 600
      // 10-20 @ 60fps
    };
  }, []);
  const drawSakura = reactExports.useCallback((ctx, x2, y2, size, rotation, opacity) => {
    ctx.save();
    ctx.translate(x2, y2);
    ctx.rotate(rotation * Math.PI / 180);
    ctx.globalAlpha = opacity;
    ctx.fillStyle = SAKURA_COLOR;
    for (let i = 0; i < 5; i++) {
      ctx.beginPath();
      ctx.ellipse(0, -size * 0.3, size * 0.15, size * 0.4, 0, 0, Math.PI * 2);
      ctx.fill();
      ctx.rotate(Math.PI * 2 / 5);
    }
    ctx.fillStyle = "rgba(255, 255, 200, 0.8)";
    ctx.beginPath();
    ctx.arc(0, 0, size * 0.1, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
  }, []);
  const drawDust = reactExports.useCallback((ctx, x2, y2, size, opacity, color2) => {
    ctx.save();
    ctx.globalAlpha = opacity;
    const gradient = ctx.createRadialGradient(x2, y2, 0, x2, y2, size * 2);
    gradient.addColorStop(0, color2);
    gradient.addColorStop(1, "transparent");
    ctx.fillStyle = gradient;
    ctx.beginPath();
    ctx.arc(x2, y2, size * 2, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = color2;
    ctx.beginPath();
    ctx.arc(x2, y2, size, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
  }, []);
  reactExports.useEffect(() => {
    if (!isClient) return;
    const canvas2 = canvasRef.current;
    if (!canvas2) return;
    const ctx = canvas2.getContext("2d");
    if (!ctx) return;
    const adjustedMax = getAdjustedMaxParticles();
    let lastSpawnTime = 0;
    const spawnInterval = 200;
    const resizeCanvas = () => {
      canvas2.width = window.innerWidth;
      canvas2.height = window.innerHeight;
    };
    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);
    const animate = (timestamp) => {
      if (!ctx || !canvas2) return;
      ctx.clearRect(0, 0, canvas2.width, canvas2.height);
      if (timestamp - lastSpawnTime > spawnInterval && particlesRef.current.length < adjustedMax) {
        lastSpawnTime = timestamp;
        if (enableDust && Math.random() > 0.3) {
          particlesRef.current.push(createDustParticle(canvas2.width, canvas2.height));
        } else if (enableSakura && Math.random() > 0.6) {
          particlesRef.current.push(createSakuraParticle(canvas2.width));
        }
      }
      particlesRef.current = particlesRef.current.filter((particle) => {
        particle.life++;
        if (particle.life > particle.maxLife) return false;
        particle.x += particle.vx;
        particle.y += particle.vy;
        particle.rotation += particle.rotationSpeed;
        const lifeRatio = particle.life / particle.maxLife;
        const fadeOpacity = particle.opacity * (1 - Math.pow(lifeRatio, 2));
        if (particle.type === "dust" && particle.y < -50) return false;
        if (particle.type === "sakura" && particle.y > canvas2.height + 50) return false;
        if (particle.x < -50 || particle.x > canvas2.width + 50) return false;
        if (particle.type === "dust") {
          drawDust(ctx, particle.x, particle.y, particle.size, fadeOpacity, particle.color);
        } else {
          drawSakura(ctx, particle.x, particle.y, particle.size, particle.rotation, fadeOpacity);
        }
        return true;
      });
      animationRef.current = requestAnimationFrame(animate);
    };
    animationRef.current = requestAnimationFrame(animate);
    return () => {
      window.removeEventListener("resize", resizeCanvas);
      if (animationRef.current) {
        cancelAnimationFrame(animationRef.current);
      }
    };
  }, [isClient, enableDust, enableSakura, getAdjustedMaxParticles, createDustParticle, createSakuraParticle, drawDust, drawSakura]);
  reactExports.useEffect(() => {
    setIsClient(true);
  }, []);
  reactExports.useEffect(() => {
    if (!isClient) return;
    const handleMouseMove = (e) => {
      mouseRef.current = { x: e.clientX, y: e.clientY };
      if (Math.random() > 0.9 && particlesRef.current.length < getAdjustedMaxParticles()) {
        particlesRef.current.push({
          x: e.clientX,
          y: e.clientY,
          vx: (Math.random() - 0.5) * 2,
          vy: (Math.random() - 0.5) * 2,
          size: 2 + Math.random() * 2,
          opacity: 0.8,
          color: "#FFD700",
          rotation: 0,
          rotationSpeed: 0,
          type: "dust",
          life: 0,
          maxLife: 30
          // 0.5 @ 60fps
        });
      }
    };
    window.addEventListener("mousemove", handleMouseMove);
    return () => window.removeEventListener("mousemove", handleMouseMove);
  }, [isClient, getAdjustedMaxParticles]);
  reactExports.useEffect(() => {
    if (!isClient) return;
    const handleClick = (e) => {
      const burstCount = 6;
      for (let i = 0; i < burstCount; i++) {
        const angle = Math.PI * 2 * i / burstCount;
        const speed = 2 + Math.random() * 2;
        particlesRef.current.push({
          x: e.clientX,
          y: e.clientY,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          size: 10 + Math.random() * 10,
          opacity: 0.8,
          color: SAKURA_COLOR,
          rotation: Math.random() * 360,
          rotationSpeed: (Math.random() - 0.5) * 10,
          type: "sakura",
          life: 0,
          maxLife: 60
          // 1 @ 60fps
        });
      }
    };
    window.addEventListener("click", handleClick);
    return () => window.removeEventListener("click", handleClick);
  }, [isClient]);
  if (!isClient) return null;
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    "canvas",
    {
      ref: canvasRef,
      className: "fixed inset-0 pointer-events-none z-[3]",
      style: {
        willChange: "transform",
        transform: "translateZ(0)"
        //  GPU 
      }
    }
  );
}
function MusicPlayerMobile() {
  const [isExpanded, setIsExpanded] = reactExports.useState(false);
  const [isPlaying, setIsPlaying] = reactExports.useState(false);
  const audioRef = reactExports.useRef(null);
  if (!isMobileDevice()) {
    return null;
  }
  const togglePlay = () => {
    if (!audioRef.current) {
      audioRef.current = new Audio("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3");
      audioRef.current.loop = true;
    }
    if (isPlaying) {
      audioRef.current.pause();
    } else {
      audioRef.current.play();
    }
    setIsPlaying(!isPlaying);
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.button,
      {
        className: "fixed bottom-20 right-4 z-40 w-14 h-14 rounded-full bg-gradient-to-r from-pink-500 to-purple-500 text-white shadow-lg md:hidden",
        onClick: () => setIsExpanded(!isExpanded),
        whileHover: { scale: 1.1 },
        whileTap: { scale: 0.9 },
        animate: {
          rotate: isPlaying ? 360 : 0
        },
        transition: {
          rotate: {
            duration: 3,
            repeat: isPlaying ? Infinity : 0,
            ease: "linear"
          }
        },
        children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-2xl", children: "" })
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { children: isExpanded && /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        className: "fixed bottom-20 right-4 z-40 w-72 bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-xl md:hidden",
        initial: { opacity: 0, scale: 0.8, y: 20 },
        animate: { opacity: 1, scale: 1, y: 0 },
        exit: { opacity: 0, scale: 0.8, y: 20 },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-bold text-gray-800", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              motion.button,
              {
                onClick: () => setIsExpanded(false),
                className: "w-6 h-6 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center",
                whileTap: { scale: 0.9 },
                children: ""
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              motion.button,
              {
                onClick: togglePlay,
                className: "w-10 h-10 rounded-full bg-pink-500 text-white flex items-center justify-center",
                whileTap: { scale: 0.9 },
                children: isPlaying ? "" : ""
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-gray-800", children: isPlaying ? "Playing..." : "Paused" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", children: "Lo-Fi Study Beats" })
            ] })
          ] })
        ]
      }
    ) })
  ] });
}
function PublicLayout({ children }) {
  const ref = reactExports.useRef(null);
  const { scrollY } = useScroll({ target: ref });
  const y2 = useTransform(scrollY, [0, 1e3], [0, 200]);
  const [isClient, setIsClient] = reactExports.useState(false);
  const [enableParticles, setEnableParticles] = reactExports.useState(false);
  reactExports.useEffect(() => {
    setIsClient(true);
    setEnableParticles(shouldEnableParticles());
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { ref, className: "relative min-h-screen overflow-hidden font-round text-slate-800 selection:bg-primary-start selection:text-white", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 z-0", "data-background-layer": true, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.div,
      {
        style: { y: y2 },
        className: "absolute inset-0",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(DynamicBackground, {})
      }
    ) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "fixed inset-0 z-1 pointer-events-none", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute -top-40 -right-40 w-96 h-96 rounded-full bg-primary-start/20 blur-3xl animate-bokeh-1" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute bottom-20 -left-20 w-80 h-80 rounded-full bg-primary-end/20 blur-3xl animate-bokeh-2" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-1/2 left-1/3 w-64 h-64 rounded-full bg-yellow-300/15 blur-3xl animate-bokeh-3" })
    ] }),
    enableParticles && /* @__PURE__ */ jsxRuntimeExports.jsx(CanvasParticleSystem, { enableDust: true, enableSakura: true, maxParticles: 25 }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(FloatingNav, {}),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { id: "main-content", className: "relative z-10 pt-20 pb-20 md:pb-0", children }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(MobileNav, {}),
    /* @__PURE__ */ jsxRuntimeExports.jsx(MusicPlayerMobile, {})
  ] });
}
function AdminMusicPlayer() {
  const [isPlaying, setIsPlaying] = reactExports.useState(false);
  const [currentTrack, setCurrentTrack] = reactExports.useState(0);
  const audioRef = reactExports.useRef(null);
  const tracks = [
    { name: "Lo-Fi Study Beats", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" },
    { name: "Chill Vibes", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" },
    { name: "Focus Mode", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3" }
  ];
  const togglePlay = () => {
    if (!audioRef.current) {
      audioRef.current = new Audio(tracks[currentTrack].url);
      audioRef.current.loop = true;
    }
    if (isPlaying) {
      audioRef.current.pause();
    } else {
      audioRef.current.play();
    }
    setIsPlaying(!isPlaying);
  };
  const nextTrack = () => {
    const next = (currentTrack + 1) % tracks.length;
    setCurrentTrack(next);
    if (audioRef.current) {
      audioRef.current.pause();
      audioRef.current = new Audio(tracks[next].url);
      audioRef.current.loop = true;
      if (isPlaying) {
        audioRef.current.play();
      }
    }
  };
  reactExports.useEffect(() => {
    return () => {
      if (audioRef.current) {
        audioRef.current.pause();
      }
    };
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 shadow-sm border border-purple-200", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-3", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-sm font-bold text-gray-800 flex items-center gap-2", children: " Lo-Fi Player" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-1", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          motion.button,
          {
            onClick: togglePlay,
            className: "w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center hover:bg-purple-600 transition-colors text-xs",
            whileHover: { scale: 1.1 },
            whileTap: { scale: 0.9 },
            children: isPlaying ? "" : ""
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          motion.button,
          {
            onClick: nextTrack,
            className: "w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center hover:bg-purple-600 transition-colors text-xs",
            whileHover: { scale: 1.1 },
            whileTap: { scale: 0.9 },
            children: ""
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1 min-w-0", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs font-medium text-gray-700 truncate", children: isPlaying ? "Playing..." : "Paused" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500 truncate", children: tracks[currentTrack].name })
      ] }),
      isPlaying && /* @__PURE__ */ jsxRuntimeExports.jsxs(
        motion.div,
        {
          className: "flex gap-0.5",
          animate: { opacity: [1, 0.5, 1] },
          transition: { duration: 1, repeat: Infinity },
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-0.5 h-3 bg-purple-500 rounded-full" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-0.5 h-4 bg-purple-500 rounded-full" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-0.5 h-3 bg-purple-500 rounded-full" })
          ]
        }
      )
    ] })
  ] });
}
function UserControlCenter({ user }) {
  const [isOpen, setIsOpen] = reactExports.useState(false);
  const menuRef = reactExports.useRef(null);
  reactExports.useEffect(() => {
    const handleClickOutside = (e) => {
      if (menuRef.current && !menuRef.current.contains(e.target)) {
        setIsOpen(false);
      }
    };
    if (isOpen) {
      document.addEventListener("mousedown", handleClickOutside);
    }
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [isOpen]);
  const menuItems = [
    { icon: "", label: "ID Card", path: "/admin/profile" },
    { icon: "", label: "Inventory", path: "/admin/gallery" },
    { icon: "", label: "Settings", path: "/admin/settings" },
    { icon: "", label: "Logout", path: "/admin/logout", danger: true }
  ];
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", ref: menuRef, children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.button,
      {
        onClick: () => setIsOpen(!isOpen),
        className: "flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors",
        whileHover: { scale: 1.05 },
        whileTap: { scale: 0.95 },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 rounded-full bg-gradient-to-br from-sky-400 to-cyan-400 flex items-center justify-center text-white text-sm font-bold", children: user.avatar ? /* @__PURE__ */ jsxRuntimeExports.jsx("img", { src: user.avatar, alt: user.name, className: "w-full h-full rounded-full object-cover" }) : user.name[0] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium text-gray-800", children: user.name }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "px-1.5 py-0.5 bg-sky-100 text-sky-700 text-xs font-bold rounded", children: [
              "Lv.",
              user.level
            ] })
          ] })
        ]
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { children: isOpen && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.div,
        {
          className: "fixed inset-0 z-40",
          initial: { opacity: 0 },
          animate: { opacity: 1 },
          exit: { opacity: 0 },
          onClick: () => setIsOpen(false)
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.div,
        {
          className: "absolute top-full right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-200 z-50 overflow-hidden",
          initial: { opacity: 0, y: -10, scale: 0.95 },
          animate: { opacity: 1, y: 0, scale: 1 },
          exit: { opacity: 0, y: -10, scale: 0.95 },
          transition: { duration: 0.2 },
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-2", children: menuItems.map((item) => /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: item.path, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
            motion.div,
            {
              className: `flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${item.danger ? "text-red-600 hover:bg-red-50" : "text-gray-700 hover:bg-gray-50"}`,
              whileHover: { x: 4 },
              whileTap: { scale: 0.98 },
              onClick: () => setIsOpen(false),
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xl", children: item.icon }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: item.label })
              ]
            }
          ) }, item.path)) })
        }
      )
    ] }) })
  ] });
}
const navGroups = [
  {
    title: "",
    items: [
      { name: "", path: "/admin", icon: "" },
      { name: "", path: "/admin/settings", icon: "" }
    ]
  },
  {
    title: "",
    items: [
      { name: "", path: "/admin/article/new", icon: "", isNew: true },
      { name: "", path: "/admin/articles", icon: "" },
      { name: "", path: "/admin/anime/manage", icon: "" },
      { name: "", path: "/admin/comments", icon: "", badge: 3 }
    ]
  },
  {
    title: "",
    items: [
      { name: "", path: "/admin/gallery", icon: "" },
      { name: "", path: "/admin/tags", icon: "" }
    ]
  }
];
function AdminLayout({ children }) {
  const location = useLocation();
  useNavigate();
  const [isSidebarOpen, setIsSidebarOpen] = reactExports.useState(true);
  const [chibiState, setChibiState] = reactExports.useState("normal");
  const [systemStatus, setSystemStatus] = reactExports.useState("online");
  reactExports.useEffect(() => {
    const timer = setTimeout(() => {
      setChibiState("sleep");
    }, 3e4);
    return () => clearTimeout(timer);
  }, [location]);
  const handleChibiHover = () => {
    setChibiState("peek");
    setTimeout(() => setChibiState("normal"), 2e3);
  };
  const randomQuotes = [
    "",
    "",
    "",
    "",
    "",
    "Master"
  ];
  const [currentQuote] = reactExports.useState(
    randomQuotes[Math.floor(Math.random() * randomQuotes.length)]
  );
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-h-screen bg-[#FAFAFA] text-gray-800 font-sans", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.aside,
      {
        className: "fixed left-0 top-0 h-full w-64 bg-white border-r border-pink-200/30 shadow-sm z-30 overflow-y-auto",
        initial: { x: 0 },
        animate: { x: isSidebarOpen ? 0 : -256 },
        transition: { type: "spring", stiffness: 300, damping: 30 },
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "h-full flex flex-col", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-6 border-b border-gray-100", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3 mb-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs(
                motion.div,
                {
                  className: "relative",
                  animate: {
                    scale: [1, 1.05, 1]
                  },
                  transition: {
                    duration: 2,
                    repeat: Infinity,
                    ease: "easeInOut"
                  },
                  children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-12 h-12 rounded-full bg-gradient-to-br from-sky-400 to-cyan-400 flex items-center justify-center text-white font-bold text-lg", children: "M" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx(
                      motion.div,
                      {
                        className: "absolute inset-0 rounded-full border-2 border-sky-400/50",
                        animate: {
                          scale: [1, 1.3, 1],
                          opacity: [0.5, 0, 0.5]
                        },
                        transition: {
                          duration: 2,
                          repeat: Infinity,
                          ease: "easeInOut"
                        }
                      }
                    )
                  ]
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-semibold text-gray-800", children: "Master" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-gray-500", children: "Lv." }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "px-2 py-0.5 bg-sky-100 text-sky-700 text-xs font-bold rounded-full", children: "5" })
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 mt-3 text-xs", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: `w-2 h-2 rounded-full ${systemStatus === "online" ? "bg-green-500" : "bg-red-500"}` }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-gray-600", children: [
                "System ",
                systemStatus === "online" ? "Online" : "Offline"
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("nav", { className: "flex-1 p-4 space-y-6", children: navGroups.map((group) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-xs font-bold text-gray-400 uppercase mb-2 px-2", children: group.title }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-1", children: group.items.map((item) => {
              const isActive = location.pathname === item.path;
              return /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: item.path, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
                motion.div,
                {
                  className: `relative px-4 py-3 rounded-xl transition-all ${isActive ? "bg-pink-50 text-pink-600 shadow-sm" : "text-gray-600 hover:bg-gray-50"}`,
                  whileHover: { x: 4 },
                  whileTap: { scale: 0.98 },
                  animate: isActive ? { scale: [1, 1.02, 1] } : {},
                  transition: { duration: 0.3 },
                  children: [
                    isActive && /* @__PURE__ */ jsxRuntimeExports.jsx(
                      motion.div,
                      {
                        className: "absolute left-0 top-1/2 -translate-y-1/2 -translate-x-2",
                        initial: { opacity: 0, x: -10 },
                        animate: { opacity: 1, x: 0 },
                        children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-pink-400", children: "" })
                      }
                    ),
                    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3", children: [
                        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xl", children: item.icon }),
                        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: item.name })
                      ] }),
                      item.badge && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full", children: item.badge }),
                      item.isNew && /* @__PURE__ */ jsxRuntimeExports.jsx(
                        motion.span,
                        {
                          className: "px-2 py-0.5 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full",
                          animate: { opacity: [1, 0.5, 1] },
                          transition: { duration: 1.5, repeat: Infinity },
                          children: "New"
                        }
                      )
                    ] })
                  ]
                }
              ) }, item.path);
            }) })
          ] }, group.title)) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-4 border-t border-gray-100", children: /* @__PURE__ */ jsxRuntimeExports.jsx(AdminMusicPlayer, {}) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "div",
            {
              className: "p-4 border-t border-gray-100",
              onMouseEnter: handleChibiHover,
              onMouseLeave: () => setChibiState("normal"),
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                motion.div,
                {
                  className: "flex items-center justify-center h-20 bg-gradient-to-br from-pink-50 to-purple-50 rounded-xl relative overflow-hidden",
                  animate: {
                    scale: chibiState === "peek" ? 1.1 : 1
                  },
                  children: chibiState === "sleep" ? /* @__PURE__ */ jsxRuntimeExports.jsx(
                    motion.div,
                    {
                      animate: {
                        y: [0, -5, 0]
                      },
                      transition: {
                        duration: 1.5,
                        repeat: Infinity,
                        ease: "easeInOut"
                      },
                      children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-4xl", children: "" })
                    }
                  ) : chibiState === "peek" ? /* @__PURE__ */ jsxRuntimeExports.jsx(
                    motion.div,
                    {
                      initial: { y: 20, opacity: 0 },
                      animate: { y: 0, opacity: 1 },
                      children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-4xl", children: "" })
                    }
                  ) : /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-4xl", children: "" })
                }
              )
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-4 border-t border-gray-100", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
            UserControlCenter,
            {
              user: {
                name: "Master",
                level: 5
              }
            }
          ) })
        ] })
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: `transition-all duration-300 ${isSidebarOpen ? "ml-64" : "ml-0"}`, children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("header", { className: "sticky top-0 z-30 bg-white/80 backdrop-blur-sm border-b border-gray-100 shadow-sm", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "px-8 py-4 flex items-center justify-between", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: "/admin", className: "hover:text-pink-600 transition-colors", children: "" }),
          location.pathname !== "/admin" && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-gray-400", children: navGroups.flatMap((g) => g.items).find((item) => item.path === location.pathname)?.name || "" })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            motion.div,
            {
              className: "text-sm text-gray-500 italic",
              initial: { opacity: 0 },
              animate: { opacity: 1 },
              transition: { delay: 0.3 },
              children: currentQuote
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            motion.button,
            {
              onClick: () => window.open("/", "_blank"),
              className: "px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-lg text-sm font-medium shadow-sm hover:shadow-md transition-shadow",
              whileHover: { scale: 1.05 },
              whileTap: { scale: 0.95 },
              children: " "
            }
          )
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("main", { className: "p-8", children: /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { mode: "wait", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.div,
        {
          initial: { opacity: 0, y: 10 },
          animate: { opacity: 1, y: 0 },
          exit: { opacity: 0, y: -10 },
          transition: { duration: 0.3 },
          children
        },
        location.pathname
      ) }) })
    ] })
  ] });
}
function ThemeProviderWrapper({
  children,
  specifiedTheme,
  themeAction
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(ThemeProvider, { specifiedTheme, themeAction, children: /* @__PURE__ */ jsxRuntimeExports.jsx(InnerThemeProviderWrapper, { children }) });
}
function InnerThemeProviderWrapper({ children }) {
  const [theme] = useTheme();
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(PreventFlashOnWrongTheme, { ssrTheme: Boolean(theme) }),
    children
  ] });
}
class AppError extends Error {
  code;
  statusCode;
  details;
  constructor(message, code = "INTERNAL_SERVER_ERROR", statusCode = 500, details) {
    super(message);
    this.name = "AppError";
    this.code = code;
    this.statusCode = statusCode;
    this.details = details;
    Object.setPrototypeOf(this, AppError.prototype);
  }
  static badRequest(message, details) {
    return new AppError(message, "VALIDATION_ERROR", 400, details);
  }
  static unauthorized(message = "") {
    return new AppError(message, "UNAUTHORIZED", 401);
  }
  static forbidden(message = "") {
    return new AppError(message, "FORBIDDEN", 403);
  }
  static notFound(message = "") {
    return new AppError(message, "NOT_FOUND", 404);
  }
  static tooManyRequests(message = "") {
    return new AppError(message, "RATE_LIMIT_EXCEEDED", 429);
  }
  static internal(message = "", details) {
    return new AppError(message, "INTERNAL_SERVER_ERROR", 500, details);
  }
}
function getThemeSession(secret, isProd) {
  return createCookieSessionStorage({
    cookie: {
      name: "theme",
      secure: isProd,
      secrets: [secret],
      sameSite: "lax",
      path: "/",
      httpOnly: true
    }
  });
}
function createDynamicThemeSessionResolver(secret, isProd) {
  return createThemeSessionResolver(getThemeSession(secret, isProd));
}
const CustomCursor = reactExports.lazy(() => import("./CustomCursor-BQ-HcCDJ.js").then((m2) => ({
  default: m2.CustomCursor
})));
const MusicPlayer = reactExports.lazy(() => import("./MusicPlayer-DcEjGq27.js").then((m2) => ({
  default: m2.MusicPlayer
})));
const Live2D = reactExports.lazy(() => import("./Live2D-Fjglocp4.js").then((m2) => ({
  default: m2.Live2D
})));
const OmniCommand = reactExports.lazy(() => import("./OmniCommand-CGVPkMYQ.js").then((m2) => ({
  default: m2.OmniCommand
})));
const AchievementSystem = reactExports.lazy(() => import("./AchievementSystem-BlpZxVQn.js").then((m2) => ({
  default: m2.AchievementSystem
})));
const TheatricalMode = reactExports.lazy(() => import("./TheatricalMode-CdCmbGmx.js").then((m2) => ({
  default: m2.TheatricalMode
})));
const AmbientSound = reactExports.lazy(() => import("./AmbientSound-iSEWldob.js").then((m2) => ({
  default: m2.AmbientSound
})));
const KonamiCode = reactExports.lazy(() => import("./KonamiCode-ME9KbcIe.js").then((m2) => ({
  default: m2.KonamiCode
})));
const TitleChanger = reactExports.lazy(() => import("./TitleChanger-okWkpFrW.js").then((m2) => ({
  default: m2.TitleChanger
})));
const CopyAttribution = reactExports.lazy(() => import("./CopyAttribution-8I-8b1Ov.js").then((m2) => ({
  default: m2.CopyAttribution
})));
const HiddenPixelButton = reactExports.lazy(() => import("./HiddenPixelButton-CgU2YMgV.js").then((m2) => ({
  default: m2.HiddenPixelButton
})));
function DelayedSuspense({
  children,
  delayMs
}) {
  const [shouldRender, setShouldRender] = reactExports.useState(false);
  reactExports.useEffect(() => {
    if (delayMs === 0) {
      setShouldRender(true);
      return;
    }
    const scheduleRender = () => setShouldRender(true);
    if ("requestIdleCallback" in window) {
      const timeoutId = setTimeout(() => {
        window.requestIdleCallback(scheduleRender, {
          timeout: delayMs
        });
      }, delayMs);
      return () => clearTimeout(timeoutId);
    } else {
      const timeoutId = setTimeout(scheduleRender, delayMs);
      return () => clearTimeout(timeoutId);
    }
  }, [delayMs]);
  if (!shouldRender) return null;
  return /* @__PURE__ */ jsxRuntimeExports.jsx(reactExports.Suspense, {
    fallback: null,
    children
  });
}
const links = () => [{
  rel: "preconnect",
  href: "https://fonts.googleapis.com"
}, {
  rel: "preconnect",
  href: "https://fonts.gstatic.com",
  crossOrigin: "anonymous"
}, {
  rel: "stylesheet",
  href: "https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Inter:wght@100..900&family=Noto+Sans+SC:wght@100..900&family=Orbitron:wght@400..900&family=Roboto:wght@100..900&display=swap"
}];
function Layout({
  children
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("html", {
    lang: "zh-CN",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("head", {
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("meta", {
        charSet: "utf-8"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("meta", {
        name: "viewport",
        content: "width=device-width, initial-scale=1"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(Meta, {}), /* @__PURE__ */ jsxRuntimeExports.jsx(Links, {})]
    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("body", {
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("a", {
        href: "#main-content",
        className: "sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-orange-500 focus:text-white focus:rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-300",
        children: ""
      }), children, /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollRestoration, {}), /* @__PURE__ */ jsxRuntimeExports.jsx(Scripts, {})]
    })]
  });
}
async function loader$C({
  request,
  context
}) {
  const env = context.cloudflare.env;
  const isProd = env.ENVIRONMENT === "production";
  const secret = env.SESSION_SECRET || "default-secret";
  const themeSessionResolver = createDynamicThemeSessionResolver(secret, isProd);
  const {
    getTheme
  } = await themeSessionResolver(request);
  return {
    theme: getTheme()
  };
}
const root = withComponentProps(function App({
  loaderData
}) {
  const location = useLocation();
  const isAdmin = location.pathname.startsWith("/admin");
  const {
    theme
  } = loaderData;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(ThemeProviderWrapper, {
    specifiedTheme: theme,
    themeAction: "/action/set-theme",
    children: [!isAdmin && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(reactExports.Suspense, {
        fallback: null,
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CustomCursor, {}), /* @__PURE__ */ jsxRuntimeExports.jsx(MusicPlayer, {})]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(DelayedSuspense, {
        delayMs: 1e3,
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Live2D, {}), /* @__PURE__ */ jsxRuntimeExports.jsx(OmniCommand, {}), /* @__PURE__ */ jsxRuntimeExports.jsx(AchievementSystem, {})]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(DelayedSuspense, {
        delayMs: 3e3,
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(TheatricalMode, {}), /* @__PURE__ */ jsxRuntimeExports.jsx(AmbientSound, {
          scene: "default"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(KonamiCode, {}), /* @__PURE__ */ jsxRuntimeExports.jsx(TitleChanger, {}), /* @__PURE__ */ jsxRuntimeExports.jsx(CopyAttribution, {}), /* @__PURE__ */ jsxRuntimeExports.jsx(HiddenPixelButton, {})]
      })]
    }), isAdmin ? /* @__PURE__ */ jsxRuntimeExports.jsx(AdminLayout, {
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(Outlet, {})
    }) : /* @__PURE__ */ jsxRuntimeExports.jsx(PublicLayout, {
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(Outlet, {})
    })]
  });
});
const ErrorBoundary$3 = withErrorBoundaryProps(function ErrorBoundary2({
  error
}) {
  let message = "";
  let details = "";
  let stack;
  if (isRouteErrorResponse(error)) {
    message = error.status === 404 ? "404 - " : `${error.status} - ${error.statusText}`;
    details = error.status === 404 ? "..." : error.data || details;
  } else if (error instanceof AppError) {
    message = error.code === "NOT_FOUND" ? "404 - " : "";
    details = error.message;
  } else if (error instanceof Error) {
    message = "";
    details = error.message;
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "min-h-screen flex items-center justify-center p-4 bg-slate-50 dark:bg-slate-900 relative overflow-hidden",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "absolute inset-0 pointer-events-none select-none opacity-[0.03] overflow-hidden flex items-center justify-center",
      children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "text-[30vw] font-bold text-red-500 rotate-[-15deg] blur-sm",
        children: "ERROR"
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "relative z-10 w-full max-w-3xl",
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(GlassCard, {
        className: "p-8 md:p-12 border-red-500/20 bg-red-500/5 dark:bg-red-900/10 backdrop-blur-xl",
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex flex-col md:flex-row items-start gap-8",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "hidden md:block text-6xl",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex-1",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
              className: "text-3xl md:text-4xl font-bold text-slate-800 dark:text-red-400 mb-4 border-b border-red-500/20 pb-4",
              children: message
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-lg text-slate-600 dark:text-slate-300 mb-6",
              children: details
            }), stack, /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex flex-wrap gap-4",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
                to: "/",
                className: "px-6 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors shadow-lg shadow-red-500/20",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                onClick: () => window.location.reload(),
                className: "px-6 py-2 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700 rounded-lg font-medium transition-colors",
                children: ""
              })]
            })]
          })]
        })
      })
    })]
  });
});
const route0 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ErrorBoundary: ErrorBoundary$3,
  Layout,
  default: root,
  links,
  loader: loader$C
}, Symbol.toStringTag, { value: "Module" }));
function GlitchText({ text, className }) {
  const [isGlitching, setIsGlitching] = reactExports.useState(false);
  reactExports.useEffect(() => {
    const triggerGlitch = () => {
      setIsGlitching(true);
      setTimeout(() => setIsGlitching(false), 200);
      const nextInterval = Math.random() * 6e3 + 2e3;
      setTimeout(triggerGlitch, nextInterval);
    };
    const timer = setTimeout(triggerGlitch, 3e3);
    return () => clearTimeout(timer);
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    "h1",
    {
      className: clsx(
        "glitch-text font-display font-black uppercase tracking-widest relative inline-block",
        isGlitching && "animate-pulse",
        // Simple fallback, real glitch needs more complex CSS/keyframes
        className
      ),
      "data-text": text,
      style: {
        textShadow: isGlitching ? "2px 0 #ec4899, -2px 0 #8b5cf6" : "none"
      },
      children: text
    }
  );
}
const statusConfig$1 = {
  watching: { label: "", color: "text-blue-400", bgColor: "bg-blue-500/20" },
  completed: { label: "", color: "text-green-400", bgColor: "bg-green-500/20" },
  dropped: { label: "", color: "text-gray-400", bgColor: "bg-gray-500/20" },
  plan: { label: "", color: "text-purple-400", bgColor: "bg-purple-500/20" }
};
function AnimeCard({ title, cover_url, status, progress: progress2, rating, review }) {
  const config = statusConfig$1[status];
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    motion.div,
    {
      initial: { opacity: 0, y: 20 },
      animate: { opacity: 1, y: 0 },
      whileHover: { y: -8, scale: 1.02 },
      transition: { duration: 0.3 },
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs(GlassCard, { className: "overflow-hidden group", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative h-64 bg-gradient-to-br from-purple-900/30 to-pink-900/30 overflow-hidden", children: [
          cover_url ? /* @__PURE__ */ jsxRuntimeExports.jsx(
            OptimizedImage,
            {
              src: cover_url,
              alt: title,
              className: "w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
            }
          ) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full h-full flex items-center justify-center text-6xl opacity-20", children: "" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `absolute top-3 right-3 px-3 py-1 rounded-full ${config.bgColor} backdrop-blur-sm`, children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: `text-xs font-bold ${config.color}`, children: config.label }) }),
          rating && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "absolute bottom-3 right-3 flex items-center gap-1 bg-yellow-500/20 backdrop-blur-sm px-3 py-1 rounded-full", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-yellow-400 text-sm", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-yellow-400 text-sm font-bold", children: [
              rating,
              "/10"
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-5", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-bold mb-2 line-clamp-2 group-hover:text-pink-400 transition-colors", children: title }),
          progress2 && /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-gray-400 mb-2", children: [
            ": ",
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white", children: progress2 })
          ] }),
          review && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-300 line-clamp-3 leading-relaxed", children: review })
        ] })
      ] })
    }
  );
}
const DEFAULT_TTL = 300;
async function getWithCache(kv, key, fetcher, options = {}) {
  const { ttl = DEFAULT_TTL } = options;
  if (!kv) {
    return fetcher();
  }
  try {
    const cached = await kv.get(key, "json");
    if (cached) {
      return cached;
    }
  } catch (e) {
    console.error("Cache read error:", e);
  }
  const data = await fetcher();
  if (kv && data) {
    kv.put(key, JSON.stringify(data), { expirationTtl: ttl }).catch((e) => {
      console.error("Cache write error:", e);
    });
  }
  return data;
}
const CacheKeys = {
  MEMBERSHIP_TIERS: "membership:tiers",
  RECHARGE_PACKAGES: "recharge:packages",
  SHOP_ITEMS: "shop:items",
  SYSTEM_CONFIG: "system:config",
  HOME_DATA: "home:data",
  USER_PROFILE: (userId) => `user:${userId}:profile`
};
async function loader$B({
  context
}) {
  const env = context.cloudflare.env;
  const {
    anime_db,
    CACHE_KV
  } = env;
  if (!anime_db) {
    console.error("CRITICAL: Database 'anime_db' is not bound or configured.");
    return {
      articles: [],
      animes: [],
      error: "Database connection failed"
    };
  }
  try {
    const data = await getWithCache(CACHE_KV, CacheKeys.HOME_DATA, async () => {
      const articlesQuery = `
          SELECT id, slug, title, description, category, cover_image, views, created_at
          FROM articles
          ORDER BY created_at DESC
          LIMIT 6
        `;
      const animesQuery = `
          SELECT id, title, cover_url, status, progress, rating, review
          FROM animes
          WHERE status IN ('watching', 'completed')
          ORDER BY 
            CASE status
              WHEN 'watching' THEN 1
              WHEN 'completed' THEN 2
            END,
            created_at DESC
          LIMIT 4
        `;
      const [articlesResult, animesResult] = await Promise.all([anime_db.prepare(articlesQuery).all(), anime_db.prepare(animesQuery).all()]);
      if (!articlesResult.success) {
        console.error("Articles query failed:", articlesResult.error);
      }
      if (!animesResult.success) {
        console.error("Animes query failed:", animesResult.error);
      }
      return {
        articles: articlesResult.results || [],
        animes: animesResult.results || []
      };
    }, {
      ttl: 300
    });
    return data;
  } catch (error) {
    console.error("Failed to fetch home data:", error);
    if (error.stack) {
      console.error("Stack trace:", error.stack);
    }
    return {
      articles: [],
      animes: []
    };
  }
}
const home = withComponentProps(function Home({
  loaderData
}) {
  const {
    articles: articles2,
    animes
  } = loaderData;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "container mx-auto px-4 py-20",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      initial: {
        opacity: 0,
        y: 20
      },
      animate: {
        opacity: 1,
        y: 0
      },
      transition: {
        duration: 0.8
      },
      className: "flex flex-col lg:flex-row items-center justify-between min-h-[70vh] px-4",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "lg:w-1/2 mb-12 lg:mb-0 text-center lg:text-left",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.h1, {
          initial: {
            opacity: 0,
            x: -20
          },
          animate: {
            opacity: 1,
            x: 0
          },
          transition: {
            delay: 0.3,
            duration: 0.8
          },
          className: "text-5xl md:text-7xl lg:text-8xl font-bold mb-6 bg-gradient-to-r from-primary-start to-primary-end bg-clip-text text-transparent",
          children: (() => {
            const hour = (/* @__PURE__ */ new Date()).getHours();
            if (hour < 6) return "";
            if (hour < 12) return "";
            if (hour < 18) return "";
            return "";
          })()
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.p, {
          initial: {
            opacity: 0,
            x: -20
          },
          animate: {
            opacity: 1,
            x: 0
          },
          transition: {
            delay: 0.5,
            duration: 0.8
          },
          className: "text-xl md:text-2xl text-slate-700 max-w-2xl font-light tracking-wide mb-8",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.p, {
          initial: {
            opacity: 0,
            x: -20
          },
          animate: {
            opacity: 1,
            x: 0
          },
          transition: {
            delay: 0.7,
            duration: 0.8
          },
          className: "text-base md:text-lg text-slate-600 max-w-xl font-light mb-12",
          children: "/"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.9,
            duration: 0.6
          },
          className: "flex gap-4 flex-wrap justify-center lg:justify-start",
          children: [{
            name: "",
            path: "/articles"
          }, {
            name: "",
            path: "/archive"
          }, {
            name: "",
            path: "/shop"
          }].map((item, index2) => /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
            to: item.path,
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
              className: "px-8 py-3 bg-gradient-to-r from-primary-start to-primary-end text-white rounded-full font-bold text-lg uppercase tracking-wider",
              whileHover: {
                scale: 1.05
              },
              whileTap: {
                scale: 0.95
              },
              children: item.name
            })
          }, item.name))
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        initial: {
          opacity: 0,
          y: 50,
          rotateY: 20
        },
        animate: {
          opacity: 1,
          y: 0,
          rotateY: 0
        },
        transition: {
          delay: 0.5,
          duration: 1
        },
        className: "lg:w-1/3 relative",
        style: {
          perspective: 1e3
        },
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: "glass-card rounded-3xl overflow-hidden shadow-xl",
          whileHover: {
            scale: 1.05,
            rotateY: 5,
            rotateX: 5
          },
          transition: {
            type: "spring",
            stiffness: 300
          },
          style: {
            transformStyle: "preserve-3d"
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "relative h-96",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
              src: "https://images.unsplash.com/photo-1577056922428-a79963db266d?q=80&w=2070&auto=format&fit=crop",
              alt: "Anime illustration",
              className: "w-full h-full object-cover",
              aspectRatio: "portrait"
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "absolute inset-0 bg-gradient-to-t from-black/40 to-transparent pointer-events-none"
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "absolute bottom-6 left-6 right-6 z-10",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "text-white text-2xl font-bold mb-2",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-white/80 text-sm",
                children: ""
              })]
            })]
          })
        })
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.section, {
      initial: {
        opacity: 0,
        y: 40
      },
      animate: {
        opacity: 1,
        y: 0
      },
      transition: {
        delay: 0.9,
        duration: 0.8
      },
      className: "mt-32 mb-24",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "flex items-center justify-between mb-12",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
          className: "text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
          to: "/articles",
          className: "text-gray-400 hover:text-pink-500 transition-colors flex items-center gap-2",
          children: [" ", /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            children: ""
          })]
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",
        children: articles2.map((article, index2) => /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 1 + index2 * 0.1,
            duration: 0.5
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
            to: `/articles/${article.slug}`,
            className: "block",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs(GlassCard, {
              className: "h-full flex flex-col overflow-hidden",
              hoverEffect: false,
              children: [article.cover_image && /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
                className: "relative h-64 overflow-hidden rounded-t-3xl",
                whileHover: {
                  scale: 1.05
                },
                transition: {
                  duration: 0.5
                },
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                  src: article.cover_image,
                  alt: article.title,
                  className: "w-full h-full object-cover"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "absolute inset-0",
                  style: {
                    background: "linear-gradient(to top, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 50%, transparent 100%)",
                    boxShadow: "inset 0 0 60px rgba(0,0,0,0.2), inset 0 -20px 40px rgba(0,0,0,0.15)"
                  }
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "absolute inset-0 bg-gradient-to-b from-white/10 to-transparent pointer-events-none"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "absolute top-4 left-4 z-10",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "inline-block px-4 py-1 bg-white/80 backdrop-blur-sm text-primary-start rounded-full text-xs font-bold uppercase tracking-wider shadow-lg",
                    children: article.category
                  })
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "p-6 flex-1 flex flex-col",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                  className: "text-xl font-bold mb-3 line-clamp-2 text-slate-800 hover:text-primary-start transition-colors",
                  children: article.title
                }), article.description && /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: "text-sm text-slate-600 line-clamp-3 mb-4 flex-1",
                  children: article.description
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "flex items-center justify-between text-xs text-slate-500 pt-4 border-t border-slate-200/50",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: new Date(article.created_at * 1e3).toLocaleDateString("zh-CN")
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "flex items-center gap-1",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), article.views || 0]
                  })]
                })]
              })]
            })
          })
        }, article.id))
      }), articles2.length === 0 && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "text-center text-gray-500 py-20",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-xl",
          children: ""
        })
      })]
    }), animes.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.section, {
      initial: {
        opacity: 0,
        y: 40
      },
      animate: {
        opacity: 1,
        y: 0
      },
      transition: {
        delay: 1.2,
        duration: 0.8
      },
      className: "mb-24",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "flex items-center justify-between mb-12",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
          className: "text-4xl font-bold bg-gradient-to-r from-cyan-500 to-blue-500 bg-clip-text text-transparent",
          children: ""
        })
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",
        children: animes.map((anime, index2) => /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 1.3 + index2 * 0.1,
            duration: 0.5
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(AnimeCard, {
            ...anime
          })
        }, anime.id))
      })]
    })]
  });
});
const route1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: home,
  loader: loader$B
}, Symbol.toStringTag, { value: "Module" }));
const categoryColors = {
  "": "from-blue-500 to-cyan-500",
  "": "from-pink-500 to-rose-500",
  "": "from-purple-500 to-indigo-500",
  "": "from-amber-500 to-orange-500",
  "": "from-emerald-500 to-teal-500"
};
const gradientPool = [
  "from-red-500 to-orange-500",
  "from-orange-500 to-amber-500",
  "from-amber-500 to-yellow-500",
  "from-yellow-500 to-lime-500",
  "from-lime-500 to-green-500",
  "from-green-500 to-emerald-500",
  "from-emerald-500 to-teal-500",
  "from-teal-500 to-cyan-500",
  "from-cyan-500 to-sky-500",
  "from-sky-500 to-blue-500",
  "from-blue-500 to-indigo-500",
  "from-indigo-500 to-violet-500",
  "from-violet-500 to-purple-500",
  "from-purple-500 to-fuchsia-500",
  "from-fuchsia-500 to-pink-500",
  "from-pink-500 to-rose-500"
];
function djb2(str) {
  let hash = 5381;
  for (let i = 0; i < str.length; i++) {
    hash = (hash << 5) + hash + str.charCodeAt(i);
  }
  return hash;
}
function getCategoryColor(category) {
  if (!category) return "from-slate-500 to-slate-600";
  if (categoryColors[category]) {
    return categoryColors[category];
  }
  const hash = Math.abs(djb2(category));
  const index2 = hash % gradientPool.length;
  return gradientPool[index2];
}
const getDescription = (content) => {
  if (!content) return "";
  const cleaned = content.replace(/^#.*$/gm, "").replace(/[\*\#\[\]\(\)]/g, "").replace(/\n+/g, " ").trim();
  return cleaned.slice(0, 120) + (cleaned.length > 120 ? "..." : "");
};
async function loader$A({
  request,
  context
}) {
  const {
    getDB
  } = await import("./db-DVeXv2KN.js");
  const db = getDB(context);
  const url = new URL(request.url);
  const q2 = url.searchParams.get("q") || "";
  const category = url.searchParams.get("category") || "all";
  let sql = `
        SELECT id, slug, title, content, category, cover_image, tags, views, likes, created_at
        FROM articles 
        WHERE (status = 'published' OR status IS NULL)
    `;
  const params = [];
  if (q2) {
    sql += ` AND (title LIKE ? OR content LIKE ?)`;
    params.push(`%${q2}%`, `%${q2}%`);
  }
  if (category !== "all") {
    sql += ` AND category = ?`;
    params.push(category);
  }
  sql += ` ORDER BY created_at DESC LIMIT 50`;
  const result = await db.prepare(sql).bind(...params).all();
  const categoriesResult = await db.prepare("SELECT DISTINCT category FROM articles WHERE category IS NOT NULL").all();
  const categories = ["all", ...(categoriesResult.results || []).map((c) => c.category)];
  return {
    articles: result.results || [],
    categories,
    q: q2,
    category
  };
}
const articles = withComponentProps(function ArticlesPage() {
  const {
    articles: articles2,
    categories,
    q: q2,
    category
  } = useLoaderData();
  useSearchParams();
  const submit = useSubmit();
  const navigation = useNavigation();
  const [searchTerm, setSearchTerm] = reactExports.useState(q2);
  const isSearching = navigation.location && new URLSearchParams(navigation.location.search).has("q");
  const formatDate = (timestamp) => {
    return new Date(timestamp * 1e3).toLocaleDateString("zh-CN", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  reactExports.useEffect(() => {
    const timer = setTimeout(() => {
      if (searchTerm !== q2) {
        const isFirstSearch = q2 === "";
        submit({
          q: searchTerm,
          category
        }, {
          replace: !isFirstSearch
        });
      }
    }, 300);
    return () => clearTimeout(timer);
  }, [searchTerm, category, submit, q2]);
  const handleCategoryChange = (newCategory) => {
    submit({
      q: searchTerm,
      category: newCategory
    }, {
      replace: true
    });
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    className: "container mx-auto px-4 py-20",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "max-w-6xl mx-auto",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0,
          y: -20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        className: "text-center mb-16",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
          className: "text-5xl md:text-7xl font-bold mb-4 bg-gradient-to-r from-blue-400 via-cyan-500 to-teal-500 bg-clip-text text-transparent",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-slate-600 dark:text-slate-400 text-lg",
          children: ""
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        transition: {
          delay: 0.1
        },
        className: "glass-card p-4 rounded-2xl mb-8",
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex flex-col md:flex-row gap-4",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "relative flex-1",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
              children: isSearching ? /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, {
                className: "w-5 h-5 animate-spin"
              }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Search, {
                className: "w-5 h-5"
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "text",
              placeholder: "...",
              value: searchTerm,
              onChange: (e) => setSearchTerm(e.target.value),
              className: "w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-700/50 rounded-xl text-slate-800 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start transition-all"
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "flex flex-wrap gap-2",
            children: categories.map((cat) => /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
              onClick: () => handleCategoryChange(cat),
              className: `px-4 py-2 rounded-xl text-sm font-medium transition-all ${category === cat ? "bg-primary-start text-white shadow-lg shadow-blue-500/20" : "bg-slate-100 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,
              children: cat === "all" ? "" : cat
            }, cat))
          })]
        })
      }), articles2.length > 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",
        children: articles2.map((article, index2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.article, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.1 + index2 * 0.05
          },
          whileHover: {
            y: -5
          },
          className: "glass-card rounded-2xl overflow-hidden group",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "aspect-video relative overflow-hidden bg-slate-200 dark:bg-slate-700",
            children: [article.cover_image ? /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
              src: article.cover_image,
              alt: article.title,
              aspectRatio: "video",
              className: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
            }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: `w-full h-full bg-gradient-to-br ${getCategoryColor(article.category)} opacity-50 flex items-center justify-center`,
              children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-4xl",
                children: ""
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "absolute top-3 left-3",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: `px-3 py-1 rounded-full text-xs font-medium text-white bg-gradient-to-r ${getCategoryColor(article.category)}`,
                children: article.category || ""
              })
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "p-5",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-lg font-bold text-slate-800 dark:text-white mb-2 line-clamp-2 group-hover:text-primary-start transition-colors",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
                to: `/articles/${article.slug}`,
                children: article.title
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-sm text-slate-500 dark:text-slate-400 mb-4 line-clamp-2",
              children: getDescription(article.content)
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center justify-between text-xs text-slate-400",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "flex items-center gap-3",
                children: /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                  className: "flex items-center gap-1",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, {
                    className: "w-3.5 h-3.5"
                  }), formatDate(article.created_at)]
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center gap-3",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                  className: "flex items-center gap-1",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Eye, {
                    className: "w-3.5 h-3.5"
                  }), article.views || 0]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                  className: "flex items-center gap-1",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Heart, {
                    className: "w-3.5 h-3.5"
                  }), article.likes || 0]
                })]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
              to: `/articles/${article.slug}`,
              className: "mt-4 flex items-center gap-2 text-sm font-medium text-primary-start hover:gap-3 transition-all",
              children: [" ", /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, {
                className: "w-4 h-4"
              })]
            })]
          })]
        }, article.id))
      }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        transition: {
          delay: 0.2
        },
        className: "text-center py-20",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "text-6xl mb-4",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
          className: "text-xl font-bold text-slate-800 dark:text-white mb-2",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-slate-500 dark:text-slate-400 mb-6",
          children: q2 ? "" : ""
        }), !q2 && /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
          to: "/admin/article/new",
          className: "inline-flex items-center gap-2 px-6 py-3 bg-primary-start text-white rounded-xl hover:bg-primary-end transition-colors",
          children: [" ", /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, {
            className: "w-4 h-4"
          })]
        })]
      })]
    })
  });
});
const route2 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: articles,
  loader: loader$A
}, Symbol.toStringTag, { value: "Module" }));
async function loader$z({
  params,
  context
}) {
  const {
    getDB
  } = await import("./db-DVeXv2KN.js");
  const db = getDB(context);
  const {
    slug
  } = params;
  const article = await db.prepare(`
            SELECT * FROM articles 
            WHERE slug = ? AND (status = 'published' OR status IS NULL)
        `).bind(slug).first();
  if (!article) {
    throw new Response("", {
      status: 404
    });
  }
  await db.prepare(`UPDATE articles SET views = views + 1 WHERE id = ?`).bind(article.id).run();
  const relatedArticles = await db.prepare(`
            SELECT id, slug, title, cover_image, category, created_at
            FROM articles 
            WHERE category = ? AND id != ? AND (status = 'published' OR status IS NULL)
            ORDER BY created_at DESC
            LIMIT 3
        `).bind(article.category, article.id).all();
  return {
    article,
    relatedArticles: relatedArticles.results || []
  };
}
const articles_$slug = withComponentProps(function ArticleDetailPage() {
  const {
    article,
    relatedArticles
  } = useLoaderData();
  const formatDate = (timestamp) => {
    return new Date(timestamp * 1e3).toLocaleDateString("zh-CN", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  const estimateReadTime = (content) => {
    const words = content.length;
    const minutes = Math.ceil(words / 500);
    return `${minutes} `;
  };
  const parseTags = (tagsJson) => {
    if (!tagsJson) return [];
    try {
      return JSON.parse(tagsJson);
    } catch {
      return [];
    }
  };
  const tags = parseTags(article.tags);
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    className: "min-h-screen pt-4 pb-12 px-4",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "max-w-4xl mx-auto",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
        to: "/articles",
        className: "inline-flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-primary-start transition-colors mb-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, {
          className: "w-4 h-4"
        }), ""]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.header, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        className: "mb-8",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "mb-4",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            className: `inline-block px-4 py-1.5 rounded-full text-sm font-medium text-white bg-gradient-to-r ${getCategoryColor(article.category)}`,
            children: article.category || ""
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
          className: "text-3xl md:text-4xl font-bold text-slate-800 dark:text-white mb-4 leading-tight",
          children: article.title
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex flex-wrap gap-4 text-sm text-slate-500 dark:text-slate-400",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
            className: "flex items-center gap-1.5",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, {
              className: "w-4 h-4"
            }), formatDate(article.created_at)]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
            className: "flex items-center gap-1.5",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Clock, {
              className: "w-4 h-4"
            }), estimateReadTime(article.content || "")]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
            className: "flex items-center gap-1.5",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Eye, {
              className: "w-4 h-4"
            }), article.views + 1, " "]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
            className: "flex items-center gap-1.5",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Heart, {
              className: "w-4 h-4"
            }), article.likes || 0, " "]
          })]
        })]
      }), article.cover_image && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        transition: {
          delay: 0.1
        },
        className: "mb-8 rounded-2xl overflow-hidden",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
          src: article.cover_image,
          alt: article.title,
          aspectRatio: "video",
          className: "w-full h-auto object-cover"
        })
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.article, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        transition: {
          delay: 0.2
        },
        className: "glass-card p-8 rounded-2xl mb-8",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "prose prose-base md:prose-lg dark:prose-invert max-w-none\r\n                            prose-headings:text-slate-800 dark:prose-headings:text-white\r\n                            prose-p:text-slate-600 dark:prose-p:text-slate-300\r\n                            prose-a:text-primary-start hover:prose-a:text-primary-end\r\n                            prose-code:bg-slate-100 dark:prose-code:bg-slate-800\r\n                            prose-pre:bg-slate-900 dark:prose-pre:bg-slate-950\r\n                            prose-img:rounded-xl",
          dangerouslySetInnerHTML: {
            __html: article.content?.replace(/\n/g, "<br>") || ""
          }
        })
      }), tags.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        transition: {
          delay: 0.3
        },
        className: "flex flex-wrap gap-2 mb-8",
        children: tags.map((tag, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
          className: "inline-flex items-center gap-1 px-3 py-1.5 bg-slate-100 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 rounded-lg text-sm",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Tag, {
            className: "w-3.5 h-3.5"
          }), tag]
        }, i))
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        transition: {
          delay: 0.35
        },
        className: "flex gap-3 mb-12",
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
          onClick: () => {
            navigator.clipboard.writeText(window.location.href);
            alert("");
          },
          className: "flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Share2, {
            className: "w-4 h-4"
          }), ""]
        })
      }), relatedArticles.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.section, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        transition: {
          delay: 0.4
        },
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
          className: "text-2xl font-bold text-slate-800 dark:text-white mb-6",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "grid grid-cols-1 md:grid-cols-3 gap-4",
          children: relatedArticles.map((related) => /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
            to: `/articles/${related.slug}`,
            className: "glass-card rounded-xl overflow-hidden group hover:shadow-lg transition-shadow",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "aspect-video bg-slate-200 dark:bg-slate-700",
              children: related.cover_image ? /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                src: related.cover_image,
                alt: related.title,
                aspectRatio: "video",
                className: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
              }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: `w-full h-full bg-gradient-to-br ${getCategoryColor(related.category)} opacity-50 flex items-center justify-center`,
                children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: "text-2xl",
                  children: ""
                })
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "p-4",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "font-medium text-slate-800 dark:text-white line-clamp-2 group-hover:text-primary-start transition-colors",
                children: related.title
              })
            })]
          }, related.id))
        })]
      })]
    })
  });
});
const route3 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: articles_$slug,
  loader: loader$z
}, Symbol.toStringTag, { value: "Module" }));
async function loader$y({
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  try {
    const articlesResult = await anime_db.prepare(`SELECT id, slug, title, description, category, created_at, cover_image, 'article' as type
         FROM articles
         ORDER BY created_at DESC`).all();
    const animesResult = await anime_db.prepare(`SELECT id, title, status, created_at, cover_image, 'anime' as type
         FROM animes
         ORDER BY created_at DESC`).all();
    const activities = [...articlesResult.results || [], ...animesResult.results || []].sort((a, b2) => b2.created_at - a.created_at);
    const groupedByYear = activities.reduce((acc, activity) => {
      const date = new Date(activity.created_at * 1e3);
      const year = date.getFullYear();
      if (!acc[year]) {
        acc[year] = [];
      }
      acc[year].push({
        ...activity,
        formattedDate: date.toLocaleDateString("zh-CN", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit"
        })
      });
      return acc;
    }, {});
    return {
      groupedByYear
    };
  } catch (error) {
    console.error("Failed to fetch archive:", error);
    return {
      groupedByYear: {}
    };
  }
}
const archive = withComponentProps(function Archive2({
  loaderData
}) {
  const {
    groupedByYear
  } = loaderData;
  const years = Object.keys(groupedByYear).sort((a, b2) => parseInt(b2) - parseInt(a));
  const containerRef = reactExports.useRef(null);
  const {
    scrollYProgress
  } = useScroll({
    target: containerRef
  });
  const timelineY = useTransform(scrollYProgress, [0, 1], [0, -100]);
  const separateActivities = () => {
    const articles2 = [];
    const animes2 = [];
    years.forEach((year) => {
      groupedByYear[year].forEach((activity) => {
        if (activity.type === "article") {
          articles2.push({
            ...activity,
            year
          });
        } else {
          animes2.push({
            ...activity,
            year
          });
        }
      });
    });
    return {
      articles: articles2,
      animes: animes2
    };
  };
  separateActivities();
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    ref: containerRef,
    className: "container mx-auto px-4 py-20",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      initial: {
        opacity: 0,
        y: -20
      },
      animate: {
        opacity: 1,
        y: 0
      },
      className: "text-center mb-16",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
        className: "text-5xl md:text-7xl font-bold mb-4 bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 bg-clip-text text-transparent",
        children: ""
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-slate-600 text-lg",
        children: ""
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "relative max-w-7xl mx-auto",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        style: {
          y: timelineY
        },
        className: "absolute left-1/2 top-0 bottom-0 w-1 bg-gradient-to-b from-pink-500 via-purple-500 to-cyan-500 transform -translate-x-1/2 z-0"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "relative z-10",
        children: years.map((year, yearIdx) => {
          const yearActivities = groupedByYear[year];
          return yearActivities.map((activity, idx) => {
            const isLeft = activity.type === "article";
            const totalIdx = yearIdx * 100 + idx;
            return /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
              initial: {
                opacity: 0,
                x: isLeft ? -50 : 50
              },
              animate: {
                opacity: 1,
                x: 0
              },
              transition: {
                delay: totalIdx * 0.05
              },
              className: `relative mb-8 ${isLeft ? "pr-[52%] text-right" : "pl-[52%] text-left"}`,
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: `absolute top-4 ${isLeft ? "right-[48%]" : "left-[48%]"} w-4 h-4 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 border-4 border-white shadow-lg z-20`
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs(GlassCard, {
                className: `p-6 hover:scale-[1.02] transition-transform ${isLeft ? "mr-8" : "ml-8"}`,
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: `flex items-start justify-between mb-2 ${isLeft ? "flex-row-reverse" : ""}`,
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: `flex items-center gap-2 ${isLeft ? "flex-row-reverse" : ""}`,
                    children: [activity.type === "article" ? /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      className: "text-2xl",
                      children: ""
                    }) : /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      className: "text-2xl",
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      className: "text-xs text-slate-500 uppercase",
                      children: activity.type === "article" ? "" : ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-sm text-slate-400",
                    children: activity.formattedDate
                  })]
                }), activity.cover_image && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "mb-4 rounded-xl overflow-hidden aspect-[16/9] relative group",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                    src: activity.cover_image,
                    alt: activity.title,
                    className: "w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",
                    width: 400
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors"
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                  className: `text-xl font-bold mb-2 hover:text-pink-400 transition-colors ${isLeft ? "text-right" : "text-left"}`,
                  children: activity.title
                }), activity.type === "article" && activity.description && /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: `text-sm text-slate-600 line-clamp-2 ${isLeft ? "text-right" : "text-left"}`,
                  children: activity.description
                }), activity.type === "anime" && activity.status && /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
                  className: `text-sm ${isLeft ? "text-right" : "text-left"}`,
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-slate-500",
                    children: ": "
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: activity.status === "completed" ? "text-green-400" : activity.status === "watching" ? "text-blue-400" : activity.status === "plan" ? "text-purple-400" : "text-gray-400",
                    children: activity.status === "completed" ? "" : activity.status === "watching" ? "" : activity.status === "plan" ? "" : ""
                  })]
                }), activity.category && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: `mt-3 ${isLeft ? "text-right" : "text-left"}`,
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "inline-block px-3 py-1 bg-purple-500/20 text-purple-400 rounded-full text-xs",
                    children: activity.category
                  })
                })]
              })]
            }, `${activity.type}-${activity.id}`);
          });
        })
      })]
    }), years.length === 0 && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "text-center text-slate-500 py-20",
      children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-xl",
        children: ""
      })
    })]
  });
});
const route4 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: archive,
  loader: loader$y
}, Symbol.toStringTag, { value: "Module" }));
const sampleImages = [{
  id: 1,
  url: "https://images.unsplash.com/photo-1577056922428-a79963db266d?q=80&w=2070&auto=format&fit=crop",
  note: "2023.10.05 ",
  date: "2023-10-05"
}, {
  id: 2,
  url: "https://images.unsplash.com/photo-1616486339569-9c4050911745?q=80&w=2070&auto=format&fit=crop",
  note: "2023.09.20 ",
  date: "2023-09-20"
}, {
  id: 3,
  url: "https://images.unsplash.com/photo-1542596594-649edbc13630?q=80&w=1974&auto=format&fit=crop",
  note: "2023.08.15 ",
  date: "2023-08-15"
}, {
  id: 4,
  url: "https://images.unsplash.com/photo-1577056922428-a79963db266d?q=80&w=2070&auto=format&fit=crop",
  note: "2023.07.10 ",
  date: "2023-07-10"
}, {
  id: 5,
  url: "https://images.unsplash.com/photo-1616486339569-9c4050911745?q=80&w=2070&auto=format&fit=crop",
  note: "2023.06.25 ",
  date: "2023-06-25"
}, {
  id: 6,
  url: "https://images.unsplash.com/photo-1542596594-649edbc13630?q=80&w=1974&auto=format&fit=crop",
  note: "2023.05.12 ",
  date: "2023-05-12"
}];
async function loader$x({
  context
}) {
  return {
    images: sampleImages
  };
}
const gallery = withComponentProps(function Gallery({
  loaderData
}) {
  const {
    images
  } = loaderData || {
    images: []
  };
  const getRandomRotation = (index2) => {
    const baseRotation = index2 % 7 - 3;
    return baseRotation;
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "container mx-auto px-4 py-20",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      initial: {
        opacity: 0,
        y: -20
      },
      animate: {
        opacity: 1,
        y: 0
      },
      className: "text-center mb-16",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
        className: "text-5xl md:text-7xl font-bold mb-4 bg-gradient-to-r from-yellow-400 via-orange-500 to-pink-500 bg-clip-text text-transparent",
        children: ""
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-slate-600 text-lg",
        children: ""
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "flex flex-wrap justify-center gap-8",
      children: images.map((image, index2) => {
        const rotation = getRandomRotation(index2);
        return /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          initial: {
            opacity: 0,
            scale: 0.8,
            rotate: rotation
          },
          animate: {
            opacity: 1,
            scale: 1,
            rotate: rotation
          },
          transition: {
            delay: index2 * 0.1,
            duration: 0.5
          },
          whileHover: {
            scale: 1.05,
            rotate: rotation + (rotation > 0 ? 2 : -2),
            zIndex: 10
          },
          className: "relative",
          style: {
            rotate: `${rotation}deg`
          },
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "bg-white rounded-lg shadow-2xl p-4 w-64",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "relative aspect-[4/3] overflow-hidden rounded-sm mb-4",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                src: image.url,
                alt: image.note,
                className: "object-cover w-full h-full absolute inset-0"
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "px-2 pb-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-sm text-slate-700 font-handwriting",
                style: {
                  fontFamily: "'Comfortaa', 'Noto Sans SC', cursive",
                  transform: `rotate(${rotation * 0.3}deg)`
                },
                children: image.note
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-xs text-slate-400 mt-1",
                children: image.date
              })]
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "absolute inset-0 bg-black/10 rounded-lg blur-xl -z-10",
            style: {
              transform: `rotate(${rotation * 0.5}deg) translateY(10px)`
            }
          })]
        }, image.id);
      })
    }), images.length === 0 && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "text-center text-slate-500 py-20",
      children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-xl",
        children: ""
      })
    })]
  });
});
const route5 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: gallery,
  loader: loader$x
}, Symbol.toStringTag, { value: "Module" }));
async function loader$w({
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  try {
    const animesResult = await anime_db.prepare(`SELECT id, title, cover_url, status, progress, rating, review, created_at
         FROM animes
         ORDER BY 
           CASE status
             WHEN 'watching' THEN 1
             WHEN 'completed' THEN 2
             WHEN 'plan' THEN 3
             WHEN 'dropped' THEN 4
           END,
           rating DESC,
           created_at DESC`).all();
    return {
      animes: animesResult.results || []
    };
  } catch (error) {
    console.error("Failed to fetch animes:", error);
    return {
      animes: []
    };
  }
}
const statusConfig = {
  watching: {
    label: "",
    color: "text-blue-400",
    bgColor: "bg-blue-500/20",
    borderColor: "border-blue-400/30"
  },
  completed: {
    label: "",
    color: "text-green-400",
    bgColor: "bg-green-500/20",
    borderColor: "border-green-400/30"
  },
  dropped: {
    label: "",
    color: "text-gray-400",
    bgColor: "bg-gray-500/20",
    borderColor: "border-gray-400/30"
  },
  plan: {
    label: "",
    color: "text-purple-400",
    bgColor: "bg-purple-500/20",
    borderColor: "border-purple-400/30"
  }
};
function StarRating({
  rating
}) {
  const fullStars = Math.floor(rating / 2);
  const hasHalfStar = rating % 2 === 1;
  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "flex items-center gap-0.5",
    children: [Array.from({
      length: fullStars
    }).map((_2, i) => /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
      className: "text-yellow-400 text-sm",
      children: ""
    }, i)), hasHalfStar && /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
      className: "text-yellow-400 text-sm",
      children: ""
    }), Array.from({
      length: emptyStars
    }).map((_2, i) => /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
      className: "text-gray-400 text-sm",
      children: ""
    }, i)), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
      className: "ml-2 text-xs text-slate-400",
      children: [rating, "/10"]
    })]
  });
}
function AnimeCardItem({
  anime,
  index: index2,
  config
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
    initial: {
      opacity: 0,
      scale: 0.8
    },
    animate: {
      opacity: 1,
      scale: 1
    },
    transition: {
      delay: index2 * 0.05
    },
    whileHover: {
      y: -8,
      scale: 1.05
    },
    className: "group cursor-pointer",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs(GlassCard, {
      className: "overflow-hidden p-0 h-full",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "relative aspect-[2/3] overflow-hidden",
        children: [anime.cover_url ? /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
          src: anime.cover_url,
          alt: anime.title,
          className: "w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
        }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "w-full h-full bg-gradient-to-br from-purple-900/30 to-pink-900/30 flex items-center justify-center text-6xl opacity-20",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: `absolute top-2 right-2 px-2 py-1 rounded-full ${config.bgColor} backdrop-blur-sm border ${config.borderColor}`,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            className: `text-xs font-bold ${config.color}`,
            children: config.label
          })
        }), anime.rating && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "absolute bottom-2 left-2 right-2 bg-black/60 backdrop-blur-sm rounded-lg p-2 opacity-0 group-hover:opacity-100 transition-opacity",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(StarRating, {
            rating: anime.rating
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "p-3",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
          className: "text-sm font-bold text-slate-800 mb-1 line-clamp-2 group-hover:text-primary-start transition-colors",
          children: anime.title
        }), anime.progress && /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
          className: "text-xs text-slate-500 mb-2",
          children: [": ", /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            className: "text-slate-700 font-medium",
            children: anime.progress
          })]
        }), anime.rating && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "hidden group-hover:block",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(StarRating, {
            rating: anime.rating
          })
        })]
      }), anime.review && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "px-3 pb-3 opacity-0 group-hover:opacity-100 transition-opacity",
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
          className: "text-xs text-slate-600 line-clamp-2 italic",
          children: ['"', anime.review, '"']
        })
      })]
    })
  });
}
const bangumi = withComponentProps(function Bangumi({
  loaderData
}) {
  const {
    animes
  } = loaderData || {
    animes: []
  };
  const [filterStatus, setFilterStatus] = reactExports.useState("all");
  const [sortBy, setSortBy] = reactExports.useState("default");
  const processedAnimes = reactExports.useMemo(() => {
    let result = [...animes];
    if (filterStatus !== "all") {
      result = result.filter((a) => a.status === filterStatus);
    }
    if (sortBy === "rating") {
      result.sort((a, b2) => (b2.rating || 0) - (a.rating || 0));
    } else if (sortBy === "date") {
      result.sort((a, b2) => b2.created_at - a.created_at);
    }
    return result;
  }, [animes, filterStatus, sortBy]);
  const groupedAnimes = reactExports.useMemo(() => {
    if (sortBy !== "default") return {};
    return processedAnimes.reduce((acc, anime) => {
      const status = anime.status || "plan";
      if (!acc[status]) {
        acc[status] = [];
      }
      acc[status].push(anime);
      return acc;
    }, {});
  }, [processedAnimes, sortBy]);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "container mx-auto px-4 py-20",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      initial: {
        opacity: 0,
        y: -20
      },
      animate: {
        opacity: 1,
        y: 0
      },
      className: "text-center mb-16",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
        className: "text-5xl md:text-7xl font-bold mb-4 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent",
        children: ""
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-slate-600 text-lg",
        children: ""
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      initial: {
        opacity: 0,
        y: 20
      },
      animate: {
        opacity: 1,
        y: 0
      },
      transition: {
        delay: 0.1
      },
      className: "flex flex-col md:flex-row items-center justify-between gap-4 mb-12 bg-white/5 dark:bg-black/20 backdrop-blur-md p-4 rounded-2xl border border-white/10",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "flex flex-wrap gap-2",
        children: [{
          id: "all",
          label: ""
        }, {
          id: "watching",
          label: ""
        }, {
          id: "completed",
          label: ""
        }, {
          id: "plan",
          label: ""
        }, {
          id: "dropped",
          label: ""
        }].map((status) => /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
          onClick: () => setFilterStatus(status.id),
          className: `px-4 py-2 rounded-xl text-sm font-bold transition-all ${filterStatus === status.id ? "bg-blue-500 text-white shadow-lg shadow-blue-500/20" : "bg-white/10 text-slate-600 dark:text-slate-400 hover:bg-white/20"}`,
          children: status.label
        }, status.id))
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "flex items-center gap-2 bg-white/10 rounded-xl p-1",
        children: [{
          id: "default",
          label: "",
          icon: Funnel
        }, {
          id: "rating",
          label: "",
          icon: Star
        }, {
          id: "date",
          label: "",
          icon: Calendar
        }].map((sort) => /* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
          onClick: () => setSortBy(sort.id),
          className: `flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${sortBy === sort.id ? "bg-white shadow-sm text-slate-800" : "text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx(sort.icon, {
            size: 14
          }), sort.label]
        }, sort.id))
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "space-y-12",
      children: sortBy === "default" ? (
        //  ()
        Object.entries(groupedAnimes).map(([status, statusAnimes]) => {
          const config = statusConfig[status] || statusConfig.plan;
          return /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.section, {
            initial: {
              opacity: 0,
              y: 20
            },
            animate: {
              opacity: 1,
              y: 0
            },
            className: "mb-12",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-4 mb-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                className: `text-2xl font-bold ${config.color}`,
                children: config.label
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "flex-1 h-px bg-gradient-to-r from-transparent via-current to-transparent opacity-30",
                style: {
                  color: config.color
                }
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                className: "text-sm text-slate-500",
                children: [statusAnimes.length, " "]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",
              children: statusAnimes.map((anime, index2) => /* @__PURE__ */ jsxRuntimeExports.jsx(AnimeCardItem, {
                anime,
                index: index2,
                config
              }, anime.id))
            })]
          }, status);
        })
      ) : (
        //  ()
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",
          children: processedAnimes.map((anime, index2) => {
            const status = anime.status || "plan";
            const config = statusConfig[status] || statusConfig.plan;
            return /* @__PURE__ */ jsxRuntimeExports.jsx(AnimeCardItem, {
              anime,
              index: index2,
              config
            }, anime.id);
          })
        })
      )
    }), animes.length === 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "text-center text-slate-500 py-20",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-xl mb-4",
        children: ""
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-sm",
        children: ""
      })]
    })]
  });
});
const route6 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: bangumi,
  loader: loader$w
}, Symbol.toStringTag, { value: "Module" }));
const sampleAnimes = [{
  id: 1,
  bangumi_id: 296517,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=800",
  status: "watching",
  progress: "24/28",
  rating: 9.5,
  review: "",
  created_at: 1704067200
}, {
  id: 2,
  bangumi_id: 253046,
  title: " ",
  cover_url: "https://images.unsplash.com/photo-1541562232579-512a21360020?q=80&w=800",
  status: "completed",
  progress: "",
  rating: 10,
  review: "",
  created_at: 1701388800
}, {
  id: 3,
  bangumi_id: 314463,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1620503374956-c942862f0372?q=80&w=800",
  status: "watching",
  progress: "12/24",
  rating: 8.5,
  review: "",
  created_at: 1696118400
}, {
  id: 4,
  bangumi_id: 236819,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=800",
  status: "plan",
  progress: "0/26",
  rating: 0,
  review: "",
  created_at: 1680307200
}, {
  id: 5,
  bangumi_id: 265,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1578632767115-351597cf2477?q=80&w=800",
  status: "completed",
  progress: "",
  rating: 10,
  review: "",
  created_at: 1672531200
}, {
  id: 6,
  bangumi_id: 253041,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1607604276583-eef5d076aa5f?q=80&w=800",
  status: "completed",
  progress: "",
  rating: 9,
  review: "",
  created_at: 1698796800
}, {
  id: 7,
  bangumi_id: 386809,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1596727147705-54a9d750e721?q=80&w=800",
  status: "completed",
  progress: "",
  rating: 9.2,
  review: "",
  created_at: 1681257600
}, {
  id: 8,
  bangumi_id: 321885,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1618336753974-aae8e04506aa?q=80&w=800",
  status: "completed",
  progress: "",
  rating: 8.8,
  review: "",
  created_at: 1665446400
}, {
  id: 9,
  bangumi_id: 332591,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=800",
  status: "completed",
  progress: "",
  rating: 9.8,
  review: "",
  created_at: 1665187200
}, {
  id: 10,
  bangumi_id: 309486,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1535378437327-b7149b379bab?q=80&w=800",
  status: "completed",
  progress: "",
  rating: 9.6,
  review: "",
  created_at: 1663027200
}, {
  id: 11,
  bangumi_id: 364450,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1569701813229-33284b643634?q=80&w=800",
  status: "dropped",
  progress: "8/13",
  rating: 6.5,
  review: "",
  created_at: 165672e4
}, {
  id: 12,
  bangumi_id: 296620,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1628510118714-d2124aea0b72?q=80&w=800",
  status: "completed",
  progress: "",
  rating: 8,
  review: "",
  created_at: 1634256e3
}, {
  id: 13,
  bangumi_id: 302636,
  title: "86 --",
  cover_url: "https://images.unsplash.com/photo-1624213111452-35e8d3d5cc18?q=80&w=800",
  status: "plan",
  progress: "0/23",
  rating: 0,
  review: "",
  created_at: 1618099200
}, {
  id: 14,
  bangumi_id: 292275,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1519074069444-1ba4fff66d16?q=80&w=800",
  status: "watching",
  progress: "10/24",
  rating: 9,
  review: "",
  created_at: 1610236800
}, {
  id: 15,
  bangumi_id: 4933,
  title: "",
  cover_url: "https://images.unsplash.com/photo-1614726365723-49cfa0950718?q=80&w=800",
  status: "completed",
  progress: "",
  rating: 10,
  review: "",
  created_at: 1301961600
}, {
  id: 16,
  bangumi_id: 1386,
  title: "CLANNAD",
  cover_url: "https://images.unsplash.com/photo-1529335764857-3f1164d1bef7?q=80&w=800",
  status: "plan",
  progress: "0/48",
  rating: 0,
  review: "",
  created_at: 1191456e3
}];
async function loader$v({
  params,
  context
}) {
  const id2 = Number(params.id);
  const localAnime = sampleAnimes.find((a) => a.id === id2);
  if (!localAnime) {
    throw new Response("Not Found", {
      status: 404
    });
  }
  let bangumiData = null;
  if (localAnime.bangumi_id) {
    const kv = context.cloudflare?.env?.anime_kv;
    const cacheKey = `bangumi_v1:${localAnime.bangumi_id}`;
    let subject = null;
    let characters = [];
    let persons = [];
    let relations = [];
    let cachedData = null;
    if (kv) {
      try {
        cachedData = await kv.get(cacheKey, "json");
      } catch (e) {
        console.error("KV get error:", e);
      }
    }
    if (cachedData) {
      subject = cachedData.subject;
      characters = cachedData.characters;
      persons = cachedData.persons;
      relations = cachedData.relations;
    } else {
      try {
        const headers = {
          "User-Agent": "antigravity/anime-blog-demo"
        };
        const responses = await Promise.all([fetch(`https://api.bgm.tv/v0/subjects/${localAnime.bangumi_id}`, {
          headers
        }), fetch(`https://api.bgm.tv/v0/subjects/${localAnime.bangumi_id}/characters`, {
          headers
        }), fetch(`https://api.bgm.tv/v0/subjects/${localAnime.bangumi_id}/persons`, {
          headers
        }), fetch(`https://api.bgm.tv/v0/subjects/${localAnime.bangumi_id}/subjects`, {
          headers
        })]);
        const results = await Promise.all(responses.map(async (r2) => {
          if (!r2.ok) return null;
          return r2.json();
        }));
        subject = results[0];
        characters = results[1] || [];
        persons = results[2] || [];
        relations = results[3] || [];
        if (kv && subject) {
          await kv.put(cacheKey, JSON.stringify({
            subject,
            characters,
            persons,
            relations
          }), {
            expirationTtl: 3600
          });
        }
      } catch (error) {
        console.error("BGM API fetch failed:", error);
      }
    }
    if (subject) {
      bangumiData = {
        subject,
        characters,
        persons,
        relations
      };
    }
  }
  return {
    localAnime,
    bangumiData
  };
}
const bangumi_$id = withComponentProps(function BangumiDetail({
  loaderData
}) {
  const {
    localAnime,
    bangumiData
  } = loaderData;
  const title = localAnime.title;
  const cover = localAnime.cover_url;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "min-h-screen relative overflow-hidden -mt-20 md:-mt-24",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "absolute inset-0 -z-10",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
        src: cover,
        alt: "",
        className: "w-full h-full object-cover blur-3xl opacity-40 scale-110"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "absolute inset-0 bg-gradient-to-t from-slate-50 via-slate-50/50 to-transparent dark:from-slate-950 dark:via-slate-950/50 dark:to-transparent"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "absolute inset-0 bg-gradient-to-b from-white/20 to-transparent dark:from-black/20"
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "container mx-auto px-4 py-12",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
        to: "/bangumi",
        className: "inline-flex items-center text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200 mb-8 transition-colors group bg-white/30 dark:bg-black/30 backdrop-blur-md px-4 py-2 rounded-full",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
          className: "mr-2 group-hover:-translate-x-1 transition-transform",
          children: ""
        }), ""]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "grid grid-cols-1 md:grid-cols-[300px_1fr] gap-12",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          initial: {
            opacity: 0,
            x: -20
          },
          animate: {
            opacity: 1,
            x: 0
          },
          className: "space-y-6",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx(GlassCard, {
            className: "p-2 overflow-hidden rounded-xl border-white/40 dark:border-white/10 shadow-2xl",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
              src: cover,
              alt: title,
              className: "w-full h-auto rounded-lg shadow-inner"
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(GlassCard, {
            className: "p-6 text-center border-t-4 border-t-yellow-400 min-h-[140px] flex flex-col justify-center",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(reactExports.Suspense, {
              fallback: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "animate-pulse flex flex-col items-center",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "h-4 w-20 bg-slate-200 rounded mb-2"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "h-10 w-16 bg-slate-200 rounded"
                })]
              }),
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(Await, {
                resolve: bangumiData,
                errorElement: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: "text-red-500 text-sm",
                  children: ""
                }),
                children: (data) => {
                  const rating = data?.subject?.rating?.score || localAnime.rating;
                  const rank = data?.subject?.rating?.rank;
                  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                      className: "text-slate-500 text-sm font-bold uppercase tracking-wider mb-2",
                      children: "Bangumi "
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "flex items-center justify-center gap-2 mb-2",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        className: "text-5xl font-black text-slate-800 dark:text-white",
                        children: rating
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        className: "text-xl text-slate-400",
                        children: "/ 10"
                      })]
                    }), rank && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "inline-block bg-slate-100 dark:bg-slate-800 px-3 py-1 rounded-full text-xs font-mono text-slate-500",
                      children: ["Rank #", rank]
                    })]
                  });
                }
              })
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs(GlassCard, {
            className: "p-6",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
              className: "text-slate-500 text-sm font-bold uppercase tracking-wider mb-4",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex justify-between items-center mb-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-slate-700 dark:text-slate-300 font-bold",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "capitalize px-2 py-1 bg-blue-100 text-blue-600 rounded text-xs font-bold",
                children: localAnime.status
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex justify-between items-center",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-slate-700 dark:text-slate-300 font-bold",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "font-mono",
                children: localAnime.progress
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.1
          },
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
            className: "text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-2",
            children: title
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(reactExports.Suspense, {
            fallback: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "animate-pulse space-y-4 mt-8",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "h-8 w-1/3 bg-slate-200 rounded"
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "h-32 bg-slate-200 rounded"
              })]
            }),
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(Await, {
              resolve: bangumiData,
              children: (data) => /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
                children: [data?.subject?.name && data.subject.name !== title && /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                  className: "text-xl text-slate-500 mb-6 font-light",
                  children: data.subject.name
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "flex flex-wrap gap-2 mb-8",
                  children: (data?.subject?.tags || []).slice(0, 8).map((tag) => /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "px-3 py-1 bg-white/50 dark:bg-white/10 backdrop-blur-sm border border-slate-200 dark:border-slate-700 rounded-full text-sm text-slate-600 dark:text-slate-300",
                    children: tag.name
                  }, tag.name))
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "prose prose-lg dark:prose-invert max-w-none mb-12",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                    className: "text-2xl font-bold mb-4 border-l-4 border-blue-500 pl-4",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                    className: "text-slate-600 dark:text-slate-300 leading-relaxed whitespace-pre-line",
                    children: data?.subject?.summary || ""
                  })]
                }), data?.characters && data.characters.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "mb-12",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-2xl font-bold mb-6 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), " "]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "flex overflow-x-auto pb-4 gap-4 scrollbar-hide -mx-4 px-4 md:mx-0 md:px-0",
                    children: data.characters.map((char) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "flex-shrink-0 w-32 group",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "w-32 h-32 rounded-full overflow-hidden mb-2 border-2 border-white/20 shadow-md relative",
                        children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                          src: char.images?.grid || "https://bgm.tv/img/no_icon_subject.png",
                          alt: char.name,
                          className: "w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                        })
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                        className: "text-sm font-bold text-center truncate text-slate-800 dark:text-slate-200",
                        children: char.name
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                        className: "text-xs text-center truncate text-slate-500 dark:text-slate-400",
                        children: char.role_name
                      }), char.actors && char.actors[0] && /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
                        className: "text-[10px] text-center truncate text-blue-500",
                        children: ["CV: ", char.actors[0].name]
                      })]
                    }, char.id))
                  })]
                }), data?.persons && data.persons.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "mb-12",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-2xl font-bold mb-6 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), " "]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "grid grid-cols-2 sm:grid-cols-3 gap-4",
                    children: data.persons.slice(0, 9).map((person) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "flex items-center gap-3 bg-white/40 dark:bg-slate-800/40 p-2 rounded-lg backdrop-blur-sm",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "w-10 h-10 rounded-full overflow-hidden flex-shrink-0 relative",
                        children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                          src: person.images?.grid || "https://bgm.tv/img/no_icon_subject.png",
                          alt: person.name,
                          className: "w-full h-full object-cover"
                        })
                      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                        className: "overflow-hidden",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                          className: "text-sm font-bold truncate text-slate-800 dark:text-slate-200",
                          children: person.name
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                          className: "text-xs truncate text-slate-500 dark:text-slate-400",
                          children: person.type
                        })]
                      })]
                    }, person.id))
                  })]
                }), data?.relations && data.relations.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "mb-12",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-2xl font-bold mb-6 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), " "]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "space-y-3",
                    children: data.relations.map((rel) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "flex items-center justify-between p-3 bg-white/30 dark:bg-slate-800/30 rounded-xl border border-white/10 hover:bg-white/50 transition-colors",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                        className: "flex items-center gap-3",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                          className: "px-2 py-1 bg-blue-500/10 text-blue-600 text-xs rounded font-bold",
                          children: rel.relation
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                          className: "text-sm font-medium text-slate-800 dark:text-slate-200",
                          children: rel.name_cn || rel.name
                        })]
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        className: "text-xs text-slate-400",
                        children: rel.type
                      })]
                    }, rel.id))
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "grid grid-cols-2 md:grid-cols-4 gap-6 pt-8 border-t border-slate-200 dark:border-slate-800",
                  children: data?.subject?.date && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h4", {
                      className: "text-sm text-slate-400 font-bold uppercase mb-1",
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                      className: "text-slate-800 dark:text-slate-200",
                      children: data.subject.date
                    })]
                  })
                })]
              })
            })
          })]
        })]
      })]
    })]
  });
});
const route7 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: bangumi_$id,
  loader: loader$v
}, Symbol.toStringTag, { value: "Module" }));
const BREAKPOINTS = {
  md: 768,
  lg: 1024
};
function getDeviceType() {
  if (typeof window === "undefined") return "desktop";
  const width = window.innerWidth;
  if (width < BREAKPOINTS.md) return "mobile";
  if (width < BREAKPOINTS.lg) return "tablet";
  return "desktop";
}
function getPerformanceLevel() {
  if (typeof navigator === "undefined") return "high";
  const hardwareConcurrency = navigator.hardwareConcurrency || 4;
  const deviceMemory = navigator.deviceMemory || 4;
  const connection = navigator.connection;
  const effectiveType = connection?.effectiveType || "4g";
  if (hardwareConcurrency >= 8 && deviceMemory >= 8) {
    return "high";
  }
  if (hardwareConcurrency <= 2 || deviceMemory <= 2 || ["slow-2g", "2g"].includes(effectiveType)) {
    return "low";
  }
  return "medium";
}
function getPerformanceConfig() {
  const level = getPerformanceLevel();
  return {
    level,
    // 
    particleCount: level === "high" ? 15 : level === "medium" ? 8 : 3,
    // 
    enableBlur: level !== "low",
    // 
    enableComplexAnimations: level !== "low",
    // 
    animationDurationMultiplier: level === "high" ? 1 : level === "medium" ? 0.8 : 0.5,
    // 
    enableShadows: level !== "low",
    // 
    imageQuality: level === "high" ? 90 : level === "medium" ? 75 : 60,
    // 
    enableParallax: level === "high",
    // 
    maxConcurrentAnimations: level === "high" ? 10 : level === "medium" ? 5 : 2
  };
}
function useDeviceType() {
  const [deviceType, setDeviceType] = reactExports.useState("desktop");
  reactExports.useEffect(() => {
    const updateDeviceType = () => {
      setDeviceType(getDeviceType());
    };
    updateDeviceType();
    window.addEventListener("resize", updateDeviceType);
    return () => window.removeEventListener("resize", updateDeviceType);
  }, []);
  return deviceType;
}
function usePerformanceConfig() {
  const [config, setConfig] = reactExports.useState(() => getPerformanceConfig());
  reactExports.useEffect(() => {
    setConfig(getPerformanceConfig());
  }, []);
  return config;
}
function useMediaQuery(query) {
  const [matches, setMatches] = reactExports.useState(false);
  reactExports.useEffect(() => {
    const mediaQuery2 = window.matchMedia(query);
    setMatches(mediaQuery2.matches);
    const handler = (e) => setMatches(e.matches);
    mediaQuery2.addEventListener("change", handler);
    return () => mediaQuery2.removeEventListener("change", handler);
  }, [query]);
  return matches;
}
function usePrefersReducedMotion() {
  return useMediaQuery("(prefers-reduced-motion: reduce)");
}
const maxWidthClasses = {
  sm: "max-w-screen-sm",
  md: "max-w-screen-md",
  lg: "max-w-screen-lg",
  xl: "max-w-screen-xl",
  "2xl": "max-w-screen-2xl",
  full: "max-w-full"
};
const ResponsiveContainer = reactExports.memo(function ResponsiveContainer2({
  children,
  className = "",
  padding = { mobile: "px-4", tablet: "px-6", desktop: "px-8" },
  maxWidth = "xl"
}) {
  const deviceType = useDeviceType();
  const paddingClass = padding[deviceType] || padding.desktop;
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `mx-auto w-full ${maxWidthClasses[maxWidth]} ${paddingClass} ${className}`, children });
});
reactExports.memo(function ResponsiveGrid2({
  children,
  className = "",
  cols = { mobile: 1, tablet: 2, desktop: 3 },
  gap = "gap-4 md:gap-6"
}) {
  const colClasses = `grid-cols-${cols.mobile || 1} md:grid-cols-${cols.tablet || 2} lg:grid-cols-${cols.desktop || 3}`;
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `grid ${colClasses} ${gap} ${className}`, children });
});
reactExports.memo(function PerformanceAwareAnimation2({
  children,
  className,
  lowPerformanceFallback,
  ...motionProps
}) {
  const config = usePerformanceConfig();
  const prefersReducedMotion2 = usePrefersReducedMotion();
  if (prefersReducedMotion2 || config.level === "low") {
    if (lowPerformanceFallback) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, { className, ...lowPerformanceFallback, children });
    }
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className, children });
  }
  if (config.level === "medium") {
    const simplifiedProps = {
      ...motionProps,
      transition: {
        ...motionProps.transition || {},
        duration: (motionProps.transition?.duration || 0.3) * 0.7
      }
    };
    return /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, { className, ...simplifiedProps, children });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, { className, ...motionProps, children });
});
reactExports.memo(function LazyImage2({
  src,
  alt,
  className = "",
  placeholder,
  quality = { mobile: 60, desktop: 85 }
}) {
  const [isLoaded, setIsLoaded] = React.useState(false);
  const [isInView, setIsInView] = React.useState(false);
  const imgRef = React.useRef(null);
  usePerformanceConfig();
  React.useEffect(() => {
    const observer2 = new IntersectionObserver(
      ([entry2]) => {
        if (entry2.isIntersecting) {
          setIsInView(true);
          observer2.disconnect();
        }
      },
      { rootMargin: "50px", threshold: 0.1 }
    );
    if (imgRef.current) {
      observer2.observe(imgRef.current);
    }
    return () => observer2.disconnect();
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { ref: imgRef, className: `relative overflow-hidden ${className}`, children: [
    !isLoaded && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 animate-pulse" }),
    isInView && /* @__PURE__ */ jsxRuntimeExports.jsx(
      "img",
      {
        src,
        alt,
        className: `w-full h-full object-cover transition-opacity duration-500 ${isLoaded ? "opacity-100" : "opacity-0"}`,
        loading: "lazy",
        decoding: "async",
        onLoad: () => setIsLoaded(true)
      }
    )
  ] });
});
const ConditionalRender = reactExports.memo(function ConditionalRender2({
  children,
  mobile = true,
  tablet = true,
  desktop = true,
  fallback = null
}) {
  const deviceType = useDeviceType();
  const shouldRender = deviceType === "mobile" && mobile || deviceType === "tablet" && tablet || deviceType === "desktop" && desktop;
  return /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, { children: shouldRender ? children : fallback });
});
reactExports.memo(function MobileOnly2({ children }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(ConditionalRender, { mobile: true, tablet: false, desktop: false, children });
});
reactExports.memo(function DesktopOnly2({ children }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(ConditionalRender, { mobile: false, tablet: false, desktop: true, children });
});
reactExports.memo(function HiddenOnMobile2({ children }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(ConditionalRender, { mobile: false, tablet: true, desktop: true, children });
});
function LoginForm({ onSubmit, isLoading, error, defaultEmail = "" }) {
  const [email, setEmail] = reactExports.useState(defaultEmail);
  const [password, setPassword] = reactExports.useState("");
  const handleSubmit = async (e) => {
    e.preventDefault();
    const formData = new FormData();
    formData.append("email", email);
    formData.append("password", password);
    await onSubmit(formData);
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("form", { onSubmit: handleSubmit, className: "space-y-5", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-slate-700 dark:text-slate-300", children: "" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative group", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, { className: "h-5 w-5 text-slate-400 group-focus-within:text-primary-start transition-colors" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "input",
          {
            type: "email",
            value: email,
            onChange: (e) => setEmail(e.target.value),
            className: "block w-full pl-10 pr-3 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white/50 dark:bg-slate-800/50 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start/50 focus:border-primary-start sm:text-sm transition-all duration-200",
            placeholder: "your@email.com",
            required: true
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-slate-700 dark:text-slate-300", children: "" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative group", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Lock, { className: "h-5 w-5 text-slate-400 group-focus-within:text-primary-start transition-colors" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "input",
          {
            type: "password",
            value: password,
            onChange: (e) => setPassword(e.target.value),
            className: "block w-full pl-10 pr-3 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white/50 dark:bg-slate-800/50 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start/50 focus:border-primary-start sm:text-sm transition-all duration-200",
            placeholder: "",
            required: true
          }
        )
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: "/forgot-password", className: "text-xs text-primary-start hover:underline font-medium", children: "" }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { children: error && /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        initial: { opacity: 0, height: 0 },
        animate: { opacity: 1, height: "auto" },
        exit: { opacity: 0, height: 0 },
        className: "bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 text-red-600 dark:text-red-400 p-3 rounded-lg flex items-center gap-2 text-sm",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { size: 16 }),
          error
        ]
      }
    ) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        type: "submit",
        disabled: isLoading || !email || !password,
        className: "w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl shadow-lg shadow-primary-start/30 text-sm font-bold text-white bg-gradient-to-r from-primary-start to-primary-end hover:shadow-primary-start/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-start disabled:opacity-50 disabled:cursor-not-allowed transform hover:-translate-y-0.5 transition-all duration-200",
        children: [
          isLoading ? /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, { className: "animate-spin", size: 18 }) : "",
          !isLoading && /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, { size: 18 })
        ]
      }
    )
  ] });
}
const login = withComponentProps(function Login() {
  useNavigate();
  const [searchParams] = useSearchParams();
  const [error, setError] = reactExports.useState("");
  const [isLoading, setIsLoading] = reactExports.useState(false);
  const [showSuccess, setShowSuccess] = reactExports.useState(false);
  const [showLoginSuccess, setShowLoginSuccess] = reactExports.useState(false);
  const [defaultEmail, setDefaultEmail] = reactExports.useState("");
  reactExports.useEffect(() => {
    const email = searchParams.get("email");
    const registered = searchParams.get("registered");
    if (email) {
      setDefaultEmail(email);
    }
    if (registered === "true") {
      setShowSuccess(true);
      setTimeout(() => setShowSuccess(false), 5e3);
    }
  }, [searchParams]);
  const handleLogin = async (formData) => {
    setIsLoading(true);
    setError("");
    try {
      const response = await fetch("/api/auth/login", {
        method: "POST",
        body: formData
      });
      const result = await response.json();
      if (result.success) {
        setShowLoginSuccess(true);
        setTimeout(() => {
          window.location.href = "/";
        }, 1e3);
      } else {
        setError(result.error || "");
      }
    } catch (err) {
      setError("");
    } finally {
      setIsLoading(false);
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, {
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(ResponsiveContainer, {
      maxWidth: "sm",
      className: "pt-16 pb-20",
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(GlassCard, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        className: "p-8 md:p-10 relative overflow-hidden",
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "relative z-10",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "text-center mb-8",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
              className: "text-3xl font-bold text-slate-800 dark:text-white mb-2",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-slate-500 dark:text-slate-400",
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs(AnimatePresence, {
            children: [showLoginSuccess && /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
              initial: {
                opacity: 0,
                height: 0
              },
              animate: {
                opacity: 1,
                height: "auto"
              },
              exit: {
                opacity: 0,
                height: 0
              },
              className: "bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 p-3 rounded-lg mb-6 flex items-center gap-2 text-sm justify-center font-bold",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, {
                size: 16
              }), "..."]
            }), showSuccess && !showLoginSuccess && /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
              initial: {
                opacity: 0,
                height: 0
              },
              animate: {
                opacity: 1,
                height: "auto"
              },
              exit: {
                opacity: 0,
                height: 0
              },
              className: "bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 p-3 rounded-lg mb-6 flex items-center gap-2 text-sm",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, {
                size: 16
              }), ""]
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(LoginForm, {
            onSubmit: handleLogin,
            isLoading,
            error,
            defaultEmail
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "mt-8 text-center space-y-4",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
              className: "text-sm text-slate-500 dark:text-slate-400",
              children: ["", /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
                to: "/register",
                className: "text-primary-start font-bold hover:underline ml-1",
                children: ""
              })]
            })
          })]
        })
      })
    })
  });
});
const route8 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: login
}, Symbol.toStringTag, { value: "Module" }));
function generateCaptcha() {
  const num1 = Math.floor(Math.random() * 10) + 1;
  const num2 = Math.floor(Math.random() * 10) + 1;
  const operators = ["+", "-", ""];
  const operatorIndex = Math.floor(Math.random() * 3);
  const operator = operators[operatorIndex];
  let answer;
  switch (operator) {
    case "+":
      answer = num1 + num2;
      break;
    case "-":
      answer = num1 - num2;
      break;
    case "":
      answer = num1 * num2;
      break;
    default:
      answer = num1 + num2;
  }
  return {
    question: `${num1} ${operator} ${num2} = ?`,
    answer: answer.toString()
  };
}
function RegisterForm({ onRegister, isLoading, error }) {
  const [formData, setFormData] = reactExports.useState({
    email: "",
    password: "",
    confirmPassword: "",
    captchaInput: "",
    agreed: false
  });
  const [captcha, setCaptcha] = reactExports.useState(generateCaptcha);
  const [localError, setLocalError] = reactExports.useState("");
  const [showCaptcha, setShowCaptcha] = reactExports.useState(false);
  const refreshCaptcha = reactExports.useCallback(() => {
    setCaptcha(generateCaptcha());
    setFormData((prev) => ({ ...prev, captchaInput: "" }));
  }, []);
  const handleGetCaptcha = () => {
    if (!formData.email || !formData.email.includes("@")) {
      setLocalError("");
      return;
    }
    if (formData.password.length < 6) {
      setLocalError("6");
      return;
    }
    if (formData.password !== formData.confirmPassword) {
      setLocalError("");
      return;
    }
    if (!formData.agreed) {
      setLocalError("");
      return;
    }
    setLocalError("");
    setShowCaptcha(true);
    refreshCaptcha();
  };
  const handleSubmit = async (e) => {
    e.preventDefault();
    setLocalError("");
    if (formData.captchaInput !== captcha.answer) {
      setLocalError("");
      refreshCaptcha();
      return;
    }
    const form = new FormData();
    form.append("email", formData.email);
    form.append("password", formData.password);
    await onRegister(form);
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("form", { onSubmit: handleSubmit, className: "space-y-5", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-slate-700 dark:text-slate-300", children: "" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative group", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, { className: "h-5 w-5 text-slate-400 group-focus-within:text-primary-start transition-colors" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "input",
          {
            type: "email",
            value: formData.email,
            onChange: (e) => setFormData({ ...formData, email: e.target.value }),
            className: "block w-full pl-10 pr-3 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white/50 dark:bg-slate-800/50 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start/50 focus:border-primary-start sm:text-sm transition-all duration-200",
            placeholder: "your@email.com",
            disabled: showCaptcha
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-slate-700 dark:text-slate-300", children: "" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative group", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Lock, { className: "h-5 w-5 text-slate-400 group-focus-within:text-primary-start transition-colors" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "input",
          {
            type: "password",
            value: formData.password,
            onChange: (e) => setFormData({ ...formData, password: e.target.value }),
            className: "block w-full pl-10 pr-3 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white/50 dark:bg-slate-800/50 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start/50 focus:border-primary-start sm:text-sm transition-all duration-200",
            placeholder: "6",
            disabled: showCaptcha
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-slate-700 dark:text-slate-300", children: "" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative group", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Lock, { className: "h-5 w-5 text-slate-400 group-focus-within:text-primary-start transition-colors" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "input",
          {
            type: "password",
            value: formData.confirmPassword,
            onChange: (e) => setFormData({ ...formData, confirmPassword: e.target.value }),
            className: "block w-full pl-10 pr-3 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white/50 dark:bg-slate-800/50 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start/50 focus:border-primary-start sm:text-sm transition-all duration-200",
            placeholder: "",
            disabled: showCaptcha
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start gap-3", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative flex items-center", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "input",
          {
            type: "checkbox",
            id: "terms",
            checked: formData.agreed,
            onChange: (e) => setFormData({ ...formData, agreed: e.target.checked }),
            className: "peer h-5 w-5 cursor-pointer appearance-none rounded-md border border-slate-300 transition-all checked:border-primary-start checked:bg-primary-start hover:border-primary-start",
            disabled: showCaptcha
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-white opacity-0 peer-checked:opacity-100", size: 12 })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("label", { htmlFor: "terms", className: "text-sm text-slate-600 dark:text-slate-400 cursor-pointer select-none", children: [
        "",
        /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: "/terms", className: "text-primary-start hover:underline mx-1", children: "" }),
        "",
        /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: "/privacy", className: "text-primary-start hover:underline mx-1", children: "" }),
        ""
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { mode: "wait", children: !showCaptcha ? /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.button,
      {
        initial: { opacity: 0 },
        animate: { opacity: 1 },
        exit: { opacity: 0 },
        type: "button",
        onClick: handleGetCaptcha,
        className: "w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl shadow-lg shadow-primary-start/30 text-sm font-bold text-white bg-gradient-to-r from-primary-start to-primary-end hover:shadow-primary-start/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-start transform hover:-translate-y-0.5 transition-all duration-200",
        children: [
          "",
          /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, { size: 18 })
        ]
      },
      "get-captcha"
    ) : /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        initial: { opacity: 0, height: 0 },
        animate: { opacity: 1, height: "auto" },
        exit: { opacity: 0, height: 0 },
        className: "space-y-4",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-slate-700 dark:text-slate-300", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex gap-3 items-center", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-shrink-0 px-4 py-3 bg-gradient-to-r from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 font-mono text-lg font-bold text-slate-700 dark:text-slate-200 select-none tracking-wider", children: captcha.question }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "button",
                {
                  type: "button",
                  onClick: refreshCaptcha,
                  className: "p-2 text-slate-500 hover:text-primary-start transition-colors",
                  title: "",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(RefreshCw, { size: 20 })
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "input",
                {
                  type: "text",
                  value: formData.captchaInput,
                  onChange: (e) => setFormData({ ...formData, captchaInput: e.target.value }),
                  className: "flex-1 px-4 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white/50 dark:bg-slate-800/50 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start/50 focus:border-primary-start text-center font-mono text-lg transition-all duration-200",
                  placeholder: "",
                  maxLength: 4
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            "button",
            {
              type: "submit",
              disabled: isLoading || !formData.captchaInput,
              className: "w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl shadow-lg shadow-primary-start/30 text-sm font-bold text-white bg-gradient-to-r from-primary-start to-primary-end hover:shadow-primary-start/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-start disabled:opacity-50 disabled:cursor-not-allowed transform hover:-translate-y-0.5 transition-all duration-200",
              children: [
                isLoading ? /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, { className: "animate-spin", size: 18 }) : "",
                !isLoading && /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, { size: 18 })
              ]
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "button",
            {
              type: "button",
              onClick: () => setShowCaptcha(false),
              className: "w-full text-sm text-slate-500 hover:text-primary-start transition-colors",
              children: " "
            }
          )
        ]
      },
      "captcha-section"
    ) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { children: (error || localError) && /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        initial: { opacity: 0, height: 0 },
        animate: { opacity: 1, height: "auto" },
        exit: { opacity: 0, height: 0 },
        className: "bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 text-red-600 dark:text-red-400 p-3 rounded-lg flex items-center gap-2 text-sm",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { size: 16 }),
          error || localError
        ]
      }
    ) })
  ] });
}
const register = withComponentProps(function Register() {
  const navigate = useNavigate();
  const [error, setError] = reactExports.useState("");
  const [isLoading, setIsLoading] = reactExports.useState(false);
  const handleRegister = async (formData) => {
    setIsLoading(true);
    setError("");
    try {
      const response = await fetch("/api/auth/register", {
        method: "POST",
        body: formData
      });
      const result = await response.json();
      if (result.success) {
        const email = formData.get("email");
        navigate(`/login?email=${encodeURIComponent(email)}&registered=true`);
      } else {
        setError(result.error || "");
      }
    } catch (err) {
      setError("");
    } finally {
      setIsLoading(false);
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, {
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(ResponsiveContainer, {
      maxWidth: "sm",
      className: "pt-16 pb-20",
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(GlassCard, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        className: "p-8 md:p-10 relative overflow-hidden",
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "relative z-10",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "text-center mb-8",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
              className: "text-3xl font-bold text-slate-800 dark:text-white mb-2",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-slate-500 dark:text-slate-400",
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(RegisterForm, {
            onRegister: handleRegister,
            isLoading,
            error
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "mt-8 text-center",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
              className: "text-sm text-slate-500 dark:text-slate-400",
              children: ["", /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
                to: "/login",
                className: "text-primary-start font-bold hover:underline ml-1",
                children: ""
              })]
            })
          })]
        })
      })
    })
  });
});
const route9 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: register
}, Symbol.toStringTag, { value: "Module" }));
function Turnstile({ siteKey, onVerify, onError }) {
  const containerRef = reactExports.useRef(null);
  reactExports.useEffect(() => {
    const script = document.createElement("script");
    script.src = "https://challenges.cloudflare.com/turnstile/v0/api.js";
    script.async = true;
    script.defer = true;
    document.head.appendChild(script);
    script.onload = () => {
      if (window.turnstile && containerRef.current) {
        window.turnstile.render(containerRef.current, {
          sitekey: siteKey,
          callback: (token) => {
            onVerify(token);
          },
          "error-callback": () => {
            if (onError) onError();
          }
        });
      }
    };
    return () => {
      if (window.turnstile && containerRef.current) {
        window.turnstile.remove(containerRef.current);
      }
    };
  }, [siteKey, onVerify, onError]);
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { ref: containerRef, className: "turnstile-container" });
}
function ForgotPasswordForm({ onReset, onSendCode, isLoading, error }) {
  const [step, setStep] = reactExports.useState("email");
  const [formData, setFormData] = reactExports.useState({
    email: "",
    code: "",
    newPassword: "",
    confirmPassword: ""
  });
  const [countdown, setCountdown] = reactExports.useState(0);
  const [turnstileToken, setTurnstileToken] = reactExports.useState("");
  const [localError, setLocalError] = reactExports.useState("");
  const SITE_KEY = "1x00000000000000000000AA";
  reactExports.useEffect(() => {
    if (countdown > 0) {
      const timer = setTimeout(() => setCountdown(countdown - 1), 1e3);
      return () => clearTimeout(timer);
    }
  }, [countdown]);
  const handleSendCode = async () => {
    if (!formData.email || !formData.email.includes("@")) {
      setLocalError("");
      return;
    }
    setLocalError("");
    const success = await onSendCode(formData.email);
    if (success) {
      setStep("verify");
      setCountdown(60);
    }
  };
  const handleSubmit = async (e) => {
    e.preventDefault();
    setLocalError("");
    if (formData.newPassword.length < 6) {
      setLocalError("6");
      return;
    }
    if (formData.newPassword !== formData.confirmPassword) {
      setLocalError("");
      return;
    }
    const form = new FormData();
    form.append("email", formData.email);
    form.append("code", formData.code);
    form.append("password", formData.newPassword);
    form.append("cf-turnstile-response", turnstileToken);
    await onReset(form);
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("form", { onSubmit: handleSubmit, className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-slate-700 dark:text-slate-300", children: "" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative group", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, { className: "h-5 w-5 text-slate-400 group-focus-within:text-primary-start transition-colors" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "input",
          {
            type: "email",
            value: formData.email,
            onChange: (e) => setFormData({ ...formData, email: e.target.value }),
            className: "block w-full pl-10 pr-24 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white/50 dark:bg-slate-800/50 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start/50 focus:border-primary-start sm:text-sm transition-all duration-200",
            placeholder: "your@email.com",
            disabled: step !== "email" && step !== "verify"
          }
        ),
        step === "email" && /* @__PURE__ */ jsxRuntimeExports.jsx(
          "button",
          {
            type: "button",
            onClick: handleSendCode,
            disabled: isLoading || !formData.email,
            className: "absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-slate-800 dark:bg-white text-white dark:text-slate-800 text-xs font-bold rounded-lg hover:opacity-90 disabled:opacity-50 transition-all",
            children: isLoading ? /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, { className: "animate-spin", size: 14 }) : ""
          }
        ),
        step !== "email" && countdown > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "absolute right-3 top-1/2 -translate-y-1/2 text-xs text-slate-500 font-mono", children: [
          countdown,
          "s"
        ] }),
        step !== "email" && countdown === 0 && /* @__PURE__ */ jsxRuntimeExports.jsx(
          "button",
          {
            type: "button",
            onClick: handleSendCode,
            className: "absolute right-2 top-1/2 -translate-y-1/2 text-xs text-primary-start font-bold hover:underline",
            children: ""
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { mode: "wait", children: step !== "email" && /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        initial: { opacity: 0, height: 0 },
        animate: { opacity: 1, height: "auto" },
        exit: { opacity: 0, height: 0 },
        className: "space-y-6",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-slate-700 dark:text-slate-300", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "input",
              {
                type: "text",
                value: formData.code,
                onChange: (e) => setFormData({ ...formData, code: e.target.value }),
                className: "block w-full px-4 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white/50 dark:bg-slate-800/50 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start/50 focus:border-primary-start font-mono tracking-widest text-center text-lg transition-all duration-200",
                placeholder: "000000",
                maxLength: 6
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-slate-700 dark:text-slate-300", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative group", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Lock, { className: "h-5 w-5 text-slate-400 group-focus-within:text-primary-start transition-colors" }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "input",
                {
                  type: "password",
                  value: formData.newPassword,
                  onChange: (e) => setFormData({ ...formData, newPassword: e.target.value }),
                  className: "block w-full pl-10 pr-3 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white/50 dark:bg-slate-800/50 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start/50 focus:border-primary-start sm:text-sm transition-all duration-200",
                  placeholder: "6"
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-slate-700 dark:text-slate-300", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative group", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Lock, { className: "h-5 w-5 text-slate-400 group-focus-within:text-primary-start transition-colors" }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "input",
                {
                  type: "password",
                  value: formData.confirmPassword,
                  onChange: (e) => setFormData({ ...formData, confirmPassword: e.target.value }),
                  className: "block w-full pl-10 pr-3 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white/50 dark:bg-slate-800/50 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-start/50 focus:border-primary-start sm:text-sm transition-all duration-200",
                  placeholder: ""
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
            Turnstile,
            {
              siteKey: SITE_KEY,
              onVerify: setTurnstileToken
            }
          ) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            "button",
            {
              type: "submit",
              disabled: isLoading,
              className: "w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl shadow-lg shadow-primary-start/30 text-sm font-bold text-white bg-gradient-to-r from-primary-start to-primary-end hover:shadow-primary-start/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-start disabled:opacity-50 disabled:cursor-not-allowed transform hover:-translate-y-0.5 transition-all duration-200",
              children: [
                isLoading ? /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, { className: "animate-spin", size: 18 }) : "",
                !isLoading && /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, { size: 18 })
              ]
            }
          )
        ]
      }
    ) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { children: (error || localError) && /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        initial: { opacity: 0, height: 0 },
        animate: { opacity: 1, height: "auto" },
        exit: { opacity: 0, height: 0 },
        className: "bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 text-red-600 dark:text-red-400 p-3 rounded-lg flex items-center gap-2 text-sm mt-4",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { size: 16 }),
          error || localError
        ]
      }
    ) })
  ] });
}
const forgotPassword = withComponentProps(function ForgotPassword() {
  const navigate = useNavigate();
  const [error, setError] = reactExports.useState("");
  const [isLoading, setIsLoading] = reactExports.useState(false);
  const handleSendCode = async (email) => {
    setIsLoading(true);
    setError("");
    try {
      const form = new FormData();
      form.append("email", email);
      const response = await fetch("/api/auth/send-code", {
        method: "POST",
        body: form
      });
      const result = await response.json();
      if (result.success) {
        return true;
      } else {
        setError(result.error || "");
        return false;
      }
    } catch (err) {
      setError("");
      return false;
    } finally {
      setIsLoading(false);
    }
  };
  const handleReset = async (formData) => {
    setIsLoading(true);
    setError("");
    try {
      const response = await fetch("/api/auth/reset-password", {
        method: "POST",
        body: formData
      });
      const result = await response.json();
      if (result.success) {
        navigate("/login");
      } else {
        setError(result.error || "");
      }
    } catch (err) {
      setError("");
    } finally {
      setIsLoading(false);
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, {
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(ResponsiveContainer, {
      maxWidth: "sm",
      className: "pt-16 pb-20",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        className: "glass-card p-8 md:p-10 relative overflow-hidden",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "absolute top-0 right-0 w-32 h-32 bg-primary-start/10 rounded-full blur-3xl -mr-10 -mt-10"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "absolute bottom-0 left-0 w-32 h-32 bg-primary-end/10 rounded-full blur-3xl -ml-10 -mb-10"
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "relative z-10",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "text-center mb-8",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
              className: "text-3xl font-bold text-slate-800 dark:text-white mb-2",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-slate-500 dark:text-slate-400",
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(ForgotPasswordForm, {
            onReset: handleReset,
            onSendCode: handleSendCode,
            isLoading,
            error
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "mt-8 text-center",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
              className: "text-sm text-slate-500 dark:text-slate-400",
              children: ["", /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
                to: "/login",
                className: "text-primary-start font-bold hover:underline ml-1",
                children: ""
              })]
            })
          })]
        })]
      })
    })
  });
});
const route10 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: forgotPassword
}, Symbol.toStringTag, { value: "Module" }));
async function loader$u({
  request
}) {
  const headers = new Headers();
  headers.append("Set-Cookie", "session=; Path=/; HttpOnly; SameSite=Lax; Max-Age=0");
  return redirect("/", {
    headers
  });
}
const route11 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$u
}, Symbol.toStringTag, { value: "Module" }));
const privacy = withComponentProps(function PrivacyPolicy() {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, {
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(ResponsiveContainer, {
      maxWidth: "lg",
      className: "pt-8 pb-20",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "glass-card p-8 md:p-12",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
          className: "text-3xl md:text-4xl font-bold mb-8 text-slate-800 dark:text-white border-b border-slate-200 dark:border-slate-700 pb-4",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "prose dark:prose-invert max-w-none space-y-8 text-slate-600 dark:text-slate-300",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "text-sm text-slate-500",
            children: "2025127"
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("section", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold mb-4 text-slate-800 dark:text-white",
              children: "1. "
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("section", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold mb-4 text-slate-800 dark:text-white",
              children: "2. "
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
              className: "text-lg font-semibold mb-2",
              children: "2.1 "
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
              className: "list-disc pl-6 space-y-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  children: ""
                }), " "]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  children: ""
                }), " "]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  children: ""
                }), " "]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
              className: "text-lg font-semibold mb-2 mt-4",
              children: "2.2 "
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
              className: "list-disc pl-6 space-y-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  children: ""
                }), " IP"]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  children: ""
                }), " "]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  children: "Cookies "
                }), "  Cookies "]
              })]
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("section", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold mb-4 text-slate-800 dark:text-white",
              children: "3. "
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
              className: "list-disc pl-6 space-y-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              })]
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("section", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold mb-4 text-slate-800 dark:text-white",
              children: "4. "
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
              className: "list-disc pl-6 space-y-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  children: ""
                }), " "]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  children: ""
                }), " "]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  children: ""
                }), " "]
              })]
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("section", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold mb-4 text-slate-800 dark:text-white",
              children: "5. "
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
              className: "list-disc pl-6 space-y-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: " SSL/TLS "
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "mt-2",
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("section", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold mb-4 text-slate-800 dark:text-white",
              children: "6. "
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
              className: "list-disc pl-6 space-y-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: ""
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("section", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold mb-4 text-slate-800 dark:text-white",
              children: "7. "
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: "18"
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("section", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold mb-4 text-slate-800 dark:text-white",
              children: "8. "
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("section", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold mb-4 text-slate-800 dark:text-white",
              children: "9. "
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "mt-2",
              children: "support@example.com"
            })]
          })]
        })]
      })
    })
  });
});
const route12 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: privacy
}, Symbol.toStringTag, { value: "Module" }));
function Section$3({
  icon,
  title,
  children,
  delay: delay2 = 0,
  variant = "default"
}) {
  const bgColor = variant === "warning" ? "from-amber-500 to-orange-600" : "from-indigo-500 to-purple-600";
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.section, {
    initial: {
      opacity: 0,
      y: 20
    },
    animate: {
      opacity: 1,
      y: 0
    },
    transition: {
      delay: delay2
    },
    className: "glass-card p-6 rounded-xl space-y-4",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "flex items-center gap-3",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: `w-10 h-10 rounded-lg bg-gradient-to-br ${bgColor} flex items-center justify-center text-white`,
        children: icon
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
        className: "text-xl font-bold text-slate-800 dark:text-white",
        children: title
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "text-slate-600 dark:text-slate-300 leading-relaxed",
      children
    })]
  });
}
const terms = withComponentProps(function TermsOfService() {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    className: "min-h-screen pt-4 pb-12 px-4",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "max-w-4xl mx-auto",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
        to: "/",
        className: "inline-flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-primary-start transition-colors mb-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, {
          className: "w-4 h-4"
        }), ""]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        className: "glass-card p-8 rounded-2xl mb-8",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex items-center gap-4 mb-4",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, {
              className: "w-8 h-8 text-white"
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
              className: "text-3xl font-bold text-slate-800 dark:text-white",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-slate-500 dark:text-slate-400",
              children: "Terms of Service"
            })]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",
          children: "2025127 | "
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "space-y-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(Section$3, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, {
            className: "w-5 h-5"
          }),
          title: "1. ",
          delay: 0.1,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-blue-700 dark:text-blue-300 text-sm",
              children: " "
            })
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$3, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(UserPlus, {
            className: "w-5 h-5"
          }),
          title: "2. ",
          delay: 0.15,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "space-y-3",
            children: [{
              title: "",
              desc: "18"
            }, {
              title: "",
              desc: ""
            }, {
              title: "",
              desc: ""
            }, {
              title: "",
              desc: ""
            }].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-sm shrink-0",
                children: i + 1
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  className: "text-slate-800 dark:text-white",
                  children: item.title
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: "text-sm mt-1",
                  children: item.desc
                })]
              })]
            }, i))
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Section$3, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(ShieldCheck, {
            className: "w-5 h-5"
          }),
          title: "3. ",
          delay: 0.2,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-3",
            children: ["", "", "", "", "", ""].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-red-500",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-red-700 dark:text-red-300",
                children: item
              })]
            }, i))
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$3, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Copyright, {
            className: "w-5 h-5"
          }),
          title: "4. ",
          delay: 0.25,
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "space-y-4",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "font-semibold text-slate-800 dark:text-white mb-2",
                children: "4.1 "
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-sm",
                children: "Logo "
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "font-semibold text-slate-800 dark:text-white mb-2",
                children: "4.2 "
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-sm",
                children: " "
              })]
            })]
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Section$3, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Gavel, {
            className: "w-5 h-5"
          }),
          title: "5. ",
          delay: 0.3,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "flex flex-wrap gap-2",
            children: [{
              text: "",
              severity: "low"
            }, {
              text: "",
              severity: "low"
            }, {
              text: "",
              severity: "medium"
            }, {
              text: "",
              severity: "medium"
            }, {
              text: "",
              severity: "high"
            }, {
              text: "",
              severity: "high"
            }].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              className: `px-3 py-1.5 rounded-full text-sm font-medium ${item.severity === "low" ? "bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400" : item.severity === "medium" ? "bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400" : "bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,
              children: item.text
            }, i))
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$3, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, {
            className: "w-5 h-5"
          }),
          title: "6. ",
          delay: 0.35,
          variant: "warning",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-amber-800 dark:text-amber-200",
              children: '"" '
            })
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$3, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Power, {
            className: "w-5 h-5"
          }),
          title: "7. ",
          delay: 0.4,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            children: " "
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$3, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Scale, {
            className: "w-5 h-5"
          }),
          title: "8. ",
          delay: 0.45,
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-start gap-3 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Scale, {
              className: "w-6 h-6 text-indigo-500 shrink-0 mt-1"
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: " "
            })]
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$3, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Ellipsis, {
            className: "w-5 h-5"
          }),
          title: "9. ",
          delay: 0.5,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            children: " "
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.55
          },
          className: "glass-card p-6 rounded-xl",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-center gap-3 mb-4",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center text-white",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, {
                className: "w-5 h-5"
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold text-slate-800 dark:text-white",
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "text-slate-600 dark:text-slate-300 mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("a", {
            href: "mailto:fhainc@hotmail.com",
            className: "inline-flex items-center gap-2 px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Mail, {
              className: "w-4 h-4"
            }), "fhainc@hotmail.com"]
          })]
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0
        },
        animate: {
          opacity: 1
        },
        transition: {
          delay: 0.6
        },
        className: "mt-8 flex justify-center gap-4",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
          to: "/",
          className: "px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
          to: "/legal/privacy",
          className: "px-6 py-2 bg-primary-start text-white rounded-xl hover:bg-primary-end transition-colors",
          children: ""
        })]
      })]
    })
  });
});
const route13 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: terms
}, Symbol.toStringTag, { value: "Module" }));
function Section$2({
  icon,
  title,
  children,
  delay: delay2 = 0,
  variant = "default"
}) {
  const bgColor = variant === "warning" ? "from-amber-500 to-orange-600" : variant === "info" ? "from-blue-500 to-cyan-600" : "from-amber-500 to-orange-600";
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.section, {
    initial: {
      opacity: 0,
      y: 20
    },
    animate: {
      opacity: 1,
      y: 0
    },
    transition: {
      delay: delay2
    },
    className: "glass-card p-6 rounded-xl space-y-4",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "flex items-center gap-3",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: `w-10 h-10 rounded-lg bg-gradient-to-br ${bgColor} flex items-center justify-center text-white`,
        children: icon
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
        className: "text-xl font-bold text-slate-800 dark:text-white",
        children: title
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "text-slate-600 dark:text-slate-300 leading-relaxed",
      children
    })]
  });
}
const disclaimer = withComponentProps(function Disclaimer() {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    className: "min-h-screen pt-4 pb-12 px-4",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "max-w-4xl mx-auto",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
        to: "/",
        className: "inline-flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-primary-start transition-colors mb-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, {
          className: "w-4 h-4"
        }), ""]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        className: "glass-card p-8 rounded-2xl mb-8",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex items-center gap-4 mb-4",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "w-16 h-16 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, {
              className: "w-8 h-8 text-white"
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
              className: "text-3xl font-bold text-slate-800 dark:text-white",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-slate-500 dark:text-slate-400",
              children: "Disclaimer"
            })]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",
          children: "20241219 | "
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "space-y-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(Section$2, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, {
            className: "w-5 h-5"
          }),
          title: "",
          delay: 0.1,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            children: '"" '
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-amber-700 dark:text-amber-300 text-sm",
              children: " "
            })
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$2, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, {
            className: "w-5 h-5"
          }),
          title: "",
          delay: 0.15,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "space-y-3",
            children: [{
              icon: "",
              text: ""
            }, {
              icon: "",
              text: ""
            }, {
              icon: "",
              text: ""
            }, {
              icon: "",
              text: ""
            }].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-xl shrink-0",
                children: item.icon
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-sm",
                children: item.text
              })]
            }, i))
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$2, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Scale, {
            className: "w-5 h-5"
          }),
          title: "",
          delay: 0.2,
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "space-y-3",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "font-semibold text-blue-800 dark:text-blue-300 mb-2",
                children: " "
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
                className: "text-sm text-blue-700 dark:text-blue-200",
                children: [" ", /* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  children: "CC BY-NC-SA 4.0"
                }), " "]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "font-semibold text-purple-800 dark:text-purple-300 mb-2",
                children: " "
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-sm text-purple-700 dark:text-purple-200",
                children: "/"
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "font-semibold text-green-800 dark:text-green-300 mb-2",
                children: " "
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-sm text-green-700 dark:text-green-200",
                children: ""
              })]
            })]
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$2, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(User, {
            className: "w-5 h-5"
          }),
          title: "",
          delay: 0.25,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "space-y-2",
            children: ["", "", ""].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-2 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg text-sm",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-amber-500 shrink-0",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                children: item
              })]
            }, i))
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$2, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Server, {
            className: "w-5 h-5"
          }),
          title: "",
          delay: 0.3,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "grid grid-cols-1 md:grid-cols-3 gap-3",
            children: [{
              icon: "",
              title: "",
              desc: ""
            }, {
              icon: "",
              title: "",
              desc: ""
            }, {
              icon: "",
              title: "Cookie",
              desc: " Cookie "
            }].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg text-center",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-2xl",
                children: item.icon
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("h4", {
                className: "font-semibold text-slate-800 dark:text-white mt-2 text-sm",
                children: item.title
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-xs text-slate-500 dark:text-slate-400 mt-1",
                children: item.desc
              })]
            }, i))
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Section$2, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Brain, {
            className: "w-5 h-5"
          }),
          title: "AI ",
          delay: 0.35,
          variant: "info",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",
            children: [{
              icon: "",
              name: "AI "
            }, {
              icon: "",
              name: "AI "
            }, {
              icon: "",
              name: ""
            }, {
              icon: "",
              name: ""
            }].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-xl",
                children: item.icon
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-xs font-medium text-blue-700 dark:text-blue-300 mt-1",
                children: item.name
              })]
            }, i))
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg mb-4",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
              className: "font-bold text-blue-800 dark:text-blue-300 mb-2",
              children: " "
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
              className: "space-y-1 text-sm text-blue-700 dark:text-blue-200",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: " "
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: " "
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: " "
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: " "
              })]
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
              className: "font-bold text-red-800 dark:text-red-300 mb-2",
              children: " AI "
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
              className: "space-y-1 text-sm text-red-700 dark:text-red-200",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: " AI "
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: "  AI "
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("li", {
                children: "  AI "
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$2, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Lock, {
            className: "w-5 h-5"
          }),
          title: "",
          delay: 0.4,
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
            children: ["", /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
              to: "/legal/privacy",
              className: "text-primary-start hover:underline mx-1 font-medium",
              children: ""
            }), ""]
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$2, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Scale, {
            className: "w-5 h-5"
          }),
          title: "",
          delay: 0.45,
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-start gap-3 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Scale, {
              className: "w-6 h-6 text-amber-500 shrink-0 mt-1"
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "mb-2",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-sm text-slate-500 dark:text-slate-400",
                children: ""
              })]
            })]
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.section, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.5
          },
          className: "p-6 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h2", {
            className: "text-xl font-bold text-amber-800 dark:text-amber-300 mb-4 flex items-center gap-2",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, {
              className: "w-5 h-5"
            }), ""]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "text-amber-700 dark:text-amber-200 mb-3",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-2",
            children: ["", "", "", ""].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-2 text-sm text-amber-700 dark:text-amber-200",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "shrink-0",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                children: item
              })]
            }, i))
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$2, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(RefreshCw, {
            className: "w-5 h-5"
          }),
          title: "",
          delay: 0.55,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            children: " "
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.6
          },
          className: "glass-card p-6 rounded-xl",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-center gap-3 mb-4",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center text-white",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, {
                className: "w-5 h-5"
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold text-slate-800 dark:text-white",
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "text-slate-600 dark:text-slate-300 mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("a", {
            href: "mailto:fhainc@hotmail.com",
            className: "inline-flex items-center gap-2 px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Mail, {
              className: "w-4 h-4"
            }), "fhainc@hotmail.com"]
          })]
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0
        },
        animate: {
          opacity: 1
        },
        transition: {
          delay: 0.65
        },
        className: "mt-8 flex justify-center gap-4",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
          to: "/",
          className: "px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
          to: "/legal/privacy",
          className: "px-6 py-2 bg-primary-start text-white rounded-xl hover:bg-primary-end transition-colors",
          children: ""
        })]
      })]
    })
  });
});
const route14 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: disclaimer
}, Symbol.toStringTag, { value: "Module" }));
function Section$1({
  icon,
  title,
  children,
  delay: delay2 = 0
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.section, {
    initial: {
      opacity: 0,
      y: 20
    },
    animate: {
      opacity: 1,
      y: 0
    },
    transition: {
      delay: delay2
    },
    className: "glass-card p-6 rounded-xl space-y-4",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "flex items-center gap-3",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center text-white",
        children: icon
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
        className: "text-xl font-bold text-slate-800 dark:text-white",
        children: title
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "text-slate-600 dark:text-slate-300 leading-relaxed",
      children
    })]
  });
}
const legal_sponsor = withComponentProps(function SponsorTermsPage() {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    className: "min-h-screen pt-4 pb-12 px-4",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "max-w-4xl mx-auto",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
        to: "/user/membership",
        className: "inline-flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-primary-start transition-colors mb-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, {
          className: "w-4 h-4"
        }), ""]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        className: "glass-card p-8 rounded-2xl mb-8 relative overflow-hidden",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-pink-500/20 to-rose-600/20 rounded-full blur-3xl"
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "relative flex items-center gap-4 mb-4",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "w-16 h-16 rounded-2xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(Heart, {
              className: "w-8 h-8 text-white"
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
              className: "text-3xl font-bold text-slate-800 dark:text-white",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-slate-500 dark:text-slate-400",
              children: "Sponsor Terms"
            })]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",
          children: "202412 |  "
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "space-y-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(Section$1, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Heart, {
            className: "w-5 h-5"
          }),
          title: "1. ",
          delay: 0.1,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "p-4 bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800 rounded-lg mb-4",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
              className: "text-pink-800 dark:text-pink-200",
              children: ["", /* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                children: ""
              }), "", /* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                children: ""
              }), " "]
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            children: '"VIP""SVIP"'
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$1, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Gift, {
            className: "w-5 h-5"
          }),
          title: "2. ",
          delay: 0.15,
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-4",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-5 bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center gap-2 mb-4",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Crown, {
                  className: "w-6 h-6 text-amber-500"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: "font-bold text-lg text-amber-600 dark:text-amber-400",
                  children: "VIP "
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("ul", {
                className: "space-y-2 text-sm",
                children: ["", " AI  50 ", "", " 1.5 ", "", "", ""].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-center gap-2 text-amber-700 dark:text-amber-300",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-amber-500",
                    children: ""
                  }), " ", item]
                }, i))
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-5 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-xl relative",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "absolute top-3 right-3",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(Sparkles, {
                  className: "w-5 h-5 text-purple-500"
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center gap-2 mb-4",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Star, {
                  className: "w-6 h-6 text-purple-500"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: "font-bold text-lg text-purple-600 dark:text-purple-400",
                  children: "SVIP "
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("ul", {
                className: "space-y-2 text-sm",
                children: [" VIP ", "AI ", " 2 ", "", " 24 ", ""].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-center gap-2 text-purple-700 dark:text-purple-300",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-purple-500",
                    children: ""
                  }), " ", item]
                }, i))
              })]
            })]
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$1, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(CreditCard, {
            className: "w-5 h-5"
          }),
          title: "3. ",
          delay: 0.2,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("table", {
              className: "w-full text-sm",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("thead", {
                children: /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", {
                  className: "border-b border-slate-200 dark:border-slate-700",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                    className: "py-3 px-4 text-left font-semibold text-slate-800 dark:text-white",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                    className: "py-3 px-4 text-center font-semibold text-slate-800 dark:text-white",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("th", {
                    className: "py-3 px-4 text-center font-semibold text-slate-800 dark:text-white",
                    children: ["", /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      className: "ml-1 text-xs text-green-500",
                      children: "17%"
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("th", {
                    className: "py-3 px-4 text-center font-semibold text-slate-800 dark:text-white",
                    children: ["", /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      className: "ml-1 text-xs text-green-500",
                      children: "30%"
                    })]
                  })]
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("tbody", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("tr", {
                  className: "border-b border-slate-100 dark:border-slate-800 bg-amber-50/50 dark:bg-amber-900/10",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-4 px-4",
                    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "flex items-center gap-2",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Crown, {
                        className: "w-4 h-4 text-amber-500"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        className: "font-medium text-amber-600 dark:text-amber-400",
                        children: "VIP"
                      })]
                    })
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-4 px-4 text-center font-bold",
                    children: "19.9"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-4 px-4 text-center font-bold",
                    children: "49.9"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-4 px-4 text-center font-bold text-green-600 dark:text-green-400",
                    children: "168"
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", {
                  className: "bg-purple-50/50 dark:bg-purple-900/10",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-4 px-4",
                    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "flex items-center gap-2",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Star, {
                        className: "w-4 h-4 text-purple-500"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        className: "font-medium text-purple-600 dark:text-purple-400",
                        children: "SVIP"
                      })]
                    })
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-4 px-4 text-center font-bold",
                    children: "39.9"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-4 px-4 text-center font-bold",
                    children: "99.9"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-4 px-4 text-center font-bold text-green-600 dark:text-green-400",
                    children: "299"
                  })]
                })]
              })]
            })
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Section$1, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(RefreshCw, {
            className: "w-5 h-5"
          }),
          title: "4. ",
          delay: 0.25,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "space-y-3",
            children: [{
              icon: "",
              text: " 3  "
            }, {
              icon: "",
              text: ""
            }, {
              icon: "",
              text: ""
            }].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-xl",
                children: item.icon
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                children: item.text
              })]
            }, i))
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "mt-4",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
              to: "/user/membership",
              className: "text-primary-start hover:underline text-sm",
              children: " "
            })
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$1, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, {
            className: "w-5 h-5"
          }),
          title: "5. ",
          delay: 0.3,
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "font-medium text-amber-800 dark:text-amber-200 mb-2",
              children: " "
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-sm text-amber-700 dark:text-amber-300",
              children: " 7 "
            })]
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$1, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Gift, {
            className: "w-5 h-5"
          }),
          title: "6. ",
          delay: 0.35,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            children: " 7  "
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section$1, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, {
            className: "w-5 h-5"
          }),
          title: "7. ",
          delay: 0.4,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "space-y-2",
            children: [" 100% ", "", ""].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-red-500 shrink-0",
                children: "!"
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-red-700 dark:text-red-300",
                children: item
              })]
            }, i))
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.45
          },
          className: "glass-card p-6 rounded-xl",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-center gap-3 mb-4",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center text-white",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, {
                className: "w-5 h-5"
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold text-slate-800 dark:text-white",
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "text-slate-600 dark:text-slate-300 mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("a", {
            href: "mailto:fhainc@hotmail.com",
            className: "inline-flex items-center gap-2 px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Mail, {
              className: "w-4 h-4"
            }), "fhainc@hotmail.com"]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.5
          },
          className: "p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl text-center text-sm text-slate-500 dark:text-slate-400",
          children: " "
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        initial: {
          opacity: 0
        },
        animate: {
          opacity: 1
        },
        transition: {
          delay: 0.55
        },
        className: "mt-8 flex justify-center gap-4",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
          to: "/user/membership",
          className: "px-6 py-2 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-xl hover:shadow-lg hover:shadow-pink-500/25 transition-all",
          children: ""
        })
      })]
    })
  });
});
const route15 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: legal_sponsor
}, Symbol.toStringTag, { value: "Module" }));
function Section({
  icon,
  title,
  children,
  delay: delay2 = 0
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.section, {
    initial: {
      opacity: 0,
      y: 20
    },
    animate: {
      opacity: 1,
      y: 0
    },
    transition: {
      delay: delay2
    },
    className: "glass-card p-6 rounded-xl space-y-4",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "flex items-center gap-3",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white",
        children: icon
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
        className: "text-xl font-bold text-slate-800 dark:text-white",
        children: title
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "text-slate-600 dark:text-slate-300 leading-relaxed",
      children
    })]
  });
}
const legal_privacy = withComponentProps(function PrivacyPolicyPage() {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    className: "min-h-screen pt-4 pb-12 px-4",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "max-w-4xl mx-auto",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
        to: "/",
        className: "inline-flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-primary-start transition-colors mb-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, {
          className: "w-4 h-4"
        }), ""]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        className: "glass-card p-8 rounded-2xl mb-8",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex items-center gap-4 mb-4",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, {
              className: "w-8 h-8 text-white"
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
              className: "text-3xl font-bold text-slate-800 dark:text-white",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-slate-500 dark:text-slate-400",
              children: "Privacy Policy"
            })]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",
          children: "202412 | "
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "space-y-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Section, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Database, {
            className: "w-5 h-5"
          }),
          title: "1. ",
          delay: 0.1,
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "space-y-4",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "font-semibold text-slate-800 dark:text-white mb-2",
                children: "1.1 "
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
                className: "space-y-2 text-sm",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-start gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-blue-500 mt-1",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: ""
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-start gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-blue-500 mt-1",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: ""
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-start gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-blue-500 mt-1",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: ""
                  })]
                })]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "font-semibold text-slate-800 dark:text-white mb-2",
                children: "1.2 "
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
                className: "space-y-2 text-sm",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-start gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-blue-500 mt-1",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: ""
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-start gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-blue-500 mt-1",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: "IP "
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-start gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-blue-500 mt-1",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: ""
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-start gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-blue-500 mt-1",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: "Cookie "
                  })]
                })]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "font-semibold text-amber-800 dark:text-amber-300 mb-2",
                children: "1.3 "
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
                className: "space-y-2 text-sm text-amber-700 dark:text-amber-200",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-start gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "mt-1",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: ""
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
                  className: "flex items-start gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "mt-1",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: ""
                  })]
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "mt-3 text-sm font-medium",
                children: " "
              })]
            })]
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Section, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Share2, {
            className: "w-5 h-5"
          }),
          title: "2. ",
          delay: 0.15,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-3",
            children: ["", "", "", "", ""].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-2 bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 text-sm",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 flex items-center justify-center text-xs font-bold",
                children: i + 1
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                children: item
              })]
            }, i))
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Section, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Share2, {
            className: "w-5 h-5"
          }),
          title: "3. ",
          delay: 0.2,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-4 text-green-600 dark:text-green-400 font-medium",
            children: " "
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-3",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "space-y-3",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center shrink-0",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  className: "text-slate-800 dark:text-white",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: "text-sm",
                  children: ""
                })]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center shrink-0",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  className: "text-slate-800 dark:text-white",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: "text-sm",
                  children: ""
                })]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center shrink-0",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                  className: "text-slate-800 dark:text-white",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: "text-sm",
                  children: ""
                })]
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Section, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Lock, {
            className: "w-5 h-5"
          }),
          title: "4. ",
          delay: 0.25,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "grid grid-cols-1 sm:grid-cols-2 gap-3",
            children: [{
              icon: "",
              text: " PBKDF2 "
            }, {
              icon: "",
              text: "2FA  AES-256 "
            }, {
              icon: "",
              text: " HTTPS "
            }, {
              icon: "",
              text: ""
            }, {
              icon: "",
              text: ""
            }].map((item, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg text-sm",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-lg",
                children: item.icon
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-green-700 dark:text-green-300",
                children: item.text
              })]
            }, i))
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Section, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Cookie, {
            className: "w-5 h-5"
          }),
          title: "5. Cookie ",
          delay: 0.3,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-4",
            children: " Cookie "
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", {
            className: "space-y-2",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
              className: "flex items-center gap-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-blue-500",
                children: ""
              }), " "]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
              className: "flex items-center gap-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-blue-500",
                children: ""
              }), " "]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("li", {
              className: "flex items-center gap-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-blue-500",
                children: ""
              }), " "]
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mt-4 text-sm text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg",
            children: "  Cookie"
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Section, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(UserCheck, {
            className: "w-5 h-5"
          }),
          title: "6. ",
          delay: 0.35,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "grid grid-cols-2 md:grid-cols-4 gap-3",
            children: [{
              name: "",
              desc: ""
            }, {
              name: "",
              desc: ""
            }, {
              name: "",
              desc: ""
            }, {
              name: "",
              desc: ""
            }].map((right, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "text-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "text-2xl mb-2",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "font-semibold text-slate-800 dark:text-white text-sm",
                children: right.name
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "text-xs text-slate-500 dark:text-slate-400 mt-1",
                children: right.desc
              })]
            }, i))
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Baby, {
            className: "w-5 h-5"
          }),
          title: "7. ",
          delay: 0.4,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
              className: "text-red-700 dark:text-red-300",
              children: [" ", /* @__PURE__ */ jsxRuntimeExports.jsx("strong", {
                children: "14 "
              }), ""]
            })
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Section, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(RefreshCw, {
            className: "w-5 h-5"
          }),
          title: "8. ",
          delay: 0.45,
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            children: " "
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Section, {
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, {
            className: "w-5 h-5"
          }),
          title: "9. ",
          delay: 0.5,
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "mb-4",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex flex-wrap gap-4",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("a", {
              href: "mailto:fhainc@hotmail.com",
              className: "flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Mail, {
                className: "w-4 h-4"
              }), "fhainc@hotmail.com"]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-2 px-4 py-2 bg-slate-50 dark:bg-slate-800/50 text-slate-600 dark:text-slate-400 rounded-lg",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Server, {
                className: "w-4 h-4"
              }), " Cloudflare Workers"]
            })]
          })]
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0
        },
        animate: {
          opacity: 1
        },
        transition: {
          delay: 0.6
        },
        className: "mt-8 flex justify-center gap-4",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
          to: "/",
          className: "px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
          to: "/terms",
          className: "px-6 py-2 bg-primary-start text-white rounded-xl hover:bg-primary-end transition-colors",
          children: ""
        })]
      })]
    })
  });
});
const route16 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: legal_privacy
}, Symbol.toStringTag, { value: "Module" }));
function GameDashboardLayout({ children, backgroundImage }) {
  const bgImage = backgroundImage || "https://images.unsplash.com/photo-1578632767115-351597cf2477?q=80&w=1920";
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "fixed inset-0 w-full h-full overflow-hidden bg-slate-900 text-white font-sans", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 z-0", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        initial: { scale: 1.1, opacity: 0 },
        animate: { scale: 1, opacity: 1 },
        transition: { duration: 1.5 },
        className: "w-full h-full",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "img",
            {
              src: bgImage,
              alt: "Background",
              className: "w-full h-full object-cover object-center"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/60" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-r from-black/50 via-transparent to-black/30" })
        ]
      }
    ) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 z-1 pointer-events-none", children: [...Array(8)].map((_2, i) => /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.div,
      {
        className: "absolute bg-white/30 rounded-full blur-md",
        style: {
          width: Math.random() * 4 + 2 + "px",
          height: Math.random() * 4 + 2 + "px",
          left: Math.random() * 100 + "%",
          top: Math.random() * 100 + "%"
        },
        animate: {
          y: [0, -100],
          opacity: [0, 0.8, 0]
        },
        transition: {
          duration: Math.random() * 5 + 5,
          repeat: Infinity,
          delay: Math.random() * 5,
          ease: "linear"
        }
      },
      i
    )) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "relative z-10 w-full h-full flex flex-col", children }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(MobileNav, {})
  ] });
}
const _game = withComponentProps(function GameLayout() {
  const location = useLocation();
  return /* @__PURE__ */ jsxRuntimeExports.jsx(GameDashboardLayout, {
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
      mode: "wait",
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        initial: {
          opacity: 0,
          y: 20,
          filter: "blur(10px)"
        },
        animate: {
          opacity: 1,
          y: 0,
          filter: "blur(0px)"
        },
        exit: {
          opacity: 0,
          y: -20,
          filter: "blur(10px)"
        },
        transition: {
          duration: 0.3,
          ease: "easeOut"
        },
        className: "w-full h-full",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(Outlet, {})
      }, location.pathname)
    })
  });
});
const route17 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: _game
}, Symbol.toStringTag, { value: "Module" }));
function StatusHUD({ user, stats }) {
  const expPercent = Math.min(user.exp / user.maxExp * 100, 100);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "absolute top-0 left-0 w-full p-6 flex justify-between items-start pointer-events-none z-20", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        className: "flex items-center gap-4 pointer-events-auto",
        initial: { x: -50, opacity: 0 },
        animate: { x: 0, opacity: 1 },
        transition: { delay: 0.2 },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative group", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-16 h-16 rounded-full border-2 border-white/50 overflow-hidden shadow-[0_0_15px_rgba(255,255,255,0.3)] group-hover:shadow-[0_0_25px_rgba(255,255,255,0.5)] transition-shadow duration-300 relative", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              OptimizedImage,
              {
                src: user.avatar || "https://api.dicebear.com/7.x/avataaars/svg?seed=Traveler",
                alt: "Avatar",
                aspectRatio: "square",
                className: "w-full h-full object-cover"
              }
            ) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "absolute -bottom-1 -right-1 bg-slate-900 text-white text-xs font-bold px-1.5 py-0.5 rounded border border-white/20", children: [
              "Lv.",
              user.level
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col gap-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-baseline gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xl font-bold text-white drop-shadow-md font-display tracking-wide", children: user.name }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-white/60 font-mono", children: user.uid })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "w-48 h-3 bg-black/40 backdrop-blur-sm skew-x-[-15deg] border border-white/10 overflow-hidden relative", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                motion.div,
                {
                  className: "h-full bg-gradient-to-r from-yellow-400 to-orange-500",
                  initial: { width: 0 },
                  animate: { width: `${expPercent}%` },
                  transition: { duration: 1, ease: "easeOut" }
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "absolute inset-0 flex items-center justify-center text-[9px] font-bold text-white/80 skew-x-[15deg]", children: [
                user.exp,
                " / ",
                user.maxExp,
                " EXP"
              ] })
            ] })
          ] })
        ]
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        className: "flex items-center gap-4 pointer-events-auto",
        initial: { x: 50, opacity: 0 },
        animate: { x: 0, opacity: 1 },
        transition: { delay: 0.3 },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, { to: "/shop?tab=recharge", className: "flex items-center bg-black/40 backdrop-blur-md rounded-full pl-2 pr-1 py-1 border border-white/10 hover:bg-black/60 transition-colors cursor-pointer group", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-6 h-6 bg-yellow-500/20 rounded-full flex items-center justify-center mr-2", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Coins, { className: "w-4 h-4 text-yellow-400" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white font-bold font-mono mr-3 min-w-[60px] text-right", children: stats.coins.toLocaleString() }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-6 h-6 bg-white/10 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Plus, { className: "w-3 h-3 text-white" }) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, { to: "/shop?tab=membership", className: "flex items-center bg-gradient-to-r from-yellow-600/20 to-orange-600/20 backdrop-blur-md rounded-full px-3 py-1.5 border border-yellow-500/30 hover:border-yellow-500/60 transition-all cursor-pointer group", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Crown, { className: "w-4 h-4 text-yellow-400 mr-2" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs font-bold text-yellow-400 group-hover:text-yellow-300", children: "" })
          ] })
        ]
      }
    )
  ] });
}
const NAV_ITEMS = [
  { id: "home", label: "", icon: House, path: "/user/dashboard" },
  { id: "inventory", label: "", icon: Backpack, path: "/user/inventory" },
  // TODO: Create route
  { id: "achievements", label: "", icon: Trophy, path: "/user/achievements" },
  // TODO: Create route
  { id: "settings", label: "", icon: Settings, path: "/settings" }
];
function NavMenu() {
  const location = useLocation();
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute left-0 top-1/2 -translate-y-1/2 z-20 pl-6", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col gap-4", children: [
    NAV_ITEMS.map((item, index2) => {
      const isActive = location.pathname === item.path;
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: item.path, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
        motion.div,
        {
          className: "group flex items-center gap-4 cursor-pointer",
          initial: { x: -20, opacity: 0 },
          animate: { x: 0, opacity: 1 },
          transition: { delay: 0.1 * index2 },
          whileHover: { x: 10 },
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `
                        w-12 h-12 flex items-center justify-center transform rotate-45 border-2 transition-all duration-300
                        ${isActive ? "bg-white text-slate-900 border-white shadow-[0_0_15px_rgba(255,255,255,0.5)]" : "bg-black/40 text-white/70 border-white/20 group-hover:bg-black/60 group-hover:text-white group-hover:border-white/60"}
                    `, children: /* @__PURE__ */ jsxRuntimeExports.jsx(item.icon, { className: `w-5 h-5 -rotate-45 ${isActive ? "text-slate-900" : "text-white"}` }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative overflow-hidden", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                motion.span,
                {
                  className: `text-lg font-bold font-display tracking-wider ${isActive ? "text-white" : "text-white/60 group-hover:text-white"}`,
                  initial: { opacity: 0.6 },
                  whileHover: { opacity: 1 },
                  children: item.label
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                motion.div,
                {
                  className: "absolute bottom-0 left-0 h-[2px] bg-white",
                  initial: { width: 0 },
                  animate: { width: isActive ? "100%" : "0%" },
                  whileHover: { width: "100%" }
                }
              )
            ] })
          ]
        }
      ) }, item.id);
    }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.div,
      {
        className: "w-8 h-[1px] bg-white/20 my-2 ml-2",
        initial: { width: 0 },
        animate: { width: 32 },
        transition: { delay: 0.5 }
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx("form", { action: "/logout", method: "post", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("button", { type: "submit", className: "group flex items-center gap-4 cursor-pointer w-full text-left", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-10 h-10 flex items-center justify-center transform rotate-45 border-2 border-red-500/30 bg-red-500/10 text-red-400 transition-all duration-300 group-hover:bg-red-500 group-hover:text-white group-hover:border-red-500 group-hover:shadow-[0_0_15px_rgba(239,68,68,0.5)]", children: /* @__PURE__ */ jsxRuntimeExports.jsx(LogOut, { className: "w-4 h-4 -rotate-45" }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-bold text-red-400/80 group-hover:text-red-400 transition-colors", children: "" })
    ] }) })
  ] }) });
}
function ActionPanel({ onSignIn, onGacha, onShop, signInStatus }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "absolute bottom-8 right-8 flex items-end gap-6 z-20", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col gap-4 mb-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(
        motion.button,
        {
          onClick: onShop,
          className: "group flex items-center justify-end gap-3",
          whileHover: { x: -10 },
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white/80 font-bold text-sm opacity-0 group-hover:opacity-100 transition-opacity", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-12 h-12 rounded-full bg-black/40 backdrop-blur-md border border-white/20 flex items-center justify-center group-hover:bg-white group-hover:text-slate-900 transition-colors", children: /* @__PURE__ */ jsxRuntimeExports.jsx(ShoppingBag, { className: "w-5 h-5" }) })
          ]
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(
        motion.button,
        {
          onClick: onGacha,
          className: "group flex items-center justify-end gap-3",
          whileHover: { x: -10 },
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white/80 font-bold text-sm opacity-0 group-hover:opacity-100 transition-opacity", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-12 h-12 rounded-full bg-black/40 backdrop-blur-md border border-white/20 flex items-center justify-center group-hover:bg-purple-500 group-hover:text-white group-hover:border-purple-400 transition-colors", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Sparkles, { className: "w-5 h-5" }) })
          ]
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.button,
      {
        onClick: onSignIn,
        disabled: signInStatus.hasSignedIn || signInStatus.isSubmitting,
        className: `
            relative group overflow-hidden rounded-full pl-8 pr-2 py-2 flex items-center gap-4
            ${signInStatus.hasSignedIn ? "bg-slate-800/80 border border-white/10 cursor-default" : "bg-white text-slate-900 hover:scale-105 active:scale-95 shadow-[0_0_30px_rgba(255,255,255,0.3)] hover:shadow-[0_0_50px_rgba(255,255,255,0.6)]"}
            transition-all duration-300
        `,
        initial: { y: 50, opacity: 0 },
        animate: { y: 0, opacity: 1 },
        transition: { delay: 0.4, type: "spring" },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-start", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: `text-2xl font-black font-display tracking-widest ${signInStatus.hasSignedIn ? "text-white/50" : "text-slate-900"}`, children: signInStatus.hasSignedIn ? "COMPLETED" : "SIGN IN" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: `text-[10px] font-bold tracking-[0.2em] ${signInStatus.hasSignedIn ? "text-white/30" : "text-slate-500"}`, children: signInStatus.hasSignedIn ? "" : "" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `
            w-14 h-14 rounded-full flex items-center justify-center
            ${signInStatus.hasSignedIn ? "bg-white/10 text-white/30" : "bg-slate-900 text-white group-hover:rotate-90 transition-transform duration-300"}
        `, children: signInStatus.isSubmitting ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin" }) : signInStatus.hasSignedIn ? /* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, { className: "w-6 h-6" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronRight, { className: "w-8 h-8" }) }),
          !signInStatus.hasSignedIn && /* @__PURE__ */ jsxRuntimeExports.jsx(
            motion.div,
            {
              className: "absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent skew-x-[-20deg]",
              animate: { x: ["-150%", "150%"] },
              transition: { duration: 2, repeat: Infinity, repeatDelay: 3 }
            }
          )
        ]
      }
    )
  ] });
}
const GamificationContext = reactExports.createContext(void 0);
const DEFAULT_STATS = { level: 1, exp: 0, maxExp: 100, coins: 500, mood: "neutral" };
const INITIAL_ACHIEVEMENTS = [
  {
    id: "first_visit",
    name: "",
    description: " A.T. Field",
    icon: "",
    rarity: "common",
    unlocked: false
  },
  {
    id: "first_read",
    name: "",
    description: "",
    icon: "",
    rarity: "common",
    unlocked: false
  },
  {
    id: "gacha_master",
    name: "",
    description: "",
    icon: "",
    rarity: "rare",
    unlocked: false
  },
  {
    id: "level_10",
    name: "",
    description: " 10",
    icon: "",
    rarity: "epic",
    unlocked: false
  }
];
function GamificationProvider({ children }) {
  const [stats, setStats] = reactExports.useState(DEFAULT_STATS);
  const [achievements, setAchievements] = reactExports.useState(INITIAL_ACHIEVEMENTS);
  const [inventory, setInventory] = reactExports.useState([]);
  const [isHydrated, setIsHydrated] = reactExports.useState(false);
  reactExports.useEffect(() => {
    const savedStats = localStorage.getItem("gamification_stats");
    const savedAchievements = localStorage.getItem("gamification_achievements");
    const savedInventory = localStorage.getItem("gamification_inventory");
    if (savedStats) {
      try {
        setStats(JSON.parse(savedStats));
      } catch (e) {
      }
    }
    if (savedAchievements) {
      try {
        setAchievements(JSON.parse(savedAchievements));
      } catch (e) {
      }
    }
    if (savedInventory) {
      try {
        setInventory(JSON.parse(savedInventory));
      } catch (e) {
      }
    }
    setIsHydrated(true);
  }, []);
  reactExports.useEffect(() => {
    if (isHydrated) {
      localStorage.setItem("gamification_stats", JSON.stringify(stats));
    }
  }, [stats, isHydrated]);
  reactExports.useEffect(() => {
    if (isHydrated) {
      localStorage.setItem("gamification_achievements", JSON.stringify(achievements));
    }
  }, [achievements, isHydrated]);
  reactExports.useEffect(() => {
    if (isHydrated) {
      localStorage.setItem("gamification_inventory", JSON.stringify(inventory));
    }
  }, [inventory, isHydrated]);
  const addExp = (amount) => {
    setStats((prev) => {
      let newExp = prev.exp + amount;
      let newLevel = prev.level;
      let newMaxExp = prev.maxExp;
      while (newExp >= newMaxExp) {
        newExp -= newMaxExp;
        newLevel += 1;
        newMaxExp = Math.floor(newMaxExp * 1.5);
      }
      return { ...prev, exp: newExp, level: newLevel, maxExp: newMaxExp };
    });
  };
  const addCoins2 = (amount) => {
    setStats((prev) => ({ ...prev, coins: prev.coins + amount }));
  };
  const spendCoins = (amount) => {
    if (stats.coins >= amount) {
      setStats((prev) => ({ ...prev, coins: prev.coins - amount }));
      return true;
    }
    return false;
  };
  const unlockAchievement = (achievementId) => {
    setAchievements(
      (prev) => prev.map(
        (achievement) => achievement.id === achievementId && !achievement.unlocked ? { ...achievement, unlocked: true, unlockedAt: Date.now() } : achievement
      )
    );
  };
  const addToInventory = (item) => {
    setInventory((prev) => [...prev, item]);
  };
  const setMood = (mood) => {
    setStats((prev) => ({ ...prev, mood }));
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    GamificationContext.Provider,
    {
      value: {
        stats,
        achievements,
        inventory,
        addExp,
        addCoins: addCoins2,
        spendCoins,
        unlockAchievement,
        addToInventory,
        setMood
      },
      children
    }
  );
}
function useGamification() {
  const context = reactExports.useContext(GamificationContext);
  if (!context) {
    throw new Error("useGamification must be used within GamificationProvider");
  }
  return context;
}
const GACHA_COST = 100;
const GACHA_POOL = [
  { id: "sticker_1", name: "", type: "sticker", image: "", rarity: "rare" },
  { id: "sticker_2", name: "", type: "sticker", image: "", rarity: "common" },
  { id: "sticker_3", name: "", type: "sticker", image: "", rarity: "epic" },
  { id: "wallpaper_1", name: "", type: "wallpaper", image: "", rarity: "legendary" },
  { id: "badge_1", name: "", type: "badge", image: "", rarity: "epic" }
];
function GachaMachine() {
  const { stats, spendCoins, addToInventory, unlockAchievement } = useGamification();
  const [isRolling, setIsRolling] = reactExports.useState(false);
  const [result, setResult] = reactExports.useState(null);
  const handleGacha = () => {
    if (stats.coins < GACHA_COST) {
      alert("");
      return;
    }
    if (spendCoins(GACHA_COST)) {
      setIsRolling(true);
      setTimeout(() => {
        const randomItem = GACHA_POOL[Math.floor(Math.random() * GACHA_POOL.length)];
        setResult(randomItem);
        addToInventory({
          ...randomItem,
          obtainedAt: Date.now()
        });
        unlockAchievement("gacha_master");
        setIsRolling(false);
      }, 2e3);
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "relative", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-gradient-to-br from-pink-500 via-purple-500 to-blue-500 p-8 rounded-3xl shadow-2xl", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center mb-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-2xl font-bold text-white mb-2", children: "" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-white/80 text-sm", children: [
        " ",
        GACHA_COST,
        " "
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/10 backdrop-blur-sm rounded-2xl p-8 mb-6 h-48 flex items-center justify-center relative overflow-hidden", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { mode: "wait", children: isRolling ? /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.div,
        {
          initial: { scale: 0, rotate: 0 },
          animate: { scale: [1, 1.2, 1], rotate: 360 },
          exit: { scale: 0 },
          transition: { duration: 0.5, repeat: 3 },
          className: "text-6xl",
          children: ""
        },
        "rolling"
      ) : result ? /* @__PURE__ */ jsxRuntimeExports.jsxs(
        motion.div,
        {
          initial: { scale: 0, y: -50 },
          animate: { scale: 1, y: 0 },
          exit: { scale: 0 },
          className: "text-center",
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-7xl mb-2", children: result.image }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-white font-bold", children: result.name }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-sm text-yellow-300", children: result.rarity.toUpperCase() })
          ]
        },
        "result"
      ) : /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.div,
        {
          animate: { y: [0, -10, 0] },
          transition: { duration: 2, repeat: Infinity },
          className: "text-6xl",
          children: ""
        },
        "idle"
      ) }),
      (isRolling || result) && /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, { children: [...Array(8)].map((_2, i) => /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.div,
        {
          className: "absolute w-2 h-2 bg-yellow-300 rounded-full",
          initial: { opacity: 0, scale: 0 },
          animate: {
            opacity: [0, 1, 0],
            scale: [0, 1, 0],
            x: Math.cos(i / 8 * Math.PI * 2) * 80,
            y: Math.sin(i / 8 * Math.PI * 2) * 80
          },
          transition: { duration: 1, repeat: Infinity, delay: i * 0.1 }
        },
        i
      )) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.button,
      {
        onClick: handleGacha,
        disabled: isRolling || stats.coins < GACHA_COST,
        className: "w-full bg-white text-purple-600 font-bold py-4 rounded-xl shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",
        whileHover: { scale: 1.05 },
        whileTap: { scale: 0.95 },
        children: isRolling ? "..." : ` (${stats.coins} )`
      }
    ),
    result && /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.button,
      {
        onClick: () => setResult(null),
        className: "w-full mt-2 bg-purple-600 text-white font-bold py-2 rounded-xl",
        initial: { opacity: 0 },
        animate: { opacity: 1 },
        children: ""
      }
    )
  ] }) });
}
function ClientOnly({ children, fallback = null }) {
  const [isClient, setIsClient] = reactExports.useState(false);
  reactExports.useEffect(() => {
    setIsClient(true);
  }, []);
  if (!isClient) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, { children: fallback });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, { children: children() });
}
async function hashPassword(password) {
  const encoder = new TextEncoder();
  const data = encoder.encode(password);
  const salt = crypto.getRandomValues(new Uint8Array(16));
  const key = await crypto.subtle.importKey(
    "raw",
    data,
    { name: "PBKDF2" },
    false,
    ["deriveBits"]
  );
  const hashBuffer = await crypto.subtle.deriveBits(
    {
      name: "PBKDF2",
      salt,
      iterations: 1e5,
      hash: "SHA-256"
    },
    key,
    256
  );
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  const hashHex = hashArray.map((b2) => b2.toString(16).padStart(2, "0")).join("");
  const saltHex = Array.from(salt).map((b2) => b2.toString(16).padStart(2, "0")).join("");
  return `${saltHex}:${hashHex}`;
}
async function verifyPassword(password, hash) {
  try {
    const [saltHex, storedHash] = hash.split(":");
    if (!saltHex || !storedHash) return false;
    const salt = Uint8Array.from(
      saltHex.match(/.{1,2}/g).map((byte) => parseInt(byte, 16))
    );
    const encoder = new TextEncoder();
    const data = encoder.encode(password);
    const key = await crypto.subtle.importKey(
      "raw",
      data,
      { name: "PBKDF2" },
      false,
      ["deriveBits"]
    );
    const hashBuffer = await crypto.subtle.deriveBits(
      {
        name: "PBKDF2",
        salt,
        iterations: 1e5,
        hash: "SHA-256"
      },
      key,
      256
    );
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map((b2) => b2.toString(16).padStart(2, "0")).join("");
    return hashHex === storedHash;
  } catch {
    return false;
  }
}
function generateToken() {
  return crypto.randomUUID();
}
function generateVerificationCode() {
  return Math.floor(1e5 + Math.random() * 9e5).toString();
}
function generateDeviceFingerprint(userAgent, ip) {
  const combined = `${userAgent}:${ip}`;
  let hash = 0;
  for (let i = 0; i < combined.length; i++) {
    const char = combined.charCodeAt(i);
    hash = (hash << 5) - hash + char;
    hash = hash & hash;
  }
  return Math.abs(hash).toString(36);
}
const crypto_server = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  generateDeviceFingerprint,
  generateToken,
  generateVerificationCode,
  hashPassword,
  verifyPassword
}, Symbol.toStringTag, { value: "Module" }));
const AUTH_CONFIG = {
  // 
  codeExpiration: 300,
  // - 7
  sessionExpiration: 7 * 24 * 60 * 60,
  // - 1
  deviceRecordExpiration: 86400,
  // - 10
  loginFailLockout: 600,
  // 
  blockedDomains: [
    "tempmail.com",
    "10minutemail.com",
    "guerrillamail.com",
    "mailinator.com"
  ]
};
const RATE_LIMITS = {
  // 1/60
  SEND_CODE: {
    maxRequests: 1,
    windowSeconds: 60,
    keyPrefix: "ratelimit:send_code"
  },
  // 5/
  SEND_CODE_HOUR: {
    maxRequests: 5,
    windowSeconds: 3600,
    keyPrefix: "ratelimit:send_code_hour"
  },
  // 5/10
  LOGIN_FAIL: {
    maxRequests: 5,
    windowSeconds: 600,
    keyPrefix: "ratelimit:login_fail"
  }
};
const PAYMENT_CONFIG = {
  // - 5
  timestampValidity: 300,
  // - 30
  lockDuration: 30
};
const index = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  AUTH_CONFIG,
  PAYMENT_CONFIG,
  RATE_LIMITS
}, Symbol.toStringTag, { value: "Module" }));
async function checkRateLimit(kv, identifier, config) {
  if (!kv) {
    return { allowed: true, remaining: config.maxRequests, resetAt: Date.now() + config.windowSeconds * 1e3 };
  }
  const key = `${config.keyPrefix}:${identifier}`;
  const now2 = Math.floor(Date.now() / 1e3);
  const windowStart = now2 - now2 % config.windowSeconds;
  try {
    const countStr = await kv.get(key);
    let count = countStr ? parseInt(countStr, 10) : 0;
    if (count >= config.maxRequests) {
      const resetAt = (windowStart + config.windowSeconds) * 1e3;
      return {
        allowed: false,
        remaining: 0,
        resetAt
      };
    }
    count++;
    await kv.put(key, count.toString(), {
      expirationTtl: config.windowSeconds
    });
    return {
      allowed: true,
      remaining: config.maxRequests - count,
      resetAt: (windowStart + config.windowSeconds) * 1e3
    };
  } catch (error) {
    console.error("Rate limit check failed:", error);
    return { allowed: true, remaining: config.maxRequests, resetAt: Date.now() + config.windowSeconds * 1e3 };
  }
}
function getClientIP(request) {
  const cfConnectingIP = request.headers.get("CF-Connecting-IP");
  if (cfConnectingIP) return cfConnectingIP;
  const xForwardedFor = request.headers.get("X-Forwarded-For");
  if (xForwardedFor) {
    return xForwardedFor.split(",")[0].trim();
  }
  return "unknown";
}
async function sendEmailViaMailChannels(options, fromEmail = "mail@aincfh.dpdns.org", fromName = "A.T. Field") {
  try {
    const response = await fetch("https://api.mailchannels.net/tx/v1/send", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        personalizations: [
          {
            to: [{ email: options.to }]
          }
        ],
        from: {
          email: fromEmail,
          name: fromName
        },
        subject: options.subject,
        content: [
          {
            type: "text/html",
            value: options.html
          },
          ...options.text ? [
            {
              type: "text/plain",
              value: options.text
            }
          ] : []
        ]
      })
    });
    return response.ok;
  } catch (error) {
    console.error("Failed to send email via MailChannels:", error);
    return false;
  }
}
async function sendVerificationCodeEmail(email, code, useMailChannels = true, resendApiKey) {
  const html = `
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .code-box { background: #f4f4f4; padding: 20px; text-align: center; font-size: 32px; font-weight: bold; letter-spacing: 8px; margin: 20px 0; border-radius: 8px; }
        .footer { margin-top: 30px; font-size: 12px; color: #666; }
      </style>
    </head>
    <body>
      <div class="container">
        <h2></h2>
        <p></p>
        <div class="code-box">${code}</div>
        <p> 5 </p>
        <div class="footer">
          <p> A.T. Field </p>
        </div>
      </div>
    </body>
    </html>
  `;
  const text = `${code} 5 `;
  if (useMailChannels) {
    return await sendEmailViaMailChannels({
      to: email,
      subject: "A.T. Field",
      html,
      text
    });
  }
  return false;
}
async function queryFirst(db, sql, ...params) {
  const stmt = db.prepare(sql);
  if (params.length > 0) {
    return await stmt.bind(...params).first() || null;
  }
  return await stmt.first() || null;
}
async function queryAll(db, sql, ...params) {
  const stmt = db.prepare(sql);
  if (params.length > 0) {
    const result2 = await stmt.bind(...params).all();
    return result2.results || [];
  }
  const result = await stmt.all();
  return result.results || [];
}
async function execute(db, sql, ...params) {
  const stmt = db.prepare(sql);
  if (params.length > 0) {
    return await stmt.bind(...params).run();
  }
  return await stmt.run();
}
class UserRepository {
  constructor(db) {
    this.db = db;
  }
  async findById(id2) {
    return queryFirst(
      this.db,
      "SELECT id, email, username, avatar_url, role, level, exp, coins, preferences, achievements FROM users WHERE id = ?",
      id2
    );
  }
  async findByEmail(email) {
    return queryFirst(
      this.db,
      "SELECT id, email, username, avatar_url, role, level, exp, coins, preferences, achievements FROM users WHERE email = ?",
      email
    );
  }
  async findByEmailWithPassword(email) {
    return queryFirst(
      this.db,
      "SELECT id, email, password_hash, username, avatar_url, role, level, exp, coins, preferences, achievements FROM users WHERE email = ?",
      email
    );
  }
  async create(data) {
    const result = await execute(
      this.db,
      "INSERT INTO users (email, password_hash, username, role) VALUES (?, ?, ?, ?)",
      data.email,
      data.password_hash,
      data.username || "",
      data.role || "user"
    );
    if (!result.success) {
      throw new Error("User creation failed");
    }
    const newUser = await this.findById(result.meta.last_row_id);
    if (!newUser) {
      throw new Error("User created but not found");
    }
    return newUser;
  }
  async update(id2, data) {
    const fields = [];
    const values = [];
    if (data.username !== void 0) {
      fields.push("username = ?");
      values.push(data.username);
    }
    if (data.avatar_url !== void 0) {
      fields.push("avatar_url = ?");
      values.push(data.avatar_url);
    }
    if (data.preferences !== void 0) {
      fields.push("preferences = ?");
      values.push(typeof data.preferences === "string" ? data.preferences : JSON.stringify(data.preferences));
    }
    if (data.coins !== void 0) {
      fields.push("coins = ?");
      values.push(data.coins);
    }
    if (data.exp !== void 0) {
      fields.push("exp = ?");
      values.push(data.exp);
    }
    if (data.level !== void 0) {
      fields.push("level = ?");
      values.push(data.level);
    }
    if (fields.length === 0) {
      return this.findById(id2);
    }
    values.push(id2);
    await execute(
      this.db,
      `UPDATE users SET ${fields.join(", ")} WHERE id = ?`,
      ...values
    );
    return this.findById(id2);
  }
  async updatePassword(id2, passwordHash) {
    const result = await execute(
      this.db,
      "UPDATE users SET password_hash = ? WHERE id = ?",
      passwordHash,
      id2
    );
    return result.success;
  }
  async getPasswordHash(id2) {
    const result = await queryFirst(
      this.db,
      "SELECT password_hash FROM users WHERE id = ?",
      id2
    );
    return result ? result.password_hash : null;
  }
  async delete(id2) {
    const result = await execute(this.db, "DELETE FROM users WHERE id = ?", id2);
    return result.success;
  }
}
class SessionRepository {
  constructor(db) {
    this.db = db;
  }
  async findById(token) {
    return queryFirst(
      this.db,
      "SELECT token, user_id, expires_at, user_agent FROM sessions WHERE token = ?",
      token
    );
  }
  async findValidSession(token) {
    return queryFirst(
      this.db,
      "SELECT token, user_id, expires_at, user_agent FROM sessions WHERE token = ? AND expires_at > ?",
      token,
      Math.floor(Date.now() / 1e3)
    );
  }
  async create(data) {
    await execute(
      this.db,
      "INSERT INTO sessions (token, user_id, expires_at, user_agent) VALUES (?, ?, ?, ?)",
      data.token,
      data.user_id,
      data.expires_at,
      data.user_agent
    );
    return data;
  }
  async update(token, data) {
    return this.findById(token);
  }
  async delete(token) {
    const result = await execute(this.db, "DELETE FROM sessions WHERE token = ?", token);
    return result.success;
  }
  async deleteByUserId(userId) {
    const result = await execute(this.db, "DELETE FROM sessions WHERE user_id = ?", userId);
    return result.success;
  }
}
class SubscriptionRepository {
  constructor(db) {
    this.db = db;
  }
  async findById(id2) {
    return queryFirst(
      this.db,
      "SELECT * FROM subscriptions WHERE id = ?",
      id2
    );
  }
  async findActiveByUserId(userId) {
    const now2 = Math.floor(Date.now() / 1e3);
    return queryFirst(
      this.db,
      `SELECT * FROM subscriptions 
             WHERE user_id = ? AND status = 'active' AND end_date > ?`,
      userId,
      now2
    );
  }
  async findWithTierInfo(userId) {
    const now2 = Math.floor(Date.now() / 1e3);
    return queryFirst(
      this.db,
      `SELECT s.*, t.display_name 
             FROM subscriptions s
             JOIN membership_tiers t ON s.tier_id = t.id
             WHERE s.user_id = ? AND s.status = 'active' AND s.end_date > ?
             ORDER BY s.end_date DESC
             LIMIT 1`,
      userId,
      now2
    );
  }
  async create(data) {
    const result = await execute(
      this.db,
      `INSERT INTO subscriptions (
                user_id, tier_id, period, status, start_date, end_date, 
                auto_renew, next_notify_at
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?)`,
      data.user_id,
      data.tier_id,
      data.period,
      data.status,
      data.start_date,
      data.end_date,
      data.auto_renew,
      data.next_notify_at
    );
    if (!result.success) {
      throw new Error("Subscription creation failed");
    }
    const sub = await this.findById(result.meta.last_row_id);
    if (!sub) throw new Error("Subscription created but not found");
    return sub;
  }
  async update(id2, data) {
    const now2 = Math.floor(Date.now() / 1e3);
    if (data.status === "cancelled") {
      await execute(
        this.db,
        `UPDATE subscriptions 
                 SET auto_renew = 0, cancelled_at = ?, cancel_reason = ?, updated_at = ?
                 WHERE id = ?`,
        now2,
        data.cancel_reason || null,
        now2,
        id2
      );
    }
    return this.findById(id2);
  }
  async findHistoryByUserId(userId, limit = 20) {
    const result = await this.db.prepare(
      `SELECT s.*, t.display_name as tier_name
             FROM subscriptions s
             JOIN membership_tiers t ON s.tier_id = t.id
             WHERE s.user_id = ?
             ORDER BY s.created_at DESC
             LIMIT ?`
    ).bind(userId, limit).all();
    return result.results || [];
  }
  async expireSubscriptions() {
    const now2 = Math.floor(Date.now() / 1e3);
    const result = await execute(
      this.db,
      `UPDATE subscriptions 
             SET status = 'expired', updated_at = ?
             WHERE status = 'active' AND end_date < ?`,
      now2,
      now2
    );
    return result.meta?.changes || 0;
  }
  async findNeedingNotification(time2) {
    const result = await this.db.prepare(
      `SELECT s.*, u.email, u.username, t.display_name as tier_name
             FROM subscriptions s
             JOIN users u ON s.user_id = u.id
             JOIN membership_tiers t ON s.tier_id = t.id
             WHERE s.status = 'active' 
               AND s.auto_renew = 1 
               AND s.next_notify_at IS NOT NULL 
               AND s.next_notify_at <= ?`
    ).bind(time2).all();
    return result.results || [];
  }
  async markNotificationSent(id2) {
    await execute(
      this.db,
      "UPDATE subscriptions SET next_notify_at = NULL WHERE id = ?",
      id2
    );
  }
  async delete(id2) {
    const result = await execute(this.db, "DELETE FROM subscriptions WHERE id = ?", id2);
    return result.success;
  }
}
async function sendVerificationCode(email, request, kv, useMailChannels = true, resendApiKey) {
  const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
  if (!email || !emailRegex.test(email)) {
    return { success: false, error: "" };
  }
  const domain = email.split("@")[1]?.toLowerCase();
  if (domain && AUTH_CONFIG.blockedDomains.includes(domain)) {
    return { success: false, error: "" };
  }
  const ip = getClientIP(request);
  const minuteLimit = await checkRateLimit(kv, ip, RATE_LIMITS.SEND_CODE);
  if (!minuteLimit.allowed) {
    return { success: false, error: "" };
  }
  const hourLimit = await checkRateLimit(kv, `${ip}:hour`, RATE_LIMITS.SEND_CODE_HOUR);
  if (!hourLimit.allowed) {
    return { success: false, error: "" };
  }
  const code = generateVerificationCode();
  if (kv) {
    await kv.put(`verify:${email}`, code, { expirationTtl: AUTH_CONFIG.codeExpiration });
  }
  const emailSent = await sendVerificationCodeEmail(email, code, useMailChannels);
  if (!emailSent) {
    return { success: false, error: "" };
  }
  return { success: true };
}
async function verifyCode(email, code, kv) {
  {
    return false;
  }
}
async function registerUser(email, password, code, username, db, kv) {
  const userRepo = new UserRepository(db);
  const codeValid = await verifyCode();
  if (!codeValid) {
    return { success: false, error: "" };
  }
  const existingUser = await userRepo.findByEmail(email);
  if (existingUser) {
    return { success: false, error: "" };
  }
  const passwordHash = await hashPassword(password);
  try {
    const newUser = await userRepo.create({
      email,
      password_hash: passwordHash,
      username: username || "",
      role: "user"
    });
    return { success: true, user: newUser };
  } catch (error) {
    console.error("Registration error:", error);
    return { success: false, error: "" };
  }
}
async function verifyTempPassword(email, password, kv) {
  if (!kv) {
    return false;
  }
  const storedPassword = await kv.get(`temp_password:${email}`);
  if (!storedPassword) {
    return false;
  }
  await kv.delete(`temp_password:${email}`);
  return storedPassword === password;
}
async function loginUser(email, password, request, db, kv) {
  const userRepo = new UserRepository(db);
  const sessionRepo = new SessionRepository(db);
  const userAgent = request.headers.get("user-agent") || "unknown";
  const ip = getClientIP(request);
  const deviceFingerprint = generateDeviceFingerprint(userAgent, ip);
  if (kv) {
    const deviceKey = `device_anomaly:${deviceFingerprint}`;
    const anomalyCount = await kv.get(deviceKey);
    if (anomalyCount && parseInt(anomalyCount) > 10) {
      return { success: false, error: "" };
    }
  }
  const failLimit = await checkRateLimit(kv, `${ip}:login_fail`, RATE_LIMITS.LOGIN_FAIL);
  if (!failLimit.allowed) {
    if (kv) {
      const deviceKey = `device_anomaly:${deviceFingerprint}`;
      const currentCount = await kv.get(deviceKey) || "0";
      await kv.put(deviceKey, (parseInt(currentCount) + 1).toString(), { expirationTtl: AUTH_CONFIG.deviceRecordExpiration });
    }
    return { success: false, error: "10" };
  }
  const user = await userRepo.findByEmailWithPassword(email);
  if (!user) {
    return { success: false, error: "" };
  }
  let passwordValid = false;
  const isTempPassword = await verifyTempPassword(email, password, kv);
  if (isTempPassword) {
    passwordValid = true;
  } else {
    passwordValid = await verifyPassword(password, user.password_hash);
  }
  if (!passwordValid) {
    if (kv) {
      const failKey = `ratelimit:login_fail:${ip}`;
      const failCount = await kv.get(failKey);
      const count = failCount ? parseInt(failCount, 10) + 1 : 1;
      await kv.put(failKey, count.toString(), { expirationTtl: AUTH_CONFIG.loginFailLockout });
    }
    return { success: false, error: "" };
  }
  const token = generateToken();
  const expiresAt = Math.floor(Date.now() / 1e3) + AUTH_CONFIG.sessionExpiration;
  const session = await sessionRepo.create({
    token,
    user_id: user.id,
    expires_at: expiresAt,
    user_agent: userAgent
  });
  if (kv) {
    const deviceInfo = {
      fingerprint: deviceFingerprint,
      userAgent,
      ip,
      timestamp: Date.now()
    };
    await kv.put(`session_device:${token}`, JSON.stringify(deviceInfo), { expirationTtl: AUTH_CONFIG.deviceRecordExpiration });
  }
  const userData = {
    id: user.id,
    email: user.email,
    username: user.username,
    avatar_url: user.avatar_url,
    role: user.role,
    level: user.level,
    exp: user.exp,
    coins: user.coins,
    preferences: user.preferences,
    achievements: user.achievements
  };
  return { success: true, session, user: userData };
}
async function verifySession$1(token, db, kv = null, request) {
  if (!token) {
    return { valid: false };
  }
  const userRepo = new UserRepository(db);
  const sessionRepo = new SessionRepository(db);
  const session = await sessionRepo.findValidSession(token);
  if (!session) {
    return { valid: false };
  }
  const user = await userRepo.findById(session.user_id);
  if (!user) {
    return { valid: false };
  }
  if (kv && request) {
    const deviceData = await kv.get(`session_device:${token}`);
    if (deviceData) {
      const deviceInfo = JSON.parse(deviceData);
      const currentFingerprint = generateDeviceFingerprint(
        request.headers.get("user-agent") || "unknown",
        getClientIP(request)
      );
      if (deviceInfo.fingerprint !== currentFingerprint) {
        console.warn(`Device fingerprint mismatch for session ${token}`);
      }
    }
  }
  return { valid: true, user, session };
}
function getSessionToken(request) {
  const cookieHeader = request.headers.get("Cookie");
  const cookieMatch = cookieHeader?.match(/session=([^;]+)/);
  if (cookieMatch) {
    return cookieMatch[1];
  }
  const authHeader = request.headers.get("Authorization");
  if (authHeader?.startsWith("Bearer ")) {
    return authHeader.substring(7);
  }
  return null;
}
async function updateUserProfile(userId, updates, db) {
  const userRepo = new UserRepository(db);
  try {
    const updatedUser = await userRepo.update(userId, updates);
    if (!updatedUser) {
      return { success: false, error: "" };
    }
    return { success: true, user: updatedUser };
  } catch (error) {
    console.error("Update profile error:", error);
    return { success: false, error: "" };
  }
}
async function updateUserPreferences(userId, preferences, db) {
  const userRepo = new UserRepository(db);
  try {
    await userRepo.update(userId, { preferences });
    return { success: true };
  } catch (error) {
    console.error("Update preferences error:", error);
    return { success: false, error: "" };
  }
}
async function changePassword(userId, oldPassword, newPassword, db) {
  const userRepo = new UserRepository(db);
  try {
    const currentHash = await userRepo.getPasswordHash(userId);
    if (!currentHash) {
      return { success: false, error: "" };
    }
    const isValid = await verifyPassword(oldPassword, currentHash);
    if (!isValid) {
      return { success: false, error: "" };
    }
    const newHash = await hashPassword(newPassword);
    await userRepo.updatePassword(userId, newHash);
    return { success: true };
  } catch (error) {
    console.error("Change password error:", error);
    return { success: false, error: "" };
  }
}
const auth_server = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  changePassword,
  getSessionToken,
  loginUser,
  registerUser,
  sendVerificationCode,
  updateUserPreferences,
  updateUserProfile,
  verifyCode,
  verifySession: verifySession$1,
  verifyTempPassword
}, Symbol.toStringTag, { value: "Module" }));
async function getUserCoins(db, userId) {
  const user = await queryFirst(
    db,
    "SELECT coins FROM users WHERE id = ?",
    userId
  );
  return user?.coins || 0;
}
async function addCoins(db, userId, amount, source, description, referenceType, referenceId, operatorId) {
  if (amount <= 0) {
    return { success: false, newBalance: 0, error: "" };
  }
  try {
    const currentBalance = await getUserCoins(db, userId);
    await execute(
      db,
      "UPDATE users SET coins = coins + ? WHERE id = ?",
      amount,
      userId
    );
    const newBalance = await getUserCoins(db, userId);
    await execute(
      db,
      `INSERT INTO coin_transactions (
        user_id, amount, type, source, reference_type, reference_id,
        balance_before, balance_after, description, operator_id
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,
      userId,
      amount,
      "earn",
      source,
      referenceType || null,
      referenceId || null,
      currentBalance,
      newBalance,
      description || null,
      operatorId || null
    );
    return { success: true, newBalance };
  } catch (error) {
    console.error("Add coins error:", error);
    return { success: false, newBalance: 0, error: "" };
  }
}
async function getCoinTransactionHistory(db, userId, limit = 50, offset = 0) {
  const result = await db.prepare(
    `SELECT * FROM coin_transactions 
       WHERE user_id = ? 
       ORDER BY created_at DESC 
       LIMIT ? OFFSET ?`
  ).bind(userId, limit, offset).all();
  return result.results || [];
}
const coins_server = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  addCoins,
  getCoinTransactionHistory,
  getUserCoins
}, Symbol.toStringTag, { value: "Module" }));
function MissionBoard() {
  const missions = [
    { id: "1", title: "", reward: "50 Coins", completed: false, progress: 0, total: 1 },
    { id: "2", title: "", reward: "10 Exp", completed: true, progress: 1, total: 1 },
    { id: "3", title: "", reward: "20 Exp", completed: false, progress: 0, total: 1 },
    { id: "4", title: "", reward: "Badge", completed: true, progress: 1, total: 1 }
  ];
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-black/40 backdrop-blur-md border border-white/10 rounded-2xl p-6 h-full flex flex-col", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("h3", { className: "text-lg font-bold text-white flex items-center gap-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Trophy, { className: "text-yellow-500", size: 20 }),
        ""
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs font-mono text-white/40 bg-white/5 px-2 py-1 rounded", children: "REFRESH: 12:00:00" })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-1 space-y-4 overflow-y-auto custom-scrollbar pr-2", children: missions.map((mission, index2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        initial: { x: -20, opacity: 0 },
        animate: { x: 0, opacity: 1 },
        transition: { delay: index2 * 0.1 },
        className: `
                            group relative p-4 rounded-xl border transition-all duration-300
                            ${mission.completed ? "bg-green-500/10 border-green-500/30" : "bg-white/5 border-white/5 hover:bg-white/10 hover:border-white/20"}
                        `,
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `
                                    w-6 h-6 rounded-full flex items-center justify-center
                                    ${mission.completed ? "text-green-400" : "text-white/20"}
                                `, children: mission.completed ? /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheck, { size: 20 }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Circle, { size: 20 }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `font-bold text-sm ${mission.completed ? "text-white/60 line-through" : "text-white"}`, children: mission.title }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-xs text-yellow-500/80 font-mono mt-0.5", children: [
                  "REWARD: ",
                  mission.reward
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-right", children: mission.completed ? /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs font-bold text-green-400 bg-green-500/20 px-2 py-1 rounded", children: "COMPLETE" }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 text-xs text-white/40", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
                mission.progress,
                "/",
                mission.total
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, { size: 12, className: "group-hover:translate-x-1 transition-transform" })
            ] }) })
          ] }),
          !mission.completed && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute bottom-0 left-0 h-0.5 bg-white/10 w-full rounded-b-xl overflow-hidden", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
            motion.div,
            {
              className: "h-full bg-yellow-500",
              initial: { width: 0 },
              animate: { width: `${mission.progress / mission.total * 100}%` }
            }
          ) })
        ]
      },
      mission.id
    )) })
  ] });
}
function ServerStatus() {
  const [load, setLoad] = reactExports.useState(42);
  const [users, setUsers] = reactExports.useState(128);
  const [ping, setPing] = reactExports.useState(24);
  reactExports.useEffect(() => {
    const interval = setInterval(() => {
      setLoad((prev) => Math.min(100, Math.max(0, prev + (Math.random() * 10 - 5))));
      setUsers((prev) => Math.max(100, prev + Math.floor(Math.random() * 5 - 2)));
      setPing((prev) => Math.max(10, Math.min(100, prev + Math.floor(Math.random() * 10 - 5))));
    }, 2e3);
    return () => clearInterval(interval);
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-black/40 backdrop-blur-md border border-white/10 rounded-2xl p-6 h-full flex flex-col justify-between relative overflow-hidden", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 opacity-10 pointer-events-none", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[url('/grid.png')] bg-repeat opacity-50 animate-pulse" }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-4 relative z-10", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("h3", { className: "text-lg font-bold text-white flex items-center gap-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Server, { className: "text-blue-500", size: 20 }),
        "SYSTEM STATUS"
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "w-2 h-2 rounded-full bg-green-500 animate-pulse" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs font-mono text-green-400", children: "ONLINE" })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 gap-6 relative z-10", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between text-xs font-mono text-white/60", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "CPU LOAD" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
            load.toFixed(1),
            "%"
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-1.5 bg-white/10 rounded-full overflow-hidden", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          motion.div,
          {
            className: `h-full ${load > 80 ? "bg-red-500" : "bg-blue-500"}`,
            animate: { width: `${load}%` },
            transition: { type: "spring", stiffness: 50 }
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-2 bg-purple-500/20 rounded-lg text-purple-400", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { size: 16 }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-white/40 font-bold", children: "ACTIVE USERS" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-lg font-mono font-bold text-white", children: users })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(Activity, { className: "text-white/20", size: 24 })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-2 bg-green-500/20 rounded-lg text-green-400", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Wifi, { size: 16 }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-white/40 font-bold", children: "LATENCY" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-lg font-mono font-bold text-white", children: [
              ping,
              "ms"
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex gap-0.5 items-end h-6", children: [1, 2, 3, 4].map((i) => /* @__PURE__ */ jsxRuntimeExports.jsx(
          motion.div,
          {
            className: "w-1 bg-green-500/50",
            animate: { height: Math.random() * 100 + "%" },
            transition: { duration: 0.5, repeat: Infinity, repeatType: "reverse", delay: i * 0.1 }
          },
          i
        )) })
      ] })
    ] })
  ] });
}
function ActivityLog() {
  const [logs, setLogs] = reactExports.useState([
    { id: 1, timestamp: "10:24:01", message: "System initialized...", type: "info" },
    { id: 2, timestamp: "10:24:02", message: "User profile loaded successfully.", type: "success" },
    { id: 3, timestamp: "10:24:05", message: "Connecting to secure server...", type: "info" },
    { id: 4, timestamp: "10:24:08", message: "Connection established.", type: "success" }
  ]);
  const scrollRef = reactExports.useRef(null);
  reactExports.useEffect(() => {
    if (scrollRef.current) {
      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
    }
  }, [logs]);
  reactExports.useEffect(() => {
    const messages = [
      "Scanning for updates...",
      "Syncing inventory data...",
      "Checking daily rewards...",
      "Optimizing background processes...",
      "Ping response: 24ms",
      "Data integrity check passed.",
      "New notification received."
    ];
    const interval = setInterval(() => {
      const randomMsg = messages[Math.floor(Math.random() * messages.length)];
      const newLog = {
        id: Date.now(),
        timestamp: (/* @__PURE__ */ new Date()).toLocaleTimeString("en-GB", { hour12: false }),
        message: randomMsg,
        type: Math.random() > 0.8 ? "success" : "info"
      };
      setLogs((prev) => [...prev.slice(-20), newLog]);
    }, 3e3);
    return () => clearInterval(interval);
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-black/40 backdrop-blur-md border border-white/10 rounded-2xl p-4 h-full flex flex-col font-mono text-xs", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 mb-2 pb-2 border-b border-white/5 text-white/40 uppercase tracking-wider font-bold", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Terminal, { size: 14 }),
      "System Activity Log"
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { ref: scrollRef, className: "flex-1 overflow-y-auto custom-scrollbar space-y-1", children: logs.map((log) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        initial: { opacity: 0, x: -10 },
        animate: { opacity: 1, x: 0 },
        className: "flex gap-3",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-white/30 select-none", children: [
            "[",
            log.timestamp,
            "]"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: `
                            ${log.type === "success" ? "text-green-400" : ""}
                            ${log.type === "warning" ? "text-yellow-400" : ""}
                            ${log.type === "error" ? "text-red-400" : ""}
                            ${log.type === "info" ? "text-white/70" : ""}
                        `, children: [
            log.type === "success" && " ",
            log.message
          ] })
        ]
      },
      log.id
    )) })
  ] });
}
async function loader$t({
  request,
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken(request);
  const {
    valid,
    user
  } = await verifySession$1(token, anime_db);
  if (!valid || !user) {
    return {
      loggedIn: false,
      user: null,
      stats: {
        coins: 0,
        level: 1,
        exp: 0,
        maxExp: 100
      },
      signInStatus: {
        hasSignedIn: false,
        consecutiveDays: 0
      }
    };
  }
  const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
  const signInRecord = await anime_db.prepare(`
          SELECT * FROM coin_transactions 
          WHERE user_id = ? AND source = 'daily_signin' 
          AND date(created_at, 'unixepoch') = ?
      `).bind(user.id, today).first();
  const streakResult = await anime_db.prepare(`
          SELECT COUNT(DISTINCT date(created_at, 'unixepoch')) as streak
          FROM coin_transactions 
          WHERE user_id = ? AND source = 'daily_signin'
          AND created_at > unixepoch('now', '-30 days')
      `).bind(user.id).first();
  const coins = await getUserCoins(anime_db, user.id);
  return {
    loggedIn: true,
    user: {
      ...user,
      // 
      avatar_url: user.avatar_url || `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`
    },
    stats: {
      coins,
      level: user.level || 1,
      exp: user.exp || 0,
      maxExp: (user.level || 1) * 100
      // 
    },
    signInStatus: {
      hasSignedIn: !!signInRecord,
      consecutiveDays: streakResult?.streak || 0
    }
  };
}
function DashboardContent() {
  const loaderData = useLoaderData();
  const {
    user: clientUser,
    loading
  } = useUser();
  const {
    stats: clientStats
  } = useGamification();
  const [isGachaOpen, setIsGachaOpen] = reactExports.useState(false);
  const navigate = useNavigate();
  const fetcher = useFetcher();
  const user = loaderData.user || clientUser;
  const stats = {
    coins: loaderData.stats.coins || 0,
    level: loaderData.stats.level || 1,
    exp: loaderData.stats.exp || 0,
    maxExp: loaderData.stats.maxExp || 100
  };
  const [signInStatus, setSignInStatus] = reactExports.useState(loaderData.signInStatus);
  const isSubmitting = fetcher.state === "submitting";
  const isDone = signInStatus.hasSignedIn || fetcher.data?.success;
  reactExports.useEffect(() => {
    if (fetcher.data?.success) {
      setSignInStatus((prev) => ({
        ...prev,
        hasSignedIn: true,
        consecutiveDays: fetcher.data.streak || prev.consecutiveDays + 1
      }));
    }
  }, [fetcher.data]);
  const handleSignIn = () => {
    if (isDone || isSubmitting) return;
    fetcher.submit({}, {
      method: "post",
      action: "/api/daily-signin"
    });
  };
  if (!loaderData.loggedIn && !loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "min-h-screen bg-slate-900 flex items-center justify-center text-white",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "text-center",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
          className: "text-2xl font-bold mb-4",
          children: "ACCESS DENIED"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
          onClick: () => navigate("/login"),
          className: "mt-4 px-6 py-2 bg-primary-500 rounded-full",
          children: ""
        })]
      })
    });
  }
  const userData = {
    avatar: user?.avatar_url,
    uid: user ? `UID-${user.id.toString().padStart(6, "0")}` : "UID-000000",
    level: stats.level,
    name: user?.username || "Traveler",
    exp: stats.exp,
    maxExp: stats.maxExp
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ClientOnly, {
      children: () => /* @__PURE__ */ jsxRuntimeExports.jsx(StatusHUD, {
        user: userData,
        stats: {
          coins: stats.coins
        }
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsx(NavMenu, {}), /* @__PURE__ */ jsxRuntimeExports.jsx(ActionPanel, {
      onSignIn: handleSignIn,
      onGacha: () => setIsGachaOpen(true),
      onShop: () => navigate("/shop"),
      signInStatus: {
        hasSignedIn: isDone,
        consecutiveDays: signInStatus.consecutiveDays,
        isSubmitting
      }
    }), /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
      children: isGachaOpen && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: "fixed inset-0 bg-black/80 backdrop-blur-md z-[100]",
          initial: {
            opacity: 0
          },
          animate: {
            opacity: 1
          },
          exit: {
            opacity: 0
          },
          onClick: () => setIsGachaOpen(false)
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: "fixed inset-0 z-[101] flex items-center justify-center p-4 pointer-events-none",
          initial: {
            opacity: 0,
            scale: 0.9,
            y: 20
          },
          animate: {
            opacity: 1,
            scale: 1,
            y: 0
          },
          exit: {
            opacity: 0,
            scale: 0.9,
            y: 20
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "w-full max-w-md pointer-events-auto relative",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
              onClick: () => setIsGachaOpen(false),
              className: "absolute -top-12 right-0 text-white/60 hover:text-white flex items-center gap-2 transition-colors",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-2xl",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-sm font-bold tracking-widest",
                children: "CLOSE"
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsx(GachaMachine, {})]
          })
        })]
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "absolute inset-0 flex items-center justify-center pl-24 pr-8 pt-24 pb-8 pointer-events-none",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "w-full h-full max-w-6xl pointer-events-auto grid grid-cols-1 md:grid-cols-3 grid-rows-2 gap-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: "md:col-span-2 row-span-1",
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.1
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(MissionBoard, {})
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: "md:col-span-1 row-span-1",
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.2
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(ServerStatus, {})
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: "md:col-span-3 row-span-1 h-48 md:h-auto",
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.3
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(ActivityLog, {})
        })]
      })
    })]
  });
}
const user_dashboard = withComponentProps(function UserDashboard() {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(GamificationProvider, {
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(DashboardContent, {})
  });
});
const route18 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: user_dashboard,
  loader: loader$t
}, Symbol.toStringTag, { value: "Module" }));
async function loader$s({
  request,
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken(request);
  const {
    valid,
    user
  } = await verifySession$1(token, anime_db);
  if (!valid || !user) {
    return {
      loggedIn: false,
      user: null,
      stats: {
        coins: 0,
        level: 1,
        exp: 0,
        maxExp: 100
      },
      inventory: []
    };
  }
  const coins = await getUserCoins(anime_db, user.id);
  const inventory = await anime_db.prepare(`
          SELECT si.*, up.purchased_at 
          FROM user_purchases up
          JOIN shop_items si ON up.item_id = si.id
          WHERE up.user_id = ?
          ORDER BY up.purchased_at DESC
      `).bind(user.id).all();
  return {
    loggedIn: true,
    user: {
      ...user,
      avatar_url: user.avatar_url || `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`
    },
    stats: {
      coins,
      level: user.level || 1,
      exp: user.exp || 0,
      maxExp: (user.level || 1) * 100
    },
    inventory: inventory.results || []
  };
}
const user_inventory = withComponentProps(function UserInventory() {
  const {
    loggedIn,
    user,
    stats,
    inventory
  } = useLoaderData();
  const navigate = useNavigate();
  const [filter2, setFilter] = reactExports.useState("all");
  const [selectedItem, setSelectedItem] = reactExports.useState(null);
  if (!loggedIn) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "min-h-screen bg-slate-900 flex items-center justify-center text-white",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "text-center",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
          className: "text-2xl font-bold mb-4",
          children: "ACCESS DENIED"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
          onClick: () => navigate("/login"),
          className: "mt-4 px-6 py-2 bg-primary-500 rounded-full",
          children: ""
        })]
      })
    });
  }
  const filteredInventory = inventory.filter((item) => {
    if (filter2 === "all") return true;
    return item.type === filter2;
  });
  const userData = {
    avatar: user?.avatar_url,
    uid: user ? `UID-${user.id.toString().padStart(6, "0")}` : "UID-000000",
    level: stats.level || 1,
    name: user?.username || "Traveler",
    exp: stats.exp || 0,
    maxExp: stats.maxExp || 100
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ClientOnly, {
      children: () => /* @__PURE__ */ jsxRuntimeExports.jsx(StatusHUD, {
        user: userData,
        stats: {
          coins: stats.coins
        }
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsx(NavMenu, {}), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "absolute inset-0 flex items-center justify-center pl-24 pr-8 pt-24 pb-8 pointer-events-none",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "w-full h-full max-w-6xl flex gap-8 pointer-events-auto",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex-1 flex flex-col gap-6",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "flex items-center gap-4 bg-black/40 backdrop-blur-md p-2 rounded-full w-fit border border-white/10",
            children: ["all", "avatar_frame", "theme", "emoji"].map((type) => /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
              onClick: () => setFilter(type),
              className: `px-4 py-1.5 rounded-full text-sm font-bold transition-colors ${filter2 === type ? "bg-white text-slate-900" : "text-white/60 hover:text-white hover:bg-white/10"}`,
              children: type === "all" ? "" : type === "avatar_frame" ? "" : type === "theme" ? "" : ""
            }, type))
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "flex-1 overflow-y-auto custom-scrollbar pr-2",
            children: filteredInventory.length > 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-4",
              children: [filteredInventory.map((item) => /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
                layoutId: `item-${item.id}`,
                onClick: () => setSelectedItem(item),
                className: `
                                        aspect-square rounded-xl border-2 cursor-pointer relative group overflow-hidden
                                        ${selectedItem?.id === item.id ? "border-yellow-400 bg-yellow-400/10 shadow-[0_0_20px_rgba(250,204,21,0.3)]" : "border-white/10 bg-black/40 hover:border-white/40 hover:bg-white/5"}
                                    `,
                whileHover: {
                  scale: 1.05
                },
                whileTap: {
                  scale: 0.95
                },
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                  src: item.image_url,
                  alt: item.name,
                  className: "w-full h-full object-cover p-2",
                  width: 100
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "absolute bottom-0 left-0 right-0 bg-black/60 p-1 text-center",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-[10px] text-white/80 truncate block",
                    children: item.name
                  })
                })]
              }, item.id)), Array.from({
                length: Math.max(0, 24 - filteredInventory.length)
              }).map((_2, i) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "aspect-square rounded-xl border border-white/5 bg-black/20 flex items-center justify-center",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "w-2 h-2 bg-white/5 rounded-full"
                })
              }, `empty-${i}`))]
            }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "h-full flex flex-col items-center justify-center text-white/40",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Package, {
                size: 64,
                className: "mb-4 opacity-50"
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-lg font-bold",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-sm mt-2",
                children: ""
              })]
            })
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "w-80 flex flex-col",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
            mode: "wait",
            children: selectedItem ? /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
              initial: {
                opacity: 0,
                x: 20
              },
              animate: {
                opacity: 1,
                x: 0
              },
              exit: {
                opacity: 0,
                x: 20
              },
              className: "h-full bg-black/60 backdrop-blur-xl border-l border-white/10 p-6 flex flex-col rounded-r-3xl",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "aspect-square bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl border border-white/10 flex items-center justify-center mb-6 relative overflow-hidden group",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "absolute inset-0 bg-[url('/grid.png')] opacity-20"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
                  className: "w-3/4 h-3/4 z-10 drop-shadow-2xl relative",
                  initial: {
                    scale: 0.8,
                    rotate: -10
                  },
                  animate: {
                    scale: 1,
                    rotate: 0
                  },
                  transition: {
                    type: "spring"
                  },
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                    src: selectedItem.image_url,
                    alt: selectedItem.name,
                    className: "w-full h-full object-contain",
                    width: 300
                  })
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                className: "text-2xl font-bold text-white mb-2",
                children: selectedItem.name
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex gap-2 mb-4",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: "px-2 py-0.5 bg-yellow-500/20 text-yellow-400 text-xs font-bold rounded border border-yellow-500/30",
                  children: selectedItem.type === "avatar_frame" ? "" : ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: "px-2 py-0.5 bg-white/10 text-white/60 text-xs rounded",
                  children: ""
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-white/60 text-sm leading-relaxed mb-8 flex-1",
                children: selectedItem.description || "..."
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                className: "w-full py-3 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-200 transition-colors shadow-lg shadow-white/10",
                children: " / "
              })]
            }, selectedItem.id) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "h-full bg-black/60 backdrop-blur-xl border-l border-white/10 p-6 flex flex-col items-center justify-center text-white/30 rounded-r-3xl",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Package, {
                className: "w-16 h-16 mb-4 opacity-50"
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                children: ""
              })]
            })
          })
        })]
      })
    })]
  });
});
const ErrorBoundary$2 = withErrorBoundaryProps(function ErrorBoundary({
  error
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    className: "min-h-screen bg-slate-900 flex items-center justify-center text-white",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "text-center p-8 bg-red-900/20 border border-red-500/50 rounded-2xl max-w-md",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
        className: "text-2xl font-bold mb-4 text-red-500",
        children: "SYSTEM ERROR"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-white/80 mb-4",
        children: ""
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "bg-black/50 p-4 rounded text-left text-xs font-mono text-red-300 overflow-auto max-h-32 mb-6",
        children: error instanceof Error ? error.message : "Unknown Error"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("a", {
        href: "/user/dashboard",
        className: "px-6 py-2 bg-white text-slate-900 rounded-full font-bold hover:bg-slate-200 transition-colors",
        children: ""
      })]
    })
  });
});
const route19 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ErrorBoundary: ErrorBoundary$2,
  default: user_inventory,
  loader: loader$s
}, Symbol.toStringTag, { value: "Module" }));
function HexagonBadge({
  icon,
  name,
  description,
  isUnlocked,
  size = "md",
  onClick
}) {
  const sizeClasses = {
    sm: "w-24 h-24 text-2xl",
    md: "w-32 h-32 text-4xl",
    lg: "w-40 h-40 text-5xl"
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(
    motion.div,
    {
      className: clsx(
        "relative group cursor-pointer",
        sizeClasses[size]
      ),
      onClick,
      whileHover: { scale: 1.05, zIndex: 10 },
      whileTap: { scale: 0.95 },
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "div",
          {
            className: clsx(
              "absolute inset-0 clip-hexagon transition-all duration-500",
              isUnlocked ? "bg-gradient-to-br from-at-orange/80 to-at-purple/80 backdrop-blur-md shadow-[0_0_30px_rgba(255,159,67,0.4)]" : "bg-slate-800/50 backdrop-blur-sm border border-white/5"
            ),
            children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: clsx(
              "absolute inset-[2px] clip-hexagon flex items-center justify-center transition-all duration-500",
              isUnlocked ? "bg-black/20" : "bg-black/40"
            ), children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: clsx(
              "filter transition-all duration-500",
              isUnlocked ? "grayscale-0 drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]" : "grayscale opacity-30 blur-[1px]"
            ), children: icon }) })
          }
        ),
        !isUnlocked && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 clip-hexagon bg-[url('/patterns/grid.svg')] opacity-20 pointer-events-none" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-full left-1/2 -translate-x-1/2 mt-4 w-48 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-20", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-black/80 backdrop-blur-xl border border-at-orange/30 p-3 rounded-lg text-center shadow-2xl relative overflow-hidden", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-transparent animate-pulse" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: clsx(
            "font-display font-bold text-sm mb-1",
            isUnlocked ? "text-at-orange" : "text-slate-500"
          ), children: isUnlocked ? name : "???" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-slate-400 leading-relaxed", children: isUnlocked ? description : "" })
        ] }) })
      ]
    }
  );
}
const ALL_ACHIEVEMENTS = [{
  id: "night_owl",
  name: "",
  description: " 2:00 - 4:00 ",
  icon: "",
  category: "time"
}, {
  id: "early_bird",
  name: "/",
  description: " 5:00 - 7:00 ",
  icon: "",
  category: "time"
}, {
  id: "combo_master",
  name: "",
  description: " 50 ",
  icon: "",
  category: "interaction"
}, {
  id: "first_contact",
  name: "",
  description: "",
  icon: "",
  category: "interaction"
}, {
  id: "observer",
  name: "",
  description: " 10 ",
  icon: "",
  category: "interaction"
}, {
  id: "schrodinger_cat",
  name: "",
  description: " 404  5 ",
  icon: "",
  category: "hidden"
}, {
  id: "pixel_hunter",
  name: "",
  description: " 1x1 ",
  icon: "",
  category: "hidden"
}];
async function loader$r({
  request,
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken(request);
  const {
    valid,
    user
  } = await verifySession$1(token, anime_db);
  if (!valid || !user) {
    return {
      loggedIn: false,
      unlockedIds: [],
      user: null,
      stats: {
        coins: 0
      }
    };
  }
  const coins = await getUserCoins(anime_db, user.id);
  const unlockedIds = user.achievements ? JSON.parse(user.achievements) : [];
  return {
    loggedIn: true,
    unlockedIds,
    user: {
      ...user,
      avatar_url: user.avatar_url || `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`
    },
    stats: {
      coins,
      level: user.level ?? 1,
      exp: user.exp ?? 0,
      maxExp: (user.level ?? 1) * 100
    }
  };
}
const user_achievements = withComponentProps(function UserAchievements({
  loaderData
}) {
  const {
    loggedIn,
    unlockedIds,
    user,
    stats
  } = loaderData;
  const navigate = useNavigate();
  if (!loggedIn) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "min-h-screen bg-slate-900 flex items-center justify-center text-white",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "text-center",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
          className: "text-2xl font-bold mb-4",
          children: "ACCESS DENIED"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
          onClick: () => navigate("/login"),
          className: "mt-4 px-6 py-2 bg-primary-500 rounded-full",
          children: ""
        })]
      })
    });
  }
  const total = ALL_ACHIEVEMENTS.length;
  const unlocked = unlockedIds.length;
  const progress2 = Math.round(unlocked / total * 100);
  const userData = {
    avatar: user?.avatar_url,
    uid: user ? `UID-${user.id.toString().padStart(6, "0")}` : "UID-000000",
    level: stats.level ?? 0,
    name: user?.username || "Traveler",
    exp: stats.exp ?? 0,
    maxExp: stats.maxExp ?? 0
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ClientOnly, {
      children: () => /* @__PURE__ */ jsxRuntimeExports.jsx(StatusHUD, {
        user: userData,
        stats: {
          coins: stats.coins
        }
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsx(NavMenu, {}), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "absolute inset-0 flex items-center justify-center pl-24 pr-8 pt-24 pb-8 pointer-events-none",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "w-full h-full max-w-6xl pointer-events-auto overflow-y-auto custom-scrollbar flex flex-col items-center",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "text-center mb-12 w-full",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.h1, {
            initial: {
              opacity: 0,
              y: -20
            },
            animate: {
              opacity: 1,
              y: 0
            },
            className: "text-4xl md:text-6xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 mb-4 drop-shadow-lg",
            children: "TROPHY ROOM"
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.p, {
            initial: {
              opacity: 0
            },
            animate: {
              opacity: 1
            },
            transition: {
              delay: 0.2
            },
            className: "text-white/60 font-display tracking-widest uppercase",
            children: ["Sync Rate: ", progress2, "% // Level ", user?.level || 1]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "flex-1 w-full flex items-center justify-center min-h-[400px]",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "flex flex-wrap justify-center gap-4 md:gap-8 max-w-5xl mx-auto pb-12 px-4",
            children: ALL_ACHIEVEMENTS.map((achievement, index2) => /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
              initial: {
                opacity: 0,
                scale: 0.8
              },
              animate: {
                opacity: 1,
                scale: 1
              },
              transition: {
                delay: index2 * 0.1
              },
              className: index2 % 2 === 1 ? "md:mt-16" : "",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(HexagonBadge, {
                ...achievement,
                isUnlocked: unlockedIds.includes(achievement.id),
                size: "md"
              })
            }, achievement.id))
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          initial: {
            opacity: 0,
            y: 50
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.8
          },
          className: "glass-card p-8 max-w-2xl w-full mx-auto text-center bg-black/40 border border-white/10 backdrop-blur-md rounded-2xl mt-8",
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "grid grid-cols-3 gap-8",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "text-3xl font-display font-bold text-yellow-500",
                children: unlocked
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "text-xs text-white/50 uppercase tracking-wider mt-1",
                children: "Unlocked"
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "text-3xl font-display font-bold text-purple-500",
                children: total
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "text-xs text-white/50 uppercase tracking-wider mt-1",
                children: "Total"
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "text-3xl font-display font-bold text-red-500",
                children: unlockedIds.filter((id2) => ALL_ACHIEVEMENTS.find((a) => a.id === id2)?.category === "hidden").length
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "text-xs text-white/50 uppercase tracking-wider mt-1",
                children: "Secrets Found"
              })]
            })]
          })
        })]
      })
    })]
  });
});
const ErrorBoundary$1 = withErrorBoundaryProps(function ErrorBoundary3({
  error
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    className: "min-h-screen bg-slate-900 flex items-center justify-center text-white",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "text-center p-8 bg-red-900/20 border border-red-500/50 rounded-2xl max-w-md",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
        className: "text-2xl font-bold mb-4 text-red-500",
        children: "SYSTEM ERROR"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-white/80 mb-4",
        children: ""
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "bg-black/50 p-4 rounded text-left text-xs font-mono text-red-300 overflow-auto max-h-32 mb-6",
        children: error instanceof Error ? error.message : "Unknown Error"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("a", {
        href: "/user/dashboard",
        className: "px-6 py-2 bg-white text-slate-900 rounded-full font-bold hover:bg-slate-200 transition-colors",
        children: ""
      })]
    })
  });
});
const route20 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ErrorBoundary: ErrorBoundary$1,
  default: user_achievements,
  loader: loader$r
}, Symbol.toStringTag, { value: "Module" }));
function ColorPicker({ colors, selectedColor, onChange }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex flex-wrap gap-3", children: colors.map((color2) => /* @__PURE__ */ jsxRuntimeExports.jsx(
    "button",
    {
      type: "button",
      onClick: () => onChange(color2),
      className: "relative w-10 h-10 rounded-full shadow-sm hover:scale-110 transition-transform focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 dark:focus:ring-slate-500",
      style: { backgroundColor: color2 },
      children: selectedColor === color2 && /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.div,
        {
          initial: { opacity: 0, scale: 0.5 },
          animate: { opacity: 1, scale: 1 },
          className: "absolute inset-0 flex items-center justify-center text-white",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(Check, { size: 16, strokeWidth: 3 })
        }
      )
    },
    color2
  )) });
}
async function loader$q({
  request,
  context
}) {
  try {
    const env = context.cloudflare.env;
    const db = env.anime_db;
    const token = getSessionToken(request);
    if (!token) {
      return redirect("/login");
    }
    const result = await verifySession$1(token, db);
    if (!result.valid || !result.user) {
      return redirect("/login");
    }
    const coins = await getUserCoins(db, result.user.id);
    return {
      user: {
        ...result.user,
        avatar_url: result.user.avatar_url || `https://api.dicebear.com/7.x/avataaars/svg?seed=${result.user.username}`
      },
      stats: {
        coins,
        level: result.user.level || 1,
        exp: result.user.exp || 0,
        maxExp: (result.user.level || 1) * 100
      }
    };
  } catch (error) {
    console.error("Settings Loader Error:", error);
    return redirect("/login");
  }
}
async function action$q({
  request,
  context
}) {
  const env = context.cloudflare.env;
  const db = env.anime_db;
  const token = getSessionToken(request);
  const result = await verifySession$1(token, db);
  if (!result.valid || !result.user) {
    return redirect("/login");
  }
  const user = result.user;
  const formData = await request.formData();
  const intent = formData.get("intent");
  try {
    if (intent === "update_profile") {
      const username = formData.get("username");
      const avatar_url = formData.get("avatar_url");
      const bio = formData.get("bio");
      await updateUserProfile(user.id, {
        username,
        avatar_url,
        bio
      }, db);
      return {
        success: true,
        message: ""
      };
    }
    if (intent === "change_password") {
      const currentPassword = formData.get("current_password");
      const newPassword = formData.get("new_password");
      const confirmPassword = formData.get("confirm_password");
      if (newPassword !== confirmPassword) {
        return {
          success: false,
          message: ""
        };
      }
      const result2 = await changePassword(user.id, currentPassword, newPassword, db);
      if (!result2.success) {
        return {
          success: false,
          message: result2.error || ""
        };
      }
      return {
        success: true,
        message: ""
      };
    }
    if (intent === "update_preferences") {
      const preferences = JSON.parse(formData.get("preferences"));
      await updateUserPreferences(user.id, preferences, db);
      return {
        success: true,
        message: ""
      };
    }
  } catch (error) {
    console.error("Settings Action Error:", error);
    return {
      success: false,
      message: ""
    };
  }
  return null;
}
const settings = withComponentProps(function SettingsPage() {
  const {
    user,
    stats
  } = useLoaderData();
  const actionData = useActionData();
  const navigation = useNavigation();
  const submit = useSubmit();
  const isSubmitting = navigation.state === "submitting";
  const [activeTab, setActiveTab] = reactExports.useState("profile");
  const [avatarPreview, setAvatarPreview] = reactExports.useState(user.avatar_url || null);
  const defaultPreferences = {
    notifications: {
      email_reply: true,
      web_reply: true,
      article_update: true,
      system_msg: true
    },
    privacy: {
      profile_visibility: "public",
      show_game_stats: true,
      show_online_status: true
    },
    personalization: {
      code_theme: "github-dark",
      font_size: "medium",
      gacha_animation: true,
      sound_effects: true,
      theme_color: "#3b82f6",
      card_style: "glass"
    },
    social: {
      github: "",
      twitter: "",
      bilibili: ""
    }
  };
  const [preferences, setPreferences] = reactExports.useState(() => {
    try {
      const userPrefs = typeof user.preferences === "string" ? JSON.parse(user.preferences) : user.preferences || {};
      return {
        notifications: {
          ...defaultPreferences.notifications,
          ...userPrefs.notifications
        },
        privacy: {
          ...defaultPreferences.privacy,
          ...userPrefs.privacy
        },
        personalization: {
          ...defaultPreferences.personalization,
          ...userPrefs.personalization
        },
        social: {
          ...defaultPreferences.social,
          ...userPrefs.social
        }
      };
    } catch (e) {
      return defaultPreferences;
    }
  });
  const handleAvatarChange = (e) => {
    const file = e.target.files?.[0];
    if (file) {
      const reader = new FileReader();
      reader.onloadend = () => {
        setAvatarPreview(reader.result);
      };
      reader.readAsDataURL(file);
    }
  };
  const savePreferences = () => {
    const formData = new FormData();
    formData.append("intent", "update_preferences");
    formData.append("preferences", JSON.stringify(preferences));
    submit(formData, {
      method: "post"
    });
  };
  const tabs = [{
    id: "profile",
    label: "",
    icon: User,
    color: "text-blue-500"
  }, {
    id: "security",
    label: "",
    icon: Lock,
    color: "text-green-500"
  }, {
    id: "notifications",
    label: "",
    icon: Bell,
    color: "text-yellow-500"
  }, {
    id: "privacy",
    label: "",
    icon: Shield,
    color: "text-purple-500"
  }, {
    id: "personalization",
    label: "",
    icon: Palette,
    color: "text-pink-500"
  }, {
    id: "data",
    label: "",
    icon: Database,
    color: "text-red-500"
  }];
  const userData = {
    avatar: user.avatar_url || void 0,
    uid: `UID-${user.id.toString().padStart(6, "0")}`,
    level: stats.level,
    name: user.username,
    exp: stats.exp,
    maxExp: stats.maxExp
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ClientOnly, {
      children: () => /* @__PURE__ */ jsxRuntimeExports.jsx(StatusHUD, {
        user: userData,
        stats: {
          coins: stats.coins
        }
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsx(NavMenu, {}), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "absolute inset-0 flex items-center justify-center pl-24 pr-8 pt-24 pb-8 pointer-events-none",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "w-full h-full max-w-6xl pointer-events-auto flex gap-8",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "w-64 flex flex-col gap-2",
          children: tabs.map((tab) => /* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
            onClick: () => setActiveTab(tab.id),
            className: `
                                    flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all relative overflow-hidden
                                    ${activeTab === tab.id ? "bg-white text-slate-900 shadow-lg shadow-white/10" : "text-white/60 hover:text-white hover:bg-white/10"}
                                `,
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(tab.icon, {
              size: 18,
              className: activeTab === tab.id ? "text-slate-900" : tab.color
            }), tab.label]
          }, tab.id))
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "flex-1 bg-black/40 backdrop-blur-xl border border-white/10 rounded-3xl p-8 overflow-y-auto custom-scrollbar",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
            mode: "wait",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
              initial: {
                opacity: 0,
                x: 20
              },
              animate: {
                opacity: 1,
                x: 0
              },
              exit: {
                opacity: 0,
                x: -20
              },
              transition: {
                duration: 0.2
              },
              children: [actionData?.message && /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
                initial: {
                  opacity: 0,
                  height: 0
                },
                animate: {
                  opacity: 1,
                  height: "auto"
                },
                className: `mb-6 p-4 rounded-xl text-sm font-bold flex items-center gap-2 ${actionData.success ? "bg-green-500/20 text-green-400 border border-green-500/30" : "bg-red-500/20 text-red-400 border border-red-500/30"}`,
                children: [actionData.success ? /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, {
                  size: 16
                }) : /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, {
                  size: 16
                }), actionData.message]
              }), activeTab === "profile" && /* @__PURE__ */ jsxRuntimeExports.jsxs(Form, {
                method: "post",
                className: "space-y-8",
                encType: "multipart/form-data",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                  type: "hidden",
                  name: "intent",
                  value: "update_profile"
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "flex items-center gap-6",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "w-24 h-24 rounded-full overflow-hidden border-2 border-white/20 bg-black/40",
                    children: avatarPreview ? /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                      src: avatarPreview,
                      alt: "Avatar",
                      className: "w-full h-full object-cover",
                      width: 100
                    }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "w-full h-full flex items-center justify-center text-4xl",
                      children: ""
                    })
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                      className: "px-4 py-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-xl text-sm font-bold text-white cursor-pointer transition-colors inline-block",
                      children: ["", /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "file",
                        name: "avatar_file",
                        className: "hidden",
                        accept: "image/*",
                        onChange: handleAvatarChange
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                      className: "text-white/40 text-xs mt-2",
                      children: " JPG, PNG, GIF"
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                    type: "hidden",
                    name: "avatar_url",
                    value: avatarPreview || ""
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "grid grid-cols-1 md:grid-cols-2 gap-6",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                      className: "text-sm font-bold text-white/80",
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                      type: "text",
                      name: "username",
                      defaultValue: user.username,
                      className: "w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 text-white focus:border-white/40 outline-none transition-colors"
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                      className: "text-sm font-bold text-white/80",
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                      name: "bio",
                      defaultValue: user.bio || "",
                      placeholder: "...",
                      className: "w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 text-white focus:border-white/40 outline-none transition-colors"
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "space-y-4 pt-6 border-t border-white/10",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                    className: "text-lg font-bold text-white",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "grid grid-cols-1 md:grid-cols-3 gap-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "space-y-2",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                        className: "text-xs font-bold text-white/60 flex items-center gap-1",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Github, {
                          size: 12
                        }), " GitHub"]
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "text",
                        value: preferences.social?.github || "",
                        onChange: (e) => setPreferences({
                          ...preferences,
                          social: {
                            ...preferences.social,
                            github: e.target.value
                          }
                        }),
                        className: "w-full px-3 py-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm focus:border-white/40 outline-none"
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "space-y-2",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                        className: "text-xs font-bold text-white/60 flex items-center gap-1",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Twitter, {
                          size: 12
                        }), " Twitter"]
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "text",
                        value: preferences.social?.twitter || "",
                        onChange: (e) => setPreferences({
                          ...preferences,
                          social: {
                            ...preferences.social,
                            twitter: e.target.value
                          }
                        }),
                        className: "w-full px-3 py-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm focus:border-white/40 outline-none"
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "space-y-2",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                        className: "text-xs font-bold text-white/60 flex items-center gap-1",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(MonitorPlay, {
                          size: 12
                        }), " Bilibili"]
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "text",
                        value: preferences.social?.bilibili || "",
                        onChange: (e) => setPreferences({
                          ...preferences,
                          social: {
                            ...preferences.social,
                            bilibili: e.target.value
                          }
                        }),
                        className: "w-full px-3 py-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm focus:border-white/40 outline-none"
                      })]
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "flex justify-end pt-4",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(SaveButton, {
                    onClick: () => savePreferences(),
                    isSubmitting,
                    label: ""
                  })
                })]
              }), activeTab === "security" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-8",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(Form, {
                  method: "post",
                  className: "space-y-6",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                    type: "hidden",
                    name: "intent",
                    value: "change_password"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "grid grid-cols-1 md:grid-cols-3 gap-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "space-y-2",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "text-sm font-bold text-white/80",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "password",
                        name: "current_password",
                        required: true,
                        className: "w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 text-white focus:border-white/40 outline-none"
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "space-y-2",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "text-sm font-bold text-white/80",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "password",
                        name: "new_password",
                        required: true,
                        className: "w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 text-white focus:border-white/40 outline-none"
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "space-y-2",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "text-sm font-bold text-white/80",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "password",
                        name: "confirm_password",
                        required: true,
                        className: "w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 text-white focus:border-white/40 outline-none"
                      })]
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "flex justify-end",
                    children: /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                      type: "submit",
                      disabled: isSubmitting,
                      className: "px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-xl font-bold transition-colors disabled:opacity-50 text-sm border border-white/10",
                      children: ""
                    })
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "pt-6 border-t border-white/10 space-y-4",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-white flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(History, {
                      size: 20,
                      className: "text-orange-500"
                    }), ""]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "overflow-hidden rounded-xl border border-white/10",
                    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("table", {
                      className: "w-full text-sm text-left text-white/80",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("thead", {
                        className: "bg-white/5 text-white/60",
                        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", {
                          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                            className: "px-4 py-3 font-medium",
                            children: ""
                          }), /* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                            className: "px-4 py-3 font-medium",
                            children: ""
                          }), /* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                            className: "px-4 py-3 font-medium",
                            children: ""
                          }), /* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                            className: "px-4 py-3 font-medium",
                            children: ""
                          })]
                        })
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("tbody", {
                        className: "divide-y divide-white/5",
                        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", {
                          className: "bg-white/5",
                          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("td", {
                            className: "px-4 py-3 flex items-center gap-2",
                            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Smartphone, {
                              size: 14,
                              className: "text-white/40"
                            }), "Chrome / Windows"]
                          }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                            className: "px-4 py-3 text-white/60",
                            children: "Shanghai, CN"
                          }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                            className: "px-4 py-3 text-white/60",
                            children: ""
                          }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                            className: "px-4 py-3",
                            children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                              className: "px-2 py-0.5 rounded-full bg-green-500/20 text-green-400 text-xs font-bold",
                              children: ""
                            })
                          })]
                        })
                      })]
                    })
                  })]
                })]
              }), activeTab === "notifications" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ToggleItem, {
                  label: "",
                  desc: "",
                  checked: preferences.notifications.email_reply,
                  onChange: (v2) => setPreferences({
                    ...preferences,
                    notifications: {
                      ...preferences.notifications,
                      email_reply: v2
                    }
                  })
                }), /* @__PURE__ */ jsxRuntimeExports.jsx(ToggleItem, {
                  label: "",
                  desc: "",
                  checked: preferences.notifications.web_reply,
                  onChange: (v2) => setPreferences({
                    ...preferences,
                    notifications: {
                      ...preferences.notifications,
                      web_reply: v2
                    }
                  })
                }), /* @__PURE__ */ jsxRuntimeExports.jsx(ToggleItem, {
                  label: "",
                  desc: "",
                  checked: preferences.notifications.article_update,
                  onChange: (v2) => setPreferences({
                    ...preferences,
                    notifications: {
                      ...preferences.notifications,
                      article_update: v2
                    }
                  })
                }), /* @__PURE__ */ jsxRuntimeExports.jsx(ToggleItem, {
                  label: "",
                  desc: "",
                  checked: preferences.notifications.system_msg,
                  onChange: (v2) => setPreferences({
                    ...preferences,
                    notifications: {
                      ...preferences.notifications,
                      system_msg: v2
                    }
                  })
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "flex justify-end pt-4",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(SaveButton, {
                    onClick: savePreferences,
                    isSubmitting
                  })
                })]
              }), activeTab === "privacy" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "flex items-center justify-between p-4 rounded-xl bg-black/20 border border-white/5",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "font-bold text-white",
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "text-xs text-white/50",
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("select", {
                    value: preferences.privacy.profile_visibility,
                    onChange: (e) => setPreferences({
                      ...preferences,
                      privacy: {
                        ...preferences.privacy,
                        profile_visibility: e.target.value
                      }
                    }),
                    className: "bg-black/40 border border-white/10 rounded-lg px-3 py-1.5 text-sm text-white outline-none focus:border-white/40",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                      value: "public",
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                      value: "user_only",
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                      value: "private",
                      children: ""
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsx(ToggleItem, {
                  label: "",
                  desc: "",
                  checked: preferences.privacy.show_game_stats,
                  onChange: (v2) => setPreferences({
                    ...preferences,
                    privacy: {
                      ...preferences.privacy,
                      show_game_stats: v2
                    }
                  })
                }), /* @__PURE__ */ jsxRuntimeExports.jsx(ToggleItem, {
                  label: "",
                  desc: "",
                  checked: preferences.privacy.show_online_status,
                  onChange: (v2) => setPreferences({
                    ...preferences,
                    privacy: {
                      ...preferences.privacy,
                      show_online_status: v2
                    }
                  })
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "flex justify-end pt-4",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(SaveButton, {
                    onClick: savePreferences,
                    isSubmitting
                  })
                })]
              }), activeTab === "personalization" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "flex items-center justify-between p-4 rounded-xl bg-black/20 border border-white/5",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "font-bold text-white",
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "text-xs text-white/50",
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx(ColorPicker, {
                    colors: ["#3b82f6", "#ec4899", "#8b5cf6", "#10b981", "#f59e0b", "#ef4444"],
                    selectedColor: preferences.personalization.theme_color || "#3b82f6",
                    onChange: (color2) => setPreferences({
                      ...preferences,
                      personalization: {
                        ...preferences.personalization,
                        theme_color: color2
                      }
                    })
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "flex items-center justify-between p-4 rounded-xl bg-black/20 border border-white/5",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex items-center gap-3",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "p-2 rounded-lg bg-white/10 text-white",
                      children: preferences.personalization.code_theme === "github-dark" ? /* @__PURE__ */ jsxRuntimeExports.jsx(Moon, {
                        size: 18
                      }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Sun, {
                        size: 18
                      })
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "font-bold text-white",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-xs text-white/50",
                        children: ""
                      })]
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx(ThemeToggle, {})]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "grid grid-cols-1 md:grid-cols-2 gap-4",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ToggleItem, {
                    label: "",
                    desc: "",
                    icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Gamepad2, {
                      size: 18
                    }),
                    checked: preferences.personalization.gacha_animation,
                    onChange: (v2) => setPreferences({
                      ...preferences,
                      personalization: {
                        ...preferences.personalization,
                        gacha_animation: v2
                      }
                    })
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx(ToggleItem, {
                    label: "",
                    desc: "",
                    icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Volume2, {
                      size: 18
                    }),
                    checked: preferences.personalization.sound_effects,
                    onChange: (v2) => setPreferences({
                      ...preferences,
                      personalization: {
                        ...preferences.personalization,
                        sound_effects: v2
                      }
                    })
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "flex justify-end pt-4",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(SaveButton, {
                    onClick: savePreferences,
                    isSubmitting
                  })
                })]
              }), activeTab === "data" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-4",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
                  className: "w-full flex items-center justify-between p-4 rounded-xl bg-black/20 hover:bg-white/5 transition-colors group text-left border border-white/5",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex items-center gap-3",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "p-2 rounded-lg bg-green-500/20 text-green-400",
                      children: /* @__PURE__ */ jsxRuntimeExports.jsx(Download, {
                        size: 18
                      })
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "font-bold text-white",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-xs text-white/50",
                        children: " JSON "
                      })]
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronRight, {
                    size: 16,
                    className: "text-white/40 group-hover:translate-x-1 transition-transform"
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
                  className: "w-full flex items-center justify-between p-4 rounded-xl bg-red-500/10 hover:bg-red-500/20 transition-colors group text-left border border-red-500/20",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex items-center gap-3",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "p-2 rounded-lg bg-red-500/20 text-red-400",
                      children: /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, {
                        size: 18
                      })
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "font-bold text-red-400",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-xs text-red-400/70",
                        children: ""
                      })]
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronRight, {
                    size: 16,
                    className: "text-red-400 group-hover:translate-x-1 transition-transform"
                  })]
                })]
              })]
            }, activeTab)
          })
        })]
      })
    })]
  });
});
function ToggleItem({
  label,
  desc,
  checked,
  onChange,
  icon
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "flex items-center justify-between p-4 rounded-xl bg-black/20 border border-white/5 hover:bg-white/5 transition-colors",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "flex items-center gap-3",
      children: [icon && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "p-2 rounded-lg bg-white/10 text-white/80",
        children: icon
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "font-bold text-white",
          children: label
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "text-xs text-white/50",
          children: desc
        })]
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
      type: "button",
      onClick: () => onChange(!checked),
      className: `relative w-11 h-6 rounded-full transition-colors ${checked ? "bg-green-500" : "bg-white/20"}`,
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        className: "absolute top-1 left-1 w-4 h-4 rounded-full shadow-sm bg-white",
        animate: {
          x: checked ? 20 : 0
        },
        transition: {
          type: "spring",
          stiffness: 500,
          damping: 30
        }
      })
    })]
  });
}
function SaveButton({
  onClick,
  isSubmitting,
  label = ""
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
    type: "button",
    onClick,
    disabled: isSubmitting,
    className: "flex items-center gap-2 px-6 py-2 bg-white text-slate-900 rounded-xl font-bold shadow-lg shadow-white/10 hover:bg-slate-200 transition-all disabled:opacity-50",
    children: [isSubmitting ? /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, {
      className: "animate-spin",
      size: 18
    }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Save, {
      size: 18
    }), label]
  });
}
const ErrorBoundary4 = withErrorBoundaryProps(function ErrorBoundary5({
  error
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    className: "min-h-screen bg-slate-900 flex items-center justify-center text-white",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "text-center p-8 bg-red-900/20 border border-red-500/50 rounded-2xl max-w-md",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
        className: "text-2xl font-bold mb-4 text-red-500",
        children: "SYSTEM ERROR"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-white/80 mb-4",
        children: ""
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "bg-black/50 p-4 rounded text-left text-xs font-mono text-red-300 overflow-auto max-h-32 mb-6",
        children: error instanceof Error ? error.message : "Unknown Error"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("a", {
        href: "/user/dashboard",
        className: "px-6 py-2 bg-white text-slate-900 rounded-full font-bold hover:bg-slate-200 transition-colors",
        children: ""
      })]
    })
  });
});
const route21 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ErrorBoundary: ErrorBoundary4,
  action: action$q,
  default: settings,
  loader: loader$q
}, Symbol.toStringTag, { value: "Module" }));
var server = {};
var canPromise;
var hasRequiredCanPromise;
function requireCanPromise() {
  if (hasRequiredCanPromise) return canPromise;
  hasRequiredCanPromise = 1;
  canPromise = function() {
    return typeof Promise === "function" && Promise.prototype && Promise.prototype.then;
  };
  return canPromise;
}
var qrcode = {};
var utils$1 = {};
var hasRequiredUtils$1;
function requireUtils$1() {
  if (hasRequiredUtils$1) return utils$1;
  hasRequiredUtils$1 = 1;
  let toSJISFunction;
  const CODEWORDS_COUNT = [
    0,
    // Not used
    26,
    44,
    70,
    100,
    134,
    172,
    196,
    242,
    292,
    346,
    404,
    466,
    532,
    581,
    655,
    733,
    815,
    901,
    991,
    1085,
    1156,
    1258,
    1364,
    1474,
    1588,
    1706,
    1828,
    1921,
    2051,
    2185,
    2323,
    2465,
    2611,
    2761,
    2876,
    3034,
    3196,
    3362,
    3532,
    3706
  ];
  utils$1.getSymbolSize = function getSymbolSize(version2) {
    if (!version2) throw new Error('"version" cannot be null or undefined');
    if (version2 < 1 || version2 > 40) throw new Error('"version" should be in range from 1 to 40');
    return version2 * 4 + 17;
  };
  utils$1.getSymbolTotalCodewords = function getSymbolTotalCodewords(version2) {
    return CODEWORDS_COUNT[version2];
  };
  utils$1.getBCHDigit = function(data) {
    let digit = 0;
    while (data !== 0) {
      digit++;
      data >>>= 1;
    }
    return digit;
  };
  utils$1.setToSJISFunction = function setToSJISFunction(f) {
    if (typeof f !== "function") {
      throw new Error('"toSJISFunc" is not a valid function.');
    }
    toSJISFunction = f;
  };
  utils$1.isKanjiModeEnabled = function() {
    return typeof toSJISFunction !== "undefined";
  };
  utils$1.toSJIS = function toSJIS(kanji) {
    return toSJISFunction(kanji);
  };
  return utils$1;
}
var errorCorrectionLevel = {};
var hasRequiredErrorCorrectionLevel;
function requireErrorCorrectionLevel() {
  if (hasRequiredErrorCorrectionLevel) return errorCorrectionLevel;
  hasRequiredErrorCorrectionLevel = 1;
  (function(exports$1) {
    exports$1.L = { bit: 1 };
    exports$1.M = { bit: 0 };
    exports$1.Q = { bit: 3 };
    exports$1.H = { bit: 2 };
    function fromString(string) {
      if (typeof string !== "string") {
        throw new Error("Param is not a string");
      }
      const lcStr = string.toLowerCase();
      switch (lcStr) {
        case "l":
        case "low":
          return exports$1.L;
        case "m":
        case "medium":
          return exports$1.M;
        case "q":
        case "quartile":
          return exports$1.Q;
        case "h":
        case "high":
          return exports$1.H;
        default:
          throw new Error("Unknown EC Level: " + string);
      }
    }
    exports$1.isValid = function isValid(level) {
      return level && typeof level.bit !== "undefined" && level.bit >= 0 && level.bit < 4;
    };
    exports$1.from = function from(value, defaultValue) {
      if (exports$1.isValid(value)) {
        return value;
      }
      try {
        return fromString(value);
      } catch (e) {
        return defaultValue;
      }
    };
  })(errorCorrectionLevel);
  return errorCorrectionLevel;
}
var bitBuffer;
var hasRequiredBitBuffer;
function requireBitBuffer() {
  if (hasRequiredBitBuffer) return bitBuffer;
  hasRequiredBitBuffer = 1;
  function BitBuffer() {
    this.buffer = [];
    this.length = 0;
  }
  BitBuffer.prototype = {
    get: function(index2) {
      const bufIndex = Math.floor(index2 / 8);
      return (this.buffer[bufIndex] >>> 7 - index2 % 8 & 1) === 1;
    },
    put: function(num, length) {
      for (let i = 0; i < length; i++) {
        this.putBit((num >>> length - i - 1 & 1) === 1);
      }
    },
    getLengthInBits: function() {
      return this.length;
    },
    putBit: function(bit) {
      const bufIndex = Math.floor(this.length / 8);
      if (this.buffer.length <= bufIndex) {
        this.buffer.push(0);
      }
      if (bit) {
        this.buffer[bufIndex] |= 128 >>> this.length % 8;
      }
      this.length++;
    }
  };
  bitBuffer = BitBuffer;
  return bitBuffer;
}
var bitMatrix;
var hasRequiredBitMatrix;
function requireBitMatrix() {
  if (hasRequiredBitMatrix) return bitMatrix;
  hasRequiredBitMatrix = 1;
  function BitMatrix(size) {
    if (!size || size < 1) {
      throw new Error("BitMatrix size must be defined and greater than 0");
    }
    this.size = size;
    this.data = new Uint8Array(size * size);
    this.reservedBit = new Uint8Array(size * size);
  }
  BitMatrix.prototype.set = function(row, col, value, reserved) {
    const index2 = row * this.size + col;
    this.data[index2] = value;
    if (reserved) this.reservedBit[index2] = true;
  };
  BitMatrix.prototype.get = function(row, col) {
    return this.data[row * this.size + col];
  };
  BitMatrix.prototype.xor = function(row, col, value) {
    this.data[row * this.size + col] ^= value;
  };
  BitMatrix.prototype.isReserved = function(row, col) {
    return this.reservedBit[row * this.size + col];
  };
  bitMatrix = BitMatrix;
  return bitMatrix;
}
var alignmentPattern = {};
var hasRequiredAlignmentPattern;
function requireAlignmentPattern() {
  if (hasRequiredAlignmentPattern) return alignmentPattern;
  hasRequiredAlignmentPattern = 1;
  (function(exports$1) {
    const getSymbolSize = requireUtils$1().getSymbolSize;
    exports$1.getRowColCoords = function getRowColCoords(version2) {
      if (version2 === 1) return [];
      const posCount = Math.floor(version2 / 7) + 2;
      const size = getSymbolSize(version2);
      const intervals = size === 145 ? 26 : Math.ceil((size - 13) / (2 * posCount - 2)) * 2;
      const positions = [size - 7];
      for (let i = 1; i < posCount - 1; i++) {
        positions[i] = positions[i - 1] - intervals;
      }
      positions.push(6);
      return positions.reverse();
    };
    exports$1.getPositions = function getPositions(version2) {
      const coords = [];
      const pos = exports$1.getRowColCoords(version2);
      const posLength = pos.length;
      for (let i = 0; i < posLength; i++) {
        for (let j2 = 0; j2 < posLength; j2++) {
          if (i === 0 && j2 === 0 || // top-left
          i === 0 && j2 === posLength - 1 || // bottom-left
          i === posLength - 1 && j2 === 0) {
            continue;
          }
          coords.push([pos[i], pos[j2]]);
        }
      }
      return coords;
    };
  })(alignmentPattern);
  return alignmentPattern;
}
var finderPattern = {};
var hasRequiredFinderPattern;
function requireFinderPattern() {
  if (hasRequiredFinderPattern) return finderPattern;
  hasRequiredFinderPattern = 1;
  const getSymbolSize = requireUtils$1().getSymbolSize;
  const FINDER_PATTERN_SIZE = 7;
  finderPattern.getPositions = function getPositions(version2) {
    const size = getSymbolSize(version2);
    return [
      // top-left
      [0, 0],
      // top-right
      [size - FINDER_PATTERN_SIZE, 0],
      // bottom-left
      [0, size - FINDER_PATTERN_SIZE]
    ];
  };
  return finderPattern;
}
var maskPattern = {};
var hasRequiredMaskPattern;
function requireMaskPattern() {
  if (hasRequiredMaskPattern) return maskPattern;
  hasRequiredMaskPattern = 1;
  (function(exports$1) {
    exports$1.Patterns = {
      PATTERN000: 0,
      PATTERN001: 1,
      PATTERN010: 2,
      PATTERN011: 3,
      PATTERN100: 4,
      PATTERN101: 5,
      PATTERN110: 6,
      PATTERN111: 7
    };
    const PenaltyScores = {
      N1: 3,
      N2: 3,
      N3: 40,
      N4: 10
    };
    exports$1.isValid = function isValid(mask) {
      return mask != null && mask !== "" && !isNaN(mask) && mask >= 0 && mask <= 7;
    };
    exports$1.from = function from(value) {
      return exports$1.isValid(value) ? parseInt(value, 10) : void 0;
    };
    exports$1.getPenaltyN1 = function getPenaltyN1(data) {
      const size = data.size;
      let points = 0;
      let sameCountCol = 0;
      let sameCountRow = 0;
      let lastCol = null;
      let lastRow = null;
      for (let row = 0; row < size; row++) {
        sameCountCol = sameCountRow = 0;
        lastCol = lastRow = null;
        for (let col = 0; col < size; col++) {
          let module = data.get(row, col);
          if (module === lastCol) {
            sameCountCol++;
          } else {
            if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5);
            lastCol = module;
            sameCountCol = 1;
          }
          module = data.get(col, row);
          if (module === lastRow) {
            sameCountRow++;
          } else {
            if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5);
            lastRow = module;
            sameCountRow = 1;
          }
        }
        if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5);
        if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5);
      }
      return points;
    };
    exports$1.getPenaltyN2 = function getPenaltyN2(data) {
      const size = data.size;
      let points = 0;
      for (let row = 0; row < size - 1; row++) {
        for (let col = 0; col < size - 1; col++) {
          const last = data.get(row, col) + data.get(row, col + 1) + data.get(row + 1, col) + data.get(row + 1, col + 1);
          if (last === 4 || last === 0) points++;
        }
      }
      return points * PenaltyScores.N2;
    };
    exports$1.getPenaltyN3 = function getPenaltyN3(data) {
      const size = data.size;
      let points = 0;
      let bitsCol = 0;
      let bitsRow = 0;
      for (let row = 0; row < size; row++) {
        bitsCol = bitsRow = 0;
        for (let col = 0; col < size; col++) {
          bitsCol = bitsCol << 1 & 2047 | data.get(row, col);
          if (col >= 10 && (bitsCol === 1488 || bitsCol === 93)) points++;
          bitsRow = bitsRow << 1 & 2047 | data.get(col, row);
          if (col >= 10 && (bitsRow === 1488 || bitsRow === 93)) points++;
        }
      }
      return points * PenaltyScores.N3;
    };
    exports$1.getPenaltyN4 = function getPenaltyN4(data) {
      let darkCount = 0;
      const modulesCount = data.data.length;
      for (let i = 0; i < modulesCount; i++) darkCount += data.data[i];
      const k2 = Math.abs(Math.ceil(darkCount * 100 / modulesCount / 5) - 10);
      return k2 * PenaltyScores.N4;
    };
    function getMaskAt(maskPattern2, i, j2) {
      switch (maskPattern2) {
        case exports$1.Patterns.PATTERN000:
          return (i + j2) % 2 === 0;
        case exports$1.Patterns.PATTERN001:
          return i % 2 === 0;
        case exports$1.Patterns.PATTERN010:
          return j2 % 3 === 0;
        case exports$1.Patterns.PATTERN011:
          return (i + j2) % 3 === 0;
        case exports$1.Patterns.PATTERN100:
          return (Math.floor(i / 2) + Math.floor(j2 / 3)) % 2 === 0;
        case exports$1.Patterns.PATTERN101:
          return i * j2 % 2 + i * j2 % 3 === 0;
        case exports$1.Patterns.PATTERN110:
          return (i * j2 % 2 + i * j2 % 3) % 2 === 0;
        case exports$1.Patterns.PATTERN111:
          return (i * j2 % 3 + (i + j2) % 2) % 2 === 0;
        default:
          throw new Error("bad maskPattern:" + maskPattern2);
      }
    }
    exports$1.applyMask = function applyMask(pattern2, data) {
      const size = data.size;
      for (let col = 0; col < size; col++) {
        for (let row = 0; row < size; row++) {
          if (data.isReserved(row, col)) continue;
          data.xor(row, col, getMaskAt(pattern2, row, col));
        }
      }
    };
    exports$1.getBestMask = function getBestMask(data, setupFormatFunc) {
      const numPatterns = Object.keys(exports$1.Patterns).length;
      let bestPattern = 0;
      let lowerPenalty = Infinity;
      for (let p = 0; p < numPatterns; p++) {
        setupFormatFunc(p);
        exports$1.applyMask(p, data);
        const penalty = exports$1.getPenaltyN1(data) + exports$1.getPenaltyN2(data) + exports$1.getPenaltyN3(data) + exports$1.getPenaltyN4(data);
        exports$1.applyMask(p, data);
        if (penalty < lowerPenalty) {
          lowerPenalty = penalty;
          bestPattern = p;
        }
      }
      return bestPattern;
    };
  })(maskPattern);
  return maskPattern;
}
var errorCorrectionCode = {};
var hasRequiredErrorCorrectionCode;
function requireErrorCorrectionCode() {
  if (hasRequiredErrorCorrectionCode) return errorCorrectionCode;
  hasRequiredErrorCorrectionCode = 1;
  const ECLevel = requireErrorCorrectionLevel();
  const EC_BLOCKS_TABLE = [
    // L  M  Q  H
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    2,
    2,
    1,
    2,
    2,
    4,
    1,
    2,
    4,
    4,
    2,
    4,
    4,
    4,
    2,
    4,
    6,
    5,
    2,
    4,
    6,
    6,
    2,
    5,
    8,
    8,
    4,
    5,
    8,
    8,
    4,
    5,
    8,
    11,
    4,
    8,
    10,
    11,
    4,
    9,
    12,
    16,
    4,
    9,
    16,
    16,
    6,
    10,
    12,
    18,
    6,
    10,
    17,
    16,
    6,
    11,
    16,
    19,
    6,
    13,
    18,
    21,
    7,
    14,
    21,
    25,
    8,
    16,
    20,
    25,
    8,
    17,
    23,
    25,
    9,
    17,
    23,
    34,
    9,
    18,
    25,
    30,
    10,
    20,
    27,
    32,
    12,
    21,
    29,
    35,
    12,
    23,
    34,
    37,
    12,
    25,
    34,
    40,
    13,
    26,
    35,
    42,
    14,
    28,
    38,
    45,
    15,
    29,
    40,
    48,
    16,
    31,
    43,
    51,
    17,
    33,
    45,
    54,
    18,
    35,
    48,
    57,
    19,
    37,
    51,
    60,
    19,
    38,
    53,
    63,
    20,
    40,
    56,
    66,
    21,
    43,
    59,
    70,
    22,
    45,
    62,
    74,
    24,
    47,
    65,
    77,
    25,
    49,
    68,
    81
  ];
  const EC_CODEWORDS_TABLE = [
    // L  M  Q  H
    7,
    10,
    13,
    17,
    10,
    16,
    22,
    28,
    15,
    26,
    36,
    44,
    20,
    36,
    52,
    64,
    26,
    48,
    72,
    88,
    36,
    64,
    96,
    112,
    40,
    72,
    108,
    130,
    48,
    88,
    132,
    156,
    60,
    110,
    160,
    192,
    72,
    130,
    192,
    224,
    80,
    150,
    224,
    264,
    96,
    176,
    260,
    308,
    104,
    198,
    288,
    352,
    120,
    216,
    320,
    384,
    132,
    240,
    360,
    432,
    144,
    280,
    408,
    480,
    168,
    308,
    448,
    532,
    180,
    338,
    504,
    588,
    196,
    364,
    546,
    650,
    224,
    416,
    600,
    700,
    224,
    442,
    644,
    750,
    252,
    476,
    690,
    816,
    270,
    504,
    750,
    900,
    300,
    560,
    810,
    960,
    312,
    588,
    870,
    1050,
    336,
    644,
    952,
    1110,
    360,
    700,
    1020,
    1200,
    390,
    728,
    1050,
    1260,
    420,
    784,
    1140,
    1350,
    450,
    812,
    1200,
    1440,
    480,
    868,
    1290,
    1530,
    510,
    924,
    1350,
    1620,
    540,
    980,
    1440,
    1710,
    570,
    1036,
    1530,
    1800,
    570,
    1064,
    1590,
    1890,
    600,
    1120,
    1680,
    1980,
    630,
    1204,
    1770,
    2100,
    660,
    1260,
    1860,
    2220,
    720,
    1316,
    1950,
    2310,
    750,
    1372,
    2040,
    2430
  ];
  errorCorrectionCode.getBlocksCount = function getBlocksCount(version2, errorCorrectionLevel2) {
    switch (errorCorrectionLevel2) {
      case ECLevel.L:
        return EC_BLOCKS_TABLE[(version2 - 1) * 4 + 0];
      case ECLevel.M:
        return EC_BLOCKS_TABLE[(version2 - 1) * 4 + 1];
      case ECLevel.Q:
        return EC_BLOCKS_TABLE[(version2 - 1) * 4 + 2];
      case ECLevel.H:
        return EC_BLOCKS_TABLE[(version2 - 1) * 4 + 3];
      default:
        return void 0;
    }
  };
  errorCorrectionCode.getTotalCodewordsCount = function getTotalCodewordsCount(version2, errorCorrectionLevel2) {
    switch (errorCorrectionLevel2) {
      case ECLevel.L:
        return EC_CODEWORDS_TABLE[(version2 - 1) * 4 + 0];
      case ECLevel.M:
        return EC_CODEWORDS_TABLE[(version2 - 1) * 4 + 1];
      case ECLevel.Q:
        return EC_CODEWORDS_TABLE[(version2 - 1) * 4 + 2];
      case ECLevel.H:
        return EC_CODEWORDS_TABLE[(version2 - 1) * 4 + 3];
      default:
        return void 0;
    }
  };
  return errorCorrectionCode;
}
var polynomial = {};
var galoisField = {};
var hasRequiredGaloisField;
function requireGaloisField() {
  if (hasRequiredGaloisField) return galoisField;
  hasRequiredGaloisField = 1;
  const EXP_TABLE = new Uint8Array(512);
  const LOG_TABLE = new Uint8Array(256);
  (function initTables() {
    let x2 = 1;
    for (let i = 0; i < 255; i++) {
      EXP_TABLE[i] = x2;
      LOG_TABLE[x2] = i;
      x2 <<= 1;
      if (x2 & 256) {
        x2 ^= 285;
      }
    }
    for (let i = 255; i < 512; i++) {
      EXP_TABLE[i] = EXP_TABLE[i - 255];
    }
  })();
  galoisField.log = function log(n) {
    if (n < 1) throw new Error("log(" + n + ")");
    return LOG_TABLE[n];
  };
  galoisField.exp = function exp(n) {
    return EXP_TABLE[n];
  };
  galoisField.mul = function mul(x2, y2) {
    if (x2 === 0 || y2 === 0) return 0;
    return EXP_TABLE[LOG_TABLE[x2] + LOG_TABLE[y2]];
  };
  return galoisField;
}
var hasRequiredPolynomial;
function requirePolynomial() {
  if (hasRequiredPolynomial) return polynomial;
  hasRequiredPolynomial = 1;
  (function(exports$1) {
    const GF = requireGaloisField();
    exports$1.mul = function mul(p1, p2) {
      const coeff = new Uint8Array(p1.length + p2.length - 1);
      for (let i = 0; i < p1.length; i++) {
        for (let j2 = 0; j2 < p2.length; j2++) {
          coeff[i + j2] ^= GF.mul(p1[i], p2[j2]);
        }
      }
      return coeff;
    };
    exports$1.mod = function mod(divident, divisor) {
      let result = new Uint8Array(divident);
      while (result.length - divisor.length >= 0) {
        const coeff = result[0];
        for (let i = 0; i < divisor.length; i++) {
          result[i] ^= GF.mul(divisor[i], coeff);
        }
        let offset = 0;
        while (offset < result.length && result[offset] === 0) offset++;
        result = result.slice(offset);
      }
      return result;
    };
    exports$1.generateECPolynomial = function generateECPolynomial(degree) {
      let poly = new Uint8Array([1]);
      for (let i = 0; i < degree; i++) {
        poly = exports$1.mul(poly, new Uint8Array([1, GF.exp(i)]));
      }
      return poly;
    };
  })(polynomial);
  return polynomial;
}
var reedSolomonEncoder;
var hasRequiredReedSolomonEncoder;
function requireReedSolomonEncoder() {
  if (hasRequiredReedSolomonEncoder) return reedSolomonEncoder;
  hasRequiredReedSolomonEncoder = 1;
  const Polynomial = requirePolynomial();
  function ReedSolomonEncoder(degree) {
    this.genPoly = void 0;
    this.degree = degree;
    if (this.degree) this.initialize(this.degree);
  }
  ReedSolomonEncoder.prototype.initialize = function initialize(degree) {
    this.degree = degree;
    this.genPoly = Polynomial.generateECPolynomial(this.degree);
  };
  ReedSolomonEncoder.prototype.encode = function encode(data) {
    if (!this.genPoly) {
      throw new Error("Encoder not initialized");
    }
    const paddedData = new Uint8Array(data.length + this.degree);
    paddedData.set(data);
    const remainder = Polynomial.mod(paddedData, this.genPoly);
    const start = this.degree - remainder.length;
    if (start > 0) {
      const buff = new Uint8Array(this.degree);
      buff.set(remainder, start);
      return buff;
    }
    return remainder;
  };
  reedSolomonEncoder = ReedSolomonEncoder;
  return reedSolomonEncoder;
}
var version = {};
var mode = {};
var versionCheck = {};
var hasRequiredVersionCheck;
function requireVersionCheck() {
  if (hasRequiredVersionCheck) return versionCheck;
  hasRequiredVersionCheck = 1;
  versionCheck.isValid = function isValid(version2) {
    return !isNaN(version2) && version2 >= 1 && version2 <= 40;
  };
  return versionCheck;
}
var regex = {};
var hasRequiredRegex;
function requireRegex() {
  if (hasRequiredRegex) return regex;
  hasRequiredRegex = 1;
  const numeric = "[0-9]+";
  const alphanumeric = "[A-Z $%*+\\-./:]+";
  let kanji = "(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";
  kanji = kanji.replace(/u/g, "\\u");
  const byte = "(?:(?![A-Z0-9 $%*+\\-./:]|" + kanji + ")(?:.|[\r\n]))+";
  regex.KANJI = new RegExp(kanji, "g");
  regex.BYTE_KANJI = new RegExp("[^A-Z0-9 $%*+\\-./:]+", "g");
  regex.BYTE = new RegExp(byte, "g");
  regex.NUMERIC = new RegExp(numeric, "g");
  regex.ALPHANUMERIC = new RegExp(alphanumeric, "g");
  const TEST_KANJI = new RegExp("^" + kanji + "$");
  const TEST_NUMERIC = new RegExp("^" + numeric + "$");
  const TEST_ALPHANUMERIC = new RegExp("^[A-Z0-9 $%*+\\-./:]+$");
  regex.testKanji = function testKanji(str) {
    return TEST_KANJI.test(str);
  };
  regex.testNumeric = function testNumeric(str) {
    return TEST_NUMERIC.test(str);
  };
  regex.testAlphanumeric = function testAlphanumeric(str) {
    return TEST_ALPHANUMERIC.test(str);
  };
  return regex;
}
var hasRequiredMode;
function requireMode() {
  if (hasRequiredMode) return mode;
  hasRequiredMode = 1;
  (function(exports$1) {
    const VersionCheck = requireVersionCheck();
    const Regex = requireRegex();
    exports$1.NUMERIC = {
      id: "Numeric",
      bit: 1 << 0,
      ccBits: [10, 12, 14]
    };
    exports$1.ALPHANUMERIC = {
      id: "Alphanumeric",
      bit: 1 << 1,
      ccBits: [9, 11, 13]
    };
    exports$1.BYTE = {
      id: "Byte",
      bit: 1 << 2,
      ccBits: [8, 16, 16]
    };
    exports$1.KANJI = {
      id: "Kanji",
      bit: 1 << 3,
      ccBits: [8, 10, 12]
    };
    exports$1.MIXED = {
      bit: -1
    };
    exports$1.getCharCountIndicator = function getCharCountIndicator(mode2, version2) {
      if (!mode2.ccBits) throw new Error("Invalid mode: " + mode2);
      if (!VersionCheck.isValid(version2)) {
        throw new Error("Invalid version: " + version2);
      }
      if (version2 >= 1 && version2 < 10) return mode2.ccBits[0];
      else if (version2 < 27) return mode2.ccBits[1];
      return mode2.ccBits[2];
    };
    exports$1.getBestModeForData = function getBestModeForData(dataStr) {
      if (Regex.testNumeric(dataStr)) return exports$1.NUMERIC;
      else if (Regex.testAlphanumeric(dataStr)) return exports$1.ALPHANUMERIC;
      else if (Regex.testKanji(dataStr)) return exports$1.KANJI;
      else return exports$1.BYTE;
    };
    exports$1.toString = function toString(mode2) {
      if (mode2 && mode2.id) return mode2.id;
      throw new Error("Invalid mode");
    };
    exports$1.isValid = function isValid(mode2) {
      return mode2 && mode2.bit && mode2.ccBits;
    };
    function fromString(string) {
      if (typeof string !== "string") {
        throw new Error("Param is not a string");
      }
      const lcStr = string.toLowerCase();
      switch (lcStr) {
        case "numeric":
          return exports$1.NUMERIC;
        case "alphanumeric":
          return exports$1.ALPHANUMERIC;
        case "kanji":
          return exports$1.KANJI;
        case "byte":
          return exports$1.BYTE;
        default:
          throw new Error("Unknown mode: " + string);
      }
    }
    exports$1.from = function from(value, defaultValue) {
      if (exports$1.isValid(value)) {
        return value;
      }
      try {
        return fromString(value);
      } catch (e) {
        return defaultValue;
      }
    };
  })(mode);
  return mode;
}
var hasRequiredVersion;
function requireVersion() {
  if (hasRequiredVersion) return version;
  hasRequiredVersion = 1;
  (function(exports$1) {
    const Utils = requireUtils$1();
    const ECCode = requireErrorCorrectionCode();
    const ECLevel = requireErrorCorrectionLevel();
    const Mode = requireMode();
    const VersionCheck = requireVersionCheck();
    const G18 = 1 << 12 | 1 << 11 | 1 << 10 | 1 << 9 | 1 << 8 | 1 << 5 | 1 << 2 | 1 << 0;
    const G18_BCH = Utils.getBCHDigit(G18);
    function getBestVersionForDataLength(mode2, length, errorCorrectionLevel2) {
      for (let currentVersion = 1; currentVersion <= 40; currentVersion++) {
        if (length <= exports$1.getCapacity(currentVersion, errorCorrectionLevel2, mode2)) {
          return currentVersion;
        }
      }
      return void 0;
    }
    function getReservedBitsCount(mode2, version2) {
      return Mode.getCharCountIndicator(mode2, version2) + 4;
    }
    function getTotalBitsFromDataArray(segments2, version2) {
      let totalBits = 0;
      segments2.forEach(function(data) {
        const reservedBits = getReservedBitsCount(data.mode, version2);
        totalBits += reservedBits + data.getBitsLength();
      });
      return totalBits;
    }
    function getBestVersionForMixedData(segments2, errorCorrectionLevel2) {
      for (let currentVersion = 1; currentVersion <= 40; currentVersion++) {
        const length = getTotalBitsFromDataArray(segments2, currentVersion);
        if (length <= exports$1.getCapacity(currentVersion, errorCorrectionLevel2, Mode.MIXED)) {
          return currentVersion;
        }
      }
      return void 0;
    }
    exports$1.from = function from(value, defaultValue) {
      if (VersionCheck.isValid(value)) {
        return parseInt(value, 10);
      }
      return defaultValue;
    };
    exports$1.getCapacity = function getCapacity(version2, errorCorrectionLevel2, mode2) {
      if (!VersionCheck.isValid(version2)) {
        throw new Error("Invalid QR Code version");
      }
      if (typeof mode2 === "undefined") mode2 = Mode.BYTE;
      const totalCodewords = Utils.getSymbolTotalCodewords(version2);
      const ecTotalCodewords = ECCode.getTotalCodewordsCount(version2, errorCorrectionLevel2);
      const dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8;
      if (mode2 === Mode.MIXED) return dataTotalCodewordsBits;
      const usableBits = dataTotalCodewordsBits - getReservedBitsCount(mode2, version2);
      switch (mode2) {
        case Mode.NUMERIC:
          return Math.floor(usableBits / 10 * 3);
        case Mode.ALPHANUMERIC:
          return Math.floor(usableBits / 11 * 2);
        case Mode.KANJI:
          return Math.floor(usableBits / 13);
        case Mode.BYTE:
        default:
          return Math.floor(usableBits / 8);
      }
    };
    exports$1.getBestVersionForData = function getBestVersionForData(data, errorCorrectionLevel2) {
      let seg;
      const ecl = ECLevel.from(errorCorrectionLevel2, ECLevel.M);
      if (Array.isArray(data)) {
        if (data.length > 1) {
          return getBestVersionForMixedData(data, ecl);
        }
        if (data.length === 0) {
          return 1;
        }
        seg = data[0];
      } else {
        seg = data;
      }
      return getBestVersionForDataLength(seg.mode, seg.getLength(), ecl);
    };
    exports$1.getEncodedBits = function getEncodedBits(version2) {
      if (!VersionCheck.isValid(version2) || version2 < 7) {
        throw new Error("Invalid QR Code version");
      }
      let d2 = version2 << 12;
      while (Utils.getBCHDigit(d2) - G18_BCH >= 0) {
        d2 ^= G18 << Utils.getBCHDigit(d2) - G18_BCH;
      }
      return version2 << 12 | d2;
    };
  })(version);
  return version;
}
var formatInfo = {};
var hasRequiredFormatInfo;
function requireFormatInfo() {
  if (hasRequiredFormatInfo) return formatInfo;
  hasRequiredFormatInfo = 1;
  const Utils = requireUtils$1();
  const G15 = 1 << 10 | 1 << 8 | 1 << 5 | 1 << 4 | 1 << 2 | 1 << 1 | 1 << 0;
  const G15_MASK = 1 << 14 | 1 << 12 | 1 << 10 | 1 << 4 | 1 << 1;
  const G15_BCH = Utils.getBCHDigit(G15);
  formatInfo.getEncodedBits = function getEncodedBits(errorCorrectionLevel2, mask) {
    const data = errorCorrectionLevel2.bit << 3 | mask;
    let d2 = data << 10;
    while (Utils.getBCHDigit(d2) - G15_BCH >= 0) {
      d2 ^= G15 << Utils.getBCHDigit(d2) - G15_BCH;
    }
    return (data << 10 | d2) ^ G15_MASK;
  };
  return formatInfo;
}
var segments = {};
var numericData;
var hasRequiredNumericData;
function requireNumericData() {
  if (hasRequiredNumericData) return numericData;
  hasRequiredNumericData = 1;
  const Mode = requireMode();
  function NumericData(data) {
    this.mode = Mode.NUMERIC;
    this.data = data.toString();
  }
  NumericData.getBitsLength = function getBitsLength(length) {
    return 10 * Math.floor(length / 3) + (length % 3 ? length % 3 * 3 + 1 : 0);
  };
  NumericData.prototype.getLength = function getLength() {
    return this.data.length;
  };
  NumericData.prototype.getBitsLength = function getBitsLength() {
    return NumericData.getBitsLength(this.data.length);
  };
  NumericData.prototype.write = function write2(bitBuffer2) {
    let i, group, value;
    for (i = 0; i + 3 <= this.data.length; i += 3) {
      group = this.data.substr(i, 3);
      value = parseInt(group, 10);
      bitBuffer2.put(value, 10);
    }
    const remainingNum = this.data.length - i;
    if (remainingNum > 0) {
      group = this.data.substr(i);
      value = parseInt(group, 10);
      bitBuffer2.put(value, remainingNum * 3 + 1);
    }
  };
  numericData = NumericData;
  return numericData;
}
var alphanumericData;
var hasRequiredAlphanumericData;
function requireAlphanumericData() {
  if (hasRequiredAlphanumericData) return alphanumericData;
  hasRequiredAlphanumericData = 1;
  const Mode = requireMode();
  const ALPHA_NUM_CHARS = [
    "0",
    "1",
    "2",
    "3",
    "4",
    "5",
    "6",
    "7",
    "8",
    "9",
    "A",
    "B",
    "C",
    "D",
    "E",
    "F",
    "G",
    "H",
    "I",
    "J",
    "K",
    "L",
    "M",
    "N",
    "O",
    "P",
    "Q",
    "R",
    "S",
    "T",
    "U",
    "V",
    "W",
    "X",
    "Y",
    "Z",
    " ",
    "$",
    "%",
    "*",
    "+",
    "-",
    ".",
    "/",
    ":"
  ];
  function AlphanumericData(data) {
    this.mode = Mode.ALPHANUMERIC;
    this.data = data;
  }
  AlphanumericData.getBitsLength = function getBitsLength(length) {
    return 11 * Math.floor(length / 2) + 6 * (length % 2);
  };
  AlphanumericData.prototype.getLength = function getLength() {
    return this.data.length;
  };
  AlphanumericData.prototype.getBitsLength = function getBitsLength() {
    return AlphanumericData.getBitsLength(this.data.length);
  };
  AlphanumericData.prototype.write = function write2(bitBuffer2) {
    let i;
    for (i = 0; i + 2 <= this.data.length; i += 2) {
      let value = ALPHA_NUM_CHARS.indexOf(this.data[i]) * 45;
      value += ALPHA_NUM_CHARS.indexOf(this.data[i + 1]);
      bitBuffer2.put(value, 11);
    }
    if (this.data.length % 2) {
      bitBuffer2.put(ALPHA_NUM_CHARS.indexOf(this.data[i]), 6);
    }
  };
  alphanumericData = AlphanumericData;
  return alphanumericData;
}
var byteData;
var hasRequiredByteData;
function requireByteData() {
  if (hasRequiredByteData) return byteData;
  hasRequiredByteData = 1;
  const Mode = requireMode();
  function ByteData(data) {
    this.mode = Mode.BYTE;
    if (typeof data === "string") {
      this.data = new TextEncoder().encode(data);
    } else {
      this.data = new Uint8Array(data);
    }
  }
  ByteData.getBitsLength = function getBitsLength(length) {
    return length * 8;
  };
  ByteData.prototype.getLength = function getLength() {
    return this.data.length;
  };
  ByteData.prototype.getBitsLength = function getBitsLength() {
    return ByteData.getBitsLength(this.data.length);
  };
  ByteData.prototype.write = function(bitBuffer2) {
    for (let i = 0, l = this.data.length; i < l; i++) {
      bitBuffer2.put(this.data[i], 8);
    }
  };
  byteData = ByteData;
  return byteData;
}
var kanjiData;
var hasRequiredKanjiData;
function requireKanjiData() {
  if (hasRequiredKanjiData) return kanjiData;
  hasRequiredKanjiData = 1;
  const Mode = requireMode();
  const Utils = requireUtils$1();
  function KanjiData(data) {
    this.mode = Mode.KANJI;
    this.data = data;
  }
  KanjiData.getBitsLength = function getBitsLength(length) {
    return length * 13;
  };
  KanjiData.prototype.getLength = function getLength() {
    return this.data.length;
  };
  KanjiData.prototype.getBitsLength = function getBitsLength() {
    return KanjiData.getBitsLength(this.data.length);
  };
  KanjiData.prototype.write = function(bitBuffer2) {
    let i;
    for (i = 0; i < this.data.length; i++) {
      let value = Utils.toSJIS(this.data[i]);
      if (value >= 33088 && value <= 40956) {
        value -= 33088;
      } else if (value >= 57408 && value <= 60351) {
        value -= 49472;
      } else {
        throw new Error(
          "Invalid SJIS character: " + this.data[i] + "\nMake sure your charset is UTF-8"
        );
      }
      value = (value >>> 8 & 255) * 192 + (value & 255);
      bitBuffer2.put(value, 13);
    }
  };
  kanjiData = KanjiData;
  return kanjiData;
}
var dijkstra = { exports: {} };
var hasRequiredDijkstra;
function requireDijkstra() {
  if (hasRequiredDijkstra) return dijkstra.exports;
  hasRequiredDijkstra = 1;
  (function(module) {
    var dijkstra2 = {
      single_source_shortest_paths: function(graph, s, d2) {
        var predecessors = {};
        var costs = {};
        costs[s] = 0;
        var open2 = dijkstra2.PriorityQueue.make();
        open2.push(s, 0);
        var closest, u3, v2, cost_of_s_to_u, adjacent_nodes, cost_of_e, cost_of_s_to_u_plus_cost_of_e, cost_of_s_to_v, first_visit;
        while (!open2.empty()) {
          closest = open2.pop();
          u3 = closest.value;
          cost_of_s_to_u = closest.cost;
          adjacent_nodes = graph[u3] || {};
          for (v2 in adjacent_nodes) {
            if (adjacent_nodes.hasOwnProperty(v2)) {
              cost_of_e = adjacent_nodes[v2];
              cost_of_s_to_u_plus_cost_of_e = cost_of_s_to_u + cost_of_e;
              cost_of_s_to_v = costs[v2];
              first_visit = typeof costs[v2] === "undefined";
              if (first_visit || cost_of_s_to_v > cost_of_s_to_u_plus_cost_of_e) {
                costs[v2] = cost_of_s_to_u_plus_cost_of_e;
                open2.push(v2, cost_of_s_to_u_plus_cost_of_e);
                predecessors[v2] = u3;
              }
            }
          }
        }
        if (typeof d2 !== "undefined" && typeof costs[d2] === "undefined") {
          var msg = ["Could not find a path from ", s, " to ", d2, "."].join("");
          throw new Error(msg);
        }
        return predecessors;
      },
      extract_shortest_path_from_predecessor_list: function(predecessors, d2) {
        var nodes = [];
        var u3 = d2;
        while (u3) {
          nodes.push(u3);
          predecessors[u3];
          u3 = predecessors[u3];
        }
        nodes.reverse();
        return nodes;
      },
      find_path: function(graph, s, d2) {
        var predecessors = dijkstra2.single_source_shortest_paths(graph, s, d2);
        return dijkstra2.extract_shortest_path_from_predecessor_list(
          predecessors,
          d2
        );
      },
      /**
       * A very naive priority queue implementation.
       */
      PriorityQueue: {
        make: function(opts) {
          var T2 = dijkstra2.PriorityQueue, t = {}, key;
          opts = opts || {};
          for (key in T2) {
            if (T2.hasOwnProperty(key)) {
              t[key] = T2[key];
            }
          }
          t.queue = [];
          t.sorter = opts.sorter || T2.default_sorter;
          return t;
        },
        default_sorter: function(a, b2) {
          return a.cost - b2.cost;
        },
        /**
         * Add a new item to the queue and ensure the highest priority element
         * is at the front of the queue.
         */
        push: function(value, cost) {
          var item = { value, cost };
          this.queue.push(item);
          this.queue.sort(this.sorter);
        },
        /**
         * Return the highest priority element in the queue.
         */
        pop: function() {
          return this.queue.shift();
        },
        empty: function() {
          return this.queue.length === 0;
        }
      }
    };
    {
      module.exports = dijkstra2;
    }
  })(dijkstra);
  return dijkstra.exports;
}
var hasRequiredSegments;
function requireSegments() {
  if (hasRequiredSegments) return segments;
  hasRequiredSegments = 1;
  (function(exports$1) {
    const Mode = requireMode();
    const NumericData = requireNumericData();
    const AlphanumericData = requireAlphanumericData();
    const ByteData = requireByteData();
    const KanjiData = requireKanjiData();
    const Regex = requireRegex();
    const Utils = requireUtils$1();
    const dijkstra2 = requireDijkstra();
    function getStringByteLength(str) {
      return unescape(encodeURIComponent(str)).length;
    }
    function getSegments(regex2, mode2, str) {
      const segments2 = [];
      let result;
      while ((result = regex2.exec(str)) !== null) {
        segments2.push({
          data: result[0],
          index: result.index,
          mode: mode2,
          length: result[0].length
        });
      }
      return segments2;
    }
    function getSegmentsFromString(dataStr) {
      const numSegs = getSegments(Regex.NUMERIC, Mode.NUMERIC, dataStr);
      const alphaNumSegs = getSegments(Regex.ALPHANUMERIC, Mode.ALPHANUMERIC, dataStr);
      let byteSegs;
      let kanjiSegs;
      if (Utils.isKanjiModeEnabled()) {
        byteSegs = getSegments(Regex.BYTE, Mode.BYTE, dataStr);
        kanjiSegs = getSegments(Regex.KANJI, Mode.KANJI, dataStr);
      } else {
        byteSegs = getSegments(Regex.BYTE_KANJI, Mode.BYTE, dataStr);
        kanjiSegs = [];
      }
      const segs = numSegs.concat(alphaNumSegs, byteSegs, kanjiSegs);
      return segs.sort(function(s1, s2) {
        return s1.index - s2.index;
      }).map(function(obj) {
        return {
          data: obj.data,
          mode: obj.mode,
          length: obj.length
        };
      });
    }
    function getSegmentBitsLength(length, mode2) {
      switch (mode2) {
        case Mode.NUMERIC:
          return NumericData.getBitsLength(length);
        case Mode.ALPHANUMERIC:
          return AlphanumericData.getBitsLength(length);
        case Mode.KANJI:
          return KanjiData.getBitsLength(length);
        case Mode.BYTE:
          return ByteData.getBitsLength(length);
      }
    }
    function mergeSegments(segs) {
      return segs.reduce(function(acc, curr) {
        const prevSeg = acc.length - 1 >= 0 ? acc[acc.length - 1] : null;
        if (prevSeg && prevSeg.mode === curr.mode) {
          acc[acc.length - 1].data += curr.data;
          return acc;
        }
        acc.push(curr);
        return acc;
      }, []);
    }
    function buildNodes(segs) {
      const nodes = [];
      for (let i = 0; i < segs.length; i++) {
        const seg = segs[i];
        switch (seg.mode) {
          case Mode.NUMERIC:
            nodes.push([
              seg,
              { data: seg.data, mode: Mode.ALPHANUMERIC, length: seg.length },
              { data: seg.data, mode: Mode.BYTE, length: seg.length }
            ]);
            break;
          case Mode.ALPHANUMERIC:
            nodes.push([
              seg,
              { data: seg.data, mode: Mode.BYTE, length: seg.length }
            ]);
            break;
          case Mode.KANJI:
            nodes.push([
              seg,
              { data: seg.data, mode: Mode.BYTE, length: getStringByteLength(seg.data) }
            ]);
            break;
          case Mode.BYTE:
            nodes.push([
              { data: seg.data, mode: Mode.BYTE, length: getStringByteLength(seg.data) }
            ]);
        }
      }
      return nodes;
    }
    function buildGraph(nodes, version2) {
      const table = {};
      const graph = { start: {} };
      let prevNodeIds = ["start"];
      for (let i = 0; i < nodes.length; i++) {
        const nodeGroup = nodes[i];
        const currentNodeIds = [];
        for (let j2 = 0; j2 < nodeGroup.length; j2++) {
          const node = nodeGroup[j2];
          const key = "" + i + j2;
          currentNodeIds.push(key);
          table[key] = { node, lastCount: 0 };
          graph[key] = {};
          for (let n = 0; n < prevNodeIds.length; n++) {
            const prevNodeId = prevNodeIds[n];
            if (table[prevNodeId] && table[prevNodeId].node.mode === node.mode) {
              graph[prevNodeId][key] = getSegmentBitsLength(table[prevNodeId].lastCount + node.length, node.mode) - getSegmentBitsLength(table[prevNodeId].lastCount, node.mode);
              table[prevNodeId].lastCount += node.length;
            } else {
              if (table[prevNodeId]) table[prevNodeId].lastCount = node.length;
              graph[prevNodeId][key] = getSegmentBitsLength(node.length, node.mode) + 4 + Mode.getCharCountIndicator(node.mode, version2);
            }
          }
        }
        prevNodeIds = currentNodeIds;
      }
      for (let n = 0; n < prevNodeIds.length; n++) {
        graph[prevNodeIds[n]].end = 0;
      }
      return { map: graph, table };
    }
    function buildSingleSegment(data, modesHint) {
      let mode2;
      const bestMode = Mode.getBestModeForData(data);
      mode2 = Mode.from(modesHint, bestMode);
      if (mode2 !== Mode.BYTE && mode2.bit < bestMode.bit) {
        throw new Error('"' + data + '" cannot be encoded with mode ' + Mode.toString(mode2) + ".\n Suggested mode is: " + Mode.toString(bestMode));
      }
      if (mode2 === Mode.KANJI && !Utils.isKanjiModeEnabled()) {
        mode2 = Mode.BYTE;
      }
      switch (mode2) {
        case Mode.NUMERIC:
          return new NumericData(data);
        case Mode.ALPHANUMERIC:
          return new AlphanumericData(data);
        case Mode.KANJI:
          return new KanjiData(data);
        case Mode.BYTE:
          return new ByteData(data);
      }
    }
    exports$1.fromArray = function fromArray(array) {
      return array.reduce(function(acc, seg) {
        if (typeof seg === "string") {
          acc.push(buildSingleSegment(seg, null));
        } else if (seg.data) {
          acc.push(buildSingleSegment(seg.data, seg.mode));
        }
        return acc;
      }, []);
    };
    exports$1.fromString = function fromString(data, version2) {
      const segs = getSegmentsFromString(data, Utils.isKanjiModeEnabled());
      const nodes = buildNodes(segs);
      const graph = buildGraph(nodes, version2);
      const path = dijkstra2.find_path(graph.map, "start", "end");
      const optimizedSegs = [];
      for (let i = 1; i < path.length - 1; i++) {
        optimizedSegs.push(graph.table[path[i]].node);
      }
      return exports$1.fromArray(mergeSegments(optimizedSegs));
    };
    exports$1.rawSplit = function rawSplit(data) {
      return exports$1.fromArray(
        getSegmentsFromString(data, Utils.isKanjiModeEnabled())
      );
    };
  })(segments);
  return segments;
}
var hasRequiredQrcode;
function requireQrcode() {
  if (hasRequiredQrcode) return qrcode;
  hasRequiredQrcode = 1;
  const Utils = requireUtils$1();
  const ECLevel = requireErrorCorrectionLevel();
  const BitBuffer = requireBitBuffer();
  const BitMatrix = requireBitMatrix();
  const AlignmentPattern = requireAlignmentPattern();
  const FinderPattern = requireFinderPattern();
  const MaskPattern = requireMaskPattern();
  const ECCode = requireErrorCorrectionCode();
  const ReedSolomonEncoder = requireReedSolomonEncoder();
  const Version = requireVersion();
  const FormatInfo = requireFormatInfo();
  const Mode = requireMode();
  const Segments = requireSegments();
  function setupFinderPattern(matrix, version2) {
    const size = matrix.size;
    const pos = FinderPattern.getPositions(version2);
    for (let i = 0; i < pos.length; i++) {
      const row = pos[i][0];
      const col = pos[i][1];
      for (let r2 = -1; r2 <= 7; r2++) {
        if (row + r2 <= -1 || size <= row + r2) continue;
        for (let c = -1; c <= 7; c++) {
          if (col + c <= -1 || size <= col + c) continue;
          if (r2 >= 0 && r2 <= 6 && (c === 0 || c === 6) || c >= 0 && c <= 6 && (r2 === 0 || r2 === 6) || r2 >= 2 && r2 <= 4 && c >= 2 && c <= 4) {
            matrix.set(row + r2, col + c, true, true);
          } else {
            matrix.set(row + r2, col + c, false, true);
          }
        }
      }
    }
  }
  function setupTimingPattern(matrix) {
    const size = matrix.size;
    for (let r2 = 8; r2 < size - 8; r2++) {
      const value = r2 % 2 === 0;
      matrix.set(r2, 6, value, true);
      matrix.set(6, r2, value, true);
    }
  }
  function setupAlignmentPattern(matrix, version2) {
    const pos = AlignmentPattern.getPositions(version2);
    for (let i = 0; i < pos.length; i++) {
      const row = pos[i][0];
      const col = pos[i][1];
      for (let r2 = -2; r2 <= 2; r2++) {
        for (let c = -2; c <= 2; c++) {
          if (r2 === -2 || r2 === 2 || c === -2 || c === 2 || r2 === 0 && c === 0) {
            matrix.set(row + r2, col + c, true, true);
          } else {
            matrix.set(row + r2, col + c, false, true);
          }
        }
      }
    }
  }
  function setupVersionInfo(matrix, version2) {
    const size = matrix.size;
    const bits = Version.getEncodedBits(version2);
    let row, col, mod;
    for (let i = 0; i < 18; i++) {
      row = Math.floor(i / 3);
      col = i % 3 + size - 8 - 3;
      mod = (bits >> i & 1) === 1;
      matrix.set(row, col, mod, true);
      matrix.set(col, row, mod, true);
    }
  }
  function setupFormatInfo(matrix, errorCorrectionLevel2, maskPattern2) {
    const size = matrix.size;
    const bits = FormatInfo.getEncodedBits(errorCorrectionLevel2, maskPattern2);
    let i, mod;
    for (i = 0; i < 15; i++) {
      mod = (bits >> i & 1) === 1;
      if (i < 6) {
        matrix.set(i, 8, mod, true);
      } else if (i < 8) {
        matrix.set(i + 1, 8, mod, true);
      } else {
        matrix.set(size - 15 + i, 8, mod, true);
      }
      if (i < 8) {
        matrix.set(8, size - i - 1, mod, true);
      } else if (i < 9) {
        matrix.set(8, 15 - i - 1 + 1, mod, true);
      } else {
        matrix.set(8, 15 - i - 1, mod, true);
      }
    }
    matrix.set(size - 8, 8, 1, true);
  }
  function setupData(matrix, data) {
    const size = matrix.size;
    let inc = -1;
    let row = size - 1;
    let bitIndex = 7;
    let byteIndex = 0;
    for (let col = size - 1; col > 0; col -= 2) {
      if (col === 6) col--;
      while (true) {
        for (let c = 0; c < 2; c++) {
          if (!matrix.isReserved(row, col - c)) {
            let dark = false;
            if (byteIndex < data.length) {
              dark = (data[byteIndex] >>> bitIndex & 1) === 1;
            }
            matrix.set(row, col - c, dark);
            bitIndex--;
            if (bitIndex === -1) {
              byteIndex++;
              bitIndex = 7;
            }
          }
        }
        row += inc;
        if (row < 0 || size <= row) {
          row -= inc;
          inc = -inc;
          break;
        }
      }
    }
  }
  function createData(version2, errorCorrectionLevel2, segments2) {
    const buffer = new BitBuffer();
    segments2.forEach(function(data) {
      buffer.put(data.mode.bit, 4);
      buffer.put(data.getLength(), Mode.getCharCountIndicator(data.mode, version2));
      data.write(buffer);
    });
    const totalCodewords = Utils.getSymbolTotalCodewords(version2);
    const ecTotalCodewords = ECCode.getTotalCodewordsCount(version2, errorCorrectionLevel2);
    const dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8;
    if (buffer.getLengthInBits() + 4 <= dataTotalCodewordsBits) {
      buffer.put(0, 4);
    }
    while (buffer.getLengthInBits() % 8 !== 0) {
      buffer.putBit(0);
    }
    const remainingByte = (dataTotalCodewordsBits - buffer.getLengthInBits()) / 8;
    for (let i = 0; i < remainingByte; i++) {
      buffer.put(i % 2 ? 17 : 236, 8);
    }
    return createCodewords(buffer, version2, errorCorrectionLevel2);
  }
  function createCodewords(bitBuffer2, version2, errorCorrectionLevel2) {
    const totalCodewords = Utils.getSymbolTotalCodewords(version2);
    const ecTotalCodewords = ECCode.getTotalCodewordsCount(version2, errorCorrectionLevel2);
    const dataTotalCodewords = totalCodewords - ecTotalCodewords;
    const ecTotalBlocks = ECCode.getBlocksCount(version2, errorCorrectionLevel2);
    const blocksInGroup2 = totalCodewords % ecTotalBlocks;
    const blocksInGroup1 = ecTotalBlocks - blocksInGroup2;
    const totalCodewordsInGroup1 = Math.floor(totalCodewords / ecTotalBlocks);
    const dataCodewordsInGroup1 = Math.floor(dataTotalCodewords / ecTotalBlocks);
    const dataCodewordsInGroup2 = dataCodewordsInGroup1 + 1;
    const ecCount = totalCodewordsInGroup1 - dataCodewordsInGroup1;
    const rs = new ReedSolomonEncoder(ecCount);
    let offset = 0;
    const dcData = new Array(ecTotalBlocks);
    const ecData = new Array(ecTotalBlocks);
    let maxDataSize = 0;
    const buffer = new Uint8Array(bitBuffer2.buffer);
    for (let b2 = 0; b2 < ecTotalBlocks; b2++) {
      const dataSize = b2 < blocksInGroup1 ? dataCodewordsInGroup1 : dataCodewordsInGroup2;
      dcData[b2] = buffer.slice(offset, offset + dataSize);
      ecData[b2] = rs.encode(dcData[b2]);
      offset += dataSize;
      maxDataSize = Math.max(maxDataSize, dataSize);
    }
    const data = new Uint8Array(totalCodewords);
    let index2 = 0;
    let i, r2;
    for (i = 0; i < maxDataSize; i++) {
      for (r2 = 0; r2 < ecTotalBlocks; r2++) {
        if (i < dcData[r2].length) {
          data[index2++] = dcData[r2][i];
        }
      }
    }
    for (i = 0; i < ecCount; i++) {
      for (r2 = 0; r2 < ecTotalBlocks; r2++) {
        data[index2++] = ecData[r2][i];
      }
    }
    return data;
  }
  function createSymbol(data, version2, errorCorrectionLevel2, maskPattern2) {
    let segments2;
    if (Array.isArray(data)) {
      segments2 = Segments.fromArray(data);
    } else if (typeof data === "string") {
      let estimatedVersion = version2;
      if (!estimatedVersion) {
        const rawSegments = Segments.rawSplit(data);
        estimatedVersion = Version.getBestVersionForData(rawSegments, errorCorrectionLevel2);
      }
      segments2 = Segments.fromString(data, estimatedVersion || 40);
    } else {
      throw new Error("Invalid data");
    }
    const bestVersion = Version.getBestVersionForData(segments2, errorCorrectionLevel2);
    if (!bestVersion) {
      throw new Error("The amount of data is too big to be stored in a QR Code");
    }
    if (!version2) {
      version2 = bestVersion;
    } else if (version2 < bestVersion) {
      throw new Error(
        "\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: " + bestVersion + ".\n"
      );
    }
    const dataBits = createData(version2, errorCorrectionLevel2, segments2);
    const moduleCount = Utils.getSymbolSize(version2);
    const modules = new BitMatrix(moduleCount);
    setupFinderPattern(modules, version2);
    setupTimingPattern(modules);
    setupAlignmentPattern(modules, version2);
    setupFormatInfo(modules, errorCorrectionLevel2, 0);
    if (version2 >= 7) {
      setupVersionInfo(modules, version2);
    }
    setupData(modules, dataBits);
    if (isNaN(maskPattern2)) {
      maskPattern2 = MaskPattern.getBestMask(
        modules,
        setupFormatInfo.bind(null, modules, errorCorrectionLevel2)
      );
    }
    MaskPattern.applyMask(maskPattern2, modules);
    setupFormatInfo(modules, errorCorrectionLevel2, maskPattern2);
    return {
      modules,
      version: version2,
      errorCorrectionLevel: errorCorrectionLevel2,
      maskPattern: maskPattern2,
      segments: segments2
    };
  }
  qrcode.create = function create(data, options) {
    if (typeof data === "undefined" || data === "") {
      throw new Error("No input text");
    }
    let errorCorrectionLevel2 = ECLevel.M;
    let version2;
    let mask;
    if (typeof options !== "undefined") {
      errorCorrectionLevel2 = ECLevel.from(options.errorCorrectionLevel, ECLevel.M);
      version2 = Version.from(options.version);
      mask = MaskPattern.from(options.maskPattern);
      if (options.toSJISFunc) {
        Utils.setToSJISFunction(options.toSJISFunc);
      }
    }
    return createSymbol(data, version2, errorCorrectionLevel2, mask);
  };
  return qrcode;
}
var png$1 = {};
const access$1 = /* @__PURE__ */ notImplemented("fs.access");
const copyFile$1 = /* @__PURE__ */ notImplemented("fs.copyFile");
const cp$1 = /* @__PURE__ */ notImplemented("fs.cp");
const open$1 = /* @__PURE__ */ notImplemented("fs.open");
const opendir$1 = /* @__PURE__ */ notImplemented("fs.opendir");
const rename$1 = /* @__PURE__ */ notImplemented("fs.rename");
const truncate$1 = /* @__PURE__ */ notImplemented("fs.truncate");
const rm$1 = /* @__PURE__ */ notImplemented("fs.rm");
const rmdir$1 = /* @__PURE__ */ notImplemented("fs.rmdir");
const mkdir$1 = /* @__PURE__ */ notImplemented("fs.mkdir");
const readdir$1 = /* @__PURE__ */ notImplemented("fs.readdir");
const readlink$1 = /* @__PURE__ */ notImplemented("fs.readlink");
const symlink$1 = /* @__PURE__ */ notImplemented("fs.symlink");
const lstat$1 = /* @__PURE__ */ notImplemented("fs.lstat");
const stat$1 = /* @__PURE__ */ notImplemented("fs.stat");
const link$1 = /* @__PURE__ */ notImplemented("fs.link");
const unlink$1 = /* @__PURE__ */ notImplemented("fs.unlink");
const chmod$1 = /* @__PURE__ */ notImplemented("fs.chmod");
const lchmod$1 = /* @__PURE__ */ notImplemented("fs.lchmod");
const lchown$1 = /* @__PURE__ */ notImplemented("fs.lchown");
const chown$1 = /* @__PURE__ */ notImplemented("fs.chown");
const utimes$1 = /* @__PURE__ */ notImplemented("fs.utimes");
const lutimes$1 = /* @__PURE__ */ notImplemented("fs.lutimes");
const realpath$1 = /* @__PURE__ */ notImplemented("fs.realpath");
const mkdtemp$1 = /* @__PURE__ */ notImplemented("fs.mkdtemp");
const writeFile$1 = /* @__PURE__ */ notImplemented("fs.writeFile");
const appendFile$1 = /* @__PURE__ */ notImplemented("fs.appendFile");
const readFile$1 = /* @__PURE__ */ notImplemented("fs.readFile");
const watch$1 = /* @__PURE__ */ notImplemented("fs.watch");
const statfs$1 = /* @__PURE__ */ notImplemented("fs.statfs");
const glob$1 = /* @__PURE__ */ notImplemented("fs.glob");
const UV_FS_SYMLINK_DIR = 1;
const UV_FS_SYMLINK_JUNCTION = 2;
const O_RDONLY = 0;
const O_WRONLY = 1;
const O_RDWR = 2;
const UV_DIRENT_UNKNOWN = 0;
const UV_DIRENT_FILE = 1;
const UV_DIRENT_DIR = 2;
const UV_DIRENT_LINK = 3;
const UV_DIRENT_FIFO = 4;
const UV_DIRENT_SOCKET = 5;
const UV_DIRENT_CHAR = 6;
const UV_DIRENT_BLOCK = 7;
const EXTENSIONLESS_FORMAT_JAVASCRIPT = 0;
const EXTENSIONLESS_FORMAT_WASM = 1;
const S_IFMT = 61440;
const S_IFREG = 32768;
const S_IFDIR = 16384;
const S_IFCHR = 8192;
const S_IFBLK = 24576;
const S_IFIFO = 4096;
const S_IFLNK = 40960;
const S_IFSOCK = 49152;
const O_CREAT = 64;
const O_EXCL = 128;
const UV_FS_O_FILEMAP = 0;
const O_NOCTTY = 256;
const O_TRUNC = 512;
const O_APPEND = 1024;
const O_DIRECTORY = 65536;
const O_NOATIME = 262144;
const O_NOFOLLOW = 131072;
const O_SYNC = 1052672;
const O_DSYNC = 4096;
const O_DIRECT = 16384;
const O_NONBLOCK = 2048;
const S_IRWXU = 448;
const S_IRUSR = 256;
const S_IWUSR = 128;
const S_IXUSR = 64;
const S_IRWXG = 56;
const S_IRGRP = 32;
const S_IWGRP = 16;
const S_IXGRP = 8;
const S_IRWXO = 7;
const S_IROTH = 4;
const S_IWOTH = 2;
const S_IXOTH = 1;
const F_OK = 0;
const R_OK = 4;
const W_OK = 2;
const X_OK = 1;
const UV_FS_COPYFILE_EXCL = 1;
const COPYFILE_EXCL = 1;
const UV_FS_COPYFILE_FICLONE = 2;
const COPYFILE_FICLONE = 2;
const UV_FS_COPYFILE_FICLONE_FORCE = 4;
const COPYFILE_FICLONE_FORCE = 4;
const constants$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  COPYFILE_EXCL,
  COPYFILE_FICLONE,
  COPYFILE_FICLONE_FORCE,
  EXTENSIONLESS_FORMAT_JAVASCRIPT,
  EXTENSIONLESS_FORMAT_WASM,
  F_OK,
  O_APPEND,
  O_CREAT,
  O_DIRECT,
  O_DIRECTORY,
  O_DSYNC,
  O_EXCL,
  O_NOATIME,
  O_NOCTTY,
  O_NOFOLLOW,
  O_NONBLOCK,
  O_RDONLY,
  O_RDWR,
  O_SYNC,
  O_TRUNC,
  O_WRONLY,
  R_OK,
  S_IFBLK,
  S_IFCHR,
  S_IFDIR,
  S_IFIFO,
  S_IFLNK,
  S_IFMT,
  S_IFREG,
  S_IFSOCK,
  S_IRGRP,
  S_IROTH,
  S_IRUSR,
  S_IRWXG,
  S_IRWXO,
  S_IRWXU,
  S_IWGRP,
  S_IWOTH,
  S_IWUSR,
  S_IXGRP,
  S_IXOTH,
  S_IXUSR,
  UV_DIRENT_BLOCK,
  UV_DIRENT_CHAR,
  UV_DIRENT_DIR,
  UV_DIRENT_FIFO,
  UV_DIRENT_FILE,
  UV_DIRENT_LINK,
  UV_DIRENT_SOCKET,
  UV_DIRENT_UNKNOWN,
  UV_FS_COPYFILE_EXCL,
  UV_FS_COPYFILE_FICLONE,
  UV_FS_COPYFILE_FICLONE_FORCE,
  UV_FS_O_FILEMAP,
  UV_FS_SYMLINK_DIR,
  UV_FS_SYMLINK_JUNCTION,
  W_OK,
  X_OK
}, Symbol.toStringTag, { value: "Module" }));
const promises = {
  constants: constants$1,
  access: access$1,
  appendFile: appendFile$1,
  chmod: chmod$1,
  chown: chown$1,
  copyFile: copyFile$1,
  cp: cp$1,
  glob: glob$1,
  lchmod: lchmod$1,
  lchown: lchown$1,
  link: link$1,
  lstat: lstat$1,
  lutimes: lutimes$1,
  mkdir: mkdir$1,
  mkdtemp: mkdtemp$1,
  open: open$1,
  opendir: opendir$1,
  readFile: readFile$1,
  readdir: readdir$1,
  readlink: readlink$1,
  realpath: realpath$1,
  rename: rename$1,
  rm: rm$1,
  rmdir: rmdir$1,
  stat: stat$1,
  statfs: statfs$1,
  symlink: symlink$1,
  truncate: truncate$1,
  unlink: unlink$1,
  utimes: utimes$1,
  watch: watch$1,
  writeFile: writeFile$1
};
const Dir = /* @__PURE__ */ notImplementedClass("fs.Dir");
const Dirent = /* @__PURE__ */ notImplementedClass("fs.Dirent");
const Stats = /* @__PURE__ */ notImplementedClass("fs.Stats");
const ReadStream = /* @__PURE__ */ notImplementedClass("fs.ReadStream");
const WriteStream = /* @__PURE__ */ notImplementedClass("fs.WriteStream");
const FileReadStream = ReadStream;
const FileWriteStream = WriteStream;
function callbackify(fn) {
  const fnc = function(...args) {
    const cb = args.pop();
    fn().catch((error) => cb(error)).then((val) => cb(void 0, val));
  };
  fnc.__promisify__ = fn;
  fnc.native = fnc;
  return fnc;
}
const access = callbackify(access$1);
const appendFile = callbackify(appendFile$1);
const chown = callbackify(chown$1);
const chmod = callbackify(chmod$1);
const copyFile = callbackify(copyFile$1);
const cp = callbackify(cp$1);
const lchown = callbackify(lchown$1);
const lchmod = callbackify(lchmod$1);
const link = callbackify(link$1);
const lstat = callbackify(lstat$1);
const lutimes = callbackify(lutimes$1);
const mkdir = callbackify(mkdir$1);
const mkdtemp = callbackify(mkdtemp$1);
const realpath = callbackify(realpath$1);
const open = callbackify(open$1);
const opendir = callbackify(opendir$1);
const readdir = callbackify(readdir$1);
const readFile = callbackify(readFile$1);
const readlink = callbackify(readlink$1);
const rename = callbackify(rename$1);
const rm = callbackify(rm$1);
const rmdir = callbackify(rmdir$1);
const stat = callbackify(stat$1);
const symlink = callbackify(symlink$1);
const truncate = callbackify(truncate$1);
const unlink = callbackify(unlink$1);
const utimes = callbackify(utimes$1);
const writeFile = callbackify(writeFile$1);
const statfs = callbackify(statfs$1);
const close = /* @__PURE__ */ notImplementedAsync("fs.close");
const createReadStream = /* @__PURE__ */ notImplementedAsync("fs.createReadStream");
const createWriteStream = /* @__PURE__ */ notImplementedAsync("fs.createWriteStream");
const exists = /* @__PURE__ */ notImplementedAsync("fs.exists");
const fchown = /* @__PURE__ */ notImplementedAsync("fs.fchown");
const fchmod = /* @__PURE__ */ notImplementedAsync("fs.fchmod");
const fdatasync = /* @__PURE__ */ notImplementedAsync("fs.fdatasync");
const fstat = /* @__PURE__ */ notImplementedAsync("fs.fstat");
const fsync = /* @__PURE__ */ notImplementedAsync("fs.fsync");
const ftruncate = /* @__PURE__ */ notImplementedAsync("fs.ftruncate");
const futimes = /* @__PURE__ */ notImplementedAsync("fs.futimes");
const lstatSync = /* @__PURE__ */ notImplementedAsync("fs.lstatSync");
const read = /* @__PURE__ */ notImplementedAsync("fs.read");
const readv = /* @__PURE__ */ notImplementedAsync("fs.readv");
const realpathSync = /* @__PURE__ */ notImplementedAsync("fs.realpathSync");
const statSync = /* @__PURE__ */ notImplementedAsync("fs.statSync");
const unwatchFile = /* @__PURE__ */ notImplementedAsync("fs.unwatchFile");
const watch = /* @__PURE__ */ notImplementedAsync("fs.watch");
const watchFile = /* @__PURE__ */ notImplementedAsync("fs.watchFile");
const write = /* @__PURE__ */ notImplementedAsync("fs.write");
const writev = /* @__PURE__ */ notImplementedAsync("fs.writev");
const _toUnixTimestamp = /* @__PURE__ */ notImplementedAsync("fs._toUnixTimestamp");
const openAsBlob = /* @__PURE__ */ notImplementedAsync("fs.openAsBlob");
const glob = /* @__PURE__ */ notImplementedAsync("fs.glob");
const appendFileSync = /* @__PURE__ */ notImplemented("fs.appendFileSync");
const accessSync = /* @__PURE__ */ notImplemented("fs.accessSync");
const chownSync = /* @__PURE__ */ notImplemented("fs.chownSync");
const chmodSync = /* @__PURE__ */ notImplemented("fs.chmodSync");
const closeSync = /* @__PURE__ */ notImplemented("fs.closeSync");
const copyFileSync = /* @__PURE__ */ notImplemented("fs.copyFileSync");
const cpSync = /* @__PURE__ */ notImplemented("fs.cpSync");
const existsSync = () => false;
const fchownSync = /* @__PURE__ */ notImplemented("fs.fchownSync");
const fchmodSync = /* @__PURE__ */ notImplemented("fs.fchmodSync");
const fdatasyncSync = /* @__PURE__ */ notImplemented("fs.fdatasyncSync");
const fstatSync = /* @__PURE__ */ notImplemented("fs.fstatSync");
const fsyncSync = /* @__PURE__ */ notImplemented("fs.fsyncSync");
const ftruncateSync = /* @__PURE__ */ notImplemented("fs.ftruncateSync");
const futimesSync = /* @__PURE__ */ notImplemented("fs.futimesSync");
const lchownSync = /* @__PURE__ */ notImplemented("fs.lchownSync");
const lchmodSync = /* @__PURE__ */ notImplemented("fs.lchmodSync");
const linkSync = /* @__PURE__ */ notImplemented("fs.linkSync");
const lutimesSync = /* @__PURE__ */ notImplemented("fs.lutimesSync");
const mkdirSync = /* @__PURE__ */ notImplemented("fs.mkdirSync");
const mkdtempSync = /* @__PURE__ */ notImplemented("fs.mkdtempSync");
const openSync = /* @__PURE__ */ notImplemented("fs.openSync");
const opendirSync = /* @__PURE__ */ notImplemented("fs.opendirSync");
const readdirSync = /* @__PURE__ */ notImplemented("fs.readdirSync");
const readSync = /* @__PURE__ */ notImplemented("fs.readSync");
const readvSync = /* @__PURE__ */ notImplemented("fs.readvSync");
const readFileSync = /* @__PURE__ */ notImplemented("fs.readFileSync");
const readlinkSync = /* @__PURE__ */ notImplemented("fs.readlinkSync");
const renameSync = /* @__PURE__ */ notImplemented("fs.renameSync");
const rmSync = /* @__PURE__ */ notImplemented("fs.rmSync");
const rmdirSync = /* @__PURE__ */ notImplemented("fs.rmdirSync");
const symlinkSync = /* @__PURE__ */ notImplemented("fs.symlinkSync");
const truncateSync = /* @__PURE__ */ notImplemented("fs.truncateSync");
const unlinkSync = /* @__PURE__ */ notImplemented("fs.unlinkSync");
const utimesSync = /* @__PURE__ */ notImplemented("fs.utimesSync");
const writeFileSync = /* @__PURE__ */ notImplemented("fs.writeFileSync");
const writeSync = /* @__PURE__ */ notImplemented("fs.writeSync");
const writevSync = /* @__PURE__ */ notImplemented("fs.writevSync");
const statfsSync = /* @__PURE__ */ notImplemented("fs.statfsSync");
const globSync = /* @__PURE__ */ notImplemented("fs.globSync");
const fs = {
  F_OK,
  R_OK,
  W_OK,
  X_OK,
  constants: constants$1,
  promises,
  Dir,
  Dirent,
  FileReadStream,
  FileWriteStream,
  ReadStream,
  Stats,
  WriteStream,
  _toUnixTimestamp,
  access,
  accessSync,
  appendFile,
  appendFileSync,
  chmod,
  chmodSync,
  chown,
  chownSync,
  close,
  closeSync,
  copyFile,
  copyFileSync,
  cp,
  cpSync,
  createReadStream,
  createWriteStream,
  exists,
  existsSync,
  fchmod,
  fchmodSync,
  fchown,
  fchownSync,
  fdatasync,
  fdatasyncSync,
  fstat,
  fstatSync,
  fsync,
  fsyncSync,
  ftruncate,
  ftruncateSync,
  futimes,
  futimesSync,
  glob,
  lchmod,
  globSync,
  lchmodSync,
  lchown,
  lchownSync,
  link,
  linkSync,
  lstat,
  lstatSync,
  lutimes,
  lutimesSync,
  mkdir,
  mkdirSync,
  mkdtemp,
  mkdtempSync,
  open,
  openAsBlob,
  openSync,
  opendir,
  opendirSync,
  read,
  readFile,
  readFileSync,
  readSync,
  readdir,
  readdirSync,
  readlink,
  readlinkSync,
  readv,
  readvSync,
  realpath,
  realpathSync,
  rename,
  renameSync,
  rm,
  rmSync,
  rmdir,
  rmdirSync,
  stat,
  statSync,
  statfs,
  statfsSync,
  symlink,
  symlinkSync,
  truncate,
  truncateSync,
  unlink,
  unlinkSync,
  unwatchFile,
  utimes,
  utimesSync,
  watch,
  watchFile,
  write,
  writeFile,
  writeFileSync,
  writeSync,
  writev,
  writevSync
};
const fs$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Dir,
  Dirent,
  F_OK,
  FileReadStream,
  FileWriteStream,
  R_OK,
  ReadStream,
  Stats,
  W_OK,
  WriteStream,
  X_OK,
  _toUnixTimestamp,
  access,
  accessSync,
  appendFile,
  appendFileSync,
  chmod,
  chmodSync,
  chown,
  chownSync,
  close,
  closeSync,
  constants: constants$1,
  copyFile,
  copyFileSync,
  cp,
  cpSync,
  createReadStream,
  createWriteStream,
  default: fs,
  exists,
  existsSync,
  fchmod,
  fchmodSync,
  fchown,
  fchownSync,
  fdatasync,
  fdatasyncSync,
  fstat,
  fstatSync,
  fsync,
  fsyncSync,
  ftruncate,
  ftruncateSync,
  futimes,
  futimesSync,
  glob,
  globSync,
  lchmod,
  lchmodSync,
  lchown,
  lchownSync,
  link,
  linkSync,
  lstat,
  lstatSync,
  lutimes,
  lutimesSync,
  mkdir,
  mkdirSync,
  mkdtemp,
  mkdtempSync,
  open,
  openAsBlob,
  openSync,
  opendir,
  opendirSync,
  promises,
  read,
  readFile,
  readFileSync,
  readSync,
  readdir,
  readdirSync,
  readlink,
  readlinkSync,
  readv,
  readvSync,
  realpath,
  realpathSync,
  rename,
  renameSync,
  rm,
  rmSync,
  rmdir,
  rmdirSync,
  stat,
  statSync,
  statfs,
  statfsSync,
  symlink,
  symlinkSync,
  truncate,
  truncateSync,
  unlink,
  unlinkSync,
  unwatchFile,
  utimes,
  utimesSync,
  watch,
  watchFile,
  write,
  writeFile,
  writeFileSync,
  writeSync,
  writev,
  writevSync
}, Symbol.toStringTag, { value: "Module" }));
const require$$1 = /* @__PURE__ */ getAugmentedNamespace(fs$1);
var png = {};
var parserAsync = { exports: {} };
var chunkstream = { exports: {} };
var hasRequiredChunkstream;
function requireChunkstream() {
  if (hasRequiredChunkstream) return chunkstream.exports;
  hasRequiredChunkstream = 1;
  let util = require$$0;
  let Stream = require$$1$1;
  let ChunkStream = chunkstream.exports = function() {
    Stream.call(this);
    this._buffers = [];
    this._buffered = 0;
    this._reads = [];
    this._paused = false;
    this._encoding = "utf8";
    this.writable = true;
  };
  util.inherits(ChunkStream, Stream);
  ChunkStream.prototype.read = function(length, callback) {
    this._reads.push({
      length: Math.abs(length),
      // if length < 0 then at most this length
      allowLess: length < 0,
      func: callback
    });
    process.nextTick(
      function() {
        this._process();
        if (this._paused && this._reads && this._reads.length > 0) {
          this._paused = false;
          this.emit("drain");
        }
      }.bind(this)
    );
  };
  ChunkStream.prototype.write = function(data, encoding) {
    if (!this.writable) {
      this.emit("error", new Error("Stream not writable"));
      return false;
    }
    let dataBuffer;
    if (Buffer.isBuffer(data)) {
      dataBuffer = data;
    } else {
      dataBuffer = Buffer.from(data, encoding || this._encoding);
    }
    this._buffers.push(dataBuffer);
    this._buffered += dataBuffer.length;
    this._process();
    if (this._reads && this._reads.length === 0) {
      this._paused = true;
    }
    return this.writable && !this._paused;
  };
  ChunkStream.prototype.end = function(data, encoding) {
    if (data) {
      this.write(data, encoding);
    }
    this.writable = false;
    if (!this._buffers) {
      return;
    }
    if (this._buffers.length === 0) {
      this._end();
    } else {
      this._buffers.push(null);
      this._process();
    }
  };
  ChunkStream.prototype.destroySoon = ChunkStream.prototype.end;
  ChunkStream.prototype._end = function() {
    if (this._reads.length > 0) {
      this.emit("error", new Error("Unexpected end of input"));
    }
    this.destroy();
  };
  ChunkStream.prototype.destroy = function() {
    if (!this._buffers) {
      return;
    }
    this.writable = false;
    this._reads = null;
    this._buffers = null;
    this.emit("close");
  };
  ChunkStream.prototype._processReadAllowingLess = function(read2) {
    this._reads.shift();
    let smallerBuf = this._buffers[0];
    if (smallerBuf.length > read2.length) {
      this._buffered -= read2.length;
      this._buffers[0] = smallerBuf.slice(read2.length);
      read2.func.call(this, smallerBuf.slice(0, read2.length));
    } else {
      this._buffered -= smallerBuf.length;
      this._buffers.shift();
      read2.func.call(this, smallerBuf);
    }
  };
  ChunkStream.prototype._processRead = function(read2) {
    this._reads.shift();
    let pos = 0;
    let count = 0;
    let data = Buffer.alloc(read2.length);
    while (pos < read2.length) {
      let buf = this._buffers[count++];
      let len = Math.min(buf.length, read2.length - pos);
      buf.copy(data, pos, 0, len);
      pos += len;
      if (len !== buf.length) {
        this._buffers[--count] = buf.slice(len);
      }
    }
    if (count > 0) {
      this._buffers.splice(0, count);
    }
    this._buffered -= read2.length;
    read2.func.call(this, data);
  };
  ChunkStream.prototype._process = function() {
    try {
      while (this._buffered > 0 && this._reads && this._reads.length > 0) {
        let read2 = this._reads[0];
        if (read2.allowLess) {
          this._processReadAllowingLess(read2);
        } else if (this._buffered >= read2.length) {
          this._processRead(read2);
        } else {
          break;
        }
      }
      if (this._buffers && !this.writable) {
        this._end();
      }
    } catch (ex) {
      this.emit("error", ex);
    }
  };
  return chunkstream.exports;
}
var filterParseAsync = { exports: {} };
var filterParse = { exports: {} };
var interlace = {};
var hasRequiredInterlace;
function requireInterlace() {
  if (hasRequiredInterlace) return interlace;
  hasRequiredInterlace = 1;
  let imagePasses = [
    {
      // pass 1 - 1px
      x: [0],
      y: [0]
    },
    {
      // pass 2 - 1px
      x: [4],
      y: [0]
    },
    {
      // pass 3 - 2px
      x: [0, 4],
      y: [4]
    },
    {
      // pass 4 - 4px
      x: [2, 6],
      y: [0, 4]
    },
    {
      // pass 5 - 8px
      x: [0, 2, 4, 6],
      y: [2, 6]
    },
    {
      // pass 6 - 16px
      x: [1, 3, 5, 7],
      y: [0, 2, 4, 6]
    },
    {
      // pass 7 - 32px
      x: [0, 1, 2, 3, 4, 5, 6, 7],
      y: [1, 3, 5, 7]
    }
  ];
  interlace.getImagePasses = function(width, height) {
    let images = [];
    let xLeftOver = width % 8;
    let yLeftOver = height % 8;
    let xRepeats = (width - xLeftOver) / 8;
    let yRepeats = (height - yLeftOver) / 8;
    for (let i = 0; i < imagePasses.length; i++) {
      let pass = imagePasses[i];
      let passWidth = xRepeats * pass.x.length;
      let passHeight = yRepeats * pass.y.length;
      for (let j2 = 0; j2 < pass.x.length; j2++) {
        if (pass.x[j2] < xLeftOver) {
          passWidth++;
        } else {
          break;
        }
      }
      for (let j2 = 0; j2 < pass.y.length; j2++) {
        if (pass.y[j2] < yLeftOver) {
          passHeight++;
        } else {
          break;
        }
      }
      if (passWidth > 0 && passHeight > 0) {
        images.push({ width: passWidth, height: passHeight, index: i });
      }
    }
    return images;
  };
  interlace.getInterlaceIterator = function(width) {
    return function(x2, y2, pass) {
      let outerXLeftOver = x2 % imagePasses[pass].x.length;
      let outerX = (x2 - outerXLeftOver) / imagePasses[pass].x.length * 8 + imagePasses[pass].x[outerXLeftOver];
      let outerYLeftOver = y2 % imagePasses[pass].y.length;
      let outerY = (y2 - outerYLeftOver) / imagePasses[pass].y.length * 8 + imagePasses[pass].y[outerYLeftOver];
      return outerX * 4 + outerY * width * 4;
    };
  };
  return interlace;
}
var paethPredictor;
var hasRequiredPaethPredictor;
function requirePaethPredictor() {
  if (hasRequiredPaethPredictor) return paethPredictor;
  hasRequiredPaethPredictor = 1;
  paethPredictor = function paethPredictor2(left, above, upLeft) {
    let paeth = left + above - upLeft;
    let pLeft = Math.abs(paeth - left);
    let pAbove = Math.abs(paeth - above);
    let pUpLeft = Math.abs(paeth - upLeft);
    if (pLeft <= pAbove && pLeft <= pUpLeft) {
      return left;
    }
    if (pAbove <= pUpLeft) {
      return above;
    }
    return upLeft;
  };
  return paethPredictor;
}
var hasRequiredFilterParse;
function requireFilterParse() {
  if (hasRequiredFilterParse) return filterParse.exports;
  hasRequiredFilterParse = 1;
  let interlaceUtils = requireInterlace();
  let paethPredictor2 = requirePaethPredictor();
  function getByteWidth(width, bpp, depth) {
    let byteWidth = width * bpp;
    if (depth !== 8) {
      byteWidth = Math.ceil(byteWidth / (8 / depth));
    }
    return byteWidth;
  }
  let Filter = filterParse.exports = function(bitmapInfo, dependencies) {
    let width = bitmapInfo.width;
    let height = bitmapInfo.height;
    let interlace2 = bitmapInfo.interlace;
    let bpp = bitmapInfo.bpp;
    let depth = bitmapInfo.depth;
    this.read = dependencies.read;
    this.write = dependencies.write;
    this.complete = dependencies.complete;
    this._imageIndex = 0;
    this._images = [];
    if (interlace2) {
      let passes = interlaceUtils.getImagePasses(width, height);
      for (let i = 0; i < passes.length; i++) {
        this._images.push({
          byteWidth: getByteWidth(passes[i].width, bpp, depth),
          height: passes[i].height,
          lineIndex: 0
        });
      }
    } else {
      this._images.push({
        byteWidth: getByteWidth(width, bpp, depth),
        height,
        lineIndex: 0
      });
    }
    if (depth === 8) {
      this._xComparison = bpp;
    } else if (depth === 16) {
      this._xComparison = bpp * 2;
    } else {
      this._xComparison = 1;
    }
  };
  Filter.prototype.start = function() {
    this.read(
      this._images[this._imageIndex].byteWidth + 1,
      this._reverseFilterLine.bind(this)
    );
  };
  Filter.prototype._unFilterType1 = function(rawData, unfilteredLine, byteWidth) {
    let xComparison = this._xComparison;
    let xBiggerThan = xComparison - 1;
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let rawByte = rawData[1 + x2];
      let f1Left = x2 > xBiggerThan ? unfilteredLine[x2 - xComparison] : 0;
      unfilteredLine[x2] = rawByte + f1Left;
    }
  };
  Filter.prototype._unFilterType2 = function(rawData, unfilteredLine, byteWidth) {
    let lastLine = this._lastLine;
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let rawByte = rawData[1 + x2];
      let f2Up = lastLine ? lastLine[x2] : 0;
      unfilteredLine[x2] = rawByte + f2Up;
    }
  };
  Filter.prototype._unFilterType3 = function(rawData, unfilteredLine, byteWidth) {
    let xComparison = this._xComparison;
    let xBiggerThan = xComparison - 1;
    let lastLine = this._lastLine;
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let rawByte = rawData[1 + x2];
      let f3Up = lastLine ? lastLine[x2] : 0;
      let f3Left = x2 > xBiggerThan ? unfilteredLine[x2 - xComparison] : 0;
      let f3Add = Math.floor((f3Left + f3Up) / 2);
      unfilteredLine[x2] = rawByte + f3Add;
    }
  };
  Filter.prototype._unFilterType4 = function(rawData, unfilteredLine, byteWidth) {
    let xComparison = this._xComparison;
    let xBiggerThan = xComparison - 1;
    let lastLine = this._lastLine;
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let rawByte = rawData[1 + x2];
      let f4Up = lastLine ? lastLine[x2] : 0;
      let f4Left = x2 > xBiggerThan ? unfilteredLine[x2 - xComparison] : 0;
      let f4UpLeft = x2 > xBiggerThan && lastLine ? lastLine[x2 - xComparison] : 0;
      let f4Add = paethPredictor2(f4Left, f4Up, f4UpLeft);
      unfilteredLine[x2] = rawByte + f4Add;
    }
  };
  Filter.prototype._reverseFilterLine = function(rawData) {
    let filter2 = rawData[0];
    let unfilteredLine;
    let currentImage = this._images[this._imageIndex];
    let byteWidth = currentImage.byteWidth;
    if (filter2 === 0) {
      unfilteredLine = rawData.slice(1, byteWidth + 1);
    } else {
      unfilteredLine = Buffer.alloc(byteWidth);
      switch (filter2) {
        case 1:
          this._unFilterType1(rawData, unfilteredLine, byteWidth);
          break;
        case 2:
          this._unFilterType2(rawData, unfilteredLine, byteWidth);
          break;
        case 3:
          this._unFilterType3(rawData, unfilteredLine, byteWidth);
          break;
        case 4:
          this._unFilterType4(rawData, unfilteredLine, byteWidth);
          break;
        default:
          throw new Error("Unrecognised filter type - " + filter2);
      }
    }
    this.write(unfilteredLine);
    currentImage.lineIndex++;
    if (currentImage.lineIndex >= currentImage.height) {
      this._lastLine = null;
      this._imageIndex++;
      currentImage = this._images[this._imageIndex];
    } else {
      this._lastLine = unfilteredLine;
    }
    if (currentImage) {
      this.read(currentImage.byteWidth + 1, this._reverseFilterLine.bind(this));
    } else {
      this._lastLine = null;
      this.complete();
    }
  };
  return filterParse.exports;
}
var hasRequiredFilterParseAsync;
function requireFilterParseAsync() {
  if (hasRequiredFilterParseAsync) return filterParseAsync.exports;
  hasRequiredFilterParseAsync = 1;
  let util = require$$0;
  let ChunkStream = requireChunkstream();
  let Filter = requireFilterParse();
  let FilterAsync = filterParseAsync.exports = function(bitmapInfo) {
    ChunkStream.call(this);
    let buffers = [];
    let that = this;
    this._filter = new Filter(bitmapInfo, {
      read: this.read.bind(this),
      write: function(buffer) {
        buffers.push(buffer);
      },
      complete: function() {
        that.emit("complete", Buffer.concat(buffers));
      }
    });
    this._filter.start();
  };
  util.inherits(FilterAsync, ChunkStream);
  return filterParseAsync.exports;
}
var parser = { exports: {} };
var constants;
var hasRequiredConstants;
function requireConstants() {
  if (hasRequiredConstants) return constants;
  hasRequiredConstants = 1;
  constants = {
    PNG_SIGNATURE: [137, 80, 78, 71, 13, 10, 26, 10],
    TYPE_IHDR: 1229472850,
    TYPE_IEND: 1229278788,
    TYPE_IDAT: 1229209940,
    TYPE_PLTE: 1347179589,
    TYPE_tRNS: 1951551059,
    // eslint-disable-line camelcase
    TYPE_gAMA: 1732332865,
    // eslint-disable-line camelcase
    // color-type bits
    COLORTYPE_GRAYSCALE: 0,
    COLORTYPE_PALETTE: 1,
    COLORTYPE_COLOR: 2,
    COLORTYPE_ALPHA: 4,
    // e.g. grayscale and alpha
    // color-type combinations
    COLORTYPE_PALETTE_COLOR: 3,
    COLORTYPE_COLOR_ALPHA: 6,
    COLORTYPE_TO_BPP_MAP: {
      0: 1,
      2: 3,
      3: 1,
      4: 2,
      6: 4
    },
    GAMMA_DIVISION: 1e5
  };
  return constants;
}
var crc = { exports: {} };
var hasRequiredCrc;
function requireCrc() {
  if (hasRequiredCrc) return crc.exports;
  hasRequiredCrc = 1;
  let crcTable = [];
  (function() {
    for (let i = 0; i < 256; i++) {
      let currentCrc = i;
      for (let j2 = 0; j2 < 8; j2++) {
        if (currentCrc & 1) {
          currentCrc = 3988292384 ^ currentCrc >>> 1;
        } else {
          currentCrc = currentCrc >>> 1;
        }
      }
      crcTable[i] = currentCrc;
    }
  })();
  let CrcCalculator = crc.exports = function() {
    this._crc = -1;
  };
  CrcCalculator.prototype.write = function(data) {
    for (let i = 0; i < data.length; i++) {
      this._crc = crcTable[(this._crc ^ data[i]) & 255] ^ this._crc >>> 8;
    }
    return true;
  };
  CrcCalculator.prototype.crc32 = function() {
    return this._crc ^ -1;
  };
  CrcCalculator.crc32 = function(buf) {
    let crc2 = -1;
    for (let i = 0; i < buf.length; i++) {
      crc2 = crcTable[(crc2 ^ buf[i]) & 255] ^ crc2 >>> 8;
    }
    return crc2 ^ -1;
  };
  return crc.exports;
}
var hasRequiredParser;
function requireParser() {
  if (hasRequiredParser) return parser.exports;
  hasRequiredParser = 1;
  let constants2 = requireConstants();
  let CrcCalculator = requireCrc();
  let Parser = parser.exports = function(options, dependencies) {
    this._options = options;
    options.checkCRC = options.checkCRC !== false;
    this._hasIHDR = false;
    this._hasIEND = false;
    this._emittedHeadersFinished = false;
    this._palette = [];
    this._colorType = 0;
    this._chunks = {};
    this._chunks[constants2.TYPE_IHDR] = this._handleIHDR.bind(this);
    this._chunks[constants2.TYPE_IEND] = this._handleIEND.bind(this);
    this._chunks[constants2.TYPE_IDAT] = this._handleIDAT.bind(this);
    this._chunks[constants2.TYPE_PLTE] = this._handlePLTE.bind(this);
    this._chunks[constants2.TYPE_tRNS] = this._handleTRNS.bind(this);
    this._chunks[constants2.TYPE_gAMA] = this._handleGAMA.bind(this);
    this.read = dependencies.read;
    this.error = dependencies.error;
    this.metadata = dependencies.metadata;
    this.gamma = dependencies.gamma;
    this.transColor = dependencies.transColor;
    this.palette = dependencies.palette;
    this.parsed = dependencies.parsed;
    this.inflateData = dependencies.inflateData;
    this.finished = dependencies.finished;
    this.simpleTransparency = dependencies.simpleTransparency;
    this.headersFinished = dependencies.headersFinished || function() {
    };
  };
  Parser.prototype.start = function() {
    this.read(constants2.PNG_SIGNATURE.length, this._parseSignature.bind(this));
  };
  Parser.prototype._parseSignature = function(data) {
    let signature = constants2.PNG_SIGNATURE;
    for (let i = 0; i < signature.length; i++) {
      if (data[i] !== signature[i]) {
        this.error(new Error("Invalid file signature"));
        return;
      }
    }
    this.read(8, this._parseChunkBegin.bind(this));
  };
  Parser.prototype._parseChunkBegin = function(data) {
    let length = data.readUInt32BE(0);
    let type = data.readUInt32BE(4);
    let name = "";
    for (let i = 4; i < 8; i++) {
      name += String.fromCharCode(data[i]);
    }
    let ancillary = Boolean(data[4] & 32);
    if (!this._hasIHDR && type !== constants2.TYPE_IHDR) {
      this.error(new Error("Expected IHDR on beggining"));
      return;
    }
    this._crc = new CrcCalculator();
    this._crc.write(Buffer.from(name));
    if (this._chunks[type]) {
      return this._chunks[type](length);
    }
    if (!ancillary) {
      this.error(new Error("Unsupported critical chunk type " + name));
      return;
    }
    this.read(length + 4, this._skipChunk.bind(this));
  };
  Parser.prototype._skipChunk = function() {
    this.read(8, this._parseChunkBegin.bind(this));
  };
  Parser.prototype._handleChunkEnd = function() {
    this.read(4, this._parseChunkEnd.bind(this));
  };
  Parser.prototype._parseChunkEnd = function(data) {
    let fileCrc = data.readInt32BE(0);
    let calcCrc = this._crc.crc32();
    if (this._options.checkCRC && calcCrc !== fileCrc) {
      this.error(new Error("Crc error - " + fileCrc + " - " + calcCrc));
      return;
    }
    if (!this._hasIEND) {
      this.read(8, this._parseChunkBegin.bind(this));
    }
  };
  Parser.prototype._handleIHDR = function(length) {
    this.read(length, this._parseIHDR.bind(this));
  };
  Parser.prototype._parseIHDR = function(data) {
    this._crc.write(data);
    let width = data.readUInt32BE(0);
    let height = data.readUInt32BE(4);
    let depth = data[8];
    let colorType = data[9];
    let compr = data[10];
    let filter2 = data[11];
    let interlace2 = data[12];
    if (depth !== 8 && depth !== 4 && depth !== 2 && depth !== 1 && depth !== 16) {
      this.error(new Error("Unsupported bit depth " + depth));
      return;
    }
    if (!(colorType in constants2.COLORTYPE_TO_BPP_MAP)) {
      this.error(new Error("Unsupported color type"));
      return;
    }
    if (compr !== 0) {
      this.error(new Error("Unsupported compression method"));
      return;
    }
    if (filter2 !== 0) {
      this.error(new Error("Unsupported filter method"));
      return;
    }
    if (interlace2 !== 0 && interlace2 !== 1) {
      this.error(new Error("Unsupported interlace method"));
      return;
    }
    this._colorType = colorType;
    let bpp = constants2.COLORTYPE_TO_BPP_MAP[this._colorType];
    this._hasIHDR = true;
    this.metadata({
      width,
      height,
      depth,
      interlace: Boolean(interlace2),
      palette: Boolean(colorType & constants2.COLORTYPE_PALETTE),
      color: Boolean(colorType & constants2.COLORTYPE_COLOR),
      alpha: Boolean(colorType & constants2.COLORTYPE_ALPHA),
      bpp,
      colorType
    });
    this._handleChunkEnd();
  };
  Parser.prototype._handlePLTE = function(length) {
    this.read(length, this._parsePLTE.bind(this));
  };
  Parser.prototype._parsePLTE = function(data) {
    this._crc.write(data);
    let entries = Math.floor(data.length / 3);
    for (let i = 0; i < entries; i++) {
      this._palette.push([data[i * 3], data[i * 3 + 1], data[i * 3 + 2], 255]);
    }
    this.palette(this._palette);
    this._handleChunkEnd();
  };
  Parser.prototype._handleTRNS = function(length) {
    this.simpleTransparency();
    this.read(length, this._parseTRNS.bind(this));
  };
  Parser.prototype._parseTRNS = function(data) {
    this._crc.write(data);
    if (this._colorType === constants2.COLORTYPE_PALETTE_COLOR) {
      if (this._palette.length === 0) {
        this.error(new Error("Transparency chunk must be after palette"));
        return;
      }
      if (data.length > this._palette.length) {
        this.error(new Error("More transparent colors than palette size"));
        return;
      }
      for (let i = 0; i < data.length; i++) {
        this._palette[i][3] = data[i];
      }
      this.palette(this._palette);
    }
    if (this._colorType === constants2.COLORTYPE_GRAYSCALE) {
      this.transColor([data.readUInt16BE(0)]);
    }
    if (this._colorType === constants2.COLORTYPE_COLOR) {
      this.transColor([
        data.readUInt16BE(0),
        data.readUInt16BE(2),
        data.readUInt16BE(4)
      ]);
    }
    this._handleChunkEnd();
  };
  Parser.prototype._handleGAMA = function(length) {
    this.read(length, this._parseGAMA.bind(this));
  };
  Parser.prototype._parseGAMA = function(data) {
    this._crc.write(data);
    this.gamma(data.readUInt32BE(0) / constants2.GAMMA_DIVISION);
    this._handleChunkEnd();
  };
  Parser.prototype._handleIDAT = function(length) {
    if (!this._emittedHeadersFinished) {
      this._emittedHeadersFinished = true;
      this.headersFinished();
    }
    this.read(-length, this._parseIDAT.bind(this, length));
  };
  Parser.prototype._parseIDAT = function(length, data) {
    this._crc.write(data);
    if (this._colorType === constants2.COLORTYPE_PALETTE_COLOR && this._palette.length === 0) {
      throw new Error("Expected palette not found");
    }
    this.inflateData(data);
    let leftOverLength = length - data.length;
    if (leftOverLength > 0) {
      this._handleIDAT(leftOverLength);
    } else {
      this._handleChunkEnd();
    }
  };
  Parser.prototype._handleIEND = function(length) {
    this.read(length, this._parseIEND.bind(this));
  };
  Parser.prototype._parseIEND = function(data) {
    this._crc.write(data);
    this._hasIEND = true;
    this._handleChunkEnd();
    if (this.finished) {
      this.finished();
    }
  };
  return parser.exports;
}
var bitmapper = {};
var hasRequiredBitmapper;
function requireBitmapper() {
  if (hasRequiredBitmapper) return bitmapper;
  hasRequiredBitmapper = 1;
  let interlaceUtils = requireInterlace();
  let pixelBppMapper = [
    // 0 - dummy entry
    function() {
    },
    // 1 - L
    // 0: 0, 1: 0, 2: 0, 3: 0xff
    function(pxData, data, pxPos, rawPos) {
      if (rawPos === data.length) {
        throw new Error("Ran out of data");
      }
      let pixel = data[rawPos];
      pxData[pxPos] = pixel;
      pxData[pxPos + 1] = pixel;
      pxData[pxPos + 2] = pixel;
      pxData[pxPos + 3] = 255;
    },
    // 2 - LA
    // 0: 0, 1: 0, 2: 0, 3: 1
    function(pxData, data, pxPos, rawPos) {
      if (rawPos + 1 >= data.length) {
        throw new Error("Ran out of data");
      }
      let pixel = data[rawPos];
      pxData[pxPos] = pixel;
      pxData[pxPos + 1] = pixel;
      pxData[pxPos + 2] = pixel;
      pxData[pxPos + 3] = data[rawPos + 1];
    },
    // 3 - RGB
    // 0: 0, 1: 1, 2: 2, 3: 0xff
    function(pxData, data, pxPos, rawPos) {
      if (rawPos + 2 >= data.length) {
        throw new Error("Ran out of data");
      }
      pxData[pxPos] = data[rawPos];
      pxData[pxPos + 1] = data[rawPos + 1];
      pxData[pxPos + 2] = data[rawPos + 2];
      pxData[pxPos + 3] = 255;
    },
    // 4 - RGBA
    // 0: 0, 1: 1, 2: 2, 3: 3
    function(pxData, data, pxPos, rawPos) {
      if (rawPos + 3 >= data.length) {
        throw new Error("Ran out of data");
      }
      pxData[pxPos] = data[rawPos];
      pxData[pxPos + 1] = data[rawPos + 1];
      pxData[pxPos + 2] = data[rawPos + 2];
      pxData[pxPos + 3] = data[rawPos + 3];
    }
  ];
  let pixelBppCustomMapper = [
    // 0 - dummy entry
    function() {
    },
    // 1 - L
    // 0: 0, 1: 0, 2: 0, 3: 0xff
    function(pxData, pixelData, pxPos, maxBit) {
      let pixel = pixelData[0];
      pxData[pxPos] = pixel;
      pxData[pxPos + 1] = pixel;
      pxData[pxPos + 2] = pixel;
      pxData[pxPos + 3] = maxBit;
    },
    // 2 - LA
    // 0: 0, 1: 0, 2: 0, 3: 1
    function(pxData, pixelData, pxPos) {
      let pixel = pixelData[0];
      pxData[pxPos] = pixel;
      pxData[pxPos + 1] = pixel;
      pxData[pxPos + 2] = pixel;
      pxData[pxPos + 3] = pixelData[1];
    },
    // 3 - RGB
    // 0: 0, 1: 1, 2: 2, 3: 0xff
    function(pxData, pixelData, pxPos, maxBit) {
      pxData[pxPos] = pixelData[0];
      pxData[pxPos + 1] = pixelData[1];
      pxData[pxPos + 2] = pixelData[2];
      pxData[pxPos + 3] = maxBit;
    },
    // 4 - RGBA
    // 0: 0, 1: 1, 2: 2, 3: 3
    function(pxData, pixelData, pxPos) {
      pxData[pxPos] = pixelData[0];
      pxData[pxPos + 1] = pixelData[1];
      pxData[pxPos + 2] = pixelData[2];
      pxData[pxPos + 3] = pixelData[3];
    }
  ];
  function bitRetriever(data, depth) {
    let leftOver = [];
    let i = 0;
    function split() {
      if (i === data.length) {
        throw new Error("Ran out of data");
      }
      let byte = data[i];
      i++;
      let byte8, byte7, byte6, byte5, byte4, byte3, byte2, byte1;
      switch (depth) {
        default:
          throw new Error("unrecognised depth");
        case 16:
          byte2 = data[i];
          i++;
          leftOver.push((byte << 8) + byte2);
          break;
        case 4:
          byte2 = byte & 15;
          byte1 = byte >> 4;
          leftOver.push(byte1, byte2);
          break;
        case 2:
          byte4 = byte & 3;
          byte3 = byte >> 2 & 3;
          byte2 = byte >> 4 & 3;
          byte1 = byte >> 6 & 3;
          leftOver.push(byte1, byte2, byte3, byte4);
          break;
        case 1:
          byte8 = byte & 1;
          byte7 = byte >> 1 & 1;
          byte6 = byte >> 2 & 1;
          byte5 = byte >> 3 & 1;
          byte4 = byte >> 4 & 1;
          byte3 = byte >> 5 & 1;
          byte2 = byte >> 6 & 1;
          byte1 = byte >> 7 & 1;
          leftOver.push(byte1, byte2, byte3, byte4, byte5, byte6, byte7, byte8);
          break;
      }
    }
    return {
      get: function(count) {
        while (leftOver.length < count) {
          split();
        }
        let returner = leftOver.slice(0, count);
        leftOver = leftOver.slice(count);
        return returner;
      },
      resetAfterLine: function() {
        leftOver.length = 0;
      },
      end: function() {
        if (i !== data.length) {
          throw new Error("extra data found");
        }
      }
    };
  }
  function mapImage8Bit(image, pxData, getPxPos, bpp, data, rawPos) {
    let imageWidth = image.width;
    let imageHeight = image.height;
    let imagePass = image.index;
    for (let y2 = 0; y2 < imageHeight; y2++) {
      for (let x2 = 0; x2 < imageWidth; x2++) {
        let pxPos = getPxPos(x2, y2, imagePass);
        pixelBppMapper[bpp](pxData, data, pxPos, rawPos);
        rawPos += bpp;
      }
    }
    return rawPos;
  }
  function mapImageCustomBit(image, pxData, getPxPos, bpp, bits, maxBit) {
    let imageWidth = image.width;
    let imageHeight = image.height;
    let imagePass = image.index;
    for (let y2 = 0; y2 < imageHeight; y2++) {
      for (let x2 = 0; x2 < imageWidth; x2++) {
        let pixelData = bits.get(bpp);
        let pxPos = getPxPos(x2, y2, imagePass);
        pixelBppCustomMapper[bpp](pxData, pixelData, pxPos, maxBit);
      }
      bits.resetAfterLine();
    }
  }
  bitmapper.dataToBitMap = function(data, bitmapInfo) {
    let width = bitmapInfo.width;
    let height = bitmapInfo.height;
    let depth = bitmapInfo.depth;
    let bpp = bitmapInfo.bpp;
    let interlace2 = bitmapInfo.interlace;
    let bits;
    if (depth !== 8) {
      bits = bitRetriever(data, depth);
    }
    let pxData;
    if (depth <= 8) {
      pxData = Buffer.alloc(width * height * 4);
    } else {
      pxData = new Uint16Array(width * height * 4);
    }
    let maxBit = Math.pow(2, depth) - 1;
    let rawPos = 0;
    let images;
    let getPxPos;
    if (interlace2) {
      images = interlaceUtils.getImagePasses(width, height);
      getPxPos = interlaceUtils.getInterlaceIterator(width, height);
    } else {
      let nonInterlacedPxPos = 0;
      getPxPos = function() {
        let returner = nonInterlacedPxPos;
        nonInterlacedPxPos += 4;
        return returner;
      };
      images = [{ width, height }];
    }
    for (let imageIndex = 0; imageIndex < images.length; imageIndex++) {
      if (depth === 8) {
        rawPos = mapImage8Bit(
          images[imageIndex],
          pxData,
          getPxPos,
          bpp,
          data,
          rawPos
        );
      } else {
        mapImageCustomBit(
          images[imageIndex],
          pxData,
          getPxPos,
          bpp,
          bits,
          maxBit
        );
      }
    }
    if (depth === 8) {
      if (rawPos !== data.length) {
        throw new Error("extra data found");
      }
    } else {
      bits.end();
    }
    return pxData;
  };
  return bitmapper;
}
var formatNormaliser;
var hasRequiredFormatNormaliser;
function requireFormatNormaliser() {
  if (hasRequiredFormatNormaliser) return formatNormaliser;
  hasRequiredFormatNormaliser = 1;
  function dePalette(indata, outdata, width, height, palette) {
    let pxPos = 0;
    for (let y2 = 0; y2 < height; y2++) {
      for (let x2 = 0; x2 < width; x2++) {
        let color2 = palette[indata[pxPos]];
        if (!color2) {
          throw new Error("index " + indata[pxPos] + " not in palette");
        }
        for (let i = 0; i < 4; i++) {
          outdata[pxPos + i] = color2[i];
        }
        pxPos += 4;
      }
    }
  }
  function replaceTransparentColor(indata, outdata, width, height, transColor) {
    let pxPos = 0;
    for (let y2 = 0; y2 < height; y2++) {
      for (let x2 = 0; x2 < width; x2++) {
        let makeTrans = false;
        if (transColor.length === 1) {
          if (transColor[0] === indata[pxPos]) {
            makeTrans = true;
          }
        } else if (transColor[0] === indata[pxPos] && transColor[1] === indata[pxPos + 1] && transColor[2] === indata[pxPos + 2]) {
          makeTrans = true;
        }
        if (makeTrans) {
          for (let i = 0; i < 4; i++) {
            outdata[pxPos + i] = 0;
          }
        }
        pxPos += 4;
      }
    }
  }
  function scaleDepth(indata, outdata, width, height, depth) {
    let maxOutSample = 255;
    let maxInSample = Math.pow(2, depth) - 1;
    let pxPos = 0;
    for (let y2 = 0; y2 < height; y2++) {
      for (let x2 = 0; x2 < width; x2++) {
        for (let i = 0; i < 4; i++) {
          outdata[pxPos + i] = Math.floor(
            indata[pxPos + i] * maxOutSample / maxInSample + 0.5
          );
        }
        pxPos += 4;
      }
    }
  }
  formatNormaliser = function(indata, imageData) {
    let depth = imageData.depth;
    let width = imageData.width;
    let height = imageData.height;
    let colorType = imageData.colorType;
    let transColor = imageData.transColor;
    let palette = imageData.palette;
    let outdata = indata;
    if (colorType === 3) {
      dePalette(indata, outdata, width, height, palette);
    } else {
      if (transColor) {
        replaceTransparentColor(indata, outdata, width, height, transColor);
      }
      if (depth !== 8) {
        if (depth === 16) {
          outdata = Buffer.alloc(width * height * 4);
        }
        scaleDepth(indata, outdata, width, height, depth);
      }
    }
    return outdata;
  };
  return formatNormaliser;
}
var hasRequiredParserAsync;
function requireParserAsync() {
  if (hasRequiredParserAsync) return parserAsync.exports;
  hasRequiredParserAsync = 1;
  let util = require$$0;
  let zlib = require$$1$2;
  let ChunkStream = requireChunkstream();
  let FilterAsync = requireFilterParseAsync();
  let Parser = requireParser();
  let bitmapper2 = requireBitmapper();
  let formatNormaliser2 = requireFormatNormaliser();
  let ParserAsync = parserAsync.exports = function(options) {
    ChunkStream.call(this);
    this._parser = new Parser(options, {
      read: this.read.bind(this),
      error: this._handleError.bind(this),
      metadata: this._handleMetaData.bind(this),
      gamma: this.emit.bind(this, "gamma"),
      palette: this._handlePalette.bind(this),
      transColor: this._handleTransColor.bind(this),
      finished: this._finished.bind(this),
      inflateData: this._inflateData.bind(this),
      simpleTransparency: this._simpleTransparency.bind(this),
      headersFinished: this._headersFinished.bind(this)
    });
    this._options = options;
    this.writable = true;
    this._parser.start();
  };
  util.inherits(ParserAsync, ChunkStream);
  ParserAsync.prototype._handleError = function(err) {
    this.emit("error", err);
    this.writable = false;
    this.destroy();
    if (this._inflate && this._inflate.destroy) {
      this._inflate.destroy();
    }
    if (this._filter) {
      this._filter.destroy();
      this._filter.on("error", function() {
      });
    }
    this.errord = true;
  };
  ParserAsync.prototype._inflateData = function(data) {
    if (!this._inflate) {
      if (this._bitmapInfo.interlace) {
        this._inflate = zlib.createInflate();
        this._inflate.on("error", this.emit.bind(this, "error"));
        this._filter.on("complete", this._complete.bind(this));
        this._inflate.pipe(this._filter);
      } else {
        let rowSize = (this._bitmapInfo.width * this._bitmapInfo.bpp * this._bitmapInfo.depth + 7 >> 3) + 1;
        let imageSize = rowSize * this._bitmapInfo.height;
        let chunkSize = Math.max(imageSize, zlib.Z_MIN_CHUNK);
        this._inflate = zlib.createInflate({ chunkSize });
        let leftToInflate = imageSize;
        let emitError = this.emit.bind(this, "error");
        this._inflate.on("error", function(err) {
          if (!leftToInflate) {
            return;
          }
          emitError(err);
        });
        this._filter.on("complete", this._complete.bind(this));
        let filterWrite = this._filter.write.bind(this._filter);
        this._inflate.on("data", function(chunk) {
          if (!leftToInflate) {
            return;
          }
          if (chunk.length > leftToInflate) {
            chunk = chunk.slice(0, leftToInflate);
          }
          leftToInflate -= chunk.length;
          filterWrite(chunk);
        });
        this._inflate.on("end", this._filter.end.bind(this._filter));
      }
    }
    this._inflate.write(data);
  };
  ParserAsync.prototype._handleMetaData = function(metaData) {
    this._metaData = metaData;
    this._bitmapInfo = Object.create(metaData);
    this._filter = new FilterAsync(this._bitmapInfo);
  };
  ParserAsync.prototype._handleTransColor = function(transColor) {
    this._bitmapInfo.transColor = transColor;
  };
  ParserAsync.prototype._handlePalette = function(palette) {
    this._bitmapInfo.palette = palette;
  };
  ParserAsync.prototype._simpleTransparency = function() {
    this._metaData.alpha = true;
  };
  ParserAsync.prototype._headersFinished = function() {
    this.emit("metadata", this._metaData);
  };
  ParserAsync.prototype._finished = function() {
    if (this.errord) {
      return;
    }
    if (!this._inflate) {
      this.emit("error", "No Inflate block");
    } else {
      this._inflate.end();
    }
  };
  ParserAsync.prototype._complete = function(filteredData) {
    if (this.errord) {
      return;
    }
    let normalisedBitmapData;
    try {
      let bitmapData = bitmapper2.dataToBitMap(filteredData, this._bitmapInfo);
      normalisedBitmapData = formatNormaliser2(bitmapData, this._bitmapInfo);
      bitmapData = null;
    } catch (ex) {
      this._handleError(ex);
      return;
    }
    this.emit("parsed", normalisedBitmapData);
  };
  return parserAsync.exports;
}
var packerAsync = { exports: {} };
var packer = { exports: {} };
var bitpacker;
var hasRequiredBitpacker;
function requireBitpacker() {
  if (hasRequiredBitpacker) return bitpacker;
  hasRequiredBitpacker = 1;
  let constants2 = requireConstants();
  bitpacker = function(dataIn, width, height, options) {
    let outHasAlpha = [constants2.COLORTYPE_COLOR_ALPHA, constants2.COLORTYPE_ALPHA].indexOf(
      options.colorType
    ) !== -1;
    if (options.colorType === options.inputColorType) {
      let bigEndian = (function() {
        let buffer = new ArrayBuffer(2);
        new DataView(buffer).setInt16(
          0,
          256,
          true
          /* littleEndian */
        );
        return new Int16Array(buffer)[0] !== 256;
      })();
      if (options.bitDepth === 8 || options.bitDepth === 16 && bigEndian) {
        return dataIn;
      }
    }
    let data = options.bitDepth !== 16 ? dataIn : new Uint16Array(dataIn.buffer);
    let maxValue = 255;
    let inBpp = constants2.COLORTYPE_TO_BPP_MAP[options.inputColorType];
    if (inBpp === 4 && !options.inputHasAlpha) {
      inBpp = 3;
    }
    let outBpp = constants2.COLORTYPE_TO_BPP_MAP[options.colorType];
    if (options.bitDepth === 16) {
      maxValue = 65535;
      outBpp *= 2;
    }
    let outData = Buffer.alloc(width * height * outBpp);
    let inIndex = 0;
    let outIndex = 0;
    let bgColor = options.bgColor || {};
    if (bgColor.red === void 0) {
      bgColor.red = maxValue;
    }
    if (bgColor.green === void 0) {
      bgColor.green = maxValue;
    }
    if (bgColor.blue === void 0) {
      bgColor.blue = maxValue;
    }
    function getRGBA() {
      let red;
      let green;
      let blue;
      let alpha2 = maxValue;
      switch (options.inputColorType) {
        case constants2.COLORTYPE_COLOR_ALPHA:
          alpha2 = data[inIndex + 3];
          red = data[inIndex];
          green = data[inIndex + 1];
          blue = data[inIndex + 2];
          break;
        case constants2.COLORTYPE_COLOR:
          red = data[inIndex];
          green = data[inIndex + 1];
          blue = data[inIndex + 2];
          break;
        case constants2.COLORTYPE_ALPHA:
          alpha2 = data[inIndex + 1];
          red = data[inIndex];
          green = red;
          blue = red;
          break;
        case constants2.COLORTYPE_GRAYSCALE:
          red = data[inIndex];
          green = red;
          blue = red;
          break;
        default:
          throw new Error(
            "input color type:" + options.inputColorType + " is not supported at present"
          );
      }
      if (options.inputHasAlpha) {
        if (!outHasAlpha) {
          alpha2 /= maxValue;
          red = Math.min(
            Math.max(Math.round((1 - alpha2) * bgColor.red + alpha2 * red), 0),
            maxValue
          );
          green = Math.min(
            Math.max(Math.round((1 - alpha2) * bgColor.green + alpha2 * green), 0),
            maxValue
          );
          blue = Math.min(
            Math.max(Math.round((1 - alpha2) * bgColor.blue + alpha2 * blue), 0),
            maxValue
          );
        }
      }
      return { red, green, blue, alpha: alpha2 };
    }
    for (let y2 = 0; y2 < height; y2++) {
      for (let x2 = 0; x2 < width; x2++) {
        let rgba2 = getRGBA();
        switch (options.colorType) {
          case constants2.COLORTYPE_COLOR_ALPHA:
          case constants2.COLORTYPE_COLOR:
            if (options.bitDepth === 8) {
              outData[outIndex] = rgba2.red;
              outData[outIndex + 1] = rgba2.green;
              outData[outIndex + 2] = rgba2.blue;
              if (outHasAlpha) {
                outData[outIndex + 3] = rgba2.alpha;
              }
            } else {
              outData.writeUInt16BE(rgba2.red, outIndex);
              outData.writeUInt16BE(rgba2.green, outIndex + 2);
              outData.writeUInt16BE(rgba2.blue, outIndex + 4);
              if (outHasAlpha) {
                outData.writeUInt16BE(rgba2.alpha, outIndex + 6);
              }
            }
            break;
          case constants2.COLORTYPE_ALPHA:
          case constants2.COLORTYPE_GRAYSCALE: {
            let grayscale = (rgba2.red + rgba2.green + rgba2.blue) / 3;
            if (options.bitDepth === 8) {
              outData[outIndex] = grayscale;
              if (outHasAlpha) {
                outData[outIndex + 1] = rgba2.alpha;
              }
            } else {
              outData.writeUInt16BE(grayscale, outIndex);
              if (outHasAlpha) {
                outData.writeUInt16BE(rgba2.alpha, outIndex + 2);
              }
            }
            break;
          }
          default:
            throw new Error("unrecognised color Type " + options.colorType);
        }
        inIndex += inBpp;
        outIndex += outBpp;
      }
    }
    return outData;
  };
  return bitpacker;
}
var filterPack;
var hasRequiredFilterPack;
function requireFilterPack() {
  if (hasRequiredFilterPack) return filterPack;
  hasRequiredFilterPack = 1;
  let paethPredictor2 = requirePaethPredictor();
  function filterNone(pxData, pxPos, byteWidth, rawData, rawPos) {
    for (let x2 = 0; x2 < byteWidth; x2++) {
      rawData[rawPos + x2] = pxData[pxPos + x2];
    }
  }
  function filterSumNone(pxData, pxPos, byteWidth) {
    let sum = 0;
    let length = pxPos + byteWidth;
    for (let i = pxPos; i < length; i++) {
      sum += Math.abs(pxData[i]);
    }
    return sum;
  }
  function filterSub(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let left = x2 >= bpp ? pxData[pxPos + x2 - bpp] : 0;
      let val = pxData[pxPos + x2] - left;
      rawData[rawPos + x2] = val;
    }
  }
  function filterSumSub(pxData, pxPos, byteWidth, bpp) {
    let sum = 0;
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let left = x2 >= bpp ? pxData[pxPos + x2 - bpp] : 0;
      let val = pxData[pxPos + x2] - left;
      sum += Math.abs(val);
    }
    return sum;
  }
  function filterUp(pxData, pxPos, byteWidth, rawData, rawPos) {
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let up = pxPos > 0 ? pxData[pxPos + x2 - byteWidth] : 0;
      let val = pxData[pxPos + x2] - up;
      rawData[rawPos + x2] = val;
    }
  }
  function filterSumUp(pxData, pxPos, byteWidth) {
    let sum = 0;
    let length = pxPos + byteWidth;
    for (let x2 = pxPos; x2 < length; x2++) {
      let up = pxPos > 0 ? pxData[x2 - byteWidth] : 0;
      let val = pxData[x2] - up;
      sum += Math.abs(val);
    }
    return sum;
  }
  function filterAvg(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let left = x2 >= bpp ? pxData[pxPos + x2 - bpp] : 0;
      let up = pxPos > 0 ? pxData[pxPos + x2 - byteWidth] : 0;
      let val = pxData[pxPos + x2] - (left + up >> 1);
      rawData[rawPos + x2] = val;
    }
  }
  function filterSumAvg(pxData, pxPos, byteWidth, bpp) {
    let sum = 0;
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let left = x2 >= bpp ? pxData[pxPos + x2 - bpp] : 0;
      let up = pxPos > 0 ? pxData[pxPos + x2 - byteWidth] : 0;
      let val = pxData[pxPos + x2] - (left + up >> 1);
      sum += Math.abs(val);
    }
    return sum;
  }
  function filterPaeth(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let left = x2 >= bpp ? pxData[pxPos + x2 - bpp] : 0;
      let up = pxPos > 0 ? pxData[pxPos + x2 - byteWidth] : 0;
      let upleft = pxPos > 0 && x2 >= bpp ? pxData[pxPos + x2 - (byteWidth + bpp)] : 0;
      let val = pxData[pxPos + x2] - paethPredictor2(left, up, upleft);
      rawData[rawPos + x2] = val;
    }
  }
  function filterSumPaeth(pxData, pxPos, byteWidth, bpp) {
    let sum = 0;
    for (let x2 = 0; x2 < byteWidth; x2++) {
      let left = x2 >= bpp ? pxData[pxPos + x2 - bpp] : 0;
      let up = pxPos > 0 ? pxData[pxPos + x2 - byteWidth] : 0;
      let upleft = pxPos > 0 && x2 >= bpp ? pxData[pxPos + x2 - (byteWidth + bpp)] : 0;
      let val = pxData[pxPos + x2] - paethPredictor2(left, up, upleft);
      sum += Math.abs(val);
    }
    return sum;
  }
  let filters = {
    0: filterNone,
    1: filterSub,
    2: filterUp,
    3: filterAvg,
    4: filterPaeth
  };
  let filterSums = {
    0: filterSumNone,
    1: filterSumSub,
    2: filterSumUp,
    3: filterSumAvg,
    4: filterSumPaeth
  };
  filterPack = function(pxData, width, height, options, bpp) {
    let filterTypes;
    if (!("filterType" in options) || options.filterType === -1) {
      filterTypes = [0, 1, 2, 3, 4];
    } else if (typeof options.filterType === "number") {
      filterTypes = [options.filterType];
    } else {
      throw new Error("unrecognised filter types");
    }
    if (options.bitDepth === 16) {
      bpp *= 2;
    }
    let byteWidth = width * bpp;
    let rawPos = 0;
    let pxPos = 0;
    let rawData = Buffer.alloc((byteWidth + 1) * height);
    let sel = filterTypes[0];
    for (let y2 = 0; y2 < height; y2++) {
      if (filterTypes.length > 1) {
        let min = Infinity;
        for (let i = 0; i < filterTypes.length; i++) {
          let sum = filterSums[filterTypes[i]](pxData, pxPos, byteWidth, bpp);
          if (sum < min) {
            sel = filterTypes[i];
            min = sum;
          }
        }
      }
      rawData[rawPos] = sel;
      rawPos++;
      filters[sel](pxData, pxPos, byteWidth, rawData, rawPos, bpp);
      rawPos += byteWidth;
      pxPos += byteWidth;
    }
    return rawData;
  };
  return filterPack;
}
var hasRequiredPacker;
function requirePacker() {
  if (hasRequiredPacker) return packer.exports;
  hasRequiredPacker = 1;
  let constants2 = requireConstants();
  let CrcStream = requireCrc();
  let bitPacker = requireBitpacker();
  let filter2 = requireFilterPack();
  let zlib = require$$1$2;
  let Packer = packer.exports = function(options) {
    this._options = options;
    options.deflateChunkSize = options.deflateChunkSize || 32 * 1024;
    options.deflateLevel = options.deflateLevel != null ? options.deflateLevel : 9;
    options.deflateStrategy = options.deflateStrategy != null ? options.deflateStrategy : 3;
    options.inputHasAlpha = options.inputHasAlpha != null ? options.inputHasAlpha : true;
    options.deflateFactory = options.deflateFactory || zlib.createDeflate;
    options.bitDepth = options.bitDepth || 8;
    options.colorType = typeof options.colorType === "number" ? options.colorType : constants2.COLORTYPE_COLOR_ALPHA;
    options.inputColorType = typeof options.inputColorType === "number" ? options.inputColorType : constants2.COLORTYPE_COLOR_ALPHA;
    if ([
      constants2.COLORTYPE_GRAYSCALE,
      constants2.COLORTYPE_COLOR,
      constants2.COLORTYPE_COLOR_ALPHA,
      constants2.COLORTYPE_ALPHA
    ].indexOf(options.colorType) === -1) {
      throw new Error(
        "option color type:" + options.colorType + " is not supported at present"
      );
    }
    if ([
      constants2.COLORTYPE_GRAYSCALE,
      constants2.COLORTYPE_COLOR,
      constants2.COLORTYPE_COLOR_ALPHA,
      constants2.COLORTYPE_ALPHA
    ].indexOf(options.inputColorType) === -1) {
      throw new Error(
        "option input color type:" + options.inputColorType + " is not supported at present"
      );
    }
    if (options.bitDepth !== 8 && options.bitDepth !== 16) {
      throw new Error(
        "option bit depth:" + options.bitDepth + " is not supported at present"
      );
    }
  };
  Packer.prototype.getDeflateOptions = function() {
    return {
      chunkSize: this._options.deflateChunkSize,
      level: this._options.deflateLevel,
      strategy: this._options.deflateStrategy
    };
  };
  Packer.prototype.createDeflate = function() {
    return this._options.deflateFactory(this.getDeflateOptions());
  };
  Packer.prototype.filterData = function(data, width, height) {
    let packedData = bitPacker(data, width, height, this._options);
    let bpp = constants2.COLORTYPE_TO_BPP_MAP[this._options.colorType];
    let filteredData = filter2(packedData, width, height, this._options, bpp);
    return filteredData;
  };
  Packer.prototype._packChunk = function(type, data) {
    let len = data ? data.length : 0;
    let buf = Buffer.alloc(len + 12);
    buf.writeUInt32BE(len, 0);
    buf.writeUInt32BE(type, 4);
    if (data) {
      data.copy(buf, 8);
    }
    buf.writeInt32BE(
      CrcStream.crc32(buf.slice(4, buf.length - 4)),
      buf.length - 4
    );
    return buf;
  };
  Packer.prototype.packGAMA = function(gamma) {
    let buf = Buffer.alloc(4);
    buf.writeUInt32BE(Math.floor(gamma * constants2.GAMMA_DIVISION), 0);
    return this._packChunk(constants2.TYPE_gAMA, buf);
  };
  Packer.prototype.packIHDR = function(width, height) {
    let buf = Buffer.alloc(13);
    buf.writeUInt32BE(width, 0);
    buf.writeUInt32BE(height, 4);
    buf[8] = this._options.bitDepth;
    buf[9] = this._options.colorType;
    buf[10] = 0;
    buf[11] = 0;
    buf[12] = 0;
    return this._packChunk(constants2.TYPE_IHDR, buf);
  };
  Packer.prototype.packIDAT = function(data) {
    return this._packChunk(constants2.TYPE_IDAT, data);
  };
  Packer.prototype.packIEND = function() {
    return this._packChunk(constants2.TYPE_IEND, null);
  };
  return packer.exports;
}
var hasRequiredPackerAsync;
function requirePackerAsync() {
  if (hasRequiredPackerAsync) return packerAsync.exports;
  hasRequiredPackerAsync = 1;
  let util = require$$0;
  let Stream = require$$1$1;
  let constants2 = requireConstants();
  let Packer = requirePacker();
  let PackerAsync = packerAsync.exports = function(opt) {
    Stream.call(this);
    let options = opt || {};
    this._packer = new Packer(options);
    this._deflate = this._packer.createDeflate();
    this.readable = true;
  };
  util.inherits(PackerAsync, Stream);
  PackerAsync.prototype.pack = function(data, width, height, gamma) {
    this.emit("data", Buffer.from(constants2.PNG_SIGNATURE));
    this.emit("data", this._packer.packIHDR(width, height));
    if (gamma) {
      this.emit("data", this._packer.packGAMA(gamma));
    }
    let filteredData = this._packer.filterData(data, width, height);
    this._deflate.on("error", this.emit.bind(this, "error"));
    this._deflate.on(
      "data",
      function(compressedData) {
        this.emit("data", this._packer.packIDAT(compressedData));
      }.bind(this)
    );
    this._deflate.on(
      "end",
      function() {
        this.emit("data", this._packer.packIEND());
        this.emit("end");
      }.bind(this)
    );
    this._deflate.end(filteredData);
  };
  return packerAsync.exports;
}
var pngSync = {};
var syncInflate = { exports: {} };
var hasRequiredSyncInflate;
function requireSyncInflate() {
  if (hasRequiredSyncInflate) return syncInflate.exports;
  hasRequiredSyncInflate = 1;
  (function(module, exports$1) {
    let assert = require$$0$1.ok;
    let zlib = require$$1$2;
    let util = require$$0;
    let kMaxLength = require$$3.kMaxLength;
    function Inflate(opts) {
      if (!(this instanceof Inflate)) {
        return new Inflate(opts);
      }
      if (opts && opts.chunkSize < zlib.Z_MIN_CHUNK) {
        opts.chunkSize = zlib.Z_MIN_CHUNK;
      }
      zlib.Inflate.call(this, opts);
      this._offset = this._offset === void 0 ? this._outOffset : this._offset;
      this._buffer = this._buffer || this._outBuffer;
      if (opts && opts.maxLength != null) {
        this._maxLength = opts.maxLength;
      }
    }
    function createInflate(opts) {
      return new Inflate(opts);
    }
    function _close(engine, callback) {
      if (!engine._handle) {
        return;
      }
      engine._handle.close();
      engine._handle = null;
    }
    Inflate.prototype._processChunk = function(chunk, flushFlag, asyncCb) {
      if (typeof asyncCb === "function") {
        return zlib.Inflate._processChunk.call(this, chunk, flushFlag, asyncCb);
      }
      let self = this;
      let availInBefore = chunk && chunk.length;
      let availOutBefore = this._chunkSize - this._offset;
      let leftToInflate = this._maxLength;
      let inOff = 0;
      let buffers = [];
      let nread = 0;
      let error;
      this.on("error", function(err) {
        error = err;
      });
      function handleChunk(availInAfter, availOutAfter) {
        if (self._hadError) {
          return;
        }
        let have = availOutBefore - availOutAfter;
        assert(have >= 0, "have should not go down");
        if (have > 0) {
          let out = self._buffer.slice(self._offset, self._offset + have);
          self._offset += have;
          if (out.length > leftToInflate) {
            out = out.slice(0, leftToInflate);
          }
          buffers.push(out);
          nread += out.length;
          leftToInflate -= out.length;
          if (leftToInflate === 0) {
            return false;
          }
        }
        if (availOutAfter === 0 || self._offset >= self._chunkSize) {
          availOutBefore = self._chunkSize;
          self._offset = 0;
          self._buffer = Buffer.allocUnsafe(self._chunkSize);
        }
        if (availOutAfter === 0) {
          inOff += availInBefore - availInAfter;
          availInBefore = availInAfter;
          return true;
        }
        return false;
      }
      assert(this._handle, "zlib binding closed");
      let res;
      do {
        res = this._handle.writeSync(
          flushFlag,
          chunk,
          // in
          inOff,
          // in_off
          availInBefore,
          // in_len
          this._buffer,
          // out
          this._offset,
          //out_off
          availOutBefore
        );
        res = res || this._writeState;
      } while (!this._hadError && handleChunk(res[0], res[1]));
      if (this._hadError) {
        throw error;
      }
      if (nread >= kMaxLength) {
        _close(this);
        throw new RangeError(
          "Cannot create final Buffer. It would be larger than 0x" + kMaxLength.toString(16) + " bytes"
        );
      }
      let buf = Buffer.concat(buffers, nread);
      _close(this);
      return buf;
    };
    util.inherits(Inflate, zlib.Inflate);
    function zlibBufferSync(engine, buffer) {
      if (typeof buffer === "string") {
        buffer = Buffer.from(buffer);
      }
      if (!(buffer instanceof Buffer)) {
        throw new TypeError("Not a string or buffer");
      }
      let flushFlag = engine._finishFlushFlag;
      if (flushFlag == null) {
        flushFlag = zlib.Z_FINISH;
      }
      return engine._processChunk(buffer, flushFlag);
    }
    function inflateSync(buffer, opts) {
      return zlibBufferSync(new Inflate(opts), buffer);
    }
    module.exports = exports$1 = inflateSync;
    exports$1.Inflate = Inflate;
    exports$1.createInflate = createInflate;
    exports$1.inflateSync = inflateSync;
  })(syncInflate, syncInflate.exports);
  return syncInflate.exports;
}
var syncReader = { exports: {} };
var hasRequiredSyncReader;
function requireSyncReader() {
  if (hasRequiredSyncReader) return syncReader.exports;
  hasRequiredSyncReader = 1;
  let SyncReader = syncReader.exports = function(buffer) {
    this._buffer = buffer;
    this._reads = [];
  };
  SyncReader.prototype.read = function(length, callback) {
    this._reads.push({
      length: Math.abs(length),
      // if length < 0 then at most this length
      allowLess: length < 0,
      func: callback
    });
  };
  SyncReader.prototype.process = function() {
    while (this._reads.length > 0 && this._buffer.length) {
      let read2 = this._reads[0];
      if (this._buffer.length && (this._buffer.length >= read2.length || read2.allowLess)) {
        this._reads.shift();
        let buf = this._buffer;
        this._buffer = buf.slice(read2.length);
        read2.func.call(this, buf.slice(0, read2.length));
      } else {
        break;
      }
    }
    if (this._reads.length > 0) {
      return new Error("There are some read requests waitng on finished stream");
    }
    if (this._buffer.length > 0) {
      return new Error("unrecognised content at end of stream");
    }
  };
  return syncReader.exports;
}
var filterParseSync = {};
var hasRequiredFilterParseSync;
function requireFilterParseSync() {
  if (hasRequiredFilterParseSync) return filterParseSync;
  hasRequiredFilterParseSync = 1;
  let SyncReader = requireSyncReader();
  let Filter = requireFilterParse();
  filterParseSync.process = function(inBuffer, bitmapInfo) {
    let outBuffers = [];
    let reader = new SyncReader(inBuffer);
    let filter2 = new Filter(bitmapInfo, {
      read: reader.read.bind(reader),
      write: function(bufferPart) {
        outBuffers.push(bufferPart);
      },
      complete: function() {
      }
    });
    filter2.start();
    reader.process();
    return Buffer.concat(outBuffers);
  };
  return filterParseSync;
}
var parserSync;
var hasRequiredParserSync;
function requireParserSync() {
  if (hasRequiredParserSync) return parserSync;
  hasRequiredParserSync = 1;
  let hasSyncZlib = true;
  let zlib = require$$1$2;
  let inflateSync = requireSyncInflate();
  if (!zlib.deflateSync) {
    hasSyncZlib = false;
  }
  let SyncReader = requireSyncReader();
  let FilterSync = requireFilterParseSync();
  let Parser = requireParser();
  let bitmapper2 = requireBitmapper();
  let formatNormaliser2 = requireFormatNormaliser();
  parserSync = function(buffer, options) {
    if (!hasSyncZlib) {
      throw new Error(
        "To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0"
      );
    }
    let err;
    function handleError(_err_) {
      err = _err_;
    }
    let metaData;
    function handleMetaData(_metaData_) {
      metaData = _metaData_;
    }
    function handleTransColor(transColor) {
      metaData.transColor = transColor;
    }
    function handlePalette(palette) {
      metaData.palette = palette;
    }
    function handleSimpleTransparency() {
      metaData.alpha = true;
    }
    let gamma;
    function handleGamma(_gamma_) {
      gamma = _gamma_;
    }
    let inflateDataList = [];
    function handleInflateData(inflatedData2) {
      inflateDataList.push(inflatedData2);
    }
    let reader = new SyncReader(buffer);
    let parser2 = new Parser(options, {
      read: reader.read.bind(reader),
      error: handleError,
      metadata: handleMetaData,
      gamma: handleGamma,
      palette: handlePalette,
      transColor: handleTransColor,
      inflateData: handleInflateData,
      simpleTransparency: handleSimpleTransparency
    });
    parser2.start();
    reader.process();
    if (err) {
      throw err;
    }
    let inflateData = Buffer.concat(inflateDataList);
    inflateDataList.length = 0;
    let inflatedData;
    if (metaData.interlace) {
      inflatedData = zlib.inflateSync(inflateData);
    } else {
      let rowSize = (metaData.width * metaData.bpp * metaData.depth + 7 >> 3) + 1;
      let imageSize = rowSize * metaData.height;
      inflatedData = inflateSync(inflateData, {
        chunkSize: imageSize,
        maxLength: imageSize
      });
    }
    inflateData = null;
    if (!inflatedData || !inflatedData.length) {
      throw new Error("bad png - invalid inflate data response");
    }
    let unfilteredData = FilterSync.process(inflatedData, metaData);
    inflateData = null;
    let bitmapData = bitmapper2.dataToBitMap(unfilteredData, metaData);
    unfilteredData = null;
    let normalisedBitmapData = formatNormaliser2(bitmapData, metaData);
    metaData.data = normalisedBitmapData;
    metaData.gamma = gamma || 0;
    return metaData;
  };
  return parserSync;
}
var packerSync;
var hasRequiredPackerSync;
function requirePackerSync() {
  if (hasRequiredPackerSync) return packerSync;
  hasRequiredPackerSync = 1;
  let hasSyncZlib = true;
  let zlib = require$$1$2;
  if (!zlib.deflateSync) {
    hasSyncZlib = false;
  }
  let constants2 = requireConstants();
  let Packer = requirePacker();
  packerSync = function(metaData, opt) {
    if (!hasSyncZlib) {
      throw new Error(
        "To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0"
      );
    }
    let options = opt || {};
    let packer2 = new Packer(options);
    let chunks = [];
    chunks.push(Buffer.from(constants2.PNG_SIGNATURE));
    chunks.push(packer2.packIHDR(metaData.width, metaData.height));
    if (metaData.gamma) {
      chunks.push(packer2.packGAMA(metaData.gamma));
    }
    let filteredData = packer2.filterData(
      metaData.data,
      metaData.width,
      metaData.height
    );
    let compressedData = zlib.deflateSync(
      filteredData,
      packer2.getDeflateOptions()
    );
    filteredData = null;
    if (!compressedData || !compressedData.length) {
      throw new Error("bad png - invalid compressed data response");
    }
    chunks.push(packer2.packIDAT(compressedData));
    chunks.push(packer2.packIEND());
    return Buffer.concat(chunks);
  };
  return packerSync;
}
var hasRequiredPngSync;
function requirePngSync() {
  if (hasRequiredPngSync) return pngSync;
  hasRequiredPngSync = 1;
  let parse = requireParserSync();
  let pack = requirePackerSync();
  pngSync.read = function(buffer, options) {
    return parse(buffer, options || {});
  };
  pngSync.write = function(png2, options) {
    return pack(png2, options);
  };
  return pngSync;
}
var hasRequiredPng$1;
function requirePng$1() {
  if (hasRequiredPng$1) return png;
  hasRequiredPng$1 = 1;
  let util = require$$0;
  let Stream = require$$1$1;
  let Parser = requireParserAsync();
  let Packer = requirePackerAsync();
  let PNGSync = requirePngSync();
  let PNG = png.PNG = function(options) {
    Stream.call(this);
    options = options || {};
    this.width = options.width | 0;
    this.height = options.height | 0;
    this.data = this.width > 0 && this.height > 0 ? Buffer.alloc(4 * this.width * this.height) : null;
    if (options.fill && this.data) {
      this.data.fill(0);
    }
    this.gamma = 0;
    this.readable = this.writable = true;
    this._parser = new Parser(options);
    this._parser.on("error", this.emit.bind(this, "error"));
    this._parser.on("close", this._handleClose.bind(this));
    this._parser.on("metadata", this._metadata.bind(this));
    this._parser.on("gamma", this._gamma.bind(this));
    this._parser.on(
      "parsed",
      function(data) {
        this.data = data;
        this.emit("parsed", data);
      }.bind(this)
    );
    this._packer = new Packer(options);
    this._packer.on("data", this.emit.bind(this, "data"));
    this._packer.on("end", this.emit.bind(this, "end"));
    this._parser.on("close", this._handleClose.bind(this));
    this._packer.on("error", this.emit.bind(this, "error"));
  };
  util.inherits(PNG, Stream);
  PNG.sync = PNGSync;
  PNG.prototype.pack = function() {
    if (!this.data || !this.data.length) {
      this.emit("error", "No data provided");
      return this;
    }
    process.nextTick(
      function() {
        this._packer.pack(this.data, this.width, this.height, this.gamma);
      }.bind(this)
    );
    return this;
  };
  PNG.prototype.parse = function(data, callback) {
    if (callback) {
      let onParsed, onError;
      onParsed = function(parsedData) {
        this.removeListener("error", onError);
        this.data = parsedData;
        callback(null, this);
      }.bind(this);
      onError = function(err) {
        this.removeListener("parsed", onParsed);
        callback(err, null);
      }.bind(this);
      this.once("parsed", onParsed);
      this.once("error", onError);
    }
    this.end(data);
    return this;
  };
  PNG.prototype.write = function(data) {
    this._parser.write(data);
    return true;
  };
  PNG.prototype.end = function(data) {
    this._parser.end(data);
  };
  PNG.prototype._metadata = function(metadata) {
    this.width = metadata.width;
    this.height = metadata.height;
    this.emit("metadata", metadata);
  };
  PNG.prototype._gamma = function(gamma) {
    this.gamma = gamma;
  };
  PNG.prototype._handleClose = function() {
    if (!this._parser.writable && !this._packer.readable) {
      this.emit("close");
    }
  };
  PNG.bitblt = function(src, dst, srcX, srcY, width, height, deltaX, deltaY) {
    srcX |= 0;
    srcY |= 0;
    width |= 0;
    height |= 0;
    deltaX |= 0;
    deltaY |= 0;
    if (srcX > src.width || srcY > src.height || srcX + width > src.width || srcY + height > src.height) {
      throw new Error("bitblt reading outside image");
    }
    if (deltaX > dst.width || deltaY > dst.height || deltaX + width > dst.width || deltaY + height > dst.height) {
      throw new Error("bitblt writing outside image");
    }
    for (let y2 = 0; y2 < height; y2++) {
      src.data.copy(
        dst.data,
        (deltaY + y2) * dst.width + deltaX << 2,
        (srcY + y2) * src.width + srcX << 2,
        (srcY + y2) * src.width + srcX + width << 2
      );
    }
  };
  PNG.prototype.bitblt = function(dst, srcX, srcY, width, height, deltaX, deltaY) {
    PNG.bitblt(this, dst, srcX, srcY, width, height, deltaX, deltaY);
    return this;
  };
  PNG.adjustGamma = function(src) {
    if (src.gamma) {
      for (let y2 = 0; y2 < src.height; y2++) {
        for (let x2 = 0; x2 < src.width; x2++) {
          let idx = src.width * y2 + x2 << 2;
          for (let i = 0; i < 3; i++) {
            let sample = src.data[idx + i] / 255;
            sample = Math.pow(sample, 1 / 2.2 / src.gamma);
            src.data[idx + i] = Math.round(sample * 255);
          }
        }
      }
      src.gamma = 0;
    }
  };
  PNG.prototype.adjustGamma = function() {
    PNG.adjustGamma(this);
  };
  return png;
}
var utils = {};
var hasRequiredUtils;
function requireUtils() {
  if (hasRequiredUtils) return utils;
  hasRequiredUtils = 1;
  (function(exports$1) {
    function hex2rgba(hex2) {
      if (typeof hex2 === "number") {
        hex2 = hex2.toString();
      }
      if (typeof hex2 !== "string") {
        throw new Error("Color should be defined as hex string");
      }
      let hexCode = hex2.slice().replace("#", "").split("");
      if (hexCode.length < 3 || hexCode.length === 5 || hexCode.length > 8) {
        throw new Error("Invalid hex color: " + hex2);
      }
      if (hexCode.length === 3 || hexCode.length === 4) {
        hexCode = Array.prototype.concat.apply([], hexCode.map(function(c) {
          return [c, c];
        }));
      }
      if (hexCode.length === 6) hexCode.push("F", "F");
      const hexValue = parseInt(hexCode.join(""), 16);
      return {
        r: hexValue >> 24 & 255,
        g: hexValue >> 16 & 255,
        b: hexValue >> 8 & 255,
        a: hexValue & 255,
        hex: "#" + hexCode.slice(0, 6).join("")
      };
    }
    exports$1.getOptions = function getOptions(options) {
      if (!options) options = {};
      if (!options.color) options.color = {};
      const margin = typeof options.margin === "undefined" || options.margin === null || options.margin < 0 ? 4 : options.margin;
      const width = options.width && options.width >= 21 ? options.width : void 0;
      const scale2 = options.scale || 4;
      return {
        width,
        scale: width ? 4 : scale2,
        margin,
        color: {
          dark: hex2rgba(options.color.dark || "#000000ff"),
          light: hex2rgba(options.color.light || "#ffffffff")
        },
        type: options.type,
        rendererOpts: options.rendererOpts || {}
      };
    };
    exports$1.getScale = function getScale(qrSize, opts) {
      return opts.width && opts.width >= qrSize + opts.margin * 2 ? opts.width / (qrSize + opts.margin * 2) : opts.scale;
    };
    exports$1.getImageWidth = function getImageWidth(qrSize, opts) {
      const scale2 = exports$1.getScale(qrSize, opts);
      return Math.floor((qrSize + opts.margin * 2) * scale2);
    };
    exports$1.qrToImageData = function qrToImageData(imgData, qr, opts) {
      const size = qr.modules.size;
      const data = qr.modules.data;
      const scale2 = exports$1.getScale(size, opts);
      const symbolSize = Math.floor((size + opts.margin * 2) * scale2);
      const scaledMargin = opts.margin * scale2;
      const palette = [opts.color.light, opts.color.dark];
      for (let i = 0; i < symbolSize; i++) {
        for (let j2 = 0; j2 < symbolSize; j2++) {
          let posDst = (i * symbolSize + j2) * 4;
          let pxColor = opts.color.light;
          if (i >= scaledMargin && j2 >= scaledMargin && i < symbolSize - scaledMargin && j2 < symbolSize - scaledMargin) {
            const iSrc = Math.floor((i - scaledMargin) / scale2);
            const jSrc = Math.floor((j2 - scaledMargin) / scale2);
            pxColor = palette[data[iSrc * size + jSrc] ? 1 : 0];
          }
          imgData[posDst++] = pxColor.r;
          imgData[posDst++] = pxColor.g;
          imgData[posDst++] = pxColor.b;
          imgData[posDst] = pxColor.a;
        }
      }
    };
  })(utils);
  return utils;
}
var hasRequiredPng;
function requirePng() {
  if (hasRequiredPng) return png$1;
  hasRequiredPng = 1;
  (function(exports$1) {
    const fs2 = require$$1;
    const PNG = requirePng$1().PNG;
    const Utils = requireUtils();
    exports$1.render = function render(qrData, options) {
      const opts = Utils.getOptions(options);
      const pngOpts = opts.rendererOpts;
      const size = Utils.getImageWidth(qrData.modules.size, opts);
      pngOpts.width = size;
      pngOpts.height = size;
      const pngImage = new PNG(pngOpts);
      Utils.qrToImageData(pngImage.data, qrData, opts);
      return pngImage;
    };
    exports$1.renderToDataURL = function renderToDataURL(qrData, options, cb) {
      if (typeof cb === "undefined") {
        cb = options;
        options = void 0;
      }
      exports$1.renderToBuffer(qrData, options, function(err, output) {
        if (err) cb(err);
        let url = "data:image/png;base64,";
        url += output.toString("base64");
        cb(null, url);
      });
    };
    exports$1.renderToBuffer = function renderToBuffer(qrData, options, cb) {
      if (typeof cb === "undefined") {
        cb = options;
        options = void 0;
      }
      const png2 = exports$1.render(qrData, options);
      const buffer = [];
      png2.on("error", cb);
      png2.on("data", function(data) {
        buffer.push(data);
      });
      png2.on("end", function() {
        cb(null, Buffer.concat(buffer));
      });
      png2.pack();
    };
    exports$1.renderToFile = function renderToFile(path, qrData, options, cb) {
      if (typeof cb === "undefined") {
        cb = options;
        options = void 0;
      }
      let called = false;
      const done = (...args) => {
        if (called) return;
        called = true;
        cb.apply(null, args);
      };
      const stream = fs2.createWriteStream(path);
      stream.on("error", done);
      stream.on("close", done);
      exports$1.renderToFileStream(stream, qrData, options);
    };
    exports$1.renderToFileStream = function renderToFileStream(stream, qrData, options) {
      const png2 = exports$1.render(qrData, options);
      png2.pack().pipe(stream);
    };
  })(png$1);
  return png$1;
}
var utf8 = {};
var hasRequiredUtf8;
function requireUtf8() {
  if (hasRequiredUtf8) return utf8;
  hasRequiredUtf8 = 1;
  (function(exports$1) {
    const Utils = requireUtils();
    const BLOCK_CHAR = {
      WW: " ",
      WB: "",
      BB: "",
      BW: ""
    };
    const INVERTED_BLOCK_CHAR = {
      BB: " ",
      BW: "",
      WW: "",
      WB: ""
    };
    function getBlockChar(top, bottom, blocks) {
      if (top && bottom) return blocks.BB;
      if (top && !bottom) return blocks.BW;
      if (!top && bottom) return blocks.WB;
      return blocks.WW;
    }
    exports$1.render = function(qrData, options, cb) {
      const opts = Utils.getOptions(options);
      let blocks = BLOCK_CHAR;
      if (opts.color.dark.hex === "#ffffff" || opts.color.light.hex === "#000000") {
        blocks = INVERTED_BLOCK_CHAR;
      }
      const size = qrData.modules.size;
      const data = qrData.modules.data;
      let output = "";
      let hMargin = Array(size + opts.margin * 2 + 1).join(blocks.WW);
      hMargin = Array(opts.margin / 2 + 1).join(hMargin + "\n");
      const vMargin = Array(opts.margin + 1).join(blocks.WW);
      output += hMargin;
      for (let i = 0; i < size; i += 2) {
        output += vMargin;
        for (let j2 = 0; j2 < size; j2++) {
          const topModule = data[i * size + j2];
          const bottomModule = data[(i + 1) * size + j2];
          output += getBlockChar(topModule, bottomModule, blocks);
        }
        output += vMargin + "\n";
      }
      output += hMargin.slice(0, -1);
      if (typeof cb === "function") {
        cb(null, output);
      }
      return output;
    };
    exports$1.renderToFile = function renderToFile(path, qrData, options, cb) {
      if (typeof cb === "undefined") {
        cb = options;
        options = void 0;
      }
      const fs2 = require$$1;
      const utf82 = exports$1.render(qrData, options);
      fs2.writeFile(path, utf82, cb);
    };
  })(utf8);
  return utf8;
}
var terminal$1 = {};
var terminal = {};
var hasRequiredTerminal$1;
function requireTerminal$1() {
  if (hasRequiredTerminal$1) return terminal;
  hasRequiredTerminal$1 = 1;
  terminal.render = function(qrData, options, cb) {
    const size = qrData.modules.size;
    const data = qrData.modules.data;
    const black = "\x1B[40m  \x1B[0m";
    const white = "\x1B[47m  \x1B[0m";
    let output = "";
    const hMargin = Array(size + 3).join(white);
    const vMargin = Array(2).join(white);
    output += hMargin + "\n";
    for (let i = 0; i < size; ++i) {
      output += white;
      for (let j2 = 0; j2 < size; j2++) {
        output += data[i * size + j2] ? black : white;
      }
      output += vMargin + "\n";
    }
    output += hMargin + "\n";
    if (typeof cb === "function") {
      cb(null, output);
    }
    return output;
  };
  return terminal;
}
var terminalSmall = {};
var hasRequiredTerminalSmall;
function requireTerminalSmall() {
  if (hasRequiredTerminalSmall) return terminalSmall;
  hasRequiredTerminalSmall = 1;
  const backgroundWhite = "\x1B[47m";
  const backgroundBlack = "\x1B[40m";
  const foregroundWhite = "\x1B[37m";
  const foregroundBlack = "\x1B[30m";
  const reset = "\x1B[0m";
  const lineSetupNormal = backgroundWhite + foregroundBlack;
  const lineSetupInverse = backgroundBlack + foregroundWhite;
  const createPalette = function(lineSetup, foregroundWhite2, foregroundBlack2) {
    return {
      // 1 ... white, 2 ... black, 0 ... transparent (default)
      "00": reset + " " + lineSetup,
      "01": reset + foregroundWhite2 + "" + lineSetup,
      "02": reset + foregroundBlack2 + "" + lineSetup,
      10: reset + foregroundWhite2 + "" + lineSetup,
      11: " ",
      12: "",
      20: reset + foregroundBlack2 + "" + lineSetup,
      21: "",
      22: ""
    };
  };
  const mkCodePixel = function(modules, size, x2, y2) {
    const sizePlus = size + 1;
    if (x2 >= sizePlus || y2 >= sizePlus || y2 < -1 || x2 < -1) return "0";
    if (x2 >= size || y2 >= size || y2 < 0 || x2 < 0) return "1";
    const idx = y2 * size + x2;
    return modules[idx] ? "2" : "1";
  };
  const mkCode = function(modules, size, x2, y2) {
    return mkCodePixel(modules, size, x2, y2) + mkCodePixel(modules, size, x2, y2 + 1);
  };
  terminalSmall.render = function(qrData, options, cb) {
    const size = qrData.modules.size;
    const data = qrData.modules.data;
    const inverse = !!(options && options.inverse);
    const lineSetup = options && options.inverse ? lineSetupInverse : lineSetupNormal;
    const white = inverse ? foregroundBlack : foregroundWhite;
    const black = inverse ? foregroundWhite : foregroundBlack;
    const palette = createPalette(lineSetup, white, black);
    const newLine = reset + "\n" + lineSetup;
    let output = lineSetup;
    for (let y2 = -1; y2 < size + 1; y2 += 2) {
      for (let x2 = -1; x2 < size; x2++) {
        output += palette[mkCode(data, size, x2, y2)];
      }
      output += palette[mkCode(data, size, size, y2)] + newLine;
    }
    output += reset;
    if (typeof cb === "function") {
      cb(null, output);
    }
    return output;
  };
  return terminalSmall;
}
var hasRequiredTerminal;
function requireTerminal() {
  if (hasRequiredTerminal) return terminal$1;
  hasRequiredTerminal = 1;
  const big = requireTerminal$1();
  const small = requireTerminalSmall();
  terminal$1.render = function(qrData, options, cb) {
    if (options && options.small) {
      return small.render(qrData, options, cb);
    }
    return big.render(qrData, options, cb);
  };
  return terminal$1;
}
var svg = {};
var svgTag = {};
var hasRequiredSvgTag;
function requireSvgTag() {
  if (hasRequiredSvgTag) return svgTag;
  hasRequiredSvgTag = 1;
  const Utils = requireUtils();
  function getColorAttrib(color2, attrib) {
    const alpha2 = color2.a / 255;
    const str = attrib + '="' + color2.hex + '"';
    return alpha2 < 1 ? str + " " + attrib + '-opacity="' + alpha2.toFixed(2).slice(1) + '"' : str;
  }
  function svgCmd(cmd, x2, y2) {
    let str = cmd + x2;
    if (typeof y2 !== "undefined") str += " " + y2;
    return str;
  }
  function qrToPath(data, size, margin) {
    let path = "";
    let moveBy = 0;
    let newRow = false;
    let lineLength = 0;
    for (let i = 0; i < data.length; i++) {
      const col = Math.floor(i % size);
      const row = Math.floor(i / size);
      if (!col && !newRow) newRow = true;
      if (data[i]) {
        lineLength++;
        if (!(i > 0 && col > 0 && data[i - 1])) {
          path += newRow ? svgCmd("M", col + margin, 0.5 + row + margin) : svgCmd("m", moveBy, 0);
          moveBy = 0;
          newRow = false;
        }
        if (!(col + 1 < size && data[i + 1])) {
          path += svgCmd("h", lineLength);
          lineLength = 0;
        }
      } else {
        moveBy++;
      }
    }
    return path;
  }
  svgTag.render = function render(qrData, options, cb) {
    const opts = Utils.getOptions(options);
    const size = qrData.modules.size;
    const data = qrData.modules.data;
    const qrcodesize = size + opts.margin * 2;
    const bg = !opts.color.light.a ? "" : "<path " + getColorAttrib(opts.color.light, "fill") + ' d="M0 0h' + qrcodesize + "v" + qrcodesize + 'H0z"/>';
    const path = "<path " + getColorAttrib(opts.color.dark, "stroke") + ' d="' + qrToPath(data, size, opts.margin) + '"/>';
    const viewBox = 'viewBox="0 0 ' + qrcodesize + " " + qrcodesize + '"';
    const width = !opts.width ? "" : 'width="' + opts.width + '" height="' + opts.width + '" ';
    const svgTag2 = '<svg xmlns="http://www.w3.org/2000/svg" ' + width + viewBox + ' shape-rendering="crispEdges">' + bg + path + "</svg>\n";
    if (typeof cb === "function") {
      cb(null, svgTag2);
    }
    return svgTag2;
  };
  return svgTag;
}
var hasRequiredSvg;
function requireSvg() {
  if (hasRequiredSvg) return svg;
  hasRequiredSvg = 1;
  (function(exports$1) {
    const svgTagRenderer = requireSvgTag();
    exports$1.render = svgTagRenderer.render;
    exports$1.renderToFile = function renderToFile(path, qrData, options, cb) {
      if (typeof cb === "undefined") {
        cb = options;
        options = void 0;
      }
      const fs2 = require$$1;
      const svgTag2 = exports$1.render(qrData, options);
      const xmlStr = '<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">' + svgTag2;
      fs2.writeFile(path, xmlStr, cb);
    };
  })(svg);
  return svg;
}
var browser = {};
var canvas = {};
var hasRequiredCanvas;
function requireCanvas() {
  if (hasRequiredCanvas) return canvas;
  hasRequiredCanvas = 1;
  (function(exports$1) {
    const Utils = requireUtils();
    function clearCanvas(ctx, canvas2, size) {
      ctx.clearRect(0, 0, canvas2.width, canvas2.height);
      if (!canvas2.style) canvas2.style = {};
      canvas2.height = size;
      canvas2.width = size;
      canvas2.style.height = size + "px";
      canvas2.style.width = size + "px";
    }
    function getCanvasElement() {
      try {
        return document.createElement("canvas");
      } catch (e) {
        throw new Error("You need to specify a canvas element");
      }
    }
    exports$1.render = function render(qrData, canvas2, options) {
      let opts = options;
      let canvasEl = canvas2;
      if (typeof opts === "undefined" && (!canvas2 || !canvas2.getContext)) {
        opts = canvas2;
        canvas2 = void 0;
      }
      if (!canvas2) {
        canvasEl = getCanvasElement();
      }
      opts = Utils.getOptions(opts);
      const size = Utils.getImageWidth(qrData.modules.size, opts);
      const ctx = canvasEl.getContext("2d");
      const image = ctx.createImageData(size, size);
      Utils.qrToImageData(image.data, qrData, opts);
      clearCanvas(ctx, canvasEl, size);
      ctx.putImageData(image, 0, 0);
      return canvasEl;
    };
    exports$1.renderToDataURL = function renderToDataURL(qrData, canvas2, options) {
      let opts = options;
      if (typeof opts === "undefined" && (!canvas2 || !canvas2.getContext)) {
        opts = canvas2;
        canvas2 = void 0;
      }
      if (!opts) opts = {};
      const canvasEl = exports$1.render(qrData, canvas2, opts);
      const type = opts.type || "image/png";
      const rendererOpts = opts.rendererOpts || {};
      return canvasEl.toDataURL(type, rendererOpts.quality);
    };
  })(canvas);
  return canvas;
}
var hasRequiredBrowser;
function requireBrowser() {
  if (hasRequiredBrowser) return browser;
  hasRequiredBrowser = 1;
  const canPromise2 = requireCanPromise();
  const QRCode = requireQrcode();
  const CanvasRenderer = requireCanvas();
  const SvgRenderer = requireSvgTag();
  function renderCanvas(renderFunc, canvas2, text, opts, cb) {
    const args = [].slice.call(arguments, 1);
    const argsNum = args.length;
    const isLastArgCb = typeof args[argsNum - 1] === "function";
    if (!isLastArgCb && !canPromise2()) {
      throw new Error("Callback required as last argument");
    }
    if (isLastArgCb) {
      if (argsNum < 2) {
        throw new Error("Too few arguments provided");
      }
      if (argsNum === 2) {
        cb = text;
        text = canvas2;
        canvas2 = opts = void 0;
      } else if (argsNum === 3) {
        if (canvas2.getContext && typeof cb === "undefined") {
          cb = opts;
          opts = void 0;
        } else {
          cb = opts;
          opts = text;
          text = canvas2;
          canvas2 = void 0;
        }
      }
    } else {
      if (argsNum < 1) {
        throw new Error("Too few arguments provided");
      }
      if (argsNum === 1) {
        text = canvas2;
        canvas2 = opts = void 0;
      } else if (argsNum === 2 && !canvas2.getContext) {
        opts = text;
        text = canvas2;
        canvas2 = void 0;
      }
      return new Promise(function(resolve, reject) {
        try {
          const data = QRCode.create(text, opts);
          resolve(renderFunc(data, canvas2, opts));
        } catch (e) {
          reject(e);
        }
      });
    }
    try {
      const data = QRCode.create(text, opts);
      cb(null, renderFunc(data, canvas2, opts));
    } catch (e) {
      cb(e);
    }
  }
  browser.create = QRCode.create;
  browser.toCanvas = renderCanvas.bind(null, CanvasRenderer.render);
  browser.toDataURL = renderCanvas.bind(null, CanvasRenderer.renderToDataURL);
  browser.toString = renderCanvas.bind(null, function(data, _2, opts) {
    return SvgRenderer.render(data, opts);
  });
  return browser;
}
var hasRequiredServer;
function requireServer() {
  if (hasRequiredServer) return server;
  hasRequiredServer = 1;
  const canPromise2 = requireCanPromise();
  const QRCode = requireQrcode();
  const PngRenderer = requirePng();
  const Utf8Renderer = requireUtf8();
  const TerminalRenderer = requireTerminal();
  const SvgRenderer = requireSvg();
  function checkParams(text, opts, cb) {
    if (typeof text === "undefined") {
      throw new Error("String required as first argument");
    }
    if (typeof cb === "undefined") {
      cb = opts;
      opts = {};
    }
    if (typeof cb !== "function") {
      if (!canPromise2()) {
        throw new Error("Callback required as last argument");
      } else {
        opts = cb || {};
        cb = null;
      }
    }
    return {
      opts,
      cb
    };
  }
  function getTypeFromFilename(path) {
    return path.slice((path.lastIndexOf(".") - 1 >>> 0) + 2).toLowerCase();
  }
  function getRendererFromType(type) {
    switch (type) {
      case "svg":
        return SvgRenderer;
      case "txt":
      case "utf8":
        return Utf8Renderer;
      case "png":
      case "image/png":
      default:
        return PngRenderer;
    }
  }
  function getStringRendererFromType(type) {
    switch (type) {
      case "svg":
        return SvgRenderer;
      case "terminal":
        return TerminalRenderer;
      case "utf8":
      default:
        return Utf8Renderer;
    }
  }
  function render(renderFunc, text, params) {
    if (!params.cb) {
      return new Promise(function(resolve, reject) {
        try {
          const data = QRCode.create(text, params.opts);
          return renderFunc(data, params.opts, function(err, data2) {
            return err ? reject(err) : resolve(data2);
          });
        } catch (e) {
          reject(e);
        }
      });
    }
    try {
      const data = QRCode.create(text, params.opts);
      return renderFunc(data, params.opts, params.cb);
    } catch (e) {
      params.cb(e);
    }
  }
  server.create = QRCode.create;
  server.toCanvas = requireBrowser().toCanvas;
  server.toString = function toString(text, opts, cb) {
    const params = checkParams(text, opts, cb);
    const type = params.opts ? params.opts.type : void 0;
    const renderer = getStringRendererFromType(type);
    return render(renderer.render, text, params);
  };
  server.toDataURL = function toDataURL(text, opts, cb) {
    const params = checkParams(text, opts, cb);
    const renderer = getRendererFromType(params.opts.type);
    return render(renderer.renderToDataURL, text, params);
  };
  server.toBuffer = function toBuffer(text, opts, cb) {
    const params = checkParams(text, opts, cb);
    const renderer = getRendererFromType(params.opts.type);
    return render(renderer.renderToBuffer, text, params);
  };
  server.toFile = function toFile(path, text, opts, cb) {
    if (typeof path !== "string" || !(typeof text === "string" || typeof text === "object")) {
      throw new Error("Invalid argument");
    }
    if (arguments.length < 3 && !canPromise2()) {
      throw new Error("Too few arguments provided");
    }
    const params = checkParams(text, opts, cb);
    const type = params.opts.type || getTypeFromFilename(path);
    const renderer = getRendererFromType(type);
    const renderToFile = renderer.renderToFile.bind(null, path);
    return render(renderToFile, text, params);
  };
  server.toFileStream = function toFileStream(stream, text, opts) {
    if (arguments.length < 2) {
      throw new Error("Too few arguments provided");
    }
    const params = checkParams(text, opts, stream.emit.bind(stream, "error"));
    const renderer = getRendererFromType("png");
    const renderToFileStream = renderer.renderToFileStream.bind(null, stream);
    render(renderToFileStream, text, params);
  };
  return server;
}
var lib;
var hasRequiredLib;
function requireLib() {
  if (hasRequiredLib) return lib;
  hasRequiredLib = 1;
  lib = requireServer();
  return lib;
}
var libExports = requireLib();
const QRCodeLib = /* @__PURE__ */ getDefaultExportFromCjs(libExports);
function MockPaymentModal({ isOpen, onClose, orderNo, amount, productName, payUrl }) {
  const [step, setStep] = reactExports.useState("confirm");
  const [countdown, setCountdown] = reactExports.useState(300);
  const [agreed, setAgreed] = reactExports.useState(false);
  const [qrDataUrl, setQrDataUrl] = reactExports.useState("");
  reactExports.useEffect(() => {
    if (isOpen) {
      setStep("confirm");
      setCountdown(300);
      setAgreed(false);
      setQrDataUrl("");
    }
  }, [isOpen]);
  reactExports.useEffect(() => {
    if (step === "qr" && payUrl) {
      const fullUrl = window.location.origin + payUrl;
      QRCodeLib.toDataURL(fullUrl, {
        width: 200,
        margin: 2,
        color: { dark: "#000000", light: "#ffffff" }
      }).then((url) => setQrDataUrl(url)).catch((err) => console.error("QR Generation failed:", err));
    }
  }, [step, payUrl]);
  reactExports.useEffect(() => {
    if (step !== "qr") return;
    if (countdown <= 0) {
      setStep("failed");
      return;
    }
    const timer = setTimeout(() => setCountdown((c) => c - 1), 1e3);
    return () => clearTimeout(timer);
  }, [step, countdown]);
  const formatCountdown = (s) => {
    const m2 = Math.floor(s / 60);
    const sec = s % 60;
    return `${m2.toString().padStart(2, "0")}:${sec.toString().padStart(2, "0")}`;
  };
  const handleConfirm = () => {
    if (!agreed) return;
    setStep("qr");
  };
  const handleMockScan = () => {
    window.location.href = payUrl;
  };
  if (!isOpen) return null;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "fixed inset-0 z-[100] flex items-center justify-center p-4", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.div,
      {
        className: "absolute inset-0 bg-black/80 backdrop-blur-md",
        initial: { opacity: 0 },
        animate: { opacity: 1 },
        exit: { opacity: 0 },
        onClick: onClose
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        className: "bg-slate-900 border border-white/10 rounded-3xl p-8 w-full max-w-md relative z-10 shadow-2xl",
        initial: { scale: 0.9, opacity: 0 },
        animate: { scale: 1, opacity: 1 },
        exit: { scale: 0.9, opacity: 0 },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-6", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("h2", { className: "text-xl font-bold text-white flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(CreditCard, { className: "text-blue-400" }),
              step === "confirm" && "",
              step === "qr" && "",
              step === "success" && "",
              step === "failed" && ""
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("button", { onClick: onClose, className: "text-white/40 hover:text-white text-2xl", children: "" })
          ] }),
          step === "confirm" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/5 rounded-xl p-4 space-y-3", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between text-sm", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white/60", children: "" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white font-medium", children: productName })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between text-sm", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white/60", children: "" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white/40 font-mono text-xs", children: orderNo })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "border-t border-white/10 pt-3 flex justify-between", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white/60", children: "" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-2xl font-bold text-white", children: [
                  "",
                  (amount / 100).toFixed(2)
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start gap-3 bg-blue-500/10 border border-blue-500/20 rounded-xl p-4", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ShieldCheck, { className: "text-blue-400 flex-shrink-0", size: 20 }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-blue-400/80", children: " HMAC-SHA256 " })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("label", { className: "flex items-start gap-3 cursor-pointer group", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "input",
                {
                  type: "checkbox",
                  checked: agreed,
                  onChange: (e) => setAgreed(e.target.checked),
                  className: "mt-1 w-4 h-4 rounded border-white/20 bg-white/5 text-yellow-500 focus:ring-yellow-500"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-white/60 group-hover:text-white/80", children: "" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "button",
                {
                  onClick: onClose,
                  className: "py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white font-bold transition-colors",
                  children: ""
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "button",
                {
                  onClick: handleConfirm,
                  disabled: !agreed,
                  className: `
                                    py-3 rounded-xl font-bold transition-all
                                    ${agreed ? "bg-gradient-to-r from-blue-500 to-blue-400 text-white shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40" : "bg-white/5 text-white/20 cursor-not-allowed"}
                                `,
                  children: ""
                }
              )
            ] })
          ] }),
          step === "qr" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6 text-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative mx-auto w-52 h-52 bg-white rounded-xl p-2 flex items-center justify-center overflow-hidden", children: [
              qrDataUrl ? /* @__PURE__ */ jsxRuntimeExports.jsx("img", { src: qrDataUrl, alt: "Payment QR Code", className: "w-full h-full object-contain" }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center w-full h-full", children: /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, { size: 32, className: "text-slate-400 animate-spin" }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                motion.div,
                {
                  className: "absolute left-2 right-2 h-1 bg-green-500/60 rounded-full",
                  animate: { y: [-90, 90] },
                  transition: { repeat: Infinity, duration: 2, ease: "linear" }
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center gap-2 text-white/60", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { size: 16 }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: `font-mono font-bold ${countdown < 60 ? "text-red-400" : "text-white"}`, children: formatCountdown(countdown) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-white/40", children: "/" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "button",
              {
                onClick: handleMockScan,
                className: "w-full py-3 bg-green-500/20 hover:bg-green-500/30 text-green-400 font-bold rounded-xl border border-green-500/30 transition-colors",
                children: "  ()"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx("button", { onClick: onClose, className: "text-sm text-white/40 hover:text-white underline", children: "" })
          ] }),
          step === "success" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              motion.div,
              {
                initial: { scale: 0 },
                animate: { scale: 1 },
                className: "w-20 h-20 mx-auto bg-green-500/20 rounded-full flex items-center justify-center text-green-400 mb-6",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { size: 40 })
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-xl font-bold text-white mb-2", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-white/60 mb-6", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "button",
              {
                onClick: onClose,
                className: "px-8 py-3 bg-white text-black font-bold rounded-xl",
                children: ""
              }
            )
          ] }),
          step === "failed" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              motion.div,
              {
                initial: { scale: 0 },
                animate: { scale: 1 },
                className: "w-20 h-20 mx-auto bg-red-500/20 rounded-full flex items-center justify-center text-red-400 mb-6",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, { size: 40 })
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-xl font-bold text-white mb-2", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-white/60 mb-6", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "button",
              {
                onClick: onClose,
                className: "px-8 py-3 bg-white/10 hover:bg-white/20 text-white font-bold rounded-xl",
                children: ""
              }
            )
          ] })
        ]
      }
    )
  ] });
}
async function getAllTiers(db) {
  const result = await db.prepare("SELECT * FROM membership_tiers WHERE is_active = 1 ORDER BY sort_order").all();
  return result.results || [];
}
async function getTierById(db, tierId) {
  return queryFirst(
    db,
    "SELECT * FROM membership_tiers WHERE id = ?",
    tierId
  );
}
function calculateEndDate(startDate, period) {
  const date = new Date(startDate * 1e3);
  switch (period) {
    case "monthly":
      date.setMonth(date.getMonth() + 1);
      break;
    case "quarterly":
      date.setMonth(date.getMonth() + 3);
      break;
    case "yearly":
      date.setFullYear(date.getFullYear() + 1);
      break;
  }
  return Math.floor(date.getTime() / 1e3);
}
const RECHARGE_PACKAGES = [
  { id: "pkg_6", coins: 60, price: 600, bonus: 0, label: "6" },
  { id: "pkg_12", coins: 130, price: 1200, bonus: 10, label: "12" },
  { id: "pkg_30", coins: 350, price: 3e3, bonus: 50, label: "30" },
  { id: "pkg_61", coins: 810, price: 6100, bonus: 120, label: "61" },
  // 
  { id: "pkg_68", coins: 880, price: 6800, bonus: 120, label: "68" },
  { id: "pkg_128", coins: 1680, price: 12800, bonus: 300, label: "128" },
  { id: "pkg_328", coins: 4280, price: 32800, bonus: 900, label: "328" },
  { id: "pkg_648", coins: 8880, price: 64800, bonus: 2e3, label: "648" }
];
const AI_DAILY_LIMITS = {
  summary: 100,
  search: 200,
  writing: 50,
  chat: 500,
  recommend: 300,
  moderate: 1e3,
  // Default fallback
  default: 100
};
async function loader$p({
  request,
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken(request);
  const {
    valid,
    user
  } = await verifySession$1(token, anime_db);
  if (!valid || !user) {
    return {
      loggedIn: false,
      user: null,
      stats: {
        coins: 0
      },
      shopItems: [],
      tiers: [],
      rechargePackages: []
    };
  }
  const [coins, shopItems, tiers] = await Promise.all([getUserCoins(anime_db, user.id), anime_db.prepare("SELECT * FROM shop_items WHERE is_active = 1 ORDER BY sort_order").all(), getAllTiers(anime_db)]);
  const rechargePackages = RECHARGE_PACKAGES;
  return {
    loggedIn: true,
    user: {
      ...user,
      avatar_url: user.avatar_url || `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`
    },
    stats: {
      coins
    },
    shopItems: shopItems.results,
    tiers,
    rechargePackages
  };
}
const shop = withComponentProps(function ShopPage() {
  const loaderData = useLoaderData();
  const {
    user: clientUser
  } = useUser();
  const [searchParams] = useSearchParams();
  const fetcher = useFetcher();
  const user = loaderData.user || clientUser;
  const stats = {
    coins: loaderData.stats.coins,
    // Use server data for accuracy
    level: user?.level || 1,
    exp: user?.exp || 0,
    maxExp: (user?.level || 1) * 100
  };
  const [activeTab, setActiveTab] = reactExports.useState(() => {
    const tabParam = searchParams.get("tab");
    if (tabParam === "recharge" || tabParam === "membership") return tabParam;
    return "goods";
  });
  const [selectedItem, setSelectedItem] = reactExports.useState(null);
  const [paymentModalOpen, setPaymentModalOpen] = reactExports.useState(false);
  const [paymentStep, setPaymentStep] = reactExports.useState("confirm");
  const [payUrl, setPayUrl] = reactExports.useState("");
  const [orderNo, setOrderNo] = reactExports.useState("");
  const [orderAmount, setOrderAmount] = reactExports.useState(0);
  const [orderProductName, setOrderProductName] = reactExports.useState("");
  const [isSubmitting, setIsSubmitting] = reactExports.useState(false);
  const lastFetcherData = reactExports.useRef(null);
  const handlePurchase = (item, type) => {
    if (!loaderData.loggedIn) {
      if (confirm("")) {
        window.location.href = `/login?redirect=${encodeURIComponent(window.location.pathname + window.location.search)}`;
      }
      return;
    }
    setSelectedItem({
      ...item,
      type
    });
    if (type === "goods") {
      setPaymentStep("confirm");
      setPaymentModalOpen(true);
    } else if (type === "recharge") {
      fetcher.submit({
        packageId: item.id
      }, {
        method: "post",
        action: "/api/wallet/recharge"
      });
    } else if (type === "membership") {
      fetcher.submit({
        action: "subscribe",
        tierId: item.id,
        period: "monthly"
      }, {
        method: "post",
        action: "/api/subscription"
      });
    }
  };
  const confirmPayment = () => {
    setPaymentStep("processing");
    if (selectedItem.type === "goods") {
      fetcher.submit({
        itemId: selectedItem.id
      }, {
        method: "post",
        action: "/api/shop/purchase"
      });
    }
  };
  reactExports.useEffect(() => {
    if (fetcher.state === "idle" && fetcher.data && fetcher.data !== lastFetcherData.current) {
      lastFetcherData.current = fetcher.data;
      setIsSubmitting(false);
      if (fetcher.data.success) {
        if (selectedItem?.type === "goods") {
          setPaymentStep("success");
          setTimeout(() => {
            setPaymentModalOpen(false);
            window.location.reload();
          }, 2e3);
        } else if (fetcher.data.payUrl && fetcher.data.order) {
          setPayUrl(fetcher.data.payUrl);
          setOrderNo(fetcher.data.order.order_no);
          setOrderAmount(fetcher.data.order.amount);
          setOrderProductName(fetcher.data.order.product_name);
          setPaymentModalOpen(true);
          setPaymentStep("confirm");
        }
      } else if (fetcher.data.error) {
        alert(fetcher.data.error);
        setPaymentModalOpen(false);
      }
    }
  }, [fetcher.state, fetcher.data, selectedItem?.type]);
  const showSuccess = searchParams.get("status") === "success";
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ClientOnly, {
      children: () => /* @__PURE__ */ jsxRuntimeExports.jsx(StatusHUD, {
        user: {
          avatar: user?.avatar_url,
          uid: user ? `UID-${user.id.toString().padStart(6, "0")}` : "UID-000000",
          level: stats.level,
          name: user?.username || "Traveler",
          exp: stats.exp,
          maxExp: stats.maxExp
        },
        stats: {
          coins: stats.coins
        }
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsx(NavMenu, {}), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "absolute inset-0 flex items-center justify-center pl-24 pr-8 pt-24 pb-8 pointer-events-none",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "w-full h-full max-w-6xl pointer-events-auto flex flex-col gap-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex items-center justify-between",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h1", {
            className: "text-3xl font-bold text-white font-display tracking-wider flex items-center gap-3",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ShoppingBag, {
              className: "text-yellow-500"
            }), "SUPPLY DEPOT"]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "flex bg-black/40 backdrop-blur-md rounded-xl p-1 border border-white/10",
            children: [{
              id: "goods",
              label: "",
              icon: Star
            }, {
              id: "recharge",
              label: "",
              icon: Zap
            }, {
              id: "membership",
              label: "",
              icon: Crown
            }].map((tab) => /* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
              onClick: () => setActiveTab(tab.id),
              className: `
                                        flex items-center gap-2 px-6 py-2 rounded-lg text-sm font-bold transition-all
                                        ${activeTab === tab.id ? "bg-white text-slate-900 shadow-lg" : "text-white/80 hover:text-white hover:bg-white/10"}
                                    `,
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(tab.icon, {
                size: 16
              }), tab.label]
            }, tab.id))
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
          children: showSuccess && /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
            initial: {
              opacity: 0,
              y: -20
            },
            animate: {
              opacity: 1,
              y: 0
            },
            exit: {
              opacity: 0
            },
            className: "bg-green-500/20 border border-green-500/30 text-green-400 px-4 py-3 rounded-xl flex items-center gap-3 font-bold",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, {
              size: 20
            }), ""]
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "flex-1 bg-black/40 backdrop-blur-xl border border-white/10 rounded-3xl p-8 overflow-y-auto custom-scrollbar",
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs(AnimatePresence, {
            mode: "wait",
            children: [activeTab === "goods" && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
              initial: {
                opacity: 0,
                x: 20
              },
              animate: {
                opacity: 1,
                x: 0
              },
              exit: {
                opacity: 0,
                x: -20
              },
              className: "grid grid-cols-2 md:grid-cols-4 gap-6",
              children: loaderData.shopItems.map((item) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "group bg-white/5 border border-white/10 rounded-2xl p-4 hover:bg-white/10 transition-all hover:border-white/30 flex flex-col",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "aspect-square rounded-xl bg-black/20 mb-4 flex items-center justify-center relative overflow-hidden",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                    src: item.image_url,
                    alt: item.name,
                    aspectRatio: "square",
                    className: "w-full h-full object-contain group-hover:scale-110 transition-transform duration-500"
                  }), item.is_featured === 1 && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "absolute top-2 right-2 bg-yellow-500 text-black text-[10px] font-bold px-2 py-0.5 rounded-full z-10",
                    children: "HOT"
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                  className: "font-bold text-white mb-1",
                  children: item.name
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: "text-xs text-white/70 mb-4 line-clamp-2 flex-1",
                  children: item.description
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
                  onClick: () => handlePurchase(item, "goods"),
                  className: "w-full py-2 bg-white/10 hover:bg-white text-white hover:text-black rounded-xl font-bold text-sm transition-colors flex items-center justify-center gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: item.price_coins
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx(Star, {
                    size: 12,
                    className: "fill-current"
                  })]
                })]
              }, item.id))
            }, "goods"), activeTab === "recharge" && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
              initial: {
                opacity: 0,
                x: 20
              },
              animate: {
                opacity: 1,
                x: 0
              },
              exit: {
                opacity: 0,
                x: -20
              },
              className: "grid grid-cols-2 md:grid-cols-3 gap-6",
              children: loaderData.rechargePackages.map((pkg) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "group bg-gradient-to-br from-yellow-500/10 to-orange-500/5 border border-yellow-500/20 rounded-2xl p-6 hover:border-yellow-500/50 transition-all flex flex-col items-center text-center relative overflow-hidden",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "absolute inset-0 bg-yellow-500/5 opacity-0 group-hover:opacity-100 transition-opacity"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "w-16 h-16 rounded-full bg-yellow-500/20 flex items-center justify-center mb-4 text-yellow-400 group-hover:scale-110 transition-transform",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(Zap, {
                    size: 32
                  })
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                  className: "text-2xl font-bold text-white mb-1 font-mono",
                  children: pkg.coins
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
                  className: "text-xs text-yellow-500/80 mb-6 font-bold",
                  children: ["+ ", pkg.bonus, " BONUS"]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
                  onClick: () => handlePurchase(pkg, "recharge"),
                  className: "w-full py-3 bg-yellow-500 hover:bg-yellow-400 text-black rounded-xl font-bold transition-colors",
                  children: [" ", (pkg.price / 100).toFixed(0)]
                })]
              }, pkg.id))
            }, "recharge"), activeTab === "membership" && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
              initial: {
                opacity: 0,
                x: 20
              },
              animate: {
                opacity: 1,
                x: 0
              },
              exit: {
                opacity: 0,
                x: -20
              },
              className: "grid grid-cols-1 md:grid-cols-3 gap-8",
              children: loaderData.tiers.filter((t) => t.name !== "free").map((tier) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: `
                                            relative rounded-3xl p-8 border flex flex-col
                                            ${tier.name === "svip" ? "bg-gradient-to-b from-slate-900 to-black border-yellow-500/50 shadow-[0_0_30px_rgba(234,179,8,0.1)]" : "bg-black/40 border-white/10"}
                                        `,
                children: [tier.name === "svip" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-yellow-600 to-yellow-400 text-black text-xs font-bold px-4 py-1 rounded-full shadow-lg flex items-center gap-1",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Crown, {
                    size: 12
                  }), " MOST POPULAR"]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "text-center mb-8",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                    className: `text-2xl font-bold mb-2 ${tier.name === "svip" ? "text-yellow-400" : "text-white"}`,
                    children: tier.display_name
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "text-3xl font-bold text-white font-mono",
                    children: ["", (tier.price_monthly / 100).toFixed(0), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      className: "text-sm text-white/40 font-normal",
                      children: "/mo"
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "space-y-4 flex-1 mb-8",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex items-center gap-3 text-sm text-white/80",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, {
                      size: 16,
                      className: "text-green-400"
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                      children: [tier.name === "svip" ? "" : "50", " AI "]
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex items-center gap-3 text-sm text-white/80",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, {
                      size: 16,
                      className: "text-green-400"
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                      children: [tier.name === "svip" ? "2.0x" : "1.5x", " "]
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex items-center gap-3 text-sm text-white/80",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, {
                      size: 16,
                      className: "text-green-400"
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), tier.name === "svip" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex items-center gap-3 text-sm text-white/80",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, {
                      size: 16,
                      className: "text-green-400"
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                  onClick: () => handlePurchase(tier, "membership"),
                  className: `
                                                    w-full py-4 rounded-xl font-bold transition-all
                                                    ${tier.name === "svip" ? "bg-gradient-to-r from-yellow-600 to-yellow-400 text-black hover:shadow-[0_0_20px_rgba(234,179,8,0.4)]" : "bg-white text-black hover:bg-white/90"}
                                                `,
                  children: ""
                })]
              }, tier.id))
            }, "membership")]
          })
        })]
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
      children: paymentModalOpen && selectedItem?.type === "goods" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "fixed inset-0 z-[100] flex items-center justify-center p-4",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: "absolute inset-0 bg-black/80 backdrop-blur-md",
          initial: {
            opacity: 0
          },
          animate: {
            opacity: 1
          },
          exit: {
            opacity: 0
          },
          onClick: () => setPaymentModalOpen(false)
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          className: "bg-slate-900 border border-white/10 rounded-3xl p-8 w-full max-w-md relative z-10 shadow-2xl",
          initial: {
            scale: 0.9,
            opacity: 0
          },
          animate: {
            scale: 1,
            opacity: 1
          },
          exit: {
            scale: 0.9,
            opacity: 0
          },
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h2", {
            className: "text-2xl font-bold text-white mb-6 flex items-center gap-3",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CreditCard, {
              className: "text-blue-400"
            }), paymentStep === "confirm" ? "" : paymentStep === "processing" ? "..." : ""]
          }), paymentStep === "confirm" && selectedItem && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "space-y-6",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "bg-white/5 rounded-xl p-4 flex items-center gap-4",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "w-16 h-16 bg-black/40 rounded-lg flex items-center justify-center overflow-hidden",
                children: selectedItem.image_url ? /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                  src: selectedItem.image_url,
                  alt: selectedItem.name,
                  className: "w-full h-full object-cover"
                }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Zap, {
                  className: "text-yellow-500"
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "font-bold text-white",
                  children: selectedItem.name || selectedItem.display_name || ` ${selectedItem.coins} `
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-sm text-white/80",
                  children: selectedItem.description || ""
                })]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex justify-between items-center text-sm text-white/80 py-4 border-y border-white/10",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-xl font-bold text-white",
                children: selectedItem.type === "goods" ? `${selectedItem.price_coins} ` : ` ${(selectedItem.price || selectedItem.price_monthly) / 100}`
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "grid grid-cols-2 gap-4",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                onClick: () => setPaymentModalOpen(false),
                className: "py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white font-bold transition-colors",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                onClick: confirmPayment,
                className: "py-3 rounded-xl bg-blue-500 hover:bg-blue-400 text-white font-bold transition-colors shadow-lg shadow-blue-500/20",
                children: ""
              })]
            })]
          }), paymentStep === "processing" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex flex-col items-center justify-center py-12",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, {
              size: 48,
              className: "text-blue-500 animate-spin mb-4"
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-white/60",
              children: "..."
            })]
          }), paymentStep === "success" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex flex-col items-center justify-center py-8",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center text-green-400 mb-4",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, {
                size: 32
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
              className: "text-xl font-bold text-white mb-2",
              children: "!"
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-white/80 text-center mb-6",
              children: ""
            })]
          })]
        })]
      })
    }), payUrl && /* @__PURE__ */ jsxRuntimeExports.jsx(MockPaymentModal, {
      isOpen: paymentModalOpen && (selectedItem?.type === "recharge" || selectedItem?.type === "membership"),
      onClose: () => {
        setPaymentModalOpen(false);
        setPayUrl("");
      },
      orderNo,
      amount: orderAmount,
      productName: orderProductName,
      payUrl
    })]
  });
});
const route22 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: shop,
  loader: loader$p
}, Symbol.toStringTag, { value: "Module" }));
const privileges = [
  { name: " AI ", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(MessageCircle, { size: 16 }), free: 3, vip: 50, svip: "" },
  { name: "", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Zap, { size: 16 }), free: "1x", vip: "1.5x", svip: "2x" },
  { name: "", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { size: 16 }), free: false, vip: true, svip: true },
  { name: "", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Download, { size: 16 }), free: false, vip: true, svip: true },
  { name: "", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Palette, { size: 16 }), free: false, vip: true, svip: true },
  { name: "", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Sparkles, { size: 16 }), free: false, vip: true, svip: true },
  { name: "", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Sparkles, { size: 16 }), free: false, vip: false, svip: true },
  { name: "", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { size: 16 }), free: false, vip: false, svip: true },
  { name: "", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Crown, { size: 16 }), free: false, vip: false, svip: true }
];
function renderValue(value) {
  if (value === true) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Check, { size: 14, className: "text-green-400" }) });
  }
  if (value === false) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-6 h-6 rounded-full bg-white/5 flex items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { size: 14, className: "text-white/20" }) });
  }
  if (value === "") {
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-1 text-yellow-400 font-bold", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Infinity$1, { size: 16 }),
      " "
    ] });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-bold text-white", children: value });
}
function PrivilegeComparisonTable() {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full overflow-x-auto", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("table", { className: "w-full text-sm", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("thead", { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", { className: "border-b border-white/10", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("th", { className: "text-left py-4 px-4 text-white/60 font-medium", children: "" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("th", { className: "text-center py-4 px-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-white/60 font-medium", children: "" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-white/30", children: "" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("th", { className: "text-center py-4 px-4 bg-gradient-to-b from-blue-500/10 to-transparent rounded-t-xl", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-blue-400 font-bold", children: "VIP" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-blue-400/60", children: "19.9/" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("th", { className: "text-center py-4 px-4 bg-gradient-to-b from-yellow-500/10 to-transparent rounded-t-xl relative", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-500 text-black text-[10px] font-bold px-2 py-0.5 rounded-full", children: "" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-yellow-400 font-bold flex items-center justify-center gap-1", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Crown, { size: 14 }),
          " SVIP"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-yellow-400/60", children: "39.9/" })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("tbody", { children: privileges.map((privilege, index2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.tr,
      {
        initial: { opacity: 0, x: -10 },
        animate: { opacity: 1, x: 0 },
        transition: { delay: index2 * 0.05 },
        className: "border-b border-white/5 hover:bg-white/5 transition-colors",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("td", { className: "py-4 px-4 text-white/80 flex items-center gap-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white/40", children: privilege.icon }),
            privilege.name
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "py-4 px-4 text-center", children: renderValue(privilege.free) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "py-4 px-4 text-center bg-blue-500/5", children: renderValue(privilege.vip) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "py-4 px-4 text-center bg-yellow-500/5", children: renderValue(privilege.svip) })
        ]
      },
      privilege.name
    )) })
  ] }) });
}
async function createSubscription(db, params) {
  const subRepo = new SubscriptionRepository(db);
  const now2 = Math.floor(Date.now() / 1e3);
  const endDate = calculateEndDate(now2, params.period);
  const notifyDate = endDate - 3 * 24 * 60 * 60;
  try {
    const existing = await subRepo.findActiveByUserId(params.userId);
    if (existing) {
      return upgradeSubscription(db, existing, params.tierId, params.period);
    }
    const subscription = await subRepo.create({
      user_id: params.userId,
      tier_id: params.tierId,
      period: params.period,
      status: "active",
      start_date: now2,
      end_date: endDate,
      auto_renew: 1,
      next_notify_at: notifyDate
    });
    return { success: true, subscription };
  } catch (error) {
    console.error("Create subscription error:", error);
    return { success: false, error: "" };
  }
}
async function upgradeSubscription(db, existing, newTierId, newPeriod) {
  const subRepo = new SubscriptionRepository(db);
  const now2 = Math.floor(Date.now() / 1e3);
  const isUpgrade = newTierId > existing.tier_id;
  const startDate = isUpgrade ? now2 : existing.end_date;
  const endDate = calculateEndDate(startDate, newPeriod);
  const notifyDate = endDate - 3 * 24 * 60 * 60;
  try {
    let updatedSub = null;
    if (isUpgrade) {
      updatedSub = await subRepo.update(existing.id, {
        tier_id: newTierId,
        period: newPeriod,
        end_date: endDate,
        next_notify_at: notifyDate,
        updated_at: now2
      });
    } else {
      updatedSub = await subRepo.update(existing.id, {
        end_date: endDate,
        next_notify_at: notifyDate,
        updated_at: now2
      });
    }
    if (!updatedSub) throw new Error("Update failed");
    return { success: true, subscription: updatedSub };
  } catch (error) {
    console.error("Upgrade subscription error:", error);
    return { success: false, error: "" };
  }
}
async function cancelSubscription(db, userId, reason) {
  const subRepo = new SubscriptionRepository(db);
  try {
    const sub = await subRepo.findActiveByUserId(userId);
    if (!sub) return { success: false, error: "" };
    await subRepo.update(sub.id, {
      status: "cancelled",
      //  status  update  update  status 
      cancel_reason: reason
    });
    return { success: true };
  } catch (error) {
    console.error("Cancel subscription error:", error);
    return { success: false, error: "" };
  }
}
async function resumeAutoRenew(db, userId) {
  const subRepo = new SubscriptionRepository(db);
  const now2 = Math.floor(Date.now() / 1e3);
  try {
    const sub = await subRepo.findActiveByUserId(userId);
    if (!sub) return { success: false, error: "" };
    await subRepo.update(sub.id, {
      auto_renew: 1,
      cancelled_at: null,
      //  interface  number | nullPartial 
      cancel_reason: null,
      updated_at: now2
    });
    return { success: true };
  } catch (error) {
    console.error("Resume auto renew error:", error);
    return { success: false, error: "" };
  }
}
async function getUserSubscription(db, userId) {
  const subRepo = new SubscriptionRepository(db);
  return subRepo.findWithTierInfo(userId);
}
const subscription_server = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  cancelSubscription,
  createSubscription,
  getUserSubscription,
  resumeAutoRenew
}, Symbol.toStringTag, { value: "Module" }));
async function loader$o({
  request,
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken(request);
  const {
    valid,
    user
  } = await verifySession$1(token, anime_db);
  if (!valid || !user) {
    return {
      loggedIn: false,
      user: null,
      stats: {
        coins: 0
      },
      subscription: null,
      tiers: [],
      paymentHistory: []
    };
  }
  const [coins, subscription, tiers, paymentHistoryResult] = await Promise.all([getUserCoins(anime_db, user.id), getUserSubscription(anime_db, user.id), getAllTiers(anime_db), anime_db.prepare(`
            SELECT order_no, amount, product_name, status, paid_at, created_at 
            FROM payment_orders 
            WHERE user_id = ? 
            ORDER BY created_at DESC 
            LIMIT 10
        `).bind(user.id).all()]);
  return {
    loggedIn: true,
    user: {
      ...user,
      avatar_url: user.avatar_url || `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`
    },
    stats: {
      coins
    },
    subscription,
    tiers,
    paymentHistory: paymentHistoryResult.results || []
  };
}
const user_membership = withComponentProps(function MembershipPage() {
  const loaderData = useLoaderData();
  const {
    user: clientUser
  } = useUser();
  const fetcher = useFetcher();
  const user = loaderData.user || clientUser;
  const stats = {
    coins: loaderData.stats.coins,
    level: user?.level || 1,
    exp: user?.exp || 0,
    maxExp: (user?.level || 1) * 100
  };
  const subscription = loaderData.subscription;
  const isSubscribed = subscription && subscription.status === "active";
  const formatDate = (ts) => {
    if (!ts) return "N/A";
    return new Date(ts * 1e3).toLocaleDateString("zh-CN", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  const daysRemaining = subscription?.end_date ? Math.max(0, Math.ceil((subscription.end_date * 1e3 - Date.now()) / (1e3 * 60 * 60 * 24))) : 0;
  const handleCancelAutoRenew = () => {
    if (!confirm("")) return;
    fetcher.submit({
      action: "cancel",
      reason: ""
    }, {
      method: "post",
      action: "/api/subscription"
    });
  };
  const handleResumeAutoRenew = () => {
    fetcher.submit({
      action: "resume"
    }, {
      method: "post",
      action: "/api/subscription"
    });
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ClientOnly, {
      children: () => /* @__PURE__ */ jsxRuntimeExports.jsx(StatusHUD, {
        user: {
          avatar: user?.avatar_url,
          uid: user ? `UID-${user.id.toString().padStart(6, "0")}` : "UID-000000",
          level: stats.level,
          name: user?.username || "Traveler",
          exp: stats.exp,
          maxExp: stats.maxExp
        },
        stats: {
          coins: stats.coins
        }
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsx(NavMenu, {}), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "absolute inset-0 flex items-center justify-center pl-24 pr-8 pt-24 pb-8 pointer-events-none",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "w-full h-full max-w-6xl pointer-events-auto flex flex-col gap-6 overflow-y-auto custom-scrollbar",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex items-center justify-between",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h1", {
            className: "text-3xl font-bold text-white font-display tracking-wider flex items-center gap-3",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Crown, {
              className: "text-yellow-500"
            }), ""]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
            to: "/shop?tab=membership",
            className: "px-6 py-2 bg-gradient-to-r from-yellow-600 to-yellow-400 text-black font-bold rounded-xl hover:shadow-[0_0_20px_rgba(234,179,8,0.4)] transition-all flex items-center gap-2",
            children: [isSubscribed ? "/" : "", /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronRight, {
              size: 16
            })]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          className: `
                            rounded-3xl p-8 border relative overflow-hidden
                            ${isSubscribed ? "bg-gradient-to-br from-yellow-500/10 to-orange-500/5 border-yellow-500/30" : "bg-black/40 border-white/10"}
                        `,
          children: [isSubscribed && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "absolute top-0 right-0 w-64 h-64 bg-yellow-500/10 rounded-full blur-3xl pointer-events-none"
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "relative z-10 grid grid-cols-1 md:grid-cols-3 gap-8",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: `
                                    w-20 h-20 rounded-2xl flex items-center justify-center
                                    ${isSubscribed ? "bg-yellow-500/20 text-yellow-400" : "bg-white/10 text-white/40"}
                                `,
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(Crown, {
                  size: 40
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-sm text-white/60 mb-1",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: `text-2xl font-bold ${isSubscribed ? "text-yellow-400" : "text-white"}`,
                  children: subscription?.display_name || ""
                })]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "w-20 h-20 rounded-2xl bg-white/10 flex items-center justify-center text-white/40",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, {
                  size: 32
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-sm text-white/60 mb-1",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-xl font-bold text-white",
                  children: isSubscribed ? formatDate(subscription.end_date) : ""
                }), isSubscribed && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: `text-xs mt-1 ${daysRemaining <= 7 ? "text-red-400" : "text-white/40"}`,
                  children: [" ", daysRemaining, " "]
                })]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "w-20 h-20 rounded-2xl bg-white/10 flex items-center justify-center text-white/40",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(RefreshCw, {
                  size: 32
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-sm text-white/60 mb-1",
                  children: ""
                }), isSubscribed ? subscription.auto_renew ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "flex items-center gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "text-green-400 font-bold flex items-center gap-1",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, {
                      size: 16
                    }), " "]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                    onClick: handleCancelAutoRenew,
                    className: "text-xs text-white/40 hover:text-red-400 underline ml-2",
                    children: ""
                  })]
                }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "flex items-center gap-2",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "text-white/40 font-bold flex items-center gap-1",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, {
                      size: 16
                    }), " "]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                    onClick: handleResumeAutoRenew,
                    className: "text-xs text-yellow-400 hover:text-yellow-300 underline ml-2",
                    children: ""
                  })]
                }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-white/40",
                  children: ""
                })]
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.1
          },
          className: "bg-black/40 backdrop-blur-xl border border-white/10 rounded-3xl p-8",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h2", {
            className: "text-xl font-bold text-white mb-6 flex items-center gap-2",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ShieldCheck, {
              className: "text-blue-400"
            }), ""]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(PrivilegeComparisonTable, {})]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          initial: {
            opacity: 0,
            y: 20
          },
          animate: {
            opacity: 1,
            y: 0
          },
          transition: {
            delay: 0.2
          },
          className: "bg-black/40 backdrop-blur-xl border border-white/10 rounded-3xl p-8",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h2", {
            className: "text-xl font-bold text-white mb-6 flex items-center gap-2",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(History, {
              className: "text-purple-400"
            }), ""]
          }), loaderData.paymentHistory.length > 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("table", {
              className: "w-full text-sm",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("thead", {
                children: /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", {
                  className: "border-b border-white/10 text-white/60",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                    className: "text-left py-3 px-4",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                    className: "text-left py-3 px-4",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                    className: "text-right py-3 px-4",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                    className: "text-center py-3 px-4",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("th", {
                    className: "text-right py-3 px-4",
                    children: ""
                  })]
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("tbody", {
                children: loaderData.paymentHistory.map((order) => /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", {
                  className: "border-b border-white/5 hover:bg-white/5",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-3 px-4 font-mono text-xs text-white/60",
                    children: order.order_no
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-3 px-4 text-white",
                    children: order.product_name
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("td", {
                    className: "py-3 px-4 text-right text-white font-bold",
                    children: ["", (order.amount / 100).toFixed(2)]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-3 px-4 text-center",
                    children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      className: `
                                                        px-2 py-0.5 rounded-full text-xs font-bold
                                                        ${order.status === "paid" ? "bg-green-500/20 text-green-400" : ""}
                                                        ${order.status === "pending" ? "bg-yellow-500/20 text-yellow-400" : ""}
                                                        ${order.status === "failed" ? "bg-red-500/20 text-red-400" : ""}
                                                    `,
                      children: order.status === "paid" ? "" : order.status === "pending" ? "" : order.status
                    })
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("td", {
                    className: "py-3 px-4 text-right text-white/40 text-xs",
                    children: formatDate(order.paid_at || order.created_at)
                  })]
                }, order.order_no))
              })]
            })
          }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "text-center py-12 text-white/40",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(CreditCard, {
              size: 48,
              className: "mx-auto mb-4 opacity-20"
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              children: ""
            })]
          })]
        })]
      })
    })]
  });
});
const route23 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: user_membership,
  loader: loader$o
}, Symbol.toStringTag, { value: "Module" }));
async function loader$n({
  request,
  context
}) {
  const sessionId = request.headers.get("Cookie")?.match(/admin_session=([^;]+)/)?.[1];
  if (sessionId) {
    const {
      getDBSafe
    } = await import("./db-DVeXv2KN.js");
    const db = getDBSafe(context);
    if (db) {
      try {
        const session = await db.prepare("SELECT * FROM admin_sessions WHERE token = ? AND expires_at > datetime('now')").bind(sessionId).first();
        if (session) {
          throw redirect("/admin");
        }
      } catch (e) {
        if (e instanceof Response) throw e;
      }
    }
  }
  return null;
}
async function action$p({
  request,
  context
}) {
  const formData = await request.formData();
  const username = formData.get("username");
  const password = formData.get("password");
  if (!username || !password) {
    return {
      success: false,
      error: ""
    };
  }
  const {
    getDBSafe
  } = await import("./db-DVeXv2KN.js");
  const db = getDBSafe(context);
  if (!db) {
    console.error("[] ");
    return {
      success: false,
      error: ""
    };
  }
  try {
    const admin2 = await db.prepare("SELECT * FROM admins WHERE username = ?").bind(username).first();
    if (!admin2) {
      return {
        success: false,
        error: ""
      };
    }
    const {
      verifyPassword: verifyPassword2
    } = await Promise.resolve().then(() => crypto_server);
    const passwordValid = await verifyPassword2(password, admin2.password_hash);
    if (!passwordValid) {
      return {
        success: false,
        error: ""
      };
    }
    const token = crypto.randomUUID();
    const expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3).toISOString();
    await db.prepare("INSERT INTO admin_sessions (admin_id, token, expires_at) VALUES (?, ?, ?)").bind(admin2.id, token, expiresAt).run();
    const isProduction = !request.url.includes("localhost");
    throw redirect("/admin", {
      headers: {
        "Set-Cookie": `admin_session=${token}; HttpOnly; Path=/; Max-Age=${7 * 24 * 60 * 60}; SameSite=Strict${isProduction ? "; Secure" : ""}`
      }
    });
  } catch (e) {
    if (e instanceof Response) throw e;
    console.error("Login error:", e);
    return {
      success: false,
      error: ""
    };
  }
}
const admin_login = withComponentProps(function AdminLogin() {
  const actionData = useActionData();
  const navigation = useNavigation();
  const [showPassword, setShowPassword] = reactExports.useState(false);
  const [loginSuccess, setLoginSuccess] = reactExports.useState(false);
  reactExports.useEffect(() => {
    if (navigation.state === "loading" && !actionData?.error) {
      setLoginSuccess(true);
    }
  }, [navigation.state, actionData]);
  const isSubmitting = navigation.state === "submitting";
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "fixed inset-0 flex items-center justify-center p-4 overflow-hidden bg-slate-900 z-50",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "absolute inset-0",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "absolute inset-0 bg-gradient-to-br from-slate-900 via-purple-900/20 to-slate-900"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "absolute inset-0 opacity-20",
        style: {
          backgroundImage: `linear-gradient(rgba(139, 92, 246, 0.1) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(139, 92, 246, 0.1) 1px, transparent 1px)`,
          backgroundSize: "50px 50px"
        }
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        className: "absolute w-96 h-96 bg-purple-500/20 rounded-full blur-3xl",
        animate: {
          x: [0, 100, 0],
          y: [0, -50, 0]
        },
        transition: {
          duration: 10,
          repeat: Infinity,
          ease: "easeInOut"
        },
        style: {
          top: "10%",
          left: "10%"
        }
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        className: "absolute w-80 h-80 bg-cyan-500/20 rounded-full blur-3xl",
        animate: {
          x: [0, -80, 0],
          y: [0, 60, 0]
        },
        transition: {
          duration: 8,
          repeat: Infinity,
          ease: "easeInOut"
        },
        style: {
          bottom: "10%",
          right: "10%"
        }
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
      children: loginSuccess && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        className: "fixed inset-0 z-50 flex items-center justify-center bg-slate-900",
        initial: {
          opacity: 0
        },
        animate: {
          opacity: 1
        },
        exit: {
          opacity: 0
        },
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          className: "text-center",
          initial: {
            scale: 0.5,
            opacity: 0
          },
          animate: {
            scale: 1,
            opacity: 1
          },
          transition: {
            type: "spring",
            stiffness: 200,
            damping: 20
          },
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
            className: "w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-green-400 to-cyan-400 flex items-center justify-center",
            initial: {
              rotate: -180,
              scale: 0
            },
            animate: {
              rotate: 0,
              scale: 1
            },
            transition: {
              type: "spring",
              stiffness: 200,
              delay: 0.2
            },
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.svg, {
              className: "w-12 h-12 text-white",
              viewBox: "0 0 24 24",
              fill: "none",
              stroke: "currentColor",
              strokeWidth: 3,
              initial: {
                pathLength: 0
              },
              animate: {
                pathLength: 1
              },
              transition: {
                duration: 0.5,
                delay: 0.5
              },
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.path, {
                d: "M5 13l4 4L19 7",
                strokeLinecap: "round",
                strokeLinejoin: "round"
              })
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.h2, {
            className: "text-3xl font-bold text-white mb-2",
            initial: {
              y: 20,
              opacity: 0
            },
            animate: {
              y: 0,
              opacity: 1
            },
            transition: {
              delay: 0.4
            },
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.p, {
            className: "text-slate-400",
            initial: {
              y: 20,
              opacity: 0
            },
            animate: {
              y: 0,
              opacity: 1
            },
            transition: {
              delay: 0.5
            },
            children: "..."
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
            className: "mt-8 w-48 h-1 bg-slate-700 rounded-full mx-auto overflow-hidden",
            initial: {
              opacity: 0
            },
            animate: {
              opacity: 1
            },
            transition: {
              delay: 0.6
            },
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
              className: "h-full bg-gradient-to-r from-purple-500 to-cyan-500",
              initial: {
                width: 0
              },
              animate: {
                width: "100%"
              },
              transition: {
                duration: 1,
                delay: 0.7,
                ease: "easeInOut"
              }
            })
          })]
        })
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      className: "relative z-10 w-full max-w-md",
      initial: {
        opacity: 0,
        y: 30
      },
      animate: {
        opacity: 1,
        y: 0
      },
      transition: {
        duration: 0.6
      },
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "absolute -inset-1 bg-gradient-to-r from-purple-500 via-cyan-500 to-purple-500 rounded-2xl opacity-30 blur-sm"
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "relative bg-slate-800/90 backdrop-blur-xl rounded-2xl p-8 border border-slate-700/50 shadow-2xl",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "text-center mb-8",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
            className: "w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center shadow-lg shadow-purple-500/25",
            whileHover: {
              scale: 1.05,
              rotate: 5
            },
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, {
              className: "w-8 h-8 text-white"
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
            className: "text-2xl font-bold text-white mb-1",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "text-sm text-slate-400",
            children: "Control Panel Access"
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Form, {
          method: "post",
          className: "space-y-5",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "space-y-2",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
              className: "text-sm font-medium text-slate-300",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "relative group",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(User, {
                  className: "h-5 w-5 text-slate-500 group-focus-within:text-purple-400 transition-colors"
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                type: "text",
                name: "username",
                className: "block w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500 transition-all",
                placeholder: "",
                autoComplete: "username",
                required: true
              })]
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "space-y-2",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
              className: "text-sm font-medium text-slate-300",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "relative group",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(Lock, {
                  className: "h-5 w-5 text-slate-500 group-focus-within:text-purple-400 transition-colors"
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                type: showPassword ? "text" : "password",
                name: "password",
                className: "block w-full pl-10 pr-12 py-3 bg-slate-900/50 border border-slate-600 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500 transition-all",
                placeholder: "",
                autoComplete: "current-password",
                required: true
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                type: "button",
                onClick: () => setShowPassword(!showPassword),
                className: "absolute inset-y-0 right-0 pr-3 flex items-center text-slate-500 hover:text-slate-300 transition-colors",
                children: showPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, {
                  size: 20
                }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, {
                  size: 20
                })
              })]
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
            children: actionData?.error && /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
              initial: {
                opacity: 0,
                height: 0
              },
              animate: {
                opacity: 1,
                height: "auto"
              },
              exit: {
                opacity: 0,
                height: 0
              },
              className: "p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm flex items-center gap-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                children: ""
              }), actionData.error]
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
            type: "submit",
            disabled: isSubmitting,
            className: "w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-cyan-600 text-white rounded-xl font-bold shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 focus:outline-none focus:ring-2 focus:ring-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",
            whileHover: {
              scale: isSubmitting ? 1 : 1.02
            },
            whileTap: {
              scale: isSubmitting ? 1 : 0.98
            },
            children: isSubmitting ? /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
              className: "flex items-center justify-center gap-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
                className: "w-5 h-5 border-2 border-white/30 border-t-white rounded-full",
                animate: {
                  rotate: 360
                },
                transition: {
                  duration: 1,
                  repeat: Infinity,
                  ease: "linear"
                }
              }), "..."]
            }) : " "
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "mt-6 text-center text-xs text-slate-500",
          children: ""
        })]
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "fixed bottom-4 left-1/2 -translate-x-1/2 text-xs text-slate-600",
      children: "Control Panel v1.0"
    })]
  });
});
const route24 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$p,
  default: admin_login,
  loader: loader$n
}, Symbol.toStringTag, { value: "Module" }));
async function loader$m({
  request
}) {
  const headers = new Headers();
  headers.append("Set-Cookie", "session=; Path=/; HttpOnly; SameSite=Lax; Max-Age=0");
  return redirect("/admin/login", {
    headers
  });
}
const route25 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$m
}, Symbol.toStringTag, { value: "Module" }));
function TrafficRadar() {
  const trafficData = [
    { day: "", pv: 120, uv: 80 },
    { day: "", pv: 150, uv: 100 },
    { day: "", pv: 180, uv: 120 },
    { day: "", pv: 200, uv: 140 },
    { day: "", pv: 250, uv: 180 },
    { day: "", pv: 300, uv: 200 },
    { day: "", pv: 280, uv: 190 }
  ];
  const maxPV = Math.max(...trafficData.map((d2) => d2.pv));
  const maxUV = Math.max(...trafficData.map((d2) => d2.uv));
  const topArticles = [
    { title: "React", views: 500, rank: 1 },
    { title: "", views: 300, rank: 2 },
    { title: "2024", views: 250, rank: 3 },
    { title: "Cloudflare Pages", views: 200, rank: 4 },
    { title: "", views: 150, rank: 5 }
  ];
  const referrers = [
    { source: "", count: 45, color: "#3B82F6" },
    { source: "Google", count: 30, color: "#10B981" },
    { source: "Bilibili", count: 15, color: "#F59E0B" },
    { source: "", count: 10, color: "#EF4444" }
  ];
  const totalReferrers = referrers.reduce((sum, r2) => sum + r2.count, 0);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "glass-card-deep p-6 tech-border", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("h2", { className: "text-xl font-bold text-white mb-6 flex items-center gap-2 font-orbitron", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-violet-400", children: "" }),
      " "
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-sm font-medium text-white/60 mb-4 tracking-wider", children: "7" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative h-48", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("svg", { className: "w-full h-full", viewBox: "0 0 400 150", preserveAspectRatio: "none", children: [
            [0, 1, 2, 3, 4].map((i) => /* @__PURE__ */ jsxRuntimeExports.jsx(
              "line",
              {
                x1: "0",
                y1: 30 + i * 30,
                x2: "400",
                y2: 30 + i * 30,
                stroke: "rgba(255,255,255,0.1)",
                strokeWidth: "1"
              },
              i
            )),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              motion.path,
              {
                d: trafficData.map((d2, i) => {
                  const x2 = i / (trafficData.length - 1) * 380 + 20;
                  const y2 = 150 - d2.pv / maxPV * 120 - 15;
                  return `${i === 0 ? "M" : "L"} ${x2} ${y2}`;
                }).join(" "),
                fill: "none",
                stroke: "url(#gradientPV)",
                strokeWidth: "3",
                strokeLinecap: "round",
                strokeLinejoin: "round",
                initial: { pathLength: 0 },
                animate: { pathLength: 1 },
                transition: { duration: 1.5, ease: "easeInOut" },
                style: { filter: "drop-shadow(0 0 4px rgba(139, 92, 246, 0.5))" }
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              motion.path,
              {
                d: trafficData.map((d2, i) => {
                  const x2 = i / (trafficData.length - 1) * 380 + 20;
                  const y2 = 150 - d2.uv / maxUV * 120 - 15;
                  return `${i === 0 ? "M" : "L"} ${x2} ${y2}`;
                }).join(" "),
                fill: "none",
                stroke: "url(#gradientUV)",
                strokeWidth: "3",
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeDasharray: "5,5",
                initial: { pathLength: 0 },
                animate: { pathLength: 1 },
                transition: { duration: 1.5, ease: "easeInOut", delay: 0.3 }
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("defs", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("linearGradient", { id: "gradientPV", x1: "0%", y1: "0%", x2: "100%", y2: "0%", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("stop", { offset: "0%", stopColor: "#3B82F6", stopOpacity: "1" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("stop", { offset: "100%", stopColor: "#8B5CF6", stopOpacity: "1" })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("linearGradient", { id: "gradientUV", x1: "0%", y1: "0%", x2: "100%", y2: "0%", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("stop", { offset: "0%", stopColor: "#10B981", stopOpacity: "1" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("stop", { offset: "100%", stopColor: "#3B82F6", stopOpacity: "1" })
              ] })
            ] }),
            trafficData.map((d2, i) => {
              const x2 = i / (trafficData.length - 1) * 380 + 20;
              const pvY = 150 - d2.pv / maxPV * 120 - 15;
              const uvY = 150 - d2.uv / maxUV * 120 - 15;
              return /* @__PURE__ */ jsxRuntimeExports.jsxs("g", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("circle", { cx: x2, cy: pvY, r: "4", fill: "#3B82F6", className: "drop-shadow-[0_0_4px_rgba(59,130,246,0.8)]" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("circle", { cx: x2, cy: uvY, r: "4", fill: "#10B981", className: "drop-shadow-[0_0_4px_rgba(16,185,129,0.8)]" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "text",
                  {
                    x: x2,
                    y: "145",
                    textAnchor: "middle",
                    className: "text-xs fill-white/40 font-mono",
                    children: d2.day
                  }
                )
              ] }, i);
            })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-4 mt-2 text-xs text-white/50 font-mono", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-3 h-3 bg-blue-500 rounded-full shadow-[0_0_5px_#3b82f6]" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "PV" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-3 h-3 bg-green-500 rounded-full border-2 border-dashed shadow-[0_0_5px_#22c55e]" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "UV" })
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-sm font-medium text-white/60 mb-4 tracking-wider", children: "" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-2", children: topArticles.map((article, index2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
          motion.div,
          {
            className: "flex items-center gap-3 p-3 rounded-lg bg-white/5 border border-white/5 hover:bg-white/10 transition-colors",
            initial: { opacity: 0, x: -20 },
            animate: { opacity: 1, x: 0 },
            transition: { delay: index2 * 0.1 },
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${article.rank === 1 ? "bg-gradient-to-br from-yellow-400 to-orange-500 text-white shadow-[0_0_10px_rgba(234,179,8,0.5)]" : "bg-white/10 text-white/70"}`, children: article.rank === 1 ? "" : article.rank }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-white/90", children: article.title }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-white/40 font-mono", children: [
                  article.views,
                  " "
                ] })
              ] })
            ]
          },
          article.rank
        )) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-sm font-medium text-white/60 mb-4 tracking-wider", children: "" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("svg", { width: "200", height: "200", viewBox: "0 0 200 200", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "circle",
            {
              cx: "100",
              cy: "100",
              r: "80",
              fill: "none",
              stroke: "rgba(255,255,255,0.1)",
              strokeWidth: "20"
            }
          ),
          referrers.map((ref, index2) => {
            const startAngle = referrers.slice(0, index2).reduce((sum, r2) => sum + r2.count / totalReferrers * 360, 0);
            const angle = ref.count / totalReferrers * 360;
            const endAngle = startAngle + angle;
            const startAngleRad = (startAngle - 90) * Math.PI / 180;
            const endAngleRad = (endAngle - 90) * Math.PI / 180;
            const x1 = 100 + 80 * Math.cos(startAngleRad);
            const y1 = 100 + 80 * Math.sin(startAngleRad);
            const x2 = 100 + 80 * Math.cos(endAngleRad);
            const y2 = 100 + 80 * Math.sin(endAngleRad);
            const largeArc = angle > 180 ? 1 : 0;
            return /* @__PURE__ */ jsxRuntimeExports.jsx(
              motion.path,
              {
                d: `M 100 100 L ${x1} ${y1} A 80 80 0 ${largeArc} 1 ${x2} ${y2} Z`,
                fill: ref.color,
                initial: { pathLength: 0 },
                animate: { pathLength: 1 },
                transition: { duration: 1, delay: index2 * 0.2 },
                stroke: "rgba(15, 23, 42, 0.5)",
                strokeWidth: "2"
              },
              ref.source
            );
          })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-2 gap-2 mt-4", children: referrers.map((ref) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 text-sm", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "div",
            {
              className: "w-3 h-3 rounded-full shadow-[0_0_5px_currentColor]",
              style: { backgroundColor: ref.color, color: ref.color }
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white/70", children: ref.source }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-white/40 ml-auto font-mono", children: [
            ref.count,
            "%"
          ] })
        ] }, ref.source)) })
      ] })
    ] })
  ] });
}
function CommentManager({ initialComments }) {
  const fetcher = useFetcher();
  const [comments, setComments] = reactExports.useState(initialComments);
  reactExports.useEffect(() => {
    setComments(initialComments);
  }, [initialComments]);
  const handleAction = (id2, intent) => {
    setComments((prev) => prev.filter((c) => c.id !== id2));
    fetcher.submit(
      { intent, commentId: id2.toString() },
      { method: "post", action: "/api/admin/comments" }
    );
  };
  const unreadCount = comments.length;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "w-full", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-between mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-lg font-bold text-white flex items-center gap-2", children: unreadCount > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "px-2 py-0.5 bg-red-500/80 text-white text-xs font-bold rounded border border-red-400/50 shadow-[0_0_10px_rgba(239,68,68,0.4)]", children: [
      unreadCount,
      ""
    ] }) }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-3", children: /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, { mode: "popLayout", children: comments.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.div,
      {
        initial: { opacity: 0 },
        animate: { opacity: 1 },
        className: "text-center py-8 text-white/30 text-sm",
        children: ""
      }
    ) : comments.map((comment, index2) => /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.div,
      {
        layout: true,
        className: "p-4 rounded-xl border bg-yellow-500/10 border-yellow-500/30",
        initial: { opacity: 0, y: 10 },
        animate: { opacity: 1, y: 0 },
        exit: { opacity: 0, scale: 0.9 },
        transition: { delay: index2 * 0.05 },
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start gap-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center text-white font-bold text-sm shadow-lg border border-white/20 flex-shrink-0", children: comment.author[0].toUpperCase() }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 mb-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium text-white/90 truncate", children: comment.author }),
              comment.is_danmaku && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "px-2 py-0.5 bg-purple-500/20 text-purple-300 text-xs rounded border border-purple-500/30 flex-shrink-0", children: "" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-white/40 font-mono flex-shrink-0 ml-auto", children: new Date(comment.created_at * 1e3).toLocaleTimeString() })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-white/80 mb-3 break-words", children: comment.content }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                motion.button,
                {
                  onClick: () => handleAction(comment.id, "approve"),
                  className: "px-3 py-1 bg-green-500/20 text-green-300 border border-green-500/50 text-xs rounded hover:bg-green-500/30 transition-colors",
                  whileHover: { scale: 1.05 },
                  whileTap: { scale: 0.95 },
                  children: ""
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                motion.button,
                {
                  onClick: () => handleAction(comment.id, "delete"),
                  className: "px-3 py-1 bg-red-500/20 text-red-300 border border-red-500/50 text-xs rounded hover:bg-red-500/30 transition-colors",
                  whileHover: { scale: 1.05 },
                  whileTap: { scale: 0.95 },
                  children: ""
                }
              )
            ] })
          ] })
        ] })
      },
      comment.id
    )) }) })
  ] });
}
function MemoPad() {
  const [memo2, setMemo] = reactExports.useState("");
  reactExports.useEffect(() => {
    const saved = localStorage.getItem("admin_memo");
    if (saved) {
      setMemo(saved);
    }
  }, []);
  const handleSave = () => {
    localStorage.setItem("admin_memo", memo2);
    alert("");
  };
  const handleKeyDown = (e) => {
    if ((e.ctrlKey || e.metaKey) && e.key === "Enter") {
      e.preventDefault();
      handleSave();
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(
    motion.div,
    {
      className: "glass-card-deep p-6 tech-border relative overflow-hidden group",
      initial: { opacity: 0, rotate: -2 },
      animate: { opacity: 1, rotate: 0 },
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.03)_1px,transparent_1px)] bg-[size:20px_20px] pointer-events-none" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500/50 via-orange-500/50 to-yellow-500/50 shadow-[0_0_10px_rgba(234,179,8,0.5)]" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-4 relative z-10", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("h2", { className: "text-xl font-bold text-white flex items-center gap-2 font-orbitron", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-yellow-400", children: "" }),
            " "
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            motion.button,
            {
              onClick: handleSave,
              className: "px-4 py-1.5 bg-yellow-500/20 border border-yellow-500/50 text-yellow-300 text-sm font-medium rounded hover:bg-yellow-500/30 transition-all shadow-[0_0_10px_rgba(234,179,8,0.2)]",
              whileHover: { scale: 1.05 },
              whileTap: { scale: 0.95 },
              children: "SAVE"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "textarea",
          {
            value: memo2,
            onChange: (e) => setMemo(e.target.value),
            onKeyDown: handleKeyDown,
            placeholder: "...\n Ctrl+Enter ",
            className: "w-full h-48 bg-black/20 border border-white/5 rounded-lg p-4 outline-none resize-none text-white/90 placeholder-white/30 font-mono focus:border-yellow-500/30 focus:bg-black/30 transition-all relative z-10",
            style: { fontFamily: "'JetBrains Mono', monospace" }
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-white/40 mt-2 font-mono relative z-10", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-yellow-500/70", children: "TIP:" }),
          " Ctrl+Enter to save"
        ] })
      ]
    }
  );
}
function DailyQuests() {
  const [quests, setQuests] = reactExports.useState([
    { id: 1, task: "", completed: true, exp: 10 },
    { id: 2, task: "", completed: false, exp: 5 },
    { id: 3, task: "100", completed: false, exp: 20 },
    { id: 4, task: "1", completed: false, exp: 10 }
  ]);
  const [achievements] = reactExports.useState([
    { id: 1, name: "", description: "10", unlocked: true, icon: "" },
    { id: 2, name: "", description: "20", unlocked: false, icon: "" },
    { id: 3, name: "", description: "100", unlocked: false, icon: "" }
  ]);
  const totalExp = quests.filter((q2) => q2.completed).reduce((sum, q2) => sum + q2.exp, 0);
  const completedCount = quests.filter((q2) => q2.completed).length;
  const totalCount = quests.length;
  const toggleQuest = (id2) => {
    setQuests(
      (prev) => prev.map((q2) => q2.id === id2 ? { ...q2, completed: !q2.completed } : q2)
    );
  };
  reactExports.useEffect(() => {
    const lastReset = localStorage.getItem("quests_reset_date");
    const today = (/* @__PURE__ */ new Date()).toDateString();
    if (lastReset !== today) {
      setQuests((prev) => prev.map((q2) => ({ ...q2, completed: false })));
      localStorage.setItem("quests_reset_date", today);
    }
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "glass-card-deep p-6 tech-border", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("h2", { className: "text-xl font-bold text-white flex items-center gap-2 font-orbitron", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-violet-400", children: "" }),
        " "
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-sm text-white/50 font-mono", children: [
        completedCount,
        "/",
        totalCount,
        " "
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-3 mb-6", children: quests.map((quest, index2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        className: "flex items-center gap-3 p-3 rounded-lg bg-white/5 border border-white/5 hover:bg-white/10 transition-colors cursor-pointer group",
        initial: { opacity: 0, x: -20 },
        animate: { opacity: 1, x: 0 },
        transition: { delay: index2 * 0.1 },
        onClick: () => toggleQuest(quest.id),
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative flex items-center justify-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "input",
              {
                type: "checkbox",
                checked: quest.completed,
                onChange: () => toggleQuest(quest.id),
                className: "peer appearance-none w-5 h-5 rounded border border-white/30 bg-white/5 checked:bg-pink-500 checked:border-pink-500 transition-colors cursor-pointer"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "svg",
              {
                className: "absolute w-3.5 h-3.5 text-white pointer-events-none opacity-0 peer-checked:opacity-100 transition-opacity",
                viewBox: "0 0 14 14",
                fill: "none",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "path",
                  {
                    d: "M3 7L5.5 9.5L11 4",
                    stroke: "currentColor",
                    strokeWidth: "2",
                    strokeLinecap: "round",
                    strokeLinejoin: "round"
                  }
                )
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-1", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
            "p",
            {
              className: `text-sm transition-colors ${quest.completed ? "line-through text-white/30" : "text-white/80 group-hover:text-white"}`,
              children: quest.task
            }
          ) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-xs font-bold text-yellow-400 font-mono shadow-[0_0_10px_rgba(250,204,21,0.2)]", children: [
            "+",
            quest.exp,
            " EXP"
          ] })
        ]
      },
      quest.id
    )) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "pt-4 border-t border-white/10", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium text-white/60", children: "" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-lg font-bold text-yellow-400 font-mono text-neon", style: { textShadow: "0 0 10px rgba(250, 204, 21, 0.5)" }, children: [
          totalExp,
          " EXP"
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mt-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-sm font-medium text-white/60 mb-3 tracking-wider", children: " " }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex gap-2", children: achievements.map((achievement) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
          motion.div,
          {
            className: `flex flex-col items-center p-2 rounded-lg border ${achievement.unlocked ? "bg-gradient-to-br from-yellow-400/20 to-orange-500/20 border-yellow-400/50 shadow-[0_0_10px_rgba(250,204,21,0.1)]" : "bg-white/5 border-white/10 opacity-50 grayscale"}`,
            whileHover: { scale: 1.05 },
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-2xl mb-1 filter drop-shadow-[0_0_5px_rgba(255,255,255,0.3)]", children: achievement.icon }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: `text-xs font-bold ${achievement.unlocked ? "text-yellow-300" : "text-white/40"}`, children: achievement.name })
            ]
          },
          achievement.id
        )) })
      ] })
    ] })
  ] });
}
async function loader$l({
  request,
  context
}) {
  const sessionId = request.headers.get("Cookie")?.match(/admin_session=([^;]+)/)?.[1];
  const {
    anime_db
  } = context.cloudflare.env;
  if (!sessionId) throw redirect("/panel/login");
  try {
    const session = await anime_db.prepare("SELECT * FROM admin_sessions WHERE token = ? AND expires_at > datetime('now')").bind(sessionId).first();
    if (!session) throw redirect("/panel/login");
  } catch (e) {
    if (e instanceof Response) throw e;
    throw redirect("/panel/login");
  }
  let stats = {
    pv: 0,
    uv: 0,
    articles: 0,
    comments: 0,
    likes: 0,
    storage: 0
  };
  let pendingComments = [];
  try {
    const articlesCount = await anime_db.prepare("SELECT COUNT(*) as count FROM articles").first();
    stats.articles = articlesCount?.count || 0;
    const commentsCount = await anime_db.prepare("SELECT COUNT(*) as count FROM comments").first();
    stats.comments = commentsCount?.count || 0;
    const animesCount = await anime_db.prepare("SELECT COUNT(*) as count FROM animes").first();
    stats.likes = animesCount?.count || 0;
    const totalViews = await anime_db.prepare("SELECT SUM(views) as total FROM articles").first();
    stats.pv = totalViews?.total || 0;
    const result = await anime_db.prepare("SELECT * FROM comments WHERE status = 'pending' ORDER BY created_at DESC LIMIT 5").all();
    if (result.results) pendingComments = result.results;
  } catch (e) {
    console.error("Failed to fetch stats:", e);
  }
  return {
    stats,
    pendingComments
  };
}
const admin = withComponentProps(function Admin({
  loaderData
}) {
  const location = useLocation();
  const isRoot = location.pathname === "/admin";
  const {
    stats,
    pendingComments
  } = loaderData;
  const SidebarItem = ({
    to,
    icon,
    label,
    active
  }) => /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
    to,
    className: "block mb-1",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      className: `px-3 py-2 rounded-lg flex items-center gap-3 transition-colors ${active ? "bg-white shadow-sm text-blue-600" : "text-gray-500 hover:bg-gray-200/50"}`,
      whileTap: {
        scale: 0.98
      },
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
        className: "text-lg",
        children: icon
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
        className: "font-medium text-sm",
        children: label
      })]
    })
  });
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "flex h-screen bg-[#F5F5F7] overflow-hidden font-sans",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("aside", {
      className: "w-64 bg-[#F5F5F7]/80 backdrop-blur-2xl border-r border-gray-200/50 flex-shrink-0 flex flex-col pt-6 pb-4 px-4 z-20",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "px-2 mb-8 flex items-center gap-2",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "w-3 h-3 rounded-full bg-[#FF5F57]"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "w-3 h-3 rounded-full bg-[#FEBC2E]"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "w-3 h-3 rounded-full bg-[#28C840]"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
          className: "ml-2 text-sm font-semibold text-gray-400 tracking-wider",
          children: "CONTROL"
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("nav", {
        className: "flex-1 space-y-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
            className: "px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",
            children: "Overview"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(SidebarItem, {
            to: "/admin",
            icon: "",
            label: "Dashboard",
            active: location.pathname === "/admin"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(SidebarItem, {
            to: "/admin/analytics",
            icon: "",
            label: "Analytics",
            active: location.pathname.includes("analytics")
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
            className: "px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",
            children: "Content"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(SidebarItem, {
            to: "/admin/articles",
            icon: "",
            label: "Articles",
            active: location.pathname.includes("articles") || location.pathname.includes("article")
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(SidebarItem, {
            to: "/admin/comments",
            icon: "",
            label: "Comments",
            active: location.pathname.includes("comments")
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(SidebarItem, {
            to: "/admin/gallery",
            icon: "",
            label: "Gallery",
            active: location.pathname.includes("gallery")
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(SidebarItem, {
            to: "/admin/anime/manage",
            icon: "",
            label: "Animes",
            active: location.pathname.includes("anime")
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
            className: "px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",
            children: "System"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(SidebarItem, {
            to: "/admin/settings",
            icon: "",
            label: "Settings",
            active: location.pathname.includes("settings")
          })]
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "mt-auto px-2",
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Link, {
          to: "/logout",
          className: "flex items-center gap-2 text-gray-400 hover:text-gray-600 text-sm font-medium transition-colors",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            children: ""
          }), " Sign Out"]
        })
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("main", {
      className: "flex-1 overflow-y-auto relative scroll-smooth",
      children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "max-w-7xl mx-auto p-8 min-h-full",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
          mode: "wait",
          children: isRoot ? /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
            initial: {
              opacity: 0,
              y: 10
            },
            animate: {
              opacity: 1,
              y: 0
            },
            exit: {
              opacity: 0,
              y: -10
            },
            transition: {
              duration: 0.4,
              ease: [0.25, 1, 0.5, 1]
            },
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("header", {
              className: "mb-8 flex items-center justify-between",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
                  className: "text-3xl font-bold text-gray-900 tracking-tight",
                  children: "Good Afternoon"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: "text-gray-500 mt-1",
                  children: "Here's what's happening today."
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
                to: "/admin/article/new",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                  className: "px-4 py-2 rounded-full font-medium transition-all active:scale-95 shadow-sm hover:shadow bg-[#007AFF] text-white hover:bg-[#0071E3] shadow-lg shadow-blue-500/30",
                  children: "+ New Article"
                })
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(AppleStatCard, {
                title: "Total Views",
                value: stats.pv,
                color: "blue",
                icon: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx(AppleStatCard, {
                title: "Articles",
                value: stats.articles,
                color: "purple",
                icon: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx(AppleStatCard, {
                title: "Comments",
                value: stats.comments,
                color: "orange",
                icon: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx(AppleStatCard, {
                title: "Storage",
                value: `${stats.storage}MB`,
                color: "green",
                icon: ""
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "lg:col-span-2 bg-white/70 backdrop-blur-xl border border-white/40 shadow-sm rounded-2xl transition-all duration-300 p-6 relative overflow-hidden",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                  className: "text-lg font-semibold text-gray-900 mb-4",
                  children: "Traffic Overview"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "h-64 flex items-center justify-center bg-gray-50/50 rounded-xl border border-gray-100/50",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(TrafficRadar, {})
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "space-y-6",
                children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "bg-white/70 backdrop-blur-xl border border-white/40 shadow-sm rounded-2xl transition-all duration-300 p-6",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                    className: "text-lg font-semibold text-gray-900 mb-4",
                    children: "Daily Tasks"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx(DailyQuests, {})]
                })
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "grid grid-cols-1 lg:grid-cols-2 gap-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "bg-white/70 backdrop-blur-xl border border-white/40 shadow-sm rounded-2xl transition-all duration-300 p-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                  className: "text-lg font-semibold text-gray-900 mb-4",
                  children: "Recent Comments"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx(CommentManager, {
                  initialComments: pendingComments || []
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "bg-white/70 backdrop-blur-xl border border-white/40 shadow-sm rounded-2xl transition-all duration-300 p-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                  className: "text-lg font-semibold text-gray-900 mb-4",
                  children: "Quick Notes"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx(MemoPad, {})]
              })]
            })]
          }, "dashboard") : /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
            initial: {
              opacity: 0,
              x: 20
            },
            animate: {
              opacity: 1,
              x: 0
            },
            exit: {
              opacity: 0,
              x: -20
            },
            transition: {
              duration: 0.3
            },
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(Outlet, {})
          }, "outlet")
        })
      })
    })]
  });
});
function AppleStatCard({
  title,
  value,
  color: color2,
  icon
}) {
  const colors = {
    blue: "text-[#007AFF] bg-[#007AFF]/10",
    purple: "text-[#AF52DE] bg-[#AF52DE]/10",
    orange: "text-[#FF9500] bg-[#FF9500]/10",
    green: "text-[#34C759] bg-[#34C759]/10"
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "bg-white/70 backdrop-blur-xl border border-white/40 shadow-sm rounded-2xl transition-all duration-300 p-5 flex items-start justify-between group cursor-default hover:bg-white/80 hover:shadow-md hover:-translate-y-0.5",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-sm font-medium text-gray-500 mb-1",
        children: title
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("h4", {
        className: "text-2xl font-bold text-gray-900 tracking-tight",
        children: value
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: `w-10 h-10 rounded-full flex items-center justify-center text-lg ${colors[color2]} transition-transform group-hover:scale-110`,
      children: icon
    })]
  });
}
const route26 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin,
  loader: loader$l
}, Symbol.toStringTag, { value: "Module" }));
function L() {
  return { async: false, breaks: false, extensions: null, gfm: true, hooks: null, pedantic: false, renderer: null, silent: false, tokenizer: null, walkTokens: null };
}
var T = L();
function Z(u3) {
  T = u3;
}
var C = { exec: () => null };
function k(u3, e = "") {
  let t = typeof u3 == "string" ? u3 : u3.source, n = { replace: (r2, i) => {
    let s = typeof i == "string" ? i : i.source;
    return s = s.replace(m.caret, "$1"), t = t.replace(r2, s), n;
  }, getRegex: () => new RegExp(t, e) };
  return n;
}
var me = (() => {
  try {
    return !!new RegExp("(?<=1)(?<!1)");
  } catch {
    return false;
  }
})(), m = { codeRemoveIndent: /^(?: {1,4}| {0,3}\t)/gm, outputLinkReplace: /\\([\[\]])/g, indentCodeCompensation: /^(\s+)(?:```)/, beginningSpace: /^\s+/, endingHash: /#$/, startingSpaceChar: /^ /, endingSpaceChar: / $/, nonSpaceChar: /[^ ]/, newLineCharGlobal: /\n/g, tabCharGlobal: /\t/g, multipleSpaceGlobal: /\s+/g, blankLine: /^[ \t]*$/, doubleBlankLine: /\n[ \t]*\n[ \t]*$/, blockquoteStart: /^ {0,3}>/, blockquoteSetextReplace: /\n {0,3}((?:=+|-+) *)(?=\n|$)/g, blockquoteSetextReplace2: /^ {0,3}>[ \t]?/gm, listReplaceTabs: /^\t+/, listReplaceNesting: /^ {1,4}(?=( {4})*[^ ])/g, listIsTask: /^\[[ xX]\] +\S/, listReplaceTask: /^\[[ xX]\] +/, listTaskCheckbox: /\[[ xX]\]/, anyLine: /\n.*\n/, hrefBrackets: /^<(.*)>$/, tableDelimiter: /[:|]/, tableAlignChars: /^\||\| *$/g, tableRowBlankLine: /\n[ \t]*$/, tableAlignRight: /^ *-+: *$/, tableAlignCenter: /^ *:-+: *$/, tableAlignLeft: /^ *:-+ *$/, startATag: /^<a /i, endATag: /^<\/a>/i, startPreScriptTag: /^<(pre|code|kbd|script)(\s|>)/i, endPreScriptTag: /^<\/(pre|code|kbd|script)(\s|>)/i, startAngleBracket: /^</, endAngleBracket: />$/, pedanticHrefTitle: /^([^'"]*[^\s])\s+(['"])(.*)\2/, unicodeAlphaNumeric: /[\p{L}\p{N}]/u, escapeTest: /[&<>"']/, escapeReplace: /[&<>"']/g, escapeTestNoEncode: /[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/, escapeReplaceNoEncode: /[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g, unescapeTest: /&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig, caret: /(^|[^\[])\^/g, percentDecode: /%25/g, findPipe: /\|/g, splitPipe: / \|/, slashPipe: /\\\|/g, carriageReturn: /\r\n|\r/g, spaceLine: /^ +$/gm, notSpaceStart: /^\S*/, endingNewline: /\n$/, listItemRegex: (u3) => new RegExp(`^( {0,3}${u3})((?:[	 ][^\\n]*)?(?:\\n|$))`), nextBulletRegex: (u3) => new RegExp(`^ {0,${Math.min(3, u3 - 1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`), hrRegex: (u3) => new RegExp(`^ {0,${Math.min(3, u3 - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`), fencesBeginRegex: (u3) => new RegExp(`^ {0,${Math.min(3, u3 - 1)}}(?:\`\`\`|~~~)`), headingBeginRegex: (u3) => new RegExp(`^ {0,${Math.min(3, u3 - 1)}}#`), htmlBeginRegex: (u3) => new RegExp(`^ {0,${Math.min(3, u3 - 1)}}<(?:[a-z].*>|!--)`, "i") }, xe = /^(?:[ \t]*(?:\n|$))+/, be = /^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/, Re = /^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/, I = /^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/, Te = /^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/, N = /(?:[*+-]|\d{1,9}[.)])/, re = /^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/, se = k(re).replace(/bull/g, N).replace(/blockCode/g, /(?: {4}| {0,3}\t)/).replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g, / {0,3}>/).replace(/heading/g, / {0,3}#{1,6}/).replace(/html/g, / {0,3}<[^\n>]+>\n/).replace(/\|table/g, "").getRegex(), Oe = k(re).replace(/bull/g, N).replace(/blockCode/g, /(?: {4}| {0,3}\t)/).replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g, / {0,3}>/).replace(/heading/g, / {0,3}#{1,6}/).replace(/html/g, / {0,3}<[^\n>]+>\n/).replace(/table/g, / {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(), Q = /^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/, we = /^[^\n]+/, F = /(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/, ye = k(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label", F).replace("title", /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(), Pe = k(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g, N).getRegex(), v = "address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul", j = /<!--(?:-?>|[\s\S]*?(?:-->|$))/, Se = k("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))", "i").replace("comment", j).replace("tag", v).replace("attribute", / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(), ie = k(Q).replace("hr", I).replace("heading", " {0,3}#{1,6}(?:\\s|$)").replace("|lheading", "").replace("|table", "").replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", v).getRegex(), $e = k(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph", ie).getRegex(), U = { blockquote: $e, code: be, def: ye, fences: Re, heading: Te, hr: I, html: Se, lheading: se, list: Pe, newline: xe, paragraph: ie, table: C, text: we }, te = k("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr", I).replace("heading", " {0,3}#{1,6}(?:\\s|$)").replace("blockquote", " {0,3}>").replace("code", "(?: {4}| {0,3}	)[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", v).getRegex(), _e = { ...U, lheading: Oe, table: te, paragraph: k(Q).replace("hr", I).replace("heading", " {0,3}#{1,6}(?:\\s|$)").replace("|lheading", "").replace("table", te).replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", v).getRegex() }, Le = { ...U, html: k(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment", j).replace(/tag/g, "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(), def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/, heading: /^(#{1,6})(.*)(?:\n+|$)/, fences: C, lheading: /^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/, paragraph: k(Q).replace("hr", I).replace("heading", ` *#{1,6} *[^
]`).replace("lheading", se).replace("|table", "").replace("blockquote", " {0,3}>").replace("|fences", "").replace("|list", "").replace("|html", "").replace("|tag", "").getRegex() }, Me = /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/, ze = /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/, oe = /^( {2,}|\\)\n(?!\s*$)/, Ae = /^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/, D = /[\p{P}\p{S}]/u, K = /[\s\p{P}\p{S}]/u, ae = /[^\s\p{P}\p{S}]/u, Ce = k(/^((?![*_])punctSpace)/, "u").replace(/punctSpace/g, K).getRegex(), le = /(?!~)[\p{P}\p{S}]/u, Ie = /(?!~)[\s\p{P}\p{S}]/u, Ee = /(?:[^\s\p{P}\p{S}]|~)/u, Be = k(/link|precode-code|html/, "g").replace("link", /\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-", me ? "(?<!`)()" : "(^^|[^`])").replace("code", /(?<b>`+)[^`]+\k<b>(?!`)/).replace("html", /<(?! )[^<>]*?>/).getRegex(), ue = /^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/, qe = k(ue, "u").replace(/punct/g, D).getRegex(), ve = k(ue, "u").replace(/punct/g, le).getRegex(), pe = "^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)", De = k(pe, "gu").replace(/notPunctSpace/g, ae).replace(/punctSpace/g, K).replace(/punct/g, D).getRegex(), He = k(pe, "gu").replace(/notPunctSpace/g, Ee).replace(/punctSpace/g, Ie).replace(/punct/g, le).getRegex(), Ze = k("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)", "gu").replace(/notPunctSpace/g, ae).replace(/punctSpace/g, K).replace(/punct/g, D).getRegex(), Ge = k(/\\(punct)/, "gu").replace(/punct/g, D).getRegex(), Ne = k(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme", /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email", /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(), Qe = k(j).replace("(?:-->|$)", "-->").getRegex(), Fe = k("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment", Qe).replace("attribute", /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(), q = /(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/, je = k(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label", q).replace("href", /<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title", /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(), ce = k(/^!?\[(label)\]\[(ref)\]/).replace("label", q).replace("ref", F).getRegex(), he = k(/^!?\[(ref)\](?:\[\])?/).replace("ref", F).getRegex(), Ue = k("reflink|nolink(?!\\()", "g").replace("reflink", ce).replace("nolink", he).getRegex(), ne = /[hH][tT][tT][pP][sS]?|[fF][tT][pP]/, W = { _backpedal: C, anyPunctuation: Ge, autolink: Ne, blockSkip: Be, br: oe, code: ze, del: C, emStrongLDelim: qe, emStrongRDelimAst: De, emStrongRDelimUnd: Ze, escape: Me, link: je, nolink: he, punctuation: Ce, reflink: ce, reflinkSearch: Ue, tag: Fe, text: Ae, url: C }, Ke = { ...W, link: k(/^!?\[(label)\]\((.*?)\)/).replace("label", q).getRegex(), reflink: k(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label", q).getRegex() }, G = { ...W, emStrongRDelimAst: He, emStrongLDelim: ve, url: k(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol", ne).replace("email", /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(), _backpedal: /(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/, del: /^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/, text: k(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol", ne).getRegex() }, We = { ...G, br: k(oe).replace("{2,}", "*").getRegex(), text: k(G.text).replace("\\b_", "\\b_| {2,}\\n").replace(/\{2,\}/g, "*").getRegex() }, E = { normal: U, gfm: _e, pedantic: Le }, M = { normal: W, gfm: G, breaks: We, pedantic: Ke };
var Xe = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }, ke = (u3) => Xe[u3];
function w(u3, e) {
  if (e) {
    if (m.escapeTest.test(u3)) return u3.replace(m.escapeReplace, ke);
  } else if (m.escapeTestNoEncode.test(u3)) return u3.replace(m.escapeReplaceNoEncode, ke);
  return u3;
}
function X(u3) {
  try {
    u3 = encodeURI(u3).replace(m.percentDecode, "%");
  } catch {
    return null;
  }
  return u3;
}
function J(u3, e) {
  let t = u3.replace(m.findPipe, (i, s, a) => {
    let o = false, l = s;
    for (; --l >= 0 && a[l] === "\\"; ) o = !o;
    return o ? "|" : " |";
  }), n = t.split(m.splitPipe), r2 = 0;
  if (n[0].trim() || n.shift(), n.length > 0 && !n.at(-1)?.trim() && n.pop(), e) if (n.length > e) n.splice(e);
  else for (; n.length < e; ) n.push("");
  for (; r2 < n.length; r2++) n[r2] = n[r2].trim().replace(m.slashPipe, "|");
  return n;
}
function z(u3, e, t) {
  let n = u3.length;
  if (n === 0) return "";
  let r2 = 0;
  for (; r2 < n; ) {
    let i = u3.charAt(n - r2 - 1);
    if (i === e && true) r2++;
    else break;
  }
  return u3.slice(0, n - r2);
}
function de(u3, e) {
  if (u3.indexOf(e[1]) === -1) return -1;
  let t = 0;
  for (let n = 0; n < u3.length; n++) if (u3[n] === "\\") n++;
  else if (u3[n] === e[0]) t++;
  else if (u3[n] === e[1] && (t--, t < 0)) return n;
  return t > 0 ? -2 : -1;
}
function ge(u3, e, t, n, r2) {
  let i = e.href, s = e.title || null, a = u3[1].replace(r2.other.outputLinkReplace, "$1");
  n.state.inLink = true;
  let o = { type: u3[0].charAt(0) === "!" ? "image" : "link", raw: t, href: i, title: s, text: a, tokens: n.inlineTokens(a) };
  return n.state.inLink = false, o;
}
function Je(u3, e, t) {
  let n = u3.match(t.other.indentCodeCompensation);
  if (n === null) return e;
  let r2 = n[1];
  return e.split(`
`).map((i) => {
    let s = i.match(t.other.beginningSpace);
    if (s === null) return i;
    let [a] = s;
    return a.length >= r2.length ? i.slice(r2.length) : i;
  }).join(`
`);
}
var y = class {
  options;
  rules;
  lexer;
  constructor(e) {
    this.options = e || T;
  }
  space(e) {
    let t = this.rules.block.newline.exec(e);
    if (t && t[0].length > 0) return { type: "space", raw: t[0] };
  }
  code(e) {
    let t = this.rules.block.code.exec(e);
    if (t) {
      let n = t[0].replace(this.rules.other.codeRemoveIndent, "");
      return { type: "code", raw: t[0], codeBlockStyle: "indented", text: this.options.pedantic ? n : z(n, `
`) };
    }
  }
  fences(e) {
    let t = this.rules.block.fences.exec(e);
    if (t) {
      let n = t[0], r2 = Je(n, t[3] || "", this.rules);
      return { type: "code", raw: n, lang: t[2] ? t[2].trim().replace(this.rules.inline.anyPunctuation, "$1") : t[2], text: r2 };
    }
  }
  heading(e) {
    let t = this.rules.block.heading.exec(e);
    if (t) {
      let n = t[2].trim();
      if (this.rules.other.endingHash.test(n)) {
        let r2 = z(n, "#");
        (this.options.pedantic || !r2 || this.rules.other.endingSpaceChar.test(r2)) && (n = r2.trim());
      }
      return { type: "heading", raw: t[0], depth: t[1].length, text: n, tokens: this.lexer.inline(n) };
    }
  }
  hr(e) {
    let t = this.rules.block.hr.exec(e);
    if (t) return { type: "hr", raw: z(t[0], `
`) };
  }
  blockquote(e) {
    let t = this.rules.block.blockquote.exec(e);
    if (t) {
      let n = z(t[0], `
`).split(`
`), r2 = "", i = "", s = [];
      for (; n.length > 0; ) {
        let a = false, o = [], l;
        for (l = 0; l < n.length; l++) if (this.rules.other.blockquoteStart.test(n[l])) o.push(n[l]), a = true;
        else if (!a) o.push(n[l]);
        else break;
        n = n.slice(l);
        let p = o.join(`
`), c = p.replace(this.rules.other.blockquoteSetextReplace, `
    $1`).replace(this.rules.other.blockquoteSetextReplace2, "");
        r2 = r2 ? `${r2}
${p}` : p, i = i ? `${i}
${c}` : c;
        let g = this.lexer.state.top;
        if (this.lexer.state.top = true, this.lexer.blockTokens(c, s, true), this.lexer.state.top = g, n.length === 0) break;
        let h = s.at(-1);
        if (h?.type === "code") break;
        if (h?.type === "blockquote") {
          let R = h, f = R.raw + `
` + n.join(`
`), O = this.blockquote(f);
          s[s.length - 1] = O, r2 = r2.substring(0, r2.length - R.raw.length) + O.raw, i = i.substring(0, i.length - R.text.length) + O.text;
          break;
        } else if (h?.type === "list") {
          let R = h, f = R.raw + `
` + n.join(`
`), O = this.list(f);
          s[s.length - 1] = O, r2 = r2.substring(0, r2.length - h.raw.length) + O.raw, i = i.substring(0, i.length - R.raw.length) + O.raw, n = f.substring(s.at(-1).raw.length).split(`
`);
          continue;
        }
      }
      return { type: "blockquote", raw: r2, tokens: s, text: i };
    }
  }
  list(e) {
    let t = this.rules.block.list.exec(e);
    if (t) {
      let n = t[1].trim(), r2 = n.length > 1, i = { type: "list", raw: "", ordered: r2, start: r2 ? +n.slice(0, -1) : "", loose: false, items: [] };
      n = r2 ? `\\d{1,9}\\${n.slice(-1)}` : `\\${n}`, this.options.pedantic && (n = r2 ? n : "[*+-]");
      let s = this.rules.other.listItemRegex(n), a = false;
      for (; e; ) {
        let l = false, p = "", c = "";
        if (!(t = s.exec(e)) || this.rules.block.hr.test(e)) break;
        p = t[0], e = e.substring(p.length);
        let g = t[2].split(`
`, 1)[0].replace(this.rules.other.listReplaceTabs, (O) => " ".repeat(3 * O.length)), h = e.split(`
`, 1)[0], R = !g.trim(), f = 0;
        if (this.options.pedantic ? (f = 2, c = g.trimStart()) : R ? f = t[1].length + 1 : (f = t[2].search(this.rules.other.nonSpaceChar), f = f > 4 ? 1 : f, c = g.slice(f), f += t[1].length), R && this.rules.other.blankLine.test(h) && (p += h + `
`, e = e.substring(h.length + 1), l = true), !l) {
          let O = this.rules.other.nextBulletRegex(f), V = this.rules.other.hrRegex(f), Y = this.rules.other.fencesBeginRegex(f), ee = this.rules.other.headingBeginRegex(f), fe = this.rules.other.htmlBeginRegex(f);
          for (; e; ) {
            let H = e.split(`
`, 1)[0], A;
            if (h = H, this.options.pedantic ? (h = h.replace(this.rules.other.listReplaceNesting, "  "), A = h) : A = h.replace(this.rules.other.tabCharGlobal, "    "), Y.test(h) || ee.test(h) || fe.test(h) || O.test(h) || V.test(h)) break;
            if (A.search(this.rules.other.nonSpaceChar) >= f || !h.trim()) c += `
` + A.slice(f);
            else {
              if (R || g.replace(this.rules.other.tabCharGlobal, "    ").search(this.rules.other.nonSpaceChar) >= 4 || Y.test(g) || ee.test(g) || V.test(g)) break;
              c += `
` + h;
            }
            !R && !h.trim() && (R = true), p += H + `
`, e = e.substring(H.length + 1), g = A.slice(f);
          }
        }
        i.loose || (a ? i.loose = true : this.rules.other.doubleBlankLine.test(p) && (a = true)), i.items.push({ type: "list_item", raw: p, task: !!this.options.gfm && this.rules.other.listIsTask.test(c), loose: false, text: c, tokens: [] }), i.raw += p;
      }
      let o = i.items.at(-1);
      if (o) o.raw = o.raw.trimEnd(), o.text = o.text.trimEnd();
      else return;
      i.raw = i.raw.trimEnd();
      for (let l of i.items) {
        if (this.lexer.state.top = false, l.tokens = this.lexer.blockTokens(l.text, []), l.task) {
          if (l.text = l.text.replace(this.rules.other.listReplaceTask, ""), l.tokens[0]?.type === "text" || l.tokens[0]?.type === "paragraph") {
            l.tokens[0].raw = l.tokens[0].raw.replace(this.rules.other.listReplaceTask, ""), l.tokens[0].text = l.tokens[0].text.replace(this.rules.other.listReplaceTask, "");
            for (let c = this.lexer.inlineQueue.length - 1; c >= 0; c--) if (this.rules.other.listIsTask.test(this.lexer.inlineQueue[c].src)) {
              this.lexer.inlineQueue[c].src = this.lexer.inlineQueue[c].src.replace(this.rules.other.listReplaceTask, "");
              break;
            }
          }
          let p = this.rules.other.listTaskCheckbox.exec(l.raw);
          if (p) {
            let c = { type: "checkbox", raw: p[0] + " ", checked: p[0] !== "[ ]" };
            l.checked = c.checked, i.loose ? l.tokens[0] && ["paragraph", "text"].includes(l.tokens[0].type) && "tokens" in l.tokens[0] && l.tokens[0].tokens ? (l.tokens[0].raw = c.raw + l.tokens[0].raw, l.tokens[0].text = c.raw + l.tokens[0].text, l.tokens[0].tokens.unshift(c)) : l.tokens.unshift({ type: "paragraph", raw: c.raw, text: c.raw, tokens: [c] }) : l.tokens.unshift(c);
          }
        }
        if (!i.loose) {
          let p = l.tokens.filter((g) => g.type === "space"), c = p.length > 0 && p.some((g) => this.rules.other.anyLine.test(g.raw));
          i.loose = c;
        }
      }
      if (i.loose) for (let l of i.items) {
        l.loose = true;
        for (let p of l.tokens) p.type === "text" && (p.type = "paragraph");
      }
      return i;
    }
  }
  html(e) {
    let t = this.rules.block.html.exec(e);
    if (t) return { type: "html", block: true, raw: t[0], pre: t[1] === "pre" || t[1] === "script" || t[1] === "style", text: t[0] };
  }
  def(e) {
    let t = this.rules.block.def.exec(e);
    if (t) {
      let n = t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal, " "), r2 = t[2] ? t[2].replace(this.rules.other.hrefBrackets, "$1").replace(this.rules.inline.anyPunctuation, "$1") : "", i = t[3] ? t[3].substring(1, t[3].length - 1).replace(this.rules.inline.anyPunctuation, "$1") : t[3];
      return { type: "def", tag: n, raw: t[0], href: r2, title: i };
    }
  }
  table(e) {
    let t = this.rules.block.table.exec(e);
    if (!t || !this.rules.other.tableDelimiter.test(t[2])) return;
    let n = J(t[1]), r2 = t[2].replace(this.rules.other.tableAlignChars, "").split("|"), i = t[3]?.trim() ? t[3].replace(this.rules.other.tableRowBlankLine, "").split(`
`) : [], s = { type: "table", raw: t[0], header: [], align: [], rows: [] };
    if (n.length === r2.length) {
      for (let a of r2) this.rules.other.tableAlignRight.test(a) ? s.align.push("right") : this.rules.other.tableAlignCenter.test(a) ? s.align.push("center") : this.rules.other.tableAlignLeft.test(a) ? s.align.push("left") : s.align.push(null);
      for (let a = 0; a < n.length; a++) s.header.push({ text: n[a], tokens: this.lexer.inline(n[a]), header: true, align: s.align[a] });
      for (let a of i) s.rows.push(J(a, s.header.length).map((o, l) => ({ text: o, tokens: this.lexer.inline(o), header: false, align: s.align[l] })));
      return s;
    }
  }
  lheading(e) {
    let t = this.rules.block.lheading.exec(e);
    if (t) return { type: "heading", raw: t[0], depth: t[2].charAt(0) === "=" ? 1 : 2, text: t[1], tokens: this.lexer.inline(t[1]) };
  }
  paragraph(e) {
    let t = this.rules.block.paragraph.exec(e);
    if (t) {
      let n = t[1].charAt(t[1].length - 1) === `
` ? t[1].slice(0, -1) : t[1];
      return { type: "paragraph", raw: t[0], text: n, tokens: this.lexer.inline(n) };
    }
  }
  text(e) {
    let t = this.rules.block.text.exec(e);
    if (t) return { type: "text", raw: t[0], text: t[0], tokens: this.lexer.inline(t[0]) };
  }
  escape(e) {
    let t = this.rules.inline.escape.exec(e);
    if (t) return { type: "escape", raw: t[0], text: t[1] };
  }
  tag(e) {
    let t = this.rules.inline.tag.exec(e);
    if (t) return !this.lexer.state.inLink && this.rules.other.startATag.test(t[0]) ? this.lexer.state.inLink = true : this.lexer.state.inLink && this.rules.other.endATag.test(t[0]) && (this.lexer.state.inLink = false), !this.lexer.state.inRawBlock && this.rules.other.startPreScriptTag.test(t[0]) ? this.lexer.state.inRawBlock = true : this.lexer.state.inRawBlock && this.rules.other.endPreScriptTag.test(t[0]) && (this.lexer.state.inRawBlock = false), { type: "html", raw: t[0], inLink: this.lexer.state.inLink, inRawBlock: this.lexer.state.inRawBlock, block: false, text: t[0] };
  }
  link(e) {
    let t = this.rules.inline.link.exec(e);
    if (t) {
      let n = t[2].trim();
      if (!this.options.pedantic && this.rules.other.startAngleBracket.test(n)) {
        if (!this.rules.other.endAngleBracket.test(n)) return;
        let s = z(n.slice(0, -1), "\\");
        if ((n.length - s.length) % 2 === 0) return;
      } else {
        let s = de(t[2], "()");
        if (s === -2) return;
        if (s > -1) {
          let o = (t[0].indexOf("!") === 0 ? 5 : 4) + t[1].length + s;
          t[2] = t[2].substring(0, s), t[0] = t[0].substring(0, o).trim(), t[3] = "";
        }
      }
      let r2 = t[2], i = "";
      if (this.options.pedantic) {
        let s = this.rules.other.pedanticHrefTitle.exec(r2);
        s && (r2 = s[1], i = s[3]);
      } else i = t[3] ? t[3].slice(1, -1) : "";
      return r2 = r2.trim(), this.rules.other.startAngleBracket.test(r2) && (this.options.pedantic && !this.rules.other.endAngleBracket.test(n) ? r2 = r2.slice(1) : r2 = r2.slice(1, -1)), ge(t, { href: r2 && r2.replace(this.rules.inline.anyPunctuation, "$1"), title: i && i.replace(this.rules.inline.anyPunctuation, "$1") }, t[0], this.lexer, this.rules);
    }
  }
  reflink(e, t) {
    let n;
    if ((n = this.rules.inline.reflink.exec(e)) || (n = this.rules.inline.nolink.exec(e))) {
      let r2 = (n[2] || n[1]).replace(this.rules.other.multipleSpaceGlobal, " "), i = t[r2.toLowerCase()];
      if (!i) {
        let s = n[0].charAt(0);
        return { type: "text", raw: s, text: s };
      }
      return ge(n, i, n[0], this.lexer, this.rules);
    }
  }
  emStrong(e, t, n = "") {
    let r2 = this.rules.inline.emStrongLDelim.exec(e);
    if (!r2 || r2[3] && n.match(this.rules.other.unicodeAlphaNumeric)) return;
    if (!(r2[1] || r2[2] || "") || !n || this.rules.inline.punctuation.exec(n)) {
      let s = [...r2[0]].length - 1, a, o, l = s, p = 0, c = r2[0][0] === "*" ? this.rules.inline.emStrongRDelimAst : this.rules.inline.emStrongRDelimUnd;
      for (c.lastIndex = 0, t = t.slice(-1 * e.length + s); (r2 = c.exec(t)) != null; ) {
        if (a = r2[1] || r2[2] || r2[3] || r2[4] || r2[5] || r2[6], !a) continue;
        if (o = [...a].length, r2[3] || r2[4]) {
          l += o;
          continue;
        } else if ((r2[5] || r2[6]) && s % 3 && !((s + o) % 3)) {
          p += o;
          continue;
        }
        if (l -= o, l > 0) continue;
        o = Math.min(o, o + l + p);
        let g = [...r2[0]][0].length, h = e.slice(0, s + r2.index + g + o);
        if (Math.min(s, o) % 2) {
          let f = h.slice(1, -1);
          return { type: "em", raw: h, text: f, tokens: this.lexer.inlineTokens(f) };
        }
        let R = h.slice(2, -2);
        return { type: "strong", raw: h, text: R, tokens: this.lexer.inlineTokens(R) };
      }
    }
  }
  codespan(e) {
    let t = this.rules.inline.code.exec(e);
    if (t) {
      let n = t[2].replace(this.rules.other.newLineCharGlobal, " "), r2 = this.rules.other.nonSpaceChar.test(n), i = this.rules.other.startingSpaceChar.test(n) && this.rules.other.endingSpaceChar.test(n);
      return r2 && i && (n = n.substring(1, n.length - 1)), { type: "codespan", raw: t[0], text: n };
    }
  }
  br(e) {
    let t = this.rules.inline.br.exec(e);
    if (t) return { type: "br", raw: t[0] };
  }
  del(e) {
    let t = this.rules.inline.del.exec(e);
    if (t) return { type: "del", raw: t[0], text: t[2], tokens: this.lexer.inlineTokens(t[2]) };
  }
  autolink(e) {
    let t = this.rules.inline.autolink.exec(e);
    if (t) {
      let n, r2;
      return t[2] === "@" ? (n = t[1], r2 = "mailto:" + n) : (n = t[1], r2 = n), { type: "link", raw: t[0], text: n, href: r2, tokens: [{ type: "text", raw: n, text: n }] };
    }
  }
  url(e) {
    let t;
    if (t = this.rules.inline.url.exec(e)) {
      let n, r2;
      if (t[2] === "@") n = t[0], r2 = "mailto:" + n;
      else {
        let i;
        do
          i = t[0], t[0] = this.rules.inline._backpedal.exec(t[0])?.[0] ?? "";
        while (i !== t[0]);
        n = t[0], t[1] === "www." ? r2 = "http://" + t[0] : r2 = t[0];
      }
      return { type: "link", raw: t[0], text: n, href: r2, tokens: [{ type: "text", raw: n, text: n }] };
    }
  }
  inlineText(e) {
    let t = this.rules.inline.text.exec(e);
    if (t) {
      let n = this.lexer.state.inRawBlock;
      return { type: "text", raw: t[0], text: t[0], escaped: n };
    }
  }
};
var x = class u {
  tokens;
  options;
  state;
  inlineQueue;
  tokenizer;
  constructor(e) {
    this.tokens = [], this.tokens.links = /* @__PURE__ */ Object.create(null), this.options = e || T, this.options.tokenizer = this.options.tokenizer || new y(), this.tokenizer = this.options.tokenizer, this.tokenizer.options = this.options, this.tokenizer.lexer = this, this.inlineQueue = [], this.state = { inLink: false, inRawBlock: false, top: true };
    let t = { other: m, block: E.normal, inline: M.normal };
    this.options.pedantic ? (t.block = E.pedantic, t.inline = M.pedantic) : this.options.gfm && (t.block = E.gfm, this.options.breaks ? t.inline = M.breaks : t.inline = M.gfm), this.tokenizer.rules = t;
  }
  static get rules() {
    return { block: E, inline: M };
  }
  static lex(e, t) {
    return new u(t).lex(e);
  }
  static lexInline(e, t) {
    return new u(t).inlineTokens(e);
  }
  lex(e) {
    e = e.replace(m.carriageReturn, `
`), this.blockTokens(e, this.tokens);
    for (let t = 0; t < this.inlineQueue.length; t++) {
      let n = this.inlineQueue[t];
      this.inlineTokens(n.src, n.tokens);
    }
    return this.inlineQueue = [], this.tokens;
  }
  blockTokens(e, t = [], n = false) {
    for (this.options.pedantic && (e = e.replace(m.tabCharGlobal, "    ").replace(m.spaceLine, "")); e; ) {
      let r2;
      if (this.options.extensions?.block?.some((s) => (r2 = s.call({ lexer: this }, e, t)) ? (e = e.substring(r2.raw.length), t.push(r2), true) : false)) continue;
      if (r2 = this.tokenizer.space(e)) {
        e = e.substring(r2.raw.length);
        let s = t.at(-1);
        r2.raw.length === 1 && s !== void 0 ? s.raw += `
` : t.push(r2);
        continue;
      }
      if (r2 = this.tokenizer.code(e)) {
        e = e.substring(r2.raw.length);
        let s = t.at(-1);
        s?.type === "paragraph" || s?.type === "text" ? (s.raw += (s.raw.endsWith(`
`) ? "" : `
`) + r2.raw, s.text += `
` + r2.text, this.inlineQueue.at(-1).src = s.text) : t.push(r2);
        continue;
      }
      if (r2 = this.tokenizer.fences(e)) {
        e = e.substring(r2.raw.length), t.push(r2);
        continue;
      }
      if (r2 = this.tokenizer.heading(e)) {
        e = e.substring(r2.raw.length), t.push(r2);
        continue;
      }
      if (r2 = this.tokenizer.hr(e)) {
        e = e.substring(r2.raw.length), t.push(r2);
        continue;
      }
      if (r2 = this.tokenizer.blockquote(e)) {
        e = e.substring(r2.raw.length), t.push(r2);
        continue;
      }
      if (r2 = this.tokenizer.list(e)) {
        e = e.substring(r2.raw.length), t.push(r2);
        continue;
      }
      if (r2 = this.tokenizer.html(e)) {
        e = e.substring(r2.raw.length), t.push(r2);
        continue;
      }
      if (r2 = this.tokenizer.def(e)) {
        e = e.substring(r2.raw.length);
        let s = t.at(-1);
        s?.type === "paragraph" || s?.type === "text" ? (s.raw += (s.raw.endsWith(`
`) ? "" : `
`) + r2.raw, s.text += `
` + r2.raw, this.inlineQueue.at(-1).src = s.text) : this.tokens.links[r2.tag] || (this.tokens.links[r2.tag] = { href: r2.href, title: r2.title }, t.push(r2));
        continue;
      }
      if (r2 = this.tokenizer.table(e)) {
        e = e.substring(r2.raw.length), t.push(r2);
        continue;
      }
      if (r2 = this.tokenizer.lheading(e)) {
        e = e.substring(r2.raw.length), t.push(r2);
        continue;
      }
      let i = e;
      if (this.options.extensions?.startBlock) {
        let s = 1 / 0, a = e.slice(1), o;
        this.options.extensions.startBlock.forEach((l) => {
          o = l.call({ lexer: this }, a), typeof o == "number" && o >= 0 && (s = Math.min(s, o));
        }), s < 1 / 0 && s >= 0 && (i = e.substring(0, s + 1));
      }
      if (this.state.top && (r2 = this.tokenizer.paragraph(i))) {
        let s = t.at(-1);
        n && s?.type === "paragraph" ? (s.raw += (s.raw.endsWith(`
`) ? "" : `
`) + r2.raw, s.text += `
` + r2.text, this.inlineQueue.pop(), this.inlineQueue.at(-1).src = s.text) : t.push(r2), n = i.length !== e.length, e = e.substring(r2.raw.length);
        continue;
      }
      if (r2 = this.tokenizer.text(e)) {
        e = e.substring(r2.raw.length);
        let s = t.at(-1);
        s?.type === "text" ? (s.raw += (s.raw.endsWith(`
`) ? "" : `
`) + r2.raw, s.text += `
` + r2.text, this.inlineQueue.pop(), this.inlineQueue.at(-1).src = s.text) : t.push(r2);
        continue;
      }
      if (e) {
        let s = "Infinite loop on byte: " + e.charCodeAt(0);
        if (this.options.silent) {
          console.error(s);
          break;
        } else throw new Error(s);
      }
    }
    return this.state.top = true, t;
  }
  inline(e, t = []) {
    return this.inlineQueue.push({ src: e, tokens: t }), t;
  }
  inlineTokens(e, t = []) {
    let n = e, r2 = null;
    if (this.tokens.links) {
      let o = Object.keys(this.tokens.links);
      if (o.length > 0) for (; (r2 = this.tokenizer.rules.inline.reflinkSearch.exec(n)) != null; ) o.includes(r2[0].slice(r2[0].lastIndexOf("[") + 1, -1)) && (n = n.slice(0, r2.index) + "[" + "a".repeat(r2[0].length - 2) + "]" + n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex));
    }
    for (; (r2 = this.tokenizer.rules.inline.anyPunctuation.exec(n)) != null; ) n = n.slice(0, r2.index) + "++" + n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);
    let i;
    for (; (r2 = this.tokenizer.rules.inline.blockSkip.exec(n)) != null; ) i = r2[2] ? r2[2].length : 0, n = n.slice(0, r2.index + i) + "[" + "a".repeat(r2[0].length - i - 2) + "]" + n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);
    n = this.options.hooks?.emStrongMask?.call({ lexer: this }, n) ?? n;
    let s = false, a = "";
    for (; e; ) {
      s || (a = ""), s = false;
      let o;
      if (this.options.extensions?.inline?.some((p) => (o = p.call({ lexer: this }, e, t)) ? (e = e.substring(o.raw.length), t.push(o), true) : false)) continue;
      if (o = this.tokenizer.escape(e)) {
        e = e.substring(o.raw.length), t.push(o);
        continue;
      }
      if (o = this.tokenizer.tag(e)) {
        e = e.substring(o.raw.length), t.push(o);
        continue;
      }
      if (o = this.tokenizer.link(e)) {
        e = e.substring(o.raw.length), t.push(o);
        continue;
      }
      if (o = this.tokenizer.reflink(e, this.tokens.links)) {
        e = e.substring(o.raw.length);
        let p = t.at(-1);
        o.type === "text" && p?.type === "text" ? (p.raw += o.raw, p.text += o.text) : t.push(o);
        continue;
      }
      if (o = this.tokenizer.emStrong(e, n, a)) {
        e = e.substring(o.raw.length), t.push(o);
        continue;
      }
      if (o = this.tokenizer.codespan(e)) {
        e = e.substring(o.raw.length), t.push(o);
        continue;
      }
      if (o = this.tokenizer.br(e)) {
        e = e.substring(o.raw.length), t.push(o);
        continue;
      }
      if (o = this.tokenizer.del(e)) {
        e = e.substring(o.raw.length), t.push(o);
        continue;
      }
      if (o = this.tokenizer.autolink(e)) {
        e = e.substring(o.raw.length), t.push(o);
        continue;
      }
      if (!this.state.inLink && (o = this.tokenizer.url(e))) {
        e = e.substring(o.raw.length), t.push(o);
        continue;
      }
      let l = e;
      if (this.options.extensions?.startInline) {
        let p = 1 / 0, c = e.slice(1), g;
        this.options.extensions.startInline.forEach((h) => {
          g = h.call({ lexer: this }, c), typeof g == "number" && g >= 0 && (p = Math.min(p, g));
        }), p < 1 / 0 && p >= 0 && (l = e.substring(0, p + 1));
      }
      if (o = this.tokenizer.inlineText(l)) {
        e = e.substring(o.raw.length), o.raw.slice(-1) !== "_" && (a = o.raw.slice(-1)), s = true;
        let p = t.at(-1);
        p?.type === "text" ? (p.raw += o.raw, p.text += o.text) : t.push(o);
        continue;
      }
      if (e) {
        let p = "Infinite loop on byte: " + e.charCodeAt(0);
        if (this.options.silent) {
          console.error(p);
          break;
        } else throw new Error(p);
      }
    }
    return t;
  }
};
var P = class {
  options;
  parser;
  constructor(e) {
    this.options = e || T;
  }
  space(e) {
    return "";
  }
  code({ text: e, lang: t, escaped: n }) {
    let r2 = (t || "").match(m.notSpaceStart)?.[0], i = e.replace(m.endingNewline, "") + `
`;
    return r2 ? '<pre><code class="language-' + w(r2) + '">' + (n ? i : w(i, true)) + `</code></pre>
` : "<pre><code>" + (n ? i : w(i, true)) + `</code></pre>
`;
  }
  blockquote({ tokens: e }) {
    return `<blockquote>
${this.parser.parse(e)}</blockquote>
`;
  }
  html({ text: e }) {
    return e;
  }
  def(e) {
    return "";
  }
  heading({ tokens: e, depth: t }) {
    return `<h${t}>${this.parser.parseInline(e)}</h${t}>
`;
  }
  hr(e) {
    return `<hr>
`;
  }
  list(e) {
    let t = e.ordered, n = e.start, r2 = "";
    for (let a = 0; a < e.items.length; a++) {
      let o = e.items[a];
      r2 += this.listitem(o);
    }
    let i = t ? "ol" : "ul", s = t && n !== 1 ? ' start="' + n + '"' : "";
    return "<" + i + s + `>
` + r2 + "</" + i + `>
`;
  }
  listitem(e) {
    return `<li>${this.parser.parse(e.tokens)}</li>
`;
  }
  checkbox({ checked: e }) {
    return "<input " + (e ? 'checked="" ' : "") + 'disabled="" type="checkbox"> ';
  }
  paragraph({ tokens: e }) {
    return `<p>${this.parser.parseInline(e)}</p>
`;
  }
  table(e) {
    let t = "", n = "";
    for (let i = 0; i < e.header.length; i++) n += this.tablecell(e.header[i]);
    t += this.tablerow({ text: n });
    let r2 = "";
    for (let i = 0; i < e.rows.length; i++) {
      let s = e.rows[i];
      n = "";
      for (let a = 0; a < s.length; a++) n += this.tablecell(s[a]);
      r2 += this.tablerow({ text: n });
    }
    return r2 && (r2 = `<tbody>${r2}</tbody>`), `<table>
<thead>
` + t + `</thead>
` + r2 + `</table>
`;
  }
  tablerow({ text: e }) {
    return `<tr>
${e}</tr>
`;
  }
  tablecell(e) {
    let t = this.parser.parseInline(e.tokens), n = e.header ? "th" : "td";
    return (e.align ? `<${n} align="${e.align}">` : `<${n}>`) + t + `</${n}>
`;
  }
  strong({ tokens: e }) {
    return `<strong>${this.parser.parseInline(e)}</strong>`;
  }
  em({ tokens: e }) {
    return `<em>${this.parser.parseInline(e)}</em>`;
  }
  codespan({ text: e }) {
    return `<code>${w(e, true)}</code>`;
  }
  br(e) {
    return "<br>";
  }
  del({ tokens: e }) {
    return `<del>${this.parser.parseInline(e)}</del>`;
  }
  link({ href: e, title: t, tokens: n }) {
    let r2 = this.parser.parseInline(n), i = X(e);
    if (i === null) return r2;
    e = i;
    let s = '<a href="' + e + '"';
    return t && (s += ' title="' + w(t) + '"'), s += ">" + r2 + "</a>", s;
  }
  image({ href: e, title: t, text: n, tokens: r2 }) {
    r2 && (n = this.parser.parseInline(r2, this.parser.textRenderer));
    let i = X(e);
    if (i === null) return w(n);
    e = i;
    let s = `<img src="${e}" alt="${n}"`;
    return t && (s += ` title="${w(t)}"`), s += ">", s;
  }
  text(e) {
    return "tokens" in e && e.tokens ? this.parser.parseInline(e.tokens) : "escaped" in e && e.escaped ? e.text : w(e.text);
  }
};
var $ = class {
  strong({ text: e }) {
    return e;
  }
  em({ text: e }) {
    return e;
  }
  codespan({ text: e }) {
    return e;
  }
  del({ text: e }) {
    return e;
  }
  html({ text: e }) {
    return e;
  }
  text({ text: e }) {
    return e;
  }
  link({ text: e }) {
    return "" + e;
  }
  image({ text: e }) {
    return "" + e;
  }
  br() {
    return "";
  }
  checkbox({ raw: e }) {
    return e;
  }
};
var b = class u2 {
  options;
  renderer;
  textRenderer;
  constructor(e) {
    this.options = e || T, this.options.renderer = this.options.renderer || new P(), this.renderer = this.options.renderer, this.renderer.options = this.options, this.renderer.parser = this, this.textRenderer = new $();
  }
  static parse(e, t) {
    return new u2(t).parse(e);
  }
  static parseInline(e, t) {
    return new u2(t).parseInline(e);
  }
  parse(e) {
    let t = "";
    for (let n = 0; n < e.length; n++) {
      let r2 = e[n];
      if (this.options.extensions?.renderers?.[r2.type]) {
        let s = r2, a = this.options.extensions.renderers[s.type].call({ parser: this }, s);
        if (a !== false || !["space", "hr", "heading", "code", "table", "blockquote", "list", "html", "def", "paragraph", "text"].includes(s.type)) {
          t += a || "";
          continue;
        }
      }
      let i = r2;
      switch (i.type) {
        case "space": {
          t += this.renderer.space(i);
          break;
        }
        case "hr": {
          t += this.renderer.hr(i);
          break;
        }
        case "heading": {
          t += this.renderer.heading(i);
          break;
        }
        case "code": {
          t += this.renderer.code(i);
          break;
        }
        case "table": {
          t += this.renderer.table(i);
          break;
        }
        case "blockquote": {
          t += this.renderer.blockquote(i);
          break;
        }
        case "list": {
          t += this.renderer.list(i);
          break;
        }
        case "checkbox": {
          t += this.renderer.checkbox(i);
          break;
        }
        case "html": {
          t += this.renderer.html(i);
          break;
        }
        case "def": {
          t += this.renderer.def(i);
          break;
        }
        case "paragraph": {
          t += this.renderer.paragraph(i);
          break;
        }
        case "text": {
          t += this.renderer.text(i);
          break;
        }
        default: {
          let s = 'Token with "' + i.type + '" type was not found.';
          if (this.options.silent) return console.error(s), "";
          throw new Error(s);
        }
      }
    }
    return t;
  }
  parseInline(e, t = this.renderer) {
    let n = "";
    for (let r2 = 0; r2 < e.length; r2++) {
      let i = e[r2];
      if (this.options.extensions?.renderers?.[i.type]) {
        let a = this.options.extensions.renderers[i.type].call({ parser: this }, i);
        if (a !== false || !["escape", "html", "link", "image", "strong", "em", "codespan", "br", "del", "text"].includes(i.type)) {
          n += a || "";
          continue;
        }
      }
      let s = i;
      switch (s.type) {
        case "escape": {
          n += t.text(s);
          break;
        }
        case "html": {
          n += t.html(s);
          break;
        }
        case "link": {
          n += t.link(s);
          break;
        }
        case "image": {
          n += t.image(s);
          break;
        }
        case "checkbox": {
          n += t.checkbox(s);
          break;
        }
        case "strong": {
          n += t.strong(s);
          break;
        }
        case "em": {
          n += t.em(s);
          break;
        }
        case "codespan": {
          n += t.codespan(s);
          break;
        }
        case "br": {
          n += t.br(s);
          break;
        }
        case "del": {
          n += t.del(s);
          break;
        }
        case "text": {
          n += t.text(s);
          break;
        }
        default: {
          let a = 'Token with "' + s.type + '" type was not found.';
          if (this.options.silent) return console.error(a), "";
          throw new Error(a);
        }
      }
    }
    return n;
  }
};
var S = class {
  options;
  block;
  constructor(e) {
    this.options = e || T;
  }
  static passThroughHooks = /* @__PURE__ */ new Set(["preprocess", "postprocess", "processAllTokens", "emStrongMask"]);
  static passThroughHooksRespectAsync = /* @__PURE__ */ new Set(["preprocess", "postprocess", "processAllTokens"]);
  preprocess(e) {
    return e;
  }
  postprocess(e) {
    return e;
  }
  processAllTokens(e) {
    return e;
  }
  emStrongMask(e) {
    return e;
  }
  provideLexer() {
    return this.block ? x.lex : x.lexInline;
  }
  provideParser() {
    return this.block ? b.parse : b.parseInline;
  }
};
var B = class {
  defaults = L();
  options = this.setOptions;
  parse = this.parseMarkdown(true);
  parseInline = this.parseMarkdown(false);
  Parser = b;
  Renderer = P;
  TextRenderer = $;
  Lexer = x;
  Tokenizer = y;
  Hooks = S;
  constructor(...e) {
    this.use(...e);
  }
  walkTokens(e, t) {
    let n = [];
    for (let r2 of e) switch (n = n.concat(t.call(this, r2)), r2.type) {
      case "table": {
        let i = r2;
        for (let s of i.header) n = n.concat(this.walkTokens(s.tokens, t));
        for (let s of i.rows) for (let a of s) n = n.concat(this.walkTokens(a.tokens, t));
        break;
      }
      case "list": {
        let i = r2;
        n = n.concat(this.walkTokens(i.items, t));
        break;
      }
      default: {
        let i = r2;
        this.defaults.extensions?.childTokens?.[i.type] ? this.defaults.extensions.childTokens[i.type].forEach((s) => {
          let a = i[s].flat(1 / 0);
          n = n.concat(this.walkTokens(a, t));
        }) : i.tokens && (n = n.concat(this.walkTokens(i.tokens, t)));
      }
    }
    return n;
  }
  use(...e) {
    let t = this.defaults.extensions || { renderers: {}, childTokens: {} };
    return e.forEach((n) => {
      let r2 = { ...n };
      if (r2.async = this.defaults.async || r2.async || false, n.extensions && (n.extensions.forEach((i) => {
        if (!i.name) throw new Error("extension name required");
        if ("renderer" in i) {
          let s = t.renderers[i.name];
          s ? t.renderers[i.name] = function(...a) {
            let o = i.renderer.apply(this, a);
            return o === false && (o = s.apply(this, a)), o;
          } : t.renderers[i.name] = i.renderer;
        }
        if ("tokenizer" in i) {
          if (!i.level || i.level !== "block" && i.level !== "inline") throw new Error("extension level must be 'block' or 'inline'");
          let s = t[i.level];
          s ? s.unshift(i.tokenizer) : t[i.level] = [i.tokenizer], i.start && (i.level === "block" ? t.startBlock ? t.startBlock.push(i.start) : t.startBlock = [i.start] : i.level === "inline" && (t.startInline ? t.startInline.push(i.start) : t.startInline = [i.start]));
        }
        "childTokens" in i && i.childTokens && (t.childTokens[i.name] = i.childTokens);
      }), r2.extensions = t), n.renderer) {
        let i = this.defaults.renderer || new P(this.defaults);
        for (let s in n.renderer) {
          if (!(s in i)) throw new Error(`renderer '${s}' does not exist`);
          if (["options", "parser"].includes(s)) continue;
          let a = s, o = n.renderer[a], l = i[a];
          i[a] = (...p) => {
            let c = o.apply(i, p);
            return c === false && (c = l.apply(i, p)), c || "";
          };
        }
        r2.renderer = i;
      }
      if (n.tokenizer) {
        let i = this.defaults.tokenizer || new y(this.defaults);
        for (let s in n.tokenizer) {
          if (!(s in i)) throw new Error(`tokenizer '${s}' does not exist`);
          if (["options", "rules", "lexer"].includes(s)) continue;
          let a = s, o = n.tokenizer[a], l = i[a];
          i[a] = (...p) => {
            let c = o.apply(i, p);
            return c === false && (c = l.apply(i, p)), c;
          };
        }
        r2.tokenizer = i;
      }
      if (n.hooks) {
        let i = this.defaults.hooks || new S();
        for (let s in n.hooks) {
          if (!(s in i)) throw new Error(`hook '${s}' does not exist`);
          if (["options", "block"].includes(s)) continue;
          let a = s, o = n.hooks[a], l = i[a];
          S.passThroughHooks.has(s) ? i[a] = (p) => {
            if (this.defaults.async && S.passThroughHooksRespectAsync.has(s)) return (async () => {
              let g = await o.call(i, p);
              return l.call(i, g);
            })();
            let c = o.call(i, p);
            return l.call(i, c);
          } : i[a] = (...p) => {
            if (this.defaults.async) return (async () => {
              let g = await o.apply(i, p);
              return g === false && (g = await l.apply(i, p)), g;
            })();
            let c = o.apply(i, p);
            return c === false && (c = l.apply(i, p)), c;
          };
        }
        r2.hooks = i;
      }
      if (n.walkTokens) {
        let i = this.defaults.walkTokens, s = n.walkTokens;
        r2.walkTokens = function(a) {
          let o = [];
          return o.push(s.call(this, a)), i && (o = o.concat(i.call(this, a))), o;
        };
      }
      this.defaults = { ...this.defaults, ...r2 };
    }), this;
  }
  setOptions(e) {
    return this.defaults = { ...this.defaults, ...e }, this;
  }
  lexer(e, t) {
    return x.lex(e, t ?? this.defaults);
  }
  parser(e, t) {
    return b.parse(e, t ?? this.defaults);
  }
  parseMarkdown(e) {
    return (n, r2) => {
      let i = { ...r2 }, s = { ...this.defaults, ...i }, a = this.onError(!!s.silent, !!s.async);
      if (this.defaults.async === true && i.async === false) return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));
      if (typeof n > "u" || n === null) return a(new Error("marked(): input parameter is undefined or null"));
      if (typeof n != "string") return a(new Error("marked(): input parameter is of type " + Object.prototype.toString.call(n) + ", string expected"));
      if (s.hooks && (s.hooks.options = s, s.hooks.block = e), s.async) return (async () => {
        let o = s.hooks ? await s.hooks.preprocess(n) : n, p = await (s.hooks ? await s.hooks.provideLexer() : e ? x.lex : x.lexInline)(o, s), c = s.hooks ? await s.hooks.processAllTokens(p) : p;
        s.walkTokens && await Promise.all(this.walkTokens(c, s.walkTokens));
        let h = await (s.hooks ? await s.hooks.provideParser() : e ? b.parse : b.parseInline)(c, s);
        return s.hooks ? await s.hooks.postprocess(h) : h;
      })().catch(a);
      try {
        s.hooks && (n = s.hooks.preprocess(n));
        let l = (s.hooks ? s.hooks.provideLexer() : e ? x.lex : x.lexInline)(n, s);
        s.hooks && (l = s.hooks.processAllTokens(l)), s.walkTokens && this.walkTokens(l, s.walkTokens);
        let c = (s.hooks ? s.hooks.provideParser() : e ? b.parse : b.parseInline)(l, s);
        return s.hooks && (c = s.hooks.postprocess(c)), c;
      } catch (o) {
        return a(o);
      }
    };
  }
  onError(e, t) {
    return (n) => {
      if (n.message += `
Please report this to https://github.com/markedjs/marked.`, e) {
        let r2 = "<p>An error occurred:</p><pre>" + w(n.message + "", true) + "</pre>";
        return t ? Promise.resolve(r2) : r2;
      }
      if (t) return Promise.reject(n);
      throw n;
    };
  }
};
var _ = new B();
function d(u3, e) {
  return _.parse(u3, e);
}
d.options = d.setOptions = function(u3) {
  return _.setOptions(u3), d.defaults = _.defaults, Z(d.defaults), d;
};
d.getDefaults = L;
d.defaults = T;
d.use = function(...u3) {
  return _.use(...u3), d.defaults = _.defaults, Z(d.defaults), d;
};
d.walkTokens = function(u3, e) {
  return _.walkTokens(u3, e);
};
d.parseInline = _.parseInline;
d.Parser = b;
d.parser = b.parse;
d.Renderer = P;
d.TextRenderer = $;
d.Lexer = x;
d.lexer = x.lex;
d.Tokenizer = y;
d.Hooks = S;
d.parse = d;
d.options;
d.setOptions;
d.use;
d.walkTokens;
d.parseInline;
b.parse;
x.lex;
function NotionEditor({ value, onChange, placeholder }) {
  const [isDragging2, setIsDragging] = reactExports.useState(false);
  const textareaRef = reactExports.useRef(null);
  const fileInputRef = reactExports.useRef(null);
  const insertText = reactExports.useCallback((before, after = "") => {
    if (!textareaRef.current) return;
    const textarea = textareaRef.current;
    const start = textarea.selectionStart;
    const end = textarea.selectionEnd;
    const selectedText = value.substring(start, end);
    const newText = value.substring(0, start) + before + selectedText + after + value.substring(end);
    onChange(newText);
    setTimeout(() => {
      textarea.focus();
      const newPosition = start + before.length + selectedText.length + after.length;
      textarea.setSelectionRange(newPosition, newPosition);
    }, 0);
  }, [value, onChange]);
  const handleKeyDown = reactExports.useCallback((e) => {
    if ((e.ctrlKey || e.metaKey) && e.key === "b") {
      e.preventDefault();
      insertText("**", "**");
    }
    if ((e.ctrlKey || e.metaKey) && e.key === "i") {
      e.preventDefault();
      insertText("*", "*");
    }
    if ((e.ctrlKey || e.metaKey) && e.key === "k") {
      e.preventDefault();
      insertText("[", "](url)");
    }
  }, [insertText]);
  const handleFileUpload = reactExports.useCallback(async (files) => {
    if (!files || files.length === 0) return;
    const file = files[0];
    if (!file.type.startsWith("image/")) {
      alert("");
      return;
    }
    const reader = new FileReader();
    reader.onload = (e) => {
      const base64 = e.target?.result;
      insertText(`![${file.name}](${base64})
`);
    };
    reader.readAsDataURL(file);
  }, [insertText]);
  const handleDragOver = reactExports.useCallback((e) => {
    e.preventDefault();
    setIsDragging(true);
  }, []);
  const handleDragLeave = reactExports.useCallback(() => {
    setIsDragging(false);
  }, []);
  const handleDrop = reactExports.useCallback((e) => {
    e.preventDefault();
    setIsDragging(false);
    handleFileUpload(e.dataTransfer.files);
  }, [handleFileUpload]);
  const ToolbarButton = ({ icon, onClick, title }) => /* @__PURE__ */ jsxRuntimeExports.jsx(
    "button",
    {
      type: "button",
      onClick,
      title,
      className: "w-8 h-8 flex items-center justify-center hover:bg-white/10 rounded transition-colors text-slate-400 hover:text-white",
      children: icon
    }
  );
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(
    "div",
    {
      className: "w-full border border-white/10 rounded-xl overflow-hidden bg-white/5 backdrop-blur-sm",
      onDragOver: handleDragOver,
      onDragLeave: handleDragLeave,
      onDrop: handleDrop,
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 p-3 bg-white/5 border-b border-white/10", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            ToolbarButton,
            {
              icon: "B",
              onClick: () => insertText("**", "**"),
              title: " (Ctrl+B)"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            ToolbarButton,
            {
              icon: "I",
              onClick: () => insertText("*", "*"),
              title: " (Ctrl+I)"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            ToolbarButton,
            {
              icon: "",
              onClick: () => insertText("[", "](url)"),
              title: " (Ctrl+K)"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-px h-6 bg-white/10 mx-2" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            ToolbarButton,
            {
              icon: "",
              onClick: () => fileInputRef.current?.click(),
              title: ""
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            ToolbarButton,
            {
              icon: "",
              onClick: () => insertText("# ", ""),
              title: ""
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            ToolbarButton,
            {
              icon: "",
              onClick: () => insertText("- ", ""),
              title: ""
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-1" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-slate-500", children: "Markdown " })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "input",
          {
            ref: fileInputRef,
            type: "file",
            accept: "image/*",
            className: "hidden",
            onChange: (e) => handleFileUpload(e.target.files)
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-2 divide-x divide-white/10", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
            isDragging2 && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-primary-start/20 border-2 border-dashed z-10 flex items-center justify-center", style: { borderColor: "#FF9F43" }, children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-4xl mb-2", children: "" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-primary-start font-bold", children: "" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "textarea",
              {
                ref: textareaRef,
                value,
                onChange: (e) => onChange(e.target.value),
                onKeyDown: handleKeyDown,
                placeholder: placeholder || "...\n\n Markdown ",
                className: "w-full h-[600px] p-6 bg-transparent text-white placeholder-slate-500 resize-none focus:outline-none font-mono text-sm leading-relaxed"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-[600px] overflow-y-auto p-6 bg-white/5", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "prose prose-invert prose-pink max-w-none", children: value ? /* @__PURE__ */ jsxRuntimeExports.jsx(
            "div",
            {
              dangerouslySetInnerHTML: {
                __html: d(value, {
                  breaks: true,
                  gfm: true
                })
              },
              className: "markdown-content"
            }
          ) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-slate-500 text-center mt-20", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-4xl mb-4", children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { children: "" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs mt-2", children: " :::spoiler[]  ::: " })
          ] }) }) })
        ] })
      ]
    }
  );
}
function getSessionId(request) {
  const cookieHeader = request.headers.get("Cookie");
  return cookieHeader?.match(/session=([^;]+)/)?.[1] || null;
}
async function verifySession(sessionId, db) {
  if (!sessionId) return null;
  try {
    const sessionResult = await db.prepare(
      `SELECT s.token, s.user_id, s.expires_at, u.username, u.role 
       FROM sessions s 
       JOIN users u ON s.user_id = u.id 
       WHERE s.token = ? AND s.expires_at > ?`
    ).bind(sessionId, Math.floor(Date.now() / 1e3)).first();
    if (!sessionResult) {
      return null;
    }
    return {
      sessionId: sessionResult.token,
      userId: sessionResult.user_id,
      username: sessionResult.username,
      expiresAt: sessionResult.expires_at,
      role: sessionResult.role
    };
  } catch (error) {
    console.error("Session verification error:", error);
    return null;
  }
}
async function requireAdmin(request, db) {
  const session = await verifySession(getSessionId(request), db);
  if (!session || session.role !== "admin") {
    return null;
  }
  return session;
}
async function requireAuth(request, db) {
  const sessionId = getSessionId(request);
  return await verifySession(sessionId, db);
}
const auth = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  getSessionId,
  requireAdmin,
  requireAuth,
  verifySession
}, Symbol.toStringTag, { value: "Module" }));
async function loader$k({
  request,
  context
}) {
  const sessionId = getSessionId(request);
  if (!sessionId) {
    throw redirect("/admin/login");
  }
  const env = context.cloudflare.env;
  const secret = env.CSRF_SECRET || env.PAYMENT_SECRET || "default-secret";
  const {
    generateCSRFToken
  } = await import("./csrf.server-CJK6G2Bt.js");
  const csrfToken = await generateCSRFToken(sessionId, env.CACHE_KV, secret);
  return {
    csrfToken
  };
}
async function action$o({
  request,
  context
}) {
  const sessionId = getSessionId(request);
  if (!sessionId) {
    throw redirect("/admin/login");
  }
  const {
    anime_db
  } = context.cloudflare.env;
  try {
    const formData = await request.formData();
    const csrfToken = formData.get("_csrf");
    const env = context.cloudflare.env;
    const secret = env.CSRF_SECRET || env.PAYMENT_SECRET || "default-secret";
    const {
      validateCSRFToken
    } = await import("./csrf.server-CJK6G2Bt.js");
    const csrfResult = await validateCSRFToken(csrfToken, sessionId, env.CACHE_KV, secret);
    if (!csrfResult.valid) {
      return {
        success: false,
        error: ": " + csrfResult.error
      };
    }
    const title = formData.get("title");
    const slug = formData.get("slug");
    const description = formData.get("description");
    const content = formData.get("content");
    const category = formData.get("category");
    const cover_image = formData.get("cover_image");
    const mood_color = formData.get("mood_color");
    await anime_db.prepare(`INSERT INTO articles (slug, title, description, content, category, cover_image, mood_color)
         VALUES (?, ?, ?, ?, ?, ?, ?)`).bind(slug, title, description, content, category, cover_image || null, mood_color || null).run();
    return {
      success: true,
      slug
    };
  } catch (error) {
    console.error("Failed to create article:", error);
    return {
      success: false,
      error: ""
    };
  }
}
const admin_article_new = withComponentProps(function NewArticle({
  loaderData
}) {
  useNavigate();
  const [content, setContent] = reactExports.useState("");
  const [title, setTitle] = reactExports.useState("");
  const [zenMode, setZenMode] = reactExports.useState(false);
  const [moodColor, setMoodColor] = reactExports.useState("#FF9F43");
  const csrfToken = loaderData?.csrfToken || "";
  const generateSlug = (title2) => {
    return title2.toLowerCase().replace(/\s+/g, "-").replace(/[^a-z0-9-]/g, "");
  };
  const moodColors = [
    "#FF9F43",
    // 
    "#FF6B6B",
    // 
    "#4ECDC4",
    // 
    "#45B7D1",
    // 
    "#96CEB4",
    // 
    "#FFEAA7",
    // 
    "#DDA0DD",
    // 
    "#F8B500"
    // 
  ];
  return /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
    mode: "wait",
    children: zenMode ? (
      // 
      /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        className: "fixed inset-0 bg-[#FFF8E7] z-50",
        initial: {
          opacity: 0
        },
        animate: {
          opacity: 1
        },
        exit: {
          opacity: 0
        },
        children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "h-full flex flex-col items-center justify-center p-8 max-w-4xl mx-auto",
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
            className: "w-full h-full bg-white rounded-2xl shadow-lg p-12",
            initial: {
              scale: 0.95
            },
            animate: {
              scale: 1
            },
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center justify-between mb-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                className: "text-2xl font-bold text-gray-800",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                onClick: () => setZenMode(false),
                className: "px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",
                whileHover: {
                  scale: 1.05
                },
                whileTap: {
                  scale: 0.95
                },
                children: ""
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("textarea", {
              value: content,
              onChange: (e) => setContent(e.target.value),
              className: "w-full h-[calc(100%-100px)] border-none outline-none resize-none text-lg text-gray-800 font-serif leading-relaxed",
              placeholder: "...",
              style: {
                fontFamily: "'Noto Serif SC', serif"
              }
            })]
          })
        })
      }, "zen")
    ) : (
      // 
      /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        initial: {
          opacity: 0,
          y: 20
        },
        animate: {
          opacity: 1,
          y: 0
        },
        exit: {
          opacity: 0,
          y: -20
        },
        transition: {
          duration: 0.3
        },
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "bg-white rounded-2xl p-4 mb-6 shadow-sm border border-gray-100",
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-center gap-4 flex-wrap",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "text",
              name: "title",
              value: title,
              onChange: (e) => setTitle(e.target.value),
              placeholder: "...",
              className: "flex-1 min-w-[200px] px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 placeholder-gray-400 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100"
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "date",
              className: "px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100"
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-sm text-gray-600",
                children: ":"
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "flex gap-1",
                children: moodColors.map((color2) => /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                  type: "button",
                  onClick: () => setMoodColor(color2),
                  className: `w-6 h-6 rounded-full border-2 ${moodColor === color2 ? "border-gray-800 scale-110" : "border-gray-300"}`,
                  style: {
                    backgroundColor: color2
                  },
                  whileHover: {
                    scale: 1.1
                  },
                  whileTap: {
                    scale: 0.9
                  }
                }, color2))
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                type: "hidden",
                name: "mood_color",
                value: moodColor
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
              type: "button",
              className: "px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl text-sm font-medium transition-colors",
              whileHover: {
                scale: 1.05
              },
              whileTap: {
                scale: 0.95
              },
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
              type: "submit",
              form: "article-form",
              className: "px-6 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-medium shadow-sm hover:shadow-md transition-shadow",
              whileHover: {
                scale: 1.05
              },
              whileTap: {
                scale: 0.95
              },
              children: " "
            })]
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "bg-white rounded-2xl p-3 mb-6 shadow-sm border border-gray-100 flex items-center gap-2 flex-wrap",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            className: "text-sm text-gray-500 mr-2",
            children: ":"
          }), ["B", "I", "Link", "Code"].map((tool) => /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
            type: "button",
            className: "px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition-colors",
            whileHover: {
              scale: 1.05
            },
            whileTap: {
              scale: 0.95
            },
            children: tool
          }, tool)), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
            type: "button",
            className: "px-3 py-1.5 bg-pink-100 hover:bg-pink-200 text-pink-700 rounded-lg text-sm font-medium transition-colors",
            whileHover: {
              scale: 1.05
            },
            whileTap: {
              scale: 0.95
            },
            children: " Waifu"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
            type: "button",
            className: "px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm font-medium transition-colors",
            whileHover: {
              scale: 1.05
            },
            whileTap: {
              scale: 0.95
            },
            children: " BGM"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
            type: "button",
            onClick: () => setZenMode(true),
            className: "px-3 py-1.5 bg-yellow-100 hover:bg-yellow-200 text-yellow-700 rounded-lg text-sm font-medium transition-colors ml-auto",
            whileHover: {
              scale: 1.05
            },
            whileTap: {
              scale: 0.95
            },
            children: " "
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "bg-white rounded-2xl p-6 shadow-sm border border-gray-100",
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Form, {
            method: "post",
            id: "article-form",
            className: "space-y-6",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "slug",
              value: generateSlug(title)
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "content",
              value: content
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "_csrf",
              value: csrfToken
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                className: "block text-sm font-medium mb-2 text-gray-700",
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("textarea", {
                name: "description",
                rows: 2,
                className: "w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl\r\n                         text-gray-800 placeholder-gray-400 resize-none focus:outline-none focus:border-pink-400\r\n                         focus:ring-2 focus:ring-pink-100 transition-all",
                placeholder: "..."
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "grid grid-cols-2 gap-4",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                  className: "block text-sm font-medium mb-2 text-gray-700",
                  children: " *"
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("select", {
                  name: "category",
                  required: true,
                  defaultValue: "",
                  className: "w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl\r\n                           text-gray-800 focus:outline-none focus:border-pink-400\r\n                           focus:ring-2 focus:ring-pink-100 transition-all",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                    value: "",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                    value: "",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                    value: "",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                    value: "",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                    value: "",
                    children: ""
                  })]
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                  className: "block text-sm font-medium mb-2 text-gray-700",
                  children: " URL"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                  type: "url",
                  name: "cover_image",
                  className: "w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl\r\n                           text-gray-800 placeholder-gray-400 focus:outline-none focus:border-pink-400\r\n                           focus:ring-2 focus:ring-pink-100 transition-all",
                  placeholder: "https://..."
                })]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                className: "block text-sm font-medium mb-2 text-gray-700",
                children: " * (Markdown)"
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "grid grid-cols-1 lg:grid-cols-2 gap-4",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "bg-gray-50 border border-gray-200 rounded-xl overflow-hidden",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(NotionEditor, {
                    value: content,
                    onChange: setContent,
                    placeholder: "# \\n\\n Markdown ...\\n\\n"
                  })
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "bg-white border border-gray-200 rounded-xl p-4 overflow-y-auto max-h-[600px]",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "prose prose-sm max-w-none",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                      className: "text-gray-500 text-sm",
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                      className: "text-gray-400 text-xs",
                      children: "Markdown"
                    })]
                  })
                })]
              })]
            })]
          })
        })]
      }, "normal")
    )
  });
});
const route27 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$o,
  default: admin_article_new,
  loader: loader$k
}, Symbol.toStringTag, { value: "Module" }));
const dimensions = [
  { name: "", key: "plot" },
  { name: "", key: "animation" },
  { name: "", key: "voice" },
  { name: "", key: "music" },
  { name: "", key: "character" },
  { name: "", key: "passion" }
];
function RadarChart({ data, title, size = 200 }) {
  const centerX = size / 2;
  const centerY = size / 2;
  const radius = size * 0.4;
  const angleStep = Math.PI * 2 / dimensions.length;
  const getPoint = (index2, value) => {
    const angle = index2 * angleStep - Math.PI / 2;
    const distance2 = value / 10 * radius;
    return {
      x: centerX + Math.cos(angle) * distance2,
      y: centerY + Math.sin(angle) * distance2
    };
  };
  const generatePath = (values) => {
    const points = dimensions.map((dim, index2) => {
      const value = values[dim.key];
      return getPoint(index2, value);
    });
    return points.map((point2, index2) => `${index2 === 0 ? "M" : "L"} ${point2.x} ${point2.y}`).join(" ") + " Z";
  };
  const generateGridPath = (level) => {
    const points = dimensions.map((_2, index2) => {
      const angle = index2 * angleStep - Math.PI / 2;
      const distance2 = level / 5 * radius;
      return {
        x: centerX + Math.cos(angle) * distance2,
        y: centerY + Math.sin(angle) * distance2
      };
    });
    return points.map((point2, index2) => `${index2 === 0 ? "M" : "L"} ${point2.x} ${point2.y}`).join(" ") + " Z";
  };
  const dataPath = generatePath(data);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-center", children: [
    title && /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-bold text-slate-800 mb-4", children: title }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("svg", { width: size, height: size, className: "overflow-visible", children: [
      [1, 2, 3, 4, 5].map((level) => /* @__PURE__ */ jsxRuntimeExports.jsx("g", { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
        "path",
        {
          d: generateGridPath(level),
          fill: "none",
          stroke: "rgba(148, 163, 184, 0.2)",
          strokeWidth: "1"
        }
      ) }, level)),
      dimensions.map((dim, index2) => {
        const angle = index2 * angleStep - Math.PI / 2;
        const endX = centerX + Math.cos(angle) * radius;
        const endY = centerY + Math.sin(angle) * radius;
        return /* @__PURE__ */ jsxRuntimeExports.jsx(
          "line",
          {
            x1: centerX,
            y1: centerY,
            x2: endX,
            y2: endY,
            stroke: "rgba(148, 163, 184, 0.3)",
            strokeWidth: "1"
          },
          dim.key
        );
      }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.path,
        {
          d: dataPath,
          fill: "rgba(255, 159, 67, 0.3)",
          stroke: "rgba(255, 159, 67, 0.8)",
          strokeWidth: "2",
          initial: { pathLength: 0, opacity: 0 },
          animate: { pathLength: 1, opacity: 1 },
          transition: { duration: 1, ease: "easeInOut" }
        }
      ),
      dimensions.map((dim, index2) => {
        const point2 = getPoint(index2, data[dim.key]);
        return /* @__PURE__ */ jsxRuntimeExports.jsxs("g", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "circle",
            {
              cx: point2.x,
              cy: point2.y,
              r: "4",
              fill: "rgba(255, 159, 67, 1)",
              className: "drop-shadow-lg"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "text",
            {
              x: point2.x,
              y: point2.y - 8,
              textAnchor: "middle",
              className: "text-xs font-bold fill-primary-start",
              children: data[dim.key]
            }
          )
        ] }, dim.key);
      }),
      dimensions.map((dim, index2) => {
        const angle = index2 * angleStep - Math.PI / 2;
        const labelX = centerX + Math.cos(angle) * (radius + 20);
        const labelY = centerY + Math.sin(angle) * (radius + 20);
        return /* @__PURE__ */ jsxRuntimeExports.jsx(
          "text",
          {
            x: labelX,
            y: labelY,
            textAnchor: "middle",
            dominantBaseline: "middle",
            className: "text-xs font-medium fill-slate-700",
            children: dim.name
          },
          dim.key
        );
      })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mt-4 grid grid-cols-3 gap-2 text-xs", children: dimensions.map((dim) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "font-bold text-primary-start", children: [
        data[dim.key],
        "/10"
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-slate-500", children: dim.name })
    ] }, dim.key)) })
  ] });
}
function QuickSyncButton({ animeId, currentProgress, onSync }) {
  const [isSyncing, setIsSyncing] = reactExports.useState(false);
  const parseProgress = (progress2) => {
    const match = progress2.match(/(\d+)\/(\d+)/);
    if (match) {
      return {
        current: parseInt(match[1]),
        total: parseInt(match[2])
      };
    }
    return { current: 0, total: 0 };
  };
  const { current, total } = parseProgress(currentProgress);
  const newProgress = current < total ? `${current + 1}/${total}` : currentProgress;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(Form, { method: "post", className: "inline", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("input", { type: "hidden", name: "_action", value: "update_progress" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("input", { type: "hidden", name: "id", value: animeId }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("input", { type: "hidden", name: "progress", value: newProgress }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.button,
      {
        type: "submit",
        onClick: () => {
          setIsSyncing(true);
          if (onSync) onSync();
          setTimeout(() => setIsSyncing(false), 1e3);
        },
        disabled: current >= total || isSyncing,
        className: "px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-lg font-medium shadow-sm hover:shadow-md transition-shadow disabled:opacity-50 disabled:cursor-not-allowed",
        whileHover: { scale: current < total ? 1.05 : 1 },
        whileTap: { scale: current < total ? 0.95 : 1 },
        animate: isSyncing ? { scale: [1, 1.1, 1] } : {},
        children: isSyncing ? /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            motion.span,
            {
              animate: { rotate: 360 },
              transition: { duration: 0.5, repeat: Infinity, ease: "linear" },
              children: ""
            }
          ),
          "..."
        ] }) : current >= total ? /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: " " }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-xs opacity-75", children: [
            "(",
            current + 1,
            "/",
            total,
            ")"
          ] })
        ] })
      }
    )
  ] });
}
async function loader$j({
  request,
  context
}) {
  const sessionId = getSessionId(request);
  if (!sessionId) {
    throw redirect("/admin/login");
  }
  const {
    anime_db
  } = context.cloudflare.env;
  try {
    const {
      results
    } = await anime_db.prepare("SELECT * FROM animes ORDER BY created_at DESC").all();
    return {
      animes: results || []
    };
  } catch (error) {
    console.error("Failed to fetch animes:", error);
    return {
      animes: []
    };
  }
}
async function action$n({
  request,
  context
}) {
  const sessionId = getSessionId(request);
  if (!sessionId) {
    throw redirect("/admin/login");
  }
  const {
    anime_db
  } = context.cloudflare.env;
  try {
    const formData = await request.formData();
    const action2 = formData.get("_action");
    if (action2 === "create") {
      const title = formData.get("title");
      const cover_url = formData.get("cover_url");
      const status = formData.get("status");
      const progress2 = formData.get("progress");
      const rating = formData.get("rating") ? parseInt(formData.get("rating")) : null;
      const review = formData.get("review");
      const rating_radar = formData.get("rating_radar");
      const radarData = rating_radar ? JSON.parse(rating_radar) : null;
      const bangumi_id = formData.get("bangumi_id") ? parseInt(formData.get("bangumi_id")) : null;
      const name_cn = formData.get("name_cn");
      const name_jp = formData.get("name_jp");
      const summary = formData.get("summary");
      const air_date = formData.get("air_date");
      const total_episodes = formData.get("total_episodes") ? parseInt(formData.get("total_episodes")) : null;
      const bangumi_score = formData.get("bangumi_score") ? parseFloat(formData.get("bangumi_score")) : null;
      const studio = formData.get("studio");
      await anime_db.prepare(`INSERT INTO animes (title, cover_url, status, progress, rating, rating_radar, review,
                     bangumi_id, name_cn, name_jp, summary, air_date, total_episodes, bangumi_score, studio)
                     VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`).bind(title, cover_url || null, status, progress2 || null, rating, radarData ? JSON.stringify(radarData) : null, review || null, bangumi_id, name_cn || null, name_jp || null, summary || null, air_date || null, total_episodes, bangumi_score, studio || null).run();
      return {
        success: true
      };
    } else if (action2 === "delete") {
      const id2 = formData.get("id");
      await anime_db.prepare("DELETE FROM animes WHERE id = ?").bind(id2).run();
      return {
        success: true
      };
    }
    return {
      success: false
    };
  } catch (error) {
    console.error("Anime action error:", error);
    return {
      success: false,
      error: ""
    };
  }
}
const admin_anime_manage = withComponentProps(function AnimeManage({
  loaderData
}) {
  const {
    animes
  } = loaderData;
  const [showForm, setShowForm] = reactExports.useState(false);
  const [selectedAnime, setSelectedAnime] = reactExports.useState(null);
  const [searchQuery, setSearchQuery] = reactExports.useState("");
  const [bangumiQuery, setBangumiQuery] = reactExports.useState("");
  const [bangumiResults, setBangumiResults] = reactExports.useState([]);
  const [isSearching, setIsSearching] = reactExports.useState(false);
  const [selectedBangumi, setSelectedBangumi] = reactExports.useState(null);
  const [showBangumiDropdown, setShowBangumiDropdown] = reactExports.useState(false);
  const [formData, setFormData] = reactExports.useState({
    title: "",
    cover_url: "",
    name_cn: "",
    name_jp: "",
    summary: "",
    air_date: "",
    total_episodes: "",
    bangumi_score: "",
    bangumi_id: "",
    studio: "",
    status: "plan",
    progress: "",
    rating: "",
    review: ""
  });
  const statusLabels = {
    watching: "",
    completed: "",
    plan: "",
    dropped: ""
  };
  const statusColors = {
    watching: "bg-blue-100 text-blue-700 border-blue-200",
    completed: "bg-green-100 text-green-700 border-green-200",
    plan: "bg-purple-100 text-purple-700 border-purple-200",
    dropped: "bg-gray-100 text-gray-700 border-gray-200"
  };
  const defaultRadarData = {
    plot: 8,
    animation: 8,
    voice: 8,
    music: 8,
    character: 8,
    passion: 8
  };
  const [radarData, setRadarData] = reactExports.useState(defaultRadarData);
  const searchBangumi = reactExports.useCallback(async (query) => {
    if (!query.trim()) {
      setBangumiResults([]);
      return;
    }
    setIsSearching(true);
    try {
      const response = await fetch(`/api/bangumi/search?q=${encodeURIComponent(query)}`);
      const data = await response.json();
      setBangumiResults(data.results || []);
      setShowBangumiDropdown(true);
    } catch (error) {
      console.error("Bangumi search error:", error);
      setBangumiResults([]);
    } finally {
      setIsSearching(false);
    }
  }, []);
  reactExports.useEffect(() => {
    const timer = setTimeout(() => {
      if (bangumiQuery.trim()) {
        searchBangumi(bangumiQuery);
      }
    }, 500);
    return () => clearTimeout(timer);
  }, [bangumiQuery, searchBangumi]);
  const handleSelectBangumi = async (item) => {
    setSelectedBangumi(item);
    setShowBangumiDropdown(false);
    setBangumiQuery(item.name_cn || item.name);
    try {
      const response = await fetch(`/api/bangumi/detail?id=${item.id}`);
      const detail = await response.json();
      setFormData({
        ...formData,
        title: detail.name_cn || detail.name || item.name_cn || item.name,
        cover_url: detail.images?.large || item.images?.large || "",
        name_cn: detail.name_cn || item.name_cn || "",
        name_jp: detail.name || item.name || "",
        summary: detail.summary || item.summary || "",
        air_date: detail.date || item.air_date || "",
        total_episodes: String(detail.eps || detail.total_episodes || item.eps_count || ""),
        bangumi_score: String(detail.rating?.score || item.rating?.score || ""),
        bangumi_id: String(item.id),
        studio: detail.production?.studio || ""
      });
    } catch (error) {
      console.error("Failed to fetch Bangumi detail:", error);
      setFormData({
        ...formData,
        title: item.name_cn || item.name,
        cover_url: item.images?.large || "",
        name_cn: item.name_cn || "",
        name_jp: item.name || "",
        summary: item.summary || "",
        air_date: item.air_date || "",
        total_episodes: String(item.eps_count || ""),
        bangumi_score: String(item.rating?.score || ""),
        bangumi_id: String(item.id)
      });
    }
  };
  const resetForm = () => {
    setFormData({
      title: "",
      cover_url: "",
      name_cn: "",
      name_jp: "",
      summary: "",
      air_date: "",
      total_episodes: "",
      bangumi_score: "",
      bangumi_id: "",
      studio: "",
      status: "plan",
      progress: "",
      rating: "",
      review: ""
    });
    setSelectedBangumi(null);
    setBangumiQuery("");
    setBangumiResults([]);
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      initial: {
        opacity: 0,
        y: 20
      },
      animate: {
        opacity: 1,
        y: 0
      },
      transition: {
        duration: 0.3
      },
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "flex items-center justify-between mb-8",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
          className: "text-3xl font-bold text-gray-800",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex items-center gap-4",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
            type: "text",
            placeholder: " ...",
            value: searchQuery,
            onChange: (e) => setSearchQuery(e.target.value),
            className: "px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 placeholder-gray-400 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
            onClick: () => {
              setShowForm(!showForm);
              if (!showForm) resetForm();
            },
            className: "px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl font-medium shadow-sm hover:shadow-md transition-shadow",
            whileHover: {
              scale: 1.05
            },
            whileTap: {
              scale: 0.95
            },
            children: "+ "
          })]
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
        children: showForm && /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          className: "bg-white rounded-2xl p-6 mb-8 shadow-sm border border-gray-100",
          initial: {
            opacity: 0,
            height: 0
          },
          animate: {
            opacity: 1,
            height: "auto"
          },
          exit: {
            opacity: 0,
            height: 0
          },
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-center justify-between mb-6",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
              className: "text-xl font-bold text-gray-800",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
              onClick: () => setShowForm(false),
              className: "p-2 hover:bg-gray-100 rounded-full",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, {
                size: 20
              })
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "mb-6 relative",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
              className: "block text-sm font-medium text-gray-700 mb-2",
              children: " Bangumi "
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "relative",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Search, {
                className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",
                size: 18
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                type: "text",
                value: bangumiQuery,
                onChange: (e) => setBangumiQuery(e.target.value),
                onFocus: () => bangumiResults.length > 0 && setShowBangumiDropdown(true),
                placeholder: " Bangumi ...",
                className: "w-full pl-10 pr-10 py-3 bg-gradient-to-r from-pink-50 to-purple-50 border-2 border-pink-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100"
              }), isSearching && /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, {
                className: "absolute right-3 top-1/2 -translate-y-1/2 text-pink-400 animate-spin",
                size: 18
              })]
            }), showBangumiDropdown && bangumiResults.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
              initial: {
                opacity: 0,
                y: -10
              },
              animate: {
                opacity: 1,
                y: 0
              },
              className: "absolute z-50 w-full mt-2 bg-white rounded-xl shadow-xl border border-gray-200 max-h-80 overflow-y-auto",
              children: bangumiResults.map((item) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                onClick: () => handleSelectBangumi(item),
                className: "flex items-center gap-3 p-3 hover:bg-pink-50 cursor-pointer border-b border-gray-100 last:border-0",
                children: [item.images?.small ? /* @__PURE__ */ jsxRuntimeExports.jsx("img", {
                  src: item.images.small,
                  alt: item.name_cn || item.name,
                  className: "w-12 h-16 object-cover rounded-lg"
                }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "w-12 h-16 bg-gray-100 rounded-lg flex items-center justify-center",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(Film, {
                    size: 20,
                    className: "text-gray-400"
                  })
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "flex-1 min-w-0",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                    className: "font-bold text-gray-800 truncate",
                    children: item.name_cn || item.name
                  }), item.name_cn && item.name !== item.name_cn && /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                    className: "text-xs text-gray-500 truncate",
                    children: item.name
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex items-center gap-3 mt-1 text-xs text-gray-500",
                    children: [item.air_date && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                      className: "flex items-center gap-1",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, {
                        size: 12
                      }), item.air_date]
                    }), item.rating?.score && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                      className: "flex items-center gap-1 text-yellow-600",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Star, {
                        size: 12,
                        fill: "currentColor"
                      }), item.rating.score.toFixed(1)]
                    })]
                  })]
                })]
              }, item.id))
            })]
          }), selectedBangumi && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "mb-6 p-4 bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl border border-pink-200",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-start gap-4",
              children: [formData.cover_url && /* @__PURE__ */ jsxRuntimeExports.jsx("img", {
                src: formData.cover_url,
                alt: formData.title,
                className: "w-24 h-32 object-cover rounded-lg shadow-md"
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex-1",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                  className: "font-bold text-lg text-gray-800",
                  children: formData.title
                }), formData.name_jp && formData.name_jp !== formData.title && /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: "text-sm text-gray-500",
                  children: formData.name_jp
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "flex flex-wrap gap-2 mt-2 text-xs",
                  children: [formData.air_date && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "px-2 py-1 bg-white rounded-full text-gray-600",
                    children: [" ", formData.air_date]
                  }), formData.total_episodes && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "px-2 py-1 bg-white rounded-full text-gray-600",
                    children: [" ", formData.total_episodes, " "]
                  }), formData.bangumi_score && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "px-2 py-1 bg-yellow-100 rounded-full text-yellow-700",
                    children: [" ", formData.bangumi_score]
                  }), formData.studio && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "px-2 py-1 bg-blue-100 rounded-full text-blue-700",
                    children: [" ", formData.studio]
                  })]
                }), formData.summary && /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                  className: "mt-2 text-sm text-gray-600 line-clamp-3",
                  children: formData.summary
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                onClick: resetForm,
                className: "p-1 hover:bg-white rounded-full",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, {
                  size: 16
                })
              })]
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs(Form, {
            method: "post",
            className: "space-y-4",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "_action",
              value: "create"
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "bangumi_id",
              value: formData.bangumi_id
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "cover_url",
              value: formData.cover_url
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "name_cn",
              value: formData.name_cn
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "name_jp",
              value: formData.name_jp
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "summary",
              value: formData.summary
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "air_date",
              value: formData.air_date
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "total_episodes",
              value: formData.total_episodes
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "bangumi_score",
              value: formData.bangumi_score
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
              type: "hidden",
              name: "studio",
              value: formData.studio
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "grid grid-cols-2 gap-4",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                type: "text",
                name: "title",
                required: true,
                value: formData.title,
                onChange: (e) => setFormData({
                  ...formData,
                  title: e.target.value
                }),
                placeholder: "",
                className: "px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-100"
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("select", {
                name: "status",
                required: true,
                value: formData.status,
                onChange: (e) => setFormData({
                  ...formData,
                  status: e.target.value
                }),
                className: "px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-100",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                  value: "watching",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                  value: "completed",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                  value: "plan",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                  value: "dropped",
                  children: ""
                })]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "grid grid-cols-3 gap-4",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                type: "text",
                name: "progress",
                value: formData.progress,
                onChange: (e) => setFormData({
                  ...formData,
                  progress: e.target.value
                }),
                placeholder: ` (: 0/${formData.total_episodes || "24"})`,
                className: "px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-100"
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                type: "number",
                name: "rating",
                min: "1",
                max: "10",
                value: formData.rating,
                onChange: (e) => setFormData({
                  ...formData,
                  rating: e.target.value
                }),
                placeholder: " (1-10)",
                className: "px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-100"
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "flex items-center gap-2 text-sm text-gray-500",
                children: formData.bangumi_score && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                  className: "flex items-center gap-1",
                  children: ["Bangumi: ", /* @__PURE__ */ jsxRuntimeExports.jsx(Star, {
                    size: 14,
                    className: "text-yellow-500",
                    fill: "currentColor"
                  }), formData.bangumi_score]
                })
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("textarea", {
              name: "review",
              rows: 2,
              value: formData.review,
              onChange: (e) => setFormData({
                ...formData,
                review: e.target.value
              }),
              placeholder: "...",
              className: "w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-100"
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-3",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                type: "submit",
                className: "px-6 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl font-medium",
                whileHover: {
                  scale: 1.02
                },
                whileTap: {
                  scale: 0.98
                },
                onClick: () => setShowForm(false),
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                type: "button",
                onClick: () => setShowForm(false),
                className: "px-6 py-2 bg-gray-100 text-gray-600 rounded-xl font-medium hover:bg-gray-200",
                children: ""
              })]
            })]
          })]
        })
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
          className: "text-xl font-bold mb-6 text-gray-800",
          children: ""
        }), animes && animes.length > 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",
          children: animes.filter((anime) => anime.title.toLowerCase().includes(searchQuery.toLowerCase())).map((anime, index2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
            className: "bg-white rounded-2xl overflow-hidden shadow-sm border border-gray-100 cursor-pointer group",
            initial: {
              opacity: 0,
              y: 20
            },
            animate: {
              opacity: 1,
              y: 0
            },
            transition: {
              delay: index2 * 0.05
            },
            whileHover: {
              y: -8
            },
            onClick: () => {
              setSelectedAnime(anime);
              if (anime.rating_radar) {
                setRadarData(JSON.parse(anime.rating_radar));
              } else {
                setRadarData(defaultRadarData);
              }
            },
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "aspect-[3/4] bg-gray-100 overflow-hidden relative",
              children: [anime.cover_url ? /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                src: anime.cover_url,
                alt: anime.title,
                className: "w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",
                width: 300
              }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "w-full h-full flex items-center justify-center text-gray-400",
                children: ""
              }), anime.bangumi_score && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "absolute bottom-2 left-2 px-2 py-1 bg-black/60 backdrop-blur-sm rounded-lg text-xs text-white flex items-center gap-1",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Star, {
                  size: 12,
                  fill: "currentColor",
                  className: "text-yellow-400"
                }), anime.bangumi_score]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "absolute top-2 right-2",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: `px-2 py-1 rounded-lg text-xs font-bold border ${statusColors[anime.status] || statusColors.plan}`,
                  children: statusLabels[anime.status] || ""
                })
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-4",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                className: "font-bold text-gray-800 mb-1 line-clamp-2",
                children: anime.title
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center justify-between text-sm text-gray-500",
                children: [anime.rating && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                  className: "text-yellow-500 font-mono",
                  children: [" ", anime.rating, "/10"]
                }), anime.progress && /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: "font-mono",
                  children: anime.progress
                })]
              }), anime.studio && /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                className: "text-xs text-gray-400 mt-1 truncate",
                children: anime.studio
              })]
            })]
          }, anime.id))
        }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "text-center text-gray-500 py-16 bg-white rounded-2xl border border-gray-100",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "text-lg mb-2",
            children: ""
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "text-sm",
            children: '""'
          })]
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
        children: selectedAnime && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
            className: "fixed inset-0 bg-black/50 z-40",
            initial: {
              opacity: 0
            },
            animate: {
              opacity: 1
            },
            exit: {
              opacity: 0
            },
            onClick: () => setSelectedAnime(null)
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
            className: "fixed right-0 top-0 h-full w-96 bg-white shadow-2xl z-50 overflow-y-auto",
            initial: {
              x: "100%"
            },
            animate: {
              x: 0
            },
            exit: {
              x: "100%"
            },
            transition: {
              type: "spring",
              stiffness: 300,
              damping: 30
            },
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "p-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center justify-between mb-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                  className: "text-2xl font-bold text-gray-800",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                  onClick: () => setSelectedAnime(null),
                  className: "w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center",
                  whileHover: {
                    scale: 1.1
                  },
                  whileTap: {
                    scale: 0.9
                  },
                  children: ""
                })]
              }), selectedAnime.cover_url && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "w-full rounded-xl mb-6 overflow-hidden",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                  src: selectedAnime.cover_url,
                  alt: selectedAnime.title,
                  className: "w-full",
                  width: 400
                })
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-4",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                    className: "text-xl font-bold text-gray-800",
                    children: selectedAnime.title
                  }), selectedAnime.name_jp && selectedAnime.name_jp !== selectedAnime.title && /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                    className: "text-sm text-gray-500",
                    children: selectedAnime.name_jp
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "flex flex-wrap gap-2 text-xs",
                  children: [selectedAnime.air_date && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "px-2 py-1 bg-gray-100 rounded-full text-gray-600",
                    children: [" ", selectedAnime.air_date]
                  }), selectedAnime.total_episodes && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "px-2 py-1 bg-gray-100 rounded-full text-gray-600",
                    children: [" ", selectedAnime.total_episodes, " "]
                  }), selectedAnime.bangumi_score && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "px-2 py-1 bg-yellow-100 rounded-full text-yellow-700",
                    children: [" Bangumi ", selectedAnime.bangumi_score]
                  }), selectedAnime.studio && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "px-2 py-1 bg-blue-100 rounded-full text-blue-700",
                    children: [" ", selectedAnime.studio]
                  })]
                }), selectedAnime.summary && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
                    className: "text-sm text-gray-600 bg-gray-50 p-3 rounded-xl",
                    children: selectedAnime.summary
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: `px-3 py-1 rounded-lg text-sm font-bold border ${statusColors[selectedAnime.status]}`,
                    children: statusLabels[selectedAnime.status]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      className: "text-lg font-mono",
                      children: selectedAnime.progress || "0/?"
                    }), selectedAnime.status === "watching" && selectedAnime.progress && /* @__PURE__ */ jsxRuntimeExports.jsx(QuickSyncButton, {
                      animeId: selectedAnime.id,
                      currentProgress: selectedAnime.progress
                    })]
                  })]
                }), selectedAnime.rating && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                    className: "text-2xl font-bold text-yellow-500",
                    children: [" ", selectedAnime.rating, "/10"]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-4",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "bg-gray-50 rounded-xl p-4",
                    children: /* @__PURE__ */ jsxRuntimeExports.jsx(RadarChart, {
                      data: radarData,
                      size: 200
                    })
                  })]
                }), selectedAnime.review && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
                    className: "text-sm text-gray-600 bg-gray-50 p-3 rounded-xl italic",
                    children: ['"', selectedAnime.review, '"']
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "flex gap-3 pt-4",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Form, {
                    method: "post",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                      type: "hidden",
                      name: "_action",
                      value: "delete"
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                      type: "hidden",
                      name: "id",
                      value: selectedAnime.id
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                      type: "submit",
                      className: "px-4 py-2 bg-red-500 text-white rounded-xl font-medium",
                      whileHover: {
                        scale: 1.02
                      },
                      whileTap: {
                        scale: 0.98
                      },
                      onClick: (e) => {
                        if (!confirm("")) {
                          e.preventDefault();
                        } else {
                          setSelectedAnime(null);
                        }
                      },
                      children: ""
                    })]
                  })
                })]
              })]
            })
          })]
        })
      })]
    })
  });
});
const route28 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$n,
  default: admin_anime_manage,
  loader: loader$j
}, Symbol.toStringTag, { value: "Module" }));
async function loader$i({
  request,
  context
}) {
  const sessionId = getSessionId(request);
  if (!sessionId) {
    throw redirect("/admin/login");
  }
  const {
    anime_db
  } = context.cloudflare.env;
  try {
    const {
      results
    } = await anime_db.prepare("SELECT id, slug, title, views, status, created_at FROM articles ORDER BY created_at DESC").all();
    const articles2 = (results || []).map((article) => ({
      ...article,
      createdAt: new Date(article.created_at * 1e3).toISOString().split("T")[0]
    }));
    return {
      articles: articles2
    };
  } catch (error) {
    console.error("Failed to fetch articles:", error);
    return {
      articles: []
    };
  }
}
const admin_articles = withComponentProps(function ArticlesManager({
  loaderData
}) {
  const {
    articles: articles2
  } = loaderData;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
    initial: {
      opacity: 0,
      y: 10
    },
    animate: {
      opacity: 1,
      y: 0
    },
    transition: {
      duration: 0.3
    },
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "flex items-center justify-between mb-6",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
          className: "text-2xl font-bold text-gray-900 tracking-tight",
          children: "Articles"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-gray-500 text-sm mt-1",
          children: "Manage your blog posts."
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
        to: "/admin/article/new",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
          className: "px-4 py-2 rounded-full font-medium transition-all active:scale-95 shadow-sm hover:shadow bg-[#007AFF] text-white hover:bg-[#0071E3] shadow-lg shadow-blue-500/30 text-sm",
          children: "+ New Article"
        })
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "bg-white rounded-xl overflow-hidden divide-y divide-gray-100 border border-gray-100 shadow-sm",
      children: articles2.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "p-8 text-center text-gray-500",
        children: "No articles found. Start writing!"
      }) : articles2.map((article, index2) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "px-4 py-3 hover:bg-gray-50 transition-colors cursor-pointer flex items-center justify-between group",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex-1 min-w-0 pr-4",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-center gap-2 mb-1",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
              to: `/articles/${article.slug}`,
              className: "font-medium text-gray-900 truncate hover:text-blue-600 transition-colors",
              children: article.title
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              className: `px-2 py-0.5 rounded-full text-[10px] font-medium uppercase tracking-wide ${article.status === "published" ? "bg-green-100 text-green-700" : "bg-yellow-100 text-yellow-700"}`,
              children: article.status
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-center gap-4 text-xs text-gray-400",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              children: article.createdAt
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
              children: [article.views, " views"]
            })]
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
            className: "p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              className: "sr-only",
              children: "Edit"
            }), ""]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("button", {
            className: "p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              className: "sr-only",
              children: "Delete"
            }), ""]
          })]
        })]
      }, article.id))
    })]
  });
});
const route29 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin_articles,
  loader: loader$i
}, Symbol.toStringTag, { value: "Module" }));
async function loader$h({
  request,
  context
}) {
  const sessionId = getSessionId(request);
  if (!sessionId) {
    throw redirect("/admin/login");
  }
  const {
    anime_db
  } = context.cloudflare.env;
  try {
    const {
      results
    } = await anime_db.prepare(`
        SELECT c.id, c.content, c.status, c.is_spam as isSpam, c.created_at,
               c.guest_name as author, a.title as article
        FROM comments c
        LEFT JOIN articles a ON c.article_id = a.id
        ORDER BY c.created_at DESC
        LIMIT 50
      `).all();
    const comments = (results || []).map((comment) => {
      const createdAt = new Date(comment.created_at * 1e3);
      const now2 = /* @__PURE__ */ new Date();
      const diffMs = now2.getTime() - createdAt.getTime();
      const diffMins = Math.floor(diffMs / 6e4);
      const diffHours = Math.floor(diffMs / 36e5);
      let time2 = "";
      if (diffMins < 60) {
        time2 = `${diffMins}`;
      } else if (diffHours < 24) {
        time2 = `${diffHours}`;
      } else {
        time2 = createdAt.toISOString().split("T")[0];
      }
      return {
        ...comment,
        author: comment.author || "",
        article: comment.article || "",
        time: time2,
        isSpam: Boolean(comment.isSpam)
      };
    });
    return {
      comments
    };
  } catch (error) {
    console.error("Failed to fetch comments:", error);
    return {
      comments: []
    };
  }
}
const admin_comments = withComponentProps(function CommentsManager({
  loaderData
}) {
  const {
    comments
  } = loaderData;
  const [filter2, setFilter] = reactExports.useState("all");
  const filteredComments = comments.filter((c) => {
    if (filter2 === "pending") return c.status === "pending";
    if (filter2 === "spam") return c.isSpam;
    return true;
  });
  const pendingCount = comments.filter((c) => c.status === "pending").length;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
    initial: {
      opacity: 0,
      y: 10
    },
    animate: {
      opacity: 1,
      y: 0
    },
    transition: {
      duration: 0.3
    },
    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "flex items-center justify-between mb-6",
      children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
          className: "text-2xl font-bold text-gray-900 tracking-tight",
          children: "Comments"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-gray-500 text-sm mt-1",
          children: "Manage community interactions."
        })]
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "bg-gray-100/80 p-1 rounded-lg inline-flex mb-6",
      children: [{
        key: "all",
        label: "All"
      }, {
        key: "pending",
        label: `Pending (${pendingCount})`
      }, {
        key: "spam",
        label: "Spam"
      }].map((tab) => /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
        onClick: () => setFilter(tab.key),
        className: `px-4 py-1.5 rounded-md text-sm font-medium transition-all ${filter2 === tab.key ? "bg-white text-gray-900 shadow-sm" : "text-gray-500 hover:text-gray-700"}`,
        children: tab.label
      }, tab.key))
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "space-y-4",
      children: filteredComments.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "p-12 text-center text-gray-400 bg-white rounded-2xl border border-gray-100 border-dashed",
        children: "No comments found in this filter."
      }) : filteredComments.map((comment, index2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        className: "bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex gap-4",
        initial: {
          opacity: 0,
          y: 10
        },
        animate: {
          opacity: 1,
          y: 0
        },
        transition: {
          delay: index2 * 0.05
        },
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: `w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-sm flex-shrink-0 ${comment.isSpam ? "bg-red-400" : "bg-blue-500"}`,
          children: comment.author[0].toUpperCase()
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex-1 min-w-0",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-center justify-between mb-2",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "font-semibold text-gray-900",
                children: comment.author
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                className: "text-xs text-gray-400",
                children: [" ", comment.time]
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              className: `text-[10px] px-2 py-0.5 rounded-full font-medium uppercase ${comment.status === "pending" ? "bg-yellow-100 text-yellow-700" : comment.isSpam ? "bg-red-100 text-red-700" : "bg-green-100 text-green-700"}`,
              children: comment.isSpam ? "SPAM" : comment.status
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "text-gray-600 text-sm leading-relaxed mb-3 break-words",
            children: comment.content
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-center justify-between",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
              className: "text-xs text-gray-400 truncate max-w-[200px]",
              children: ["on ", /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "font-medium text-gray-500",
                children: comment.article
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-2",
              children: [comment.status === "pending" && !comment.isSpam && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                  className: "text-xs font-medium text-green-600 hover:bg-green-50 px-3 py-1.5 rounded-full transition-colors",
                  children: "Approve"
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                  className: "text-xs font-medium text-red-600 hover:bg-red-50 px-3 py-1.5 rounded-full transition-colors",
                  children: "Spam"
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
                className: "text-xs font-medium text-gray-400 hover:text-gray-600 px-2 py-1.5 transition-colors",
                children: "Reply"
              })]
            })]
          })]
        })]
      }, comment.id))
    })]
  });
});
const route30 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin_comments,
  loader: loader$h
}, Symbol.toStringTag, { value: "Module" }));
function SmartCrop({ onCrop }) {
  const [preview, setPreview] = reactExports.useState(null);
  const [faceDetected, setFaceDetected] = reactExports.useState(false);
  const fileInputRef = reactExports.useRef(null);
  const canvasRef = reactExports.useRef(null);
  const detectFace = (img) => {
    const centerX = img.width / 2;
    const centerY = img.height / 3;
    const size = Math.min(img.width, img.height) * 0.4;
    return {
      x: centerX - size / 2,
      y: centerY - size / 2,
      width: size,
      height: size
    };
  };
  const handleFileSelect = async (e) => {
    const file = e.target.files?.[0];
    if (!file || !file.type.startsWith("image/")) return;
    const reader = new FileReader();
    reader.onload = (e2) => {
      const img = new Image();
      img.onload = () => {
        setPreview(img.src);
        const faceBox = detectFace(img);
        setFaceDetected(true);
        const canvas2 = canvasRef.current;
        if (canvas2) {
          canvas2.width = img.width;
          canvas2.height = img.height;
          const ctx = canvas2.getContext("2d");
          if (ctx) {
            ctx.drawImage(img, 0, 0);
            ctx.strokeStyle = "#FF6B9D";
            ctx.lineWidth = 3;
            ctx.strokeRect(faceBox.x, faceBox.y, faceBox.width, faceBox.height);
          }
        }
        if (onCrop) {
          onCrop(file, faceBox);
        }
      };
      img.src = e2.target?.result;
    };
    reader.readAsDataURL(file);
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        "input",
        {
          ref: fileInputRef,
          type: "file",
          accept: "image/*",
          onChange: handleFileSelect,
          className: "hidden"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        motion.button,
        {
          onClick: () => fileInputRef.current?.click(),
          className: "px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-lg font-medium",
          whileHover: { scale: 1.05 },
          whileTap: { scale: 0.95 },
          children: " "
        }
      )
    ] }),
    preview && /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        className: "space-y-2",
        initial: { opacity: 0, y: 10 },
        animate: { opacity: 1, y: 0 },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("img", { src: preview, alt: "Preview", className: "w-full rounded-lg" }),
            faceDetected && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-2 right-2 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold", children: " " })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("canvas", { ref: canvasRef, className: "hidden" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", children: ' ""' })
        ]
      }
    )
  ] });
}
async function uploadToR2(bucket, file, path, maxSize = 5 * 1024 * 1024) {
  if (!bucket) {
    return { success: false, error: "R2 " };
  }
  if (file.size > maxSize) {
    return { success: false, error: ` ${maxSize / 1024 / 1024}MB` };
  }
  const allowedTypes = [
    "image/jpeg",
    "image/png",
    "image/gif",
    "image/webp",
    "image/svg+xml",
    "audio/mpeg",
    "audio/mp3",
    "audio/wav"
  ];
  if (!allowedTypes.includes(file.type)) {
    return { success: false, error: "" };
  }
  try {
    const fileName = path || generateFilePath(file.name, file.type);
    await bucket.put(fileName, file.stream(), {
      httpMetadata: {
        contentType: file.type,
        cacheControl: "public, max-age=31536000"
        // 1
      },
      customMetadata: {
        originalName: file.name,
        uploadedAt: (/* @__PURE__ */ new Date()).toISOString()
      }
    });
    const url = fileName;
    return { success: true, url };
  } catch (error) {
    console.error("R2 upload error:", error);
    return { success: false, error: "" };
  }
}
function generateSecureRandom(length = 16) {
  const array = new Uint8Array(length);
  crypto.getRandomValues(array);
  return Array.from(array, (byte) => byte.toString(16).padStart(2, "0")).join("");
}
function generateFilePath(originalName, mimeType) {
  const timestamp = Date.now();
  const random = generateSecureRandom(8);
  const ext = getFileExtension(originalName, mimeType);
  const folder = mimeType.startsWith("image/") ? "images" : "audio";
  return `${folder}/${timestamp}-${random}${ext}`;
}
function getFileExtension(originalName, mimeType) {
  const originalExt = originalName.match(/\.([^.]+)$/)?.[1];
  if (originalExt) {
    return `.${originalExt}`;
  }
  const mimeToExt = {
    "image/jpeg": ".jpg",
    "image/png": ".png",
    "image/gif": ".gif",
    "image/webp": ".webp",
    "image/svg+xml": ".svg",
    "audio/mpeg": ".mp3",
    "audio/mp3": ".mp3",
    "audio/wav": ".wav"
  };
  return mimeToExt[mimeType] || ".bin";
}
async function deleteFromR2(bucket, path) {
  if (!bucket) {
    return { success: false, error: "R2 " };
  }
  try {
    await bucket.delete(path);
    return { success: true };
  } catch (error) {
    console.error("R2 delete error:", error);
    return { success: false, error: "" };
  }
}
function getR2PublicUrl(path, customDomain, env) {
  const cleanPath = path.replace(/^\/media\//, "");
  if (env?.R2_CUSTOM_DOMAIN) {
    return `https://${env.R2_CUSTOM_DOMAIN}/${cleanPath}`;
  }
  if (env?.R2_PUBLIC_DEV_URL) {
    return `${env.R2_PUBLIC_DEV_URL}/${cleanPath}`;
  }
  return `/media/${cleanPath}`;
}
async function loader$g({
  request,
  context
}) {
  const env = context.cloudflare.env;
  const bucket = env.IMAGES_BUCKET;
  const sessionId = getSessionId(request);
  if (!sessionId) {
    throw redirect("/admin/login");
  }
  let images = [];
  let totalSize = 0;
  const maxSize = 1e4;
  if (bucket) {
    try {
      const list = await bucket.list({
        limit: 100
      });
      images = list.objects.map((obj, index2) => ({
        id: index2 + 1,
        // temporary ID
        url: getR2PublicUrl(obj.key, void 0, env),
        name: obj.key,
        size: Math.round(obj.size / 1024),
        // KB
        uploadedAt: obj.uploaded.toISOString().split("T")[0],
        key: obj.key
      }));
      totalSize = Math.round(list.objects.reduce((acc, obj) => acc + obj.size, 0) / 1024 / 1024);
    } catch (e) {
      console.error("Failed to list R2 objects", e);
    }
  }
  return {
    images,
    totalSize,
    maxSize
  };
}
async function action$m({
  request,
  context
}) {
  const env = context.cloudflare.env;
  const bucket = env.IMAGES_BUCKET;
  const formData = await request.formData();
  const intent = formData.get("intent");
  if (intent === "upload") {
    const files = formData.getAll("files");
    let successCount = 0;
    for (const file of files) {
      if (file.size > 0) {
        const result = await uploadToR2(bucket, file);
        if (result.success) successCount++;
      }
    }
    return {
      success: true,
      message: ` ${successCount} `
    };
  }
  if (intent === "delete") {
    const key = formData.get("key");
    if (key) {
      await deleteFromR2(bucket, key);
      return {
        success: true,
        message: ""
      };
    }
  }
  return null;
}
const admin_gallery = withComponentProps(function AdminGallery({
  loaderData
}) {
  const {
    images,
    totalSize,
    maxSize
  } = loaderData;
  const [selectedImage, setSelectedImage] = reactExports.useState(null);
  const [isDragging2, setIsDragging] = reactExports.useState(false);
  const fileInputRef = reactExports.useRef(null);
  const submit = useSubmit();
  const navigation = useNavigation();
  const isSubmitting = navigation.state === "submitting";
  const handleDragOver = (e) => {
    e.preventDefault();
    setIsDragging(true);
  };
  const handleDragLeave = () => {
    setIsDragging(false);
  };
  const handleDrop = (e) => {
    e.preventDefault();
    setIsDragging(false);
    const files = e.dataTransfer.files;
    if (files.length > 0) {
      const formData = new FormData();
      formData.append("intent", "upload");
      Array.from(files).forEach((file) => formData.append("files", file));
      submit(formData, {
        method: "post",
        encType: "multipart/form-data"
      });
    }
  };
  const handleFileSelect = (e) => {
    const files = e.target.files;
    if (files && files.length > 0) {
      const formData = new FormData();
      formData.append("intent", "upload");
      Array.from(files).forEach((file) => formData.append("files", file));
      submit(formData, {
        method: "post",
        encType: "multipart/form-data"
      });
    }
  };
  const handleDelete = (key) => {
    if (confirm("")) {
      const formData = new FormData();
      formData.append("intent", "delete");
      formData.append("key", key);
      submit(formData, {
        method: "post"
      });
      setSelectedImage(null);
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      initial: {
        opacity: 0,
        y: 20
      },
      animate: {
        opacity: 1,
        y: 0
      },
      transition: {
        duration: 0.3
      },
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "flex items-center justify-between mb-8",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
          className: "text-3xl font-bold text-gray-800",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex items-center gap-4",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "text-right",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
              className: "text-sm text-gray-600",
              children: ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
              className: "text-lg font-bold text-gray-800 font-mono",
              children: [totalSize, "MB / ", maxSize, "MB"]
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
            onClick: () => fileInputRef.current?.click(),
            disabled: isSubmitting,
            className: `px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-medium shadow-sm hover:shadow-md transition-shadow ${isSubmitting ? "opacity-50 cursor-not-allowed" : ""}`,
            whileHover: {
              scale: isSubmitting ? 1 : 1.05
            },
            whileTap: {
              scale: isSubmitting ? 1 : 0.95
            },
            children: isSubmitting ? "..." : " "
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
            className: "px-6 py-3 bg-red-500 text-white rounded-xl font-medium shadow-sm hover:shadow-md transition-shadow",
            whileHover: {
              scale: 1.05
            },
            whileTap: {
              scale: 0.95
            },
            children: " "
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
            ref: fileInputRef,
            type: "file",
            multiple: true,
            accept: "image/*",
            onChange: handleFileSelect,
            className: "hidden"
          })]
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "mb-6 bg-white rounded-2xl p-6 shadow-sm border border-gray-100",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(SmartCrop, {
          onCrop: (file, cropData) => {
            console.log(":", cropData);
            alert(" ()");
          }
        })
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        onDragOver: handleDragOver,
        onDragLeave: handleDragLeave,
        onDrop: handleDrop,
        className: `mb-6 p-12 border-2 border-dashed rounded-2xl text-center transition-colors ${isDragging2 ? "border-pink-500 bg-pink-50" : "border-gray-300 bg-gray-50 hover:border-gray-400"}`,
        animate: isDragging2 ? {
          scale: 1.02
        } : {
          scale: 1
        },
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-lg text-gray-600 mb-2",
          children: isDragging2 ? "" : ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
          className: "text-sm text-gray-500",
          children: " WebP / JPG / PNG ()"
        })]
      }), images.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "text-center py-20 text-gray-500",
        children: ""
      }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",
        children: images.map((image, index2) => /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: "relative cursor-pointer",
          initial: {
            opacity: 0,
            y: 20,
            rotate: -2
          },
          animate: {
            opacity: 1,
            y: 0,
            rotate: 0
          },
          transition: {
            delay: index2 * 0.05
          },
          whileHover: {
            y: -8,
            rotate: 2
          },
          onClick: () => setSelectedImage(image.key),
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "bg-white p-4 rounded-lg shadow-md",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "aspect-square bg-gray-100 rounded overflow-hidden mb-3",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                src: image.url,
                alt: image.name,
                className: "w-full h-full object-cover",
                width: 200
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "text-xs text-gray-600 font-mono border-t border-gray-200 pt-2 truncate",
              title: image.name,
              children: image.name.split("/").pop()
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center justify-between mt-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "text-xs text-gray-400 font-mono",
                children: [image.size, " KB"]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex gap-1",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                  onClick: (e) => {
                    e.stopPropagation();
                    navigator.clipboard.writeText(image.url);
                    alert("");
                  },
                  className: "px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors",
                  whileHover: {
                    scale: 1.1
                  },
                  whileTap: {
                    scale: 0.9
                  },
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                  onClick: (e) => {
                    e.stopPropagation();
                    handleDelete(image.key);
                  },
                  className: "px-2 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-colors",
                  whileHover: {
                    scale: 1.1
                  },
                  whileTap: {
                    scale: 0.9
                  },
                  children: ""
                })]
              })]
            })]
          })
        }, image.key))
      }), selectedImage && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
        className: "fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",
        initial: {
          opacity: 0
        },
        animate: {
          opacity: 1
        },
        onClick: () => setSelectedImage(null),
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: "bg-white rounded-2xl p-6 max-w-2xl w-full",
          initial: {
            scale: 0.9,
            opacity: 0
          },
          animate: {
            scale: 1,
            opacity: 1
          },
          onClick: (e) => e.stopPropagation(),
          children: images.find((img) => img.key === selectedImage) && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "w-full rounded-lg mb-4 overflow-hidden bg-gray-100",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                src: images.find((img) => img.key === selectedImage).url,
                alt: "Preview",
                className: "w-full h-auto max-h-[60vh] object-contain",
                width: 800
              })
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center justify-between",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h3", {
                  className: "font-bold text-gray-800 truncate max-w-xs",
                  children: images.find((img) => img.key === selectedImage).name
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
                  className: "text-sm text-gray-500 font-mono",
                  children: [images.find((img) => img.key === selectedImage).size, " KB"]
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                className: "px-4 py-2 bg-pink-500 text-white rounded-lg",
                whileHover: {
                  scale: 1.05
                },
                whileTap: {
                  scale: 0.95
                },
                onClick: () => {
                  const url = images.find((img) => img.key === selectedImage).url;
                  navigator.clipboard.writeText(url);
                  alert("");
                },
                children: " "
              })]
            })]
          })
        })
      })]
    })
  });
});
const route31 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$m,
  default: admin_gallery,
  loader: loader$g
}, Symbol.toStringTag, { value: "Module" }));
async function loader$f({
  request,
  context
}) {
  const {
    getDB
  } = await import("./db-DVeXv2KN.js");
  const db = getDB(context);
  const session = await requireAdmin(request, db);
  if (!session) {
    throw redirect("/admin/login");
  }
  try {
    const result = await db.prepare("SELECT config_json FROM system_config WHERE id = 1").first();
    if (result && result.config_json) {
      const env = context.cloudflare.env;
      const secret = env.CSRF_SECRET;
      if (!secret) {
        throw new Error("Critical Security Error: CSRF_SECRET is not set in environment variables.");
      }
      if (!env.SESSION_SECRET || env.SESSION_SECRET.length < 32) {
        if (env.ENVIRONMENT === "production") {
          console.warn("Security Warning: SESSION_SECRET is too short or missing.");
        }
      }
      const {
        generateCSRFToken
      } = await import("./csrf.server-CJK6G2Bt.js");
      const csrfToken = await generateCSRFToken(session.sessionId, env.CACHE_KV, secret);
      return {
        settings: JSON.parse(result.config_json),
        csrfToken
      };
    }
  } catch (error) {
    console.error("Failed to load settings:", error);
  }
  return {
    settings: null,
    csrfToken: ""
  };
}
async function action$l({
  request,
  context
}) {
  const {
    getDB
  } = await import("./db-DVeXv2KN.js");
  const db = getDB(context);
  const session = await requireAdmin(request, db);
  if (!session) {
    throw redirect("/admin/login");
  }
  const formData = await request.formData();
  const configJson = formData.get("config_json");
  const csrfToken = formData.get("_csrf");
  const env = context.cloudflare.env;
  const secret = env.CSRF_SECRET;
  if (!secret) {
    console.error("Critical Security Error: CSRF_SECRET is not set.");
    return {
      success: false,
      error: ":  CSRF "
    };
  }
  const {
    validateCSRFToken
  } = await import("./csrf.server-CJK6G2Bt.js");
  const csrfResult = await validateCSRFToken(csrfToken, session.sessionId, env.CACHE_KV, secret);
  if (!csrfResult.valid) {
    return {
      success: false,
      error: " (CSRF): " + csrfResult.error
    };
  }
  try {
    await db.prepare(`INSERT INTO system_config (id, config_json) 
         VALUES (1, ?) 
         ON CONFLICT(id) DO UPDATE SET config_json = ?`).bind(configJson, configJson).run();
    return {
      success: true,
      message: ""
    };
  } catch (error) {
    console.error("Failed to save settings:", error);
    return {
      success: false,
      error: ""
    };
  }
}
const defaultSettings = {
  site_title: "Project Blue Sky",
  site_description: "",
  keywords: ", React, ",
  master_name: "Master",
  avatar_url: "",
  bio: "",
  footer_text: " 2024 Project Blue Sky",
  start_year: 2024,
  theme: {
    default_wallpaper: "",
    dark_mode_wallpaper: "",
    overlay_opacity: 0.3,
    primary_color: "#FF9F43",
    radius: "large",
    enable_particles: true,
    enable_blur: true,
    gray_mode: false
  },
  features: {
    live2d: {
      enabled: true,
      model_source: "",
      position: "bottom-left"
    },
    music: {
      auto_play: false,
      playlist_id: "",
      volume: 50
    },
    comments: {
      enabled: true,
      enable_danmaku: true,
      review_required: true
    }
  },
  integrations: {
    social: {
      github: "",
      bilibili: "",
      twitter: ""
    },
    r2: {
      upload_path: "uploads/"
    }
  },
  security: {
    maintenance_mode: false
  }
};
const admin_settings = withComponentProps(function Settings2({
  loaderData,
  actionData
}) {
  const [activeTab, setActiveTab] = reactExports.useState("basic");
  const [settings2, setSettings] = reactExports.useState(loaderData.settings || defaultSettings);
  const [hasChanges, setHasChanges] = reactExports.useState(false);
  const [showToast, setShowToast] = reactExports.useState(false);
  const [toastMessage, setToastMessage] = reactExports.useState("");
  const [toastType, setToastType] = reactExports.useState("success");
  const [isSaving, setIsSaving] = reactExports.useState(false);
  reactExports.useEffect(() => {
    const originalSettings = loaderData.settings || defaultSettings;
    setHasChanges(JSON.stringify(settings2) !== JSON.stringify(originalSettings));
  }, [settings2, loaderData.settings]);
  reactExports.useEffect(() => {
    if (actionData) {
      if (actionData.success) {
        setToastType("success");
        setToastMessage(actionData.message || "");
      } else {
        setToastType("error");
        setToastMessage(actionData.error || "");
      }
      setShowToast(true);
      setTimeout(() => setShowToast(false), 3e3);
    }
  }, [actionData]);
  const handleSave = async () => {
    setIsSaving(true);
    const formData = new FormData();
    formData.append("config_json", JSON.stringify(settings2));
    if (loaderData.csrfToken) {
      formData.append("_csrf", loaderData.csrfToken);
    }
    try {
      const response = await fetch("/admin/settings", {
        method: "POST",
        body: formData
      });
      const result = await response.json();
      if (result.success) {
        setHasChanges(false);
        setToastType("success");
        setToastMessage(result.message || "");
        setShowToast(true);
        setTimeout(() => setShowToast(false), 3e3);
        window.location.reload();
      } else {
        setToastType("error");
        setToastMessage(result.error || "");
        setShowToast(true);
        setTimeout(() => setShowToast(false), 3e3);
      }
    } catch (error) {
      setToastType("error");
      setToastMessage("");
      setShowToast(true);
      setTimeout(() => setShowToast(false), 3e3);
    } finally {
      setIsSaving(false);
    }
  };
  const handleReset = () => {
    if (confirm("")) {
      setSettings(loaderData.settings || defaultSettings);
      setHasChanges(false);
    }
  };
  const tabs = [{
    key: "basic",
    label: "",
    icon: "",
    description: ""
  }, {
    key: "theme",
    label: "",
    icon: "",
    description: ""
  }, {
    key: "features",
    label: "",
    icon: "",
    description: ""
  }, {
    key: "integrations",
    label: "",
    icon: "",
    description: ""
  }, {
    key: "security",
    label: "",
    icon: "",
    description: ""
  }, {
    key: "about",
    label: "",
    icon: "",
    description: ""
  }];
  const ToggleSwitch = ({
    enabled,
    onChange,
    label,
    description
  }) => /* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
    className: "flex items-start gap-3 cursor-pointer group",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "relative mt-1",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
        type: "checkbox",
        checked: enabled,
        onChange: (e) => onChange(e.target.checked),
        className: "sr-only"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: `w-14 h-8 rounded-full transition-all duration-300 ${enabled ? "bg-green-500" : "bg-gray-300"} group-hover:shadow-lg`,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: `absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md`,
          animate: {
            x: enabled ? 24 : 0
          },
          transition: {
            type: "spring",
            stiffness: 500,
            damping: 30
          }
        })
      })]
    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "flex-1",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
        className: "text-gray-700 font-medium block",
        children: label
      }), description && /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
        className: "text-gray-500 text-xs block mt-1",
        children: description
      })]
    })]
  });
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    className: "min-h-screen",
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      initial: {
        opacity: 0,
        y: 20
      },
      animate: {
        opacity: 1,
        y: 0
      },
      transition: {
        duration: 0.3
      },
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "flex items-center justify-between mb-8",
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
            className: "text-3xl font-bold text-gray-800 mb-2",
            children: "MAGI "
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
            className: "text-gray-500 text-sm",
            children: '""""'
          })]
        })
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "grid grid-cols-1 lg:grid-cols-4 gap-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "lg:col-span-1",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "bg-white rounded-2xl p-4 shadow-sm border border-gray-100 space-y-2 sticky top-4",
            children: tabs.map((tab) => /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.button, {
              onClick: () => setActiveTab(tab.key),
              className: `w-full px-4 py-3 rounded-xl text-left transition-all ${activeTab === tab.key ? "bg-gradient-to-r from-pink-50 to-purple-50 text-pink-600 shadow-sm border border-pink-200" : "text-gray-600 hover:bg-gray-50"}`,
              whileHover: {
                x: 4
              },
              whileTap: {
                scale: 0.98
              },
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center gap-2 mb-1",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: "text-xl",
                  children: tab.icon
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: "font-medium",
                  children: tab.label
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                className: "text-xs text-gray-500 ml-7",
                children: tab.description
              })]
            }, tab.key))
          })
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "lg:col-span-3",
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "bg-white rounded-2xl p-8 shadow-sm border border-gray-100",
            children: [activeTab === "basic" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "space-y-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center justify-between mb-6 pb-4 border-b border-gray-200",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                  className: "text-2xl font-bold text-gray-800",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",
                  children: " "
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "grid grid-cols-1 md:grid-cols-2 gap-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: [" ", /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      className: "text-red-500",
                      children: "*"
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                    type: "text",
                    value: settings2.site_title,
                    onChange: (e) => setSettings({
                      ...settings2,
                      site_title: e.target.value
                    }),
                    className: "w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                    placeholder: "Project Blue Sky"
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                    type: "text",
                    value: settings2.master_name,
                    onChange: (e) => setSettings({
                      ...settings2,
                      master_name: e.target.value
                    }),
                    className: "w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                    placeholder: "Master"
                  })]
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                  className: "block text-sm font-medium text-gray-700 mb-2",
                  children: ["SEO  ", /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    className: "text-red-500",
                    children: "*"
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("textarea", {
                  value: settings2.site_description,
                  onChange: (e) => setSettings({
                    ...settings2,
                    site_description: e.target.value
                  }),
                  rows: 3,
                  className: "w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all resize-none",
                  placeholder: "..."
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "text-xs text-gray-500 mt-1",
                  children: [settings2.site_description.length, " / 160 "]
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                  className: "block text-sm font-medium text-gray-700 mb-2",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                  type: "text",
                  value: settings2.keywords,
                  onChange: (e) => setSettings({
                    ...settings2,
                    keywords: e.target.value
                  }),
                  placeholder: ", React, ",
                  className: "w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all"
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "grid grid-cols-1 md:grid-cols-2 gap-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: " URL"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex gap-3",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                      type: "url",
                      value: settings2.avatar_url,
                      onChange: (e) => setSettings({
                        ...settings2,
                        avatar_url: e.target.value
                      }),
                      className: "flex-1 px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                      placeholder: "https://..."
                    }), settings2.avatar_url && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "w-12 h-12 rounded-full overflow-hidden border-2 border-gray-200",
                      children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                        src: settings2.avatar_url,
                        alt: "Avatar",
                        className: "w-full h-full object-cover",
                        width: 50
                      })
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                    type: "number",
                    value: settings2.start_year,
                    onChange: (e) => setSettings({
                      ...settings2,
                      start_year: parseInt(e.target.value) || 2024
                    }),
                    className: "w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all"
                  })]
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                  className: "block text-sm font-medium text-gray-700 mb-2",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                  type: "text",
                  value: settings2.bio,
                  onChange: (e) => setSettings({
                    ...settings2,
                    bio: e.target.value
                  }),
                  className: "w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                  placeholder: ""
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "grid grid-cols-1 md:grid-cols-2 gap-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                    type: "text",
                    value: settings2.footer_text,
                    onChange: (e) => setSettings({
                      ...settings2,
                      footer_text: e.target.value
                    }),
                    className: "w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                    placeholder: " 2024 Project Blue Sky"
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: "ICP/"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                    type: "text",
                    value: settings2.icp_number || "",
                    onChange: (e) => setSettings({
                      ...settings2,
                      icp_number: e.target.value
                    }),
                    className: "w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                    placeholder: ""
                  })]
                })]
              })]
            }), activeTab === "theme" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "space-y-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center justify-between mb-6 pb-4 border-b border-gray-200",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                  className: "text-2xl font-bold text-gray-800",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",
                  children: " "
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: " URL"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex gap-3",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                      type: "url",
                      value: settings2.theme.default_wallpaper,
                      onChange: (e) => setSettings({
                        ...settings2,
                        theme: {
                          ...settings2.theme,
                          default_wallpaper: e.target.value
                        }
                      }),
                      className: "flex-1 px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                      placeholder: "https://..."
                    }), settings2.theme.default_wallpaper && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "w-24 h-16 rounded-lg overflow-hidden border-2 border-gray-200",
                      children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                        src: settings2.theme.default_wallpaper,
                        alt: "Preview",
                        className: "w-full h-full object-cover",
                        onError: (e) => {
                          e.target.style.display = "none";
                        },
                        width: 100
                      })
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: " URL"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "flex gap-3",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                      type: "url",
                      value: settings2.theme.dark_mode_wallpaper,
                      onChange: (e) => setSettings({
                        ...settings2,
                        theme: {
                          ...settings2.theme,
                          dark_mode_wallpaper: e.target.value
                        }
                      }),
                      className: "flex-1 px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                      placeholder: "https://..."
                    }), settings2.theme.dark_mode_wallpaper && /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "w-24 h-16 rounded-lg overflow-hidden border-2 border-gray-200",
                      children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
                        src: settings2.theme.dark_mode_wallpaper,
                        alt: "Preview",
                        className: "w-full h-full object-cover",
                        onError: (e) => {
                          e.target.style.display = "none";
                        },
                        width: 100
                      })
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: [": ", /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                      className: "text-pink-600 font-bold",
                      children: [Math.round(settings2.theme.overlay_opacity * 100), "%"]
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                      type: "range",
                      min: "0.1",
                      max: "0.9",
                      step: "0.1",
                      value: settings2.theme.overlay_opacity,
                      onChange: (e) => setSettings({
                        ...settings2,
                        theme: {
                          ...settings2.theme,
                          overlay_opacity: parseFloat(e.target.value)
                        }
                      }),
                      className: "w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-pink-500"
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "flex justify-between text-xs text-gray-500",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        children: "10%"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        children: "50%"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        children: "90%"
                      })]
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-3",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-3",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                      className: "flex gap-2 flex-wrap",
                      children: [{
                        name: "",
                        value: "#FF9F43"
                      }, {
                        name: "",
                        value: "#EC4899"
                      }, {
                        name: "",
                        value: "#8B5CF6"
                      }, {
                        name: "",
                        value: "#10B981"
                      }, {
                        name: "",
                        value: "#3B82F6"
                      }].map((color2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.button, {
                        onClick: () => setSettings({
                          ...settings2,
                          theme: {
                            ...settings2.theme,
                            primary_color: color2.value
                          }
                        }),
                        className: `relative px-4 py-2 rounded-lg border-2 transition-all ${settings2.theme.primary_color === color2.value ? "border-gray-800 scale-105 shadow-lg" : "border-gray-300 hover:border-gray-400"}`,
                        style: {
                          backgroundColor: color2.value
                        },
                        whileHover: {
                          scale: 1.05
                        },
                        whileTap: {
                          scale: 0.95
                        },
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                          className: "text-white text-sm font-medium drop-shadow-md",
                          children: color2.name
                        }), settings2.theme.primary_color === color2.value && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
                          className: "absolute -top-2 -right-2 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-lg",
                          initial: {
                            scale: 0
                          },
                          animate: {
                            scale: 1
                          },
                          children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                            className: "text-green-500 text-xs",
                            children: ""
                          })
                        })]
                      }, color2.value))
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "flex items-center gap-3",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "color",
                        value: settings2.theme.primary_color,
                        onChange: (e) => setSettings({
                          ...settings2,
                          theme: {
                            ...settings2.theme,
                            primary_color: e.target.value
                          }
                        }),
                        className: "w-16 h-16 rounded-xl border-2 border-gray-300 cursor-pointer"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                        className: "flex-1",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                          type: "text",
                          value: settings2.theme.primary_color,
                          onChange: (e) => {
                            if (/^#[0-9A-Fa-f]{6}$/.test(e.target.value)) {
                              setSettings({
                                ...settings2,
                                theme: {
                                  ...settings2.theme,
                                  primary_color: e.target.value
                                }
                              });
                            }
                          },
                          placeholder: "#FF9F43",
                          className: "w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 font-mono focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100"
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                          className: "text-xs text-gray-500 mt-1",
                          children: ""
                        })]
                      })]
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                    className: "block text-sm font-medium text-gray-700 mb-2",
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "grid grid-cols-4 gap-3",
                    children: [{
                      value: "small",
                      label: "Small",
                      preview: "rounded"
                    }, {
                      value: "medium",
                      label: "Medium",
                      preview: "rounded-lg"
                    }, {
                      value: "large",
                      label: "Large",
                      preview: "rounded-xl"
                    }, {
                      value: "full",
                      label: "Full",
                      preview: "rounded-full"
                    }].map((option) => /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.button, {
                      onClick: () => setSettings({
                        ...settings2,
                        theme: {
                          ...settings2.theme,
                          radius: option.value
                        }
                      }),
                      className: `px-4 py-3 border-2 rounded-xl transition-all ${settings2.theme.radius === option.value ? "border-pink-500 bg-pink-50 text-pink-700" : "border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,
                      whileHover: {
                        scale: 1.02
                      },
                      whileTap: {
                        scale: 0.98
                      },
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: `w-full h-12 bg-gradient-to-r from-pink-200 to-purple-200 ${option.preview} mb-2`
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-sm font-medium",
                        children: option.label
                      })]
                    }, option.value))
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "space-y-4 p-4 bg-gray-50 rounded-xl",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ToggleSwitch, {
                    enabled: settings2.theme.enable_particles,
                    onChange: (v2) => setSettings({
                      ...settings2,
                      theme: {
                        ...settings2.theme,
                        enable_particles: v2
                      }
                    }),
                    label: "",
                    description: "/"
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx(ToggleSwitch, {
                    enabled: settings2.theme.enable_blur,
                    onChange: (v2) => setSettings({
                      ...settings2,
                      theme: {
                        ...settings2.theme,
                        enable_blur: v2
                      }
                    }),
                    label: "",
                    description: "backdrop-filter "
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx(ToggleSwitch, {
                    enabled: settings2.theme.gray_mode,
                    onChange: (v2) => setSettings({
                      ...settings2,
                      theme: {
                        ...settings2.theme,
                        gray_mode: v2
                      }
                    }),
                    label: "",
                    description: ""
                  })]
                })]
              })]
            }), activeTab === "features" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "space-y-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center justify-between mb-6 pb-4 border-b border-gray-200",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                  className: "text-2xl font-bold text-gray-800",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",
                  children: " "
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-8",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl border border-purple-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: "Live2D "
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ToggleSwitch, {
                      enabled: settings2.features.live2d.enabled,
                      onChange: (v2) => setSettings({
                        ...settings2,
                        features: {
                          ...settings2.features,
                          live2d: {
                            ...settings2.features.live2d,
                            enabled: v2
                          }
                        }
                      }),
                      label: " Live2D",
                      description: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2",
                        children: " JSON "
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "url",
                        value: settings2.features.live2d.model_source,
                        onChange: (e) => setSettings({
                          ...settings2,
                          features: {
                            ...settings2.features,
                            live2d: {
                              ...settings2.features.live2d,
                              model_source: e.target.value
                            }
                          }
                        }),
                        className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                        placeholder: "https://..."
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("select", {
                        value: settings2.features.live2d.position,
                        onChange: (e) => setSettings({
                          ...settings2,
                          features: {
                            ...settings2.features,
                            live2d: {
                              ...settings2.features.live2d,
                              position: e.target.value
                            }
                          }
                        }),
                        className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                          value: "bottom-left",
                          children: ""
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("option", {
                          value: "bottom-right",
                          children: ""
                        })]
                      })]
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "p-6 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl border border-blue-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ToggleSwitch, {
                      enabled: settings2.features.music.auto_play,
                      onChange: (v2) => setSettings({
                        ...settings2,
                        features: {
                          ...settings2.features,
                          music: {
                            ...settings2.features.music,
                            auto_play: v2
                          }
                        }
                      }),
                      label: "",
                      description: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2",
                        children: " ID"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "text",
                        value: settings2.features.music.playlist_id,
                        onChange: (e) => setSettings({
                          ...settings2,
                          features: {
                            ...settings2.features,
                            music: {
                              ...settings2.features.music,
                              playlist_id: e.target.value
                            }
                          }
                        }),
                        placeholder: "/Spotify  ID",
                        className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all"
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2",
                        children: [": ", /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
                          className: "text-blue-600 font-bold",
                          children: [settings2.features.music.volume, "%"]
                        })]
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "range",
                        min: "0",
                        max: "100",
                        value: settings2.features.music.volume,
                        onChange: (e) => setSettings({
                          ...settings2,
                          features: {
                            ...settings2.features,
                            music: {
                              ...settings2.features.music,
                              volume: parseInt(e.target.value)
                            }
                          }
                        }),
                        className: "w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"
                      })]
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl border border-green-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ToggleSwitch, {
                      enabled: settings2.features.comments.enabled,
                      onChange: (v2) => setSettings({
                        ...settings2,
                        features: {
                          ...settings2.features,
                          comments: {
                            ...settings2.features.comments,
                            enabled: v2
                          }
                        }
                      }),
                      label: "",
                      description: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx(ToggleSwitch, {
                      enabled: settings2.features.comments.enable_danmaku,
                      onChange: (v2) => setSettings({
                        ...settings2,
                        features: {
                          ...settings2.features,
                          comments: {
                            ...settings2.features.comments,
                            enable_danmaku: v2
                          }
                        }
                      }),
                      label: "",
                      description: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx(ToggleSwitch, {
                      enabled: settings2.features.comments.review_required,
                      onChange: (v2) => setSettings({
                        ...settings2,
                        features: {
                          ...settings2.features,
                          comments: {
                            ...settings2.features.comments,
                            review_required: v2
                          }
                        }
                      }),
                      label: "",
                      description: ""
                    })]
                  })]
                })]
              })]
            }), activeTab === "integrations" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "space-y-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center justify-between mb-6 pb-4 border-b border-gray-200",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                  className: "text-2xl font-bold text-gray-800",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",
                  children: " "
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-8",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "p-6 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl border border-yellow-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2",
                        children: "Google Analytics ID"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "text",
                        value: settings2.integrations.google_analytics_id || "",
                        onChange: (e) => setSettings({
                          ...settings2,
                          integrations: {
                            ...settings2.integrations,
                            google_analytics_id: e.target.value
                          }
                        }),
                        placeholder: "G-XXXXX",
                        className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-xs text-gray-500 mt-1",
                        children: " Google Analytics "
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2",
                        children: "Cloudflare Web Analytics Token"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "text",
                        value: settings2.integrations.cloudflare_analytics_token || "",
                        onChange: (e) => setSettings({
                          ...settings2,
                          integrations: {
                            ...settings2.integrations,
                            cloudflare_analytics_token: e.target.value
                          }
                        }),
                        className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                        placeholder: " Cloudflare Dashboard "
                      })]
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "p-6 bg-gradient-to-br from-pink-50 to-purple-50 rounded-2xl border border-pink-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                          children: ""
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                          children: "GitHub"
                        })]
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "url",
                        value: settings2.integrations.social.github || "",
                        onChange: (e) => setSettings({
                          ...settings2,
                          integrations: {
                            ...settings2.integrations,
                            social: {
                              ...settings2.integrations.social,
                              github: e.target.value
                            }
                          }
                        }),
                        className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                        placeholder: "https://github.com/username"
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                          children: ""
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                          children: "Bilibili"
                        })]
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "url",
                        value: settings2.integrations.social.bilibili || "",
                        onChange: (e) => setSettings({
                          ...settings2,
                          integrations: {
                            ...settings2.integrations,
                            social: {
                              ...settings2.integrations.social,
                              bilibili: e.target.value
                            }
                          }
                        }),
                        className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                        placeholder: "https://space.bilibili.com/..."
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                          children: ""
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                          children: "Twitter/X"
                        })]
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "url",
                        value: settings2.integrations.social.twitter || "",
                        onChange: (e) => setSettings({
                          ...settings2,
                          integrations: {
                            ...settings2.integrations,
                            social: {
                              ...settings2.integrations.social,
                              twitter: e.target.value
                            }
                          }
                        }),
                        className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all",
                        placeholder: "https://twitter.com/username"
                      })]
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "p-6 bg-gradient-to-br from-cyan-50 to-blue-50 rounded-2xl border border-cyan-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: " (R2)"
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "text",
                        value: settings2.integrations.r2.public_domain || "",
                        onChange: (e) => setSettings({
                          ...settings2,
                          integrations: {
                            ...settings2.integrations,
                            r2: {
                              ...settings2.integrations.r2,
                              public_domain: e.target.value
                            }
                          }
                        }),
                        placeholder: "img.aincfh.dpdns.org",
                        className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-xs text-gray-500 mt-1",
                        children: "R2 "
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "block text-sm font-medium text-gray-700 mb-2",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                        type: "text",
                        value: settings2.integrations.r2.upload_path,
                        onChange: (e) => setSettings({
                          ...settings2,
                          integrations: {
                            ...settings2.integrations,
                            r2: {
                              ...settings2.integrations.r2,
                              upload_path: e.target.value
                            }
                          }
                        }),
                        placeholder: "uploads/",
                        className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all"
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-xs text-gray-500 mt-1",
                        children: ""
                      })]
                    })]
                  })]
                })]
              })]
            }), activeTab === "security" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "space-y-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center justify-between mb-6 pb-4 border-b border-gray-200",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                  className: "text-2xl font-bold text-gray-800",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",
                  children: " "
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-8",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "p-6 bg-gradient-to-br from-red-50 to-orange-50 rounded-2xl border border-red-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx(ToggleSwitch, {
                      enabled: settings2.security.maintenance_mode,
                      onChange: (v2) => setSettings({
                        ...settings2,
                        security: {
                          ...settings2.security,
                          maintenance_mode: v2
                        }
                      }),
                      label: "",
                      description: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("label", {
                        className: "block text-sm font-medium text-gray-700 mb-3",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                        className: "space-y-3",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                          type: "password",
                          id: "current-password",
                          placeholder: "",
                          className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all"
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                          type: "password",
                          id: "new-password",
                          placeholder: "8",
                          className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all"
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("input", {
                          type: "password",
                          id: "confirm-password",
                          placeholder: "",
                          className: "w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:border-pink-400 focus:ring-2 focus:ring-pink-100 transition-all"
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                          onClick: async () => {
                            const currentPassword = document.getElementById("current-password")?.value;
                            const newPassword = document.getElementById("new-password")?.value;
                            const confirmPassword = document.getElementById("confirm-password")?.value;
                            if (!currentPassword || !newPassword || !confirmPassword) {
                              setToastType("error");
                              setToastMessage("");
                              setShowToast(true);
                              setTimeout(() => setShowToast(false), 3e3);
                              return;
                            }
                            if (newPassword.length < 8) {
                              setToastType("error");
                              setToastMessage("8");
                              setShowToast(true);
                              setTimeout(() => setShowToast(false), 3e3);
                              return;
                            }
                            if (newPassword !== confirmPassword) {
                              setToastType("error");
                              setToastMessage("");
                              setShowToast(true);
                              setTimeout(() => setShowToast(false), 3e3);
                              return;
                            }
                            try {
                              const formData = new FormData();
                              formData.append("current_password", currentPassword);
                              formData.append("new_password", newPassword);
                              formData.append("confirm_password", confirmPassword);
                              const response = await fetch("/api/admin/change-password", {
                                method: "POST",
                                body: formData
                              });
                              const result = await response.json();
                              if (result.success) {
                                setToastType("success");
                                setToastMessage(result.message || "");
                                setShowToast(true);
                                setTimeout(() => {
                                  setShowToast(false);
                                  document.getElementById("current-password").value = "";
                                  document.getElementById("new-password").value = "";
                                  document.getElementById("confirm-password").value = "";
                                }, 3e3);
                              } else {
                                setToastType("error");
                                setToastMessage(result.error || "");
                                setShowToast(true);
                                setTimeout(() => setShowToast(false), 3e3);
                              }
                            } catch (error) {
                              setToastType("error");
                              setToastMessage("");
                              setShowToast(true);
                              setTimeout(() => setShowToast(false), 3e3);
                            }
                          },
                          className: "w-full px-4 py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 transition-colors",
                          whileHover: {
                            scale: 1.02
                          },
                          whileTap: {
                            scale: 0.98
                          },
                          children: " "
                        })]
                      })]
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-blue-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "space-y-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(motion.button, {
                      onClick: async () => {
                        const data = {
                          settings: settings2,
                          export_time: (/* @__PURE__ */ new Date()).toISOString(),
                          version: "1.0.0"
                        };
                        const blob = new Blob([JSON.stringify(data, null, 2)], {
                          type: "application/json"
                        });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement("a");
                        a.href = url;
                        a.download = `backup-${Date.now()}.json`;
                        a.click();
                        URL.revokeObjectURL(url);
                        setToastType("success");
                        setToastMessage("");
                        setShowToast(true);
                        setTimeout(() => setShowToast(false), 3e3);
                      },
                      className: "w-full px-4 py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",
                      whileHover: {
                        scale: 1.02
                      },
                      whileTap: {
                        scale: 0.98
                      },
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        children: ""
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.button, {
                      onClick: () => {
                        const input = document.createElement("input");
                        input.type = "file";
                        input.accept = "application/json";
                        input.onchange = async (e) => {
                          const file = e.target.files?.[0];
                          if (file) {
                            try {
                              const text = await file.text();
                              const data = JSON.parse(text);
                              if (data.settings) {
                                setSettings(data.settings);
                                setToastType("info");
                                setToastMessage("");
                                setShowToast(true);
                                setTimeout(() => setShowToast(false), 3e3);
                              } else {
                                setToastType("error");
                                setToastMessage("");
                                setShowToast(true);
                                setTimeout(() => setShowToast(false), 3e3);
                              }
                            } catch (error) {
                              setToastType("error");
                              setToastMessage("");
                              setShowToast(true);
                              setTimeout(() => setShowToast(false), 3e3);
                            }
                          }
                        };
                        input.click();
                      },
                      className: "w-full px-4 py-3 bg-green-500 text-white rounded-xl font-medium hover:bg-green-600 transition-colors flex items-center justify-center gap-2",
                      whileHover: {
                        scale: 1.02
                      },
                      whileTap: {
                        scale: 0.98
                      },
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                        children: " JSON "
                      })]
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "p-6 bg-gradient-to-br from-red-50 to-pink-50 rounded-2xl border border-red-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.button, {
                    onClick: async () => {
                      if (!confirm("CDN")) {
                        return;
                      }
                      try {
                        const response = await fetch("/api/admin/purge-cache", {
                          method: "POST"
                        });
                        const result = await response.json();
                        if (result.success) {
                          setToastType("success");
                          setToastMessage(result.message || "CDN");
                          setShowToast(true);
                          setTimeout(() => setShowToast(false), 3e3);
                        } else {
                          setToastType("error");
                          setToastMessage(result.error || "");
                          setShowToast(true);
                          setTimeout(() => setShowToast(false), 3e3);
                        }
                      } catch (error) {
                        setToastType("error");
                        setToastMessage("");
                        setShowToast(true);
                        setTimeout(() => setShowToast(false), 3e3);
                      }
                    },
                    className: "w-full px-4 py-3 bg-red-500 text-white rounded-xl font-medium hover:bg-red-600 transition-colors flex items-center justify-center gap-2",
                    whileHover: {
                      scale: 1.02
                    },
                    whileTap: {
                      scale: 0.98
                    },
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: " CDN "
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "text-xs text-gray-500 mt-2",
                    children: ""
                  })]
                })]
              })]
            }), activeTab === "about" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "space-y-6",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center justify-between mb-6 pb-4 border-b border-gray-200",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
                  className: "text-2xl font-bold text-gray-800",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                  className: "text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",
                  children: " "
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "space-y-6",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "bg-gradient-to-br from-slate-50 to-gray-50 rounded-2xl p-6 border border-gray-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                    className: "grid grid-cols-1 md:grid-cols-2 gap-4",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "bg-white rounded-xl p-4 border border-gray-100 shadow-sm",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-xs text-gray-500 mb-1",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-lg font-bold text-gray-800 font-mono",
                        children: "v1.0.0"
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "bg-white rounded-xl p-4 border border-gray-100 shadow-sm",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-xs text-gray-500 mb-1",
                        children: "React "
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-lg font-bold text-gray-800 font-mono",
                        children: "v19.1.1"
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "bg-white rounded-xl p-4 border border-gray-100 shadow-sm",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-xs text-gray-500 mb-1",
                        children: "Cloudflare "
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-lg font-bold text-gray-800 font-mono",
                        children: "NRT (Tokyo)"
                      })]
                    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                      className: "bg-white rounded-xl p-4 border border-gray-100 shadow-sm",
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-xs text-gray-500 mb-1",
                        children: ""
                      }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                        className: "text-lg font-bold text-gray-800 font-mono",
                        children: (/* @__PURE__ */ new Date()).toLocaleDateString("zh-CN")
                      })]
                    })]
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-6 border border-blue-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "space-y-4",
                    children: /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
                      className: "bg-white rounded-xl p-4 border-l-4 border-pink-500 shadow-sm",
                      initial: {
                        opacity: 0,
                        x: -20
                      },
                      animate: {
                        opacity: 1,
                        x: 0
                      },
                      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                        className: "flex items-center justify-between mb-2",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                          className: "font-bold text-gray-800",
                          children: "v1.0.0"
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                          className: "text-xs text-gray-500",
                          children: "2024-01-15"
                        })]
                      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                        className: "text-sm text-gray-600 space-y-1",
                        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                          children: " "
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                          children: " Modern DigitalUI"
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                          children: " MAGI"
                        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                          children: " Cloudflare"
                        })]
                      })]
                    })
                  })]
                }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                  className: "bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200",
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("h3", {
                    className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",
                    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                      children: ""
                    })]
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
                    className: "flex flex-wrap gap-2",
                    children: ["React Router v7", "Cloudflare D1", "Cloudflare R2", "Tailwind CSS", "Framer Motion", "TypeScript"].map((tech) => /* @__PURE__ */ jsxRuntimeExports.jsx(motion.span, {
                      className: "px-3 py-1.5 bg-white rounded-lg text-sm font-medium text-gray-700 border border-gray-200 shadow-sm",
                      whileHover: {
                        scale: 1.05
                      },
                      children: tech
                    }, tech))
                  })]
                })]
              })]
            })]
          })
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
        children: hasChanges && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: "fixed bottom-0 left-0 right-0 z-[100] bg-white/90 backdrop-blur-sm border-t border-gray-200 shadow-lg",
          initial: {
            y: 100
          },
          animate: {
            y: 0
          },
          exit: {
            y: 100
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "max-w-7xl mx-auto px-8 py-4 flex items-center justify-between",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex items-center gap-3",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
                className: "w-3 h-3 bg-yellow-400 rounded-full",
                animate: {
                  scale: [1, 1.2, 1]
                },
                transition: {
                  duration: 1.5,
                  repeat: Infinity
                }
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-gray-700 font-medium",
                children: ""
              })]
            }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
              className: "flex gap-3",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                onClick: handleReset,
                className: "px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors",
                whileHover: {
                  scale: 1.05
                },
                whileTap: {
                  scale: 0.95
                },
                children: ""
              }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.button, {
                onClick: handleSave,
                disabled: isSaving,
                className: "px-6 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-lg font-medium shadow-sm hover:shadow-md transition-shadow disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",
                whileHover: {
                  scale: isSaving ? 1 : 1.05
                },
                whileTap: {
                  scale: isSaving ? 1 : 0.95
                },
                children: isSaving ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
                    className: "w-4 h-4 border-2 border-white/30 border-t-white rounded-full",
                    animate: {
                      rotate: 360
                    },
                    transition: {
                      duration: 1,
                      repeat: Infinity,
                      ease: "linear"
                    }
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: "..."
                  })]
                }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {
                  children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: ""
                  }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                    children: ""
                  })]
                })
              })]
            })]
          })
        })
      }), /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatePresence, {
        children: showToast && /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
          className: `fixed top-20 right-8 z-[200] rounded-xl shadow-xl p-4 border min-w-[300px] ${toastType === "success" ? "bg-green-500 text-white border-green-600" : toastType === "error" ? "bg-red-500 text-white border-red-600" : toastType === "warning" ? "bg-yellow-500 text-white border-yellow-600" : "bg-blue-500 text-white border-blue-600"}`,
          initial: {
            opacity: 0,
            y: -20,
            x: 100
          },
          animate: {
            opacity: 1,
            y: 0,
            x: 0
          },
          exit: {
            opacity: 0,
            y: -20,
            x: 100
          },
          transition: {
            type: "spring",
            stiffness: 300,
            damping: 25
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "flex items-center gap-3",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              className: "text-2xl",
              children: toastType === "success" ? "" : toastType === "error" ? "" : toastType === "warning" ? "" : ""
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              className: "font-medium flex-1",
              children: toastMessage
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
              onClick: () => setShowToast(false),
              className: "text-white/80 hover:text-white transition-colors",
              children: ""
            })]
          })
        })
      })]
    })
  });
});
const route32 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$l,
  default: admin_settings,
  loader: loader$f
}, Symbol.toStringTag, { value: "Module" }));
async function loader$e({
  request
}) {
  const sessionId = getSessionId(request);
  if (!sessionId) {
    throw redirect("/admin/login");
  }
  const tags = [{
    id: 1,
    name: "React",
    count: 15,
    color: "#3B82F6"
  }, {
    id: 2,
    name: "",
    count: 20,
    color: "#10B981"
  }, {
    id: 3,
    name: "",
    count: 8,
    color: "#F59E0B"
  }, {
    id: 4,
    name: "",
    count: 25,
    color: "#EF4444"
  }, {
    id: 5,
    name: "",
    count: 12,
    color: "#8B5CF6"
  }];
  const categories = [{
    id: 1,
    name: "",
    order: 1
  }, {
    id: 2,
    name: "",
    order: 2
  }, {
    id: 3,
    name: "",
    order: 3
  }];
  return {
    tags,
    categories
  };
}
const admin_tags = withComponentProps(function TagManager({
  loaderData
}) {
  const {
    tags,
    categories
  } = loaderData;
  const [selectedTag, setSelectedTag] = reactExports.useState(null);
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
    children: /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      initial: {
        opacity: 0,
        y: 20
      },
      animate: {
        opacity: 1,
        y: 0
      },
      transition: {
        duration: 0.3
      },
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
        className: "text-3xl font-bold text-gray-800 mb-8",
        children: ""
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "grid grid-cols-1 lg:grid-cols-2 gap-6",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "bg-white rounded-2xl p-6 shadow-sm border border-gray-100",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
            className: "text-xl font-bold text-gray-800 mb-6",
            children: " "
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "flex flex-wrap gap-3",
            children: tags.map((tag) => /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.button, {
              className: "px-4 py-2 rounded-xl text-sm font-medium text-white shadow-sm hover:shadow-md transition-shadow",
              style: {
                backgroundColor: tag.color
              },
              whileHover: {
                scale: 1.1
              },
              whileTap: {
                scale: 0.95
              },
              onClick: () => setSelectedTag(tag.id),
              children: [tag.name, " (", tag.count, ")"]
            }, tag.id))
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "bg-white rounded-2xl p-6 shadow-sm border border-gray-100",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
            className: "text-xl font-bold text-gray-800 mb-6",
            children: " "
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "space-y-2",
            children: categories.map((category) => /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
              className: "flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors cursor-move",
              whileHover: {
                x: 4
              },
              children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
                className: "flex items-center gap-3",
                children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: "text-xl",
                  children: ""
                }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                  className: "font-medium text-gray-800",
                  children: category.name
                })]
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "text-xs text-gray-500",
                children: ""
              })]
            }, category.id))
          })]
        })]
      })]
    })
  });
});
const route33 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin_tags,
  loader: loader$e
}, Symbol.toStringTag, { value: "Module" }));
function DonutChart({
  data,
  size = 200,
  thickness = 40,
  showLabels = true
}) {
  const total = reactExports.useMemo(() => data.reduce((sum, item) => sum + item.value, 0), [data]);
  const segments2 = reactExports.useMemo(() => {
    let currentAngle = -90;
    return data.map((item) => {
      const percentage = item.value / total * 100;
      const angle = percentage / 100 * 360;
      const segment = {
        ...item,
        percentage,
        startAngle: currentAngle,
        endAngle: currentAngle + angle
      };
      currentAngle += angle;
      return segment;
    });
  }, [data, total]);
  const radius = (size - thickness) / 2;
  const center = size / 2;
  const polarToCartesian = (angle) => {
    const radian = angle * Math.PI / 180;
    return {
      x: center + radius * Math.cos(radian),
      y: center + radius * Math.sin(radian)
    };
  };
  const createArcPath = (startAngle, endAngle) => {
    const start = polarToCartesian(startAngle);
    const end = polarToCartesian(endAngle);
    const largeArcFlag = endAngle - startAngle > 180 ? 1 : 0;
    return `M ${start.x} ${start.y} A ${radius} ${radius} 0 ${largeArcFlag} 1 ${end.x} ${end.y}`;
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative inline-flex items-center justify-center", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("svg", { width: size, height: size, className: "transform -rotate-90", children: segments2.map((segment, index2) => /* @__PURE__ */ jsxRuntimeExports.jsx(
      motion.path,
      {
        d: createArcPath(segment.startAngle, segment.endAngle - 0.5),
        fill: "none",
        stroke: segment.color,
        strokeWidth: thickness,
        strokeLinecap: "round",
        initial: { pathLength: 0, opacity: 0 },
        animate: { pathLength: 1, opacity: 1 },
        transition: {
          duration: 1,
          delay: index2 * 0.1,
          ease: "easeOut"
        }
      },
      segment.label
    )) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "absolute inset-0 flex flex-col items-center justify-center", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-2xl font-bold text-white", children: total.toLocaleString() }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-gray-400", children: "" })
    ] }),
    showLabels && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute -right-4 top-1/2 -translate-y-1/2 translate-x-full space-y-2 pl-4", children: segments2.map((segment) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        className: "flex items-center gap-2 text-sm",
        initial: { opacity: 0, x: -10 },
        animate: { opacity: 1, x: 0 },
        transition: { delay: 0.5 },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "span",
            {
              className: "w-3 h-3 rounded-full",
              style: { backgroundColor: segment.color }
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-gray-300", children: segment.label }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-gray-500 ml-1", children: [
            segment.percentage.toFixed(1),
            "%"
          ] })
        ]
      },
      segment.label
    )) })
  ] });
}
function BarChart({
  data,
  orientation = "horizontal",
  showValues = true,
  maxValue: customMax
}) {
  const maxValue = customMax || Math.max(...data.map((d2) => d2.value));
  if (orientation === "vertical") {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-end justify-around gap-2 h-48 px-4", children: data.map((item, index2) => {
      const height = item.value / maxValue * 100;
      return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-center gap-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          motion.div,
          {
            className: "w-8 rounded-t-lg relative group",
            style: {
              backgroundColor: item.color || "#3B82F6"
            },
            initial: { height: 0 },
            animate: { height: `${height}%` },
            transition: { duration: 0.6, delay: index2 * 0.1 },
            children: showValues && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "absolute -top-6 left-1/2 -translate-x-1/2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity", children: item.value })
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-gray-400 text-center max-w-[60px] truncate", children: item.label })
      ] }, item.label);
    }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-3", children: data.map((item, index2) => {
    const width = item.value / maxValue * 100;
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        className: "space-y-1",
        initial: { opacity: 0, x: -20 },
        animate: { opacity: 1, x: 0 },
        transition: { delay: index2 * 0.1 },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between text-sm", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              item.icon,
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-gray-300", children: item.label })
            ] }),
            showValues && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-gray-400", children: item.value.toLocaleString() })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-2 bg-white/5 rounded-full overflow-hidden", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
            motion.div,
            {
              className: "h-full rounded-full",
              style: { backgroundColor: item.color || "#3B82F6" },
              initial: { width: 0 },
              animate: { width: `${width}%` },
              transition: { duration: 0.8, delay: index2 * 0.1 }
            }
          ) })
        ]
      },
      item.label
    );
  }) });
}
const deviceTypeData = [
  { label: "", value: 4521, color: "#3B82F6" },
  { label: "", value: 3892, color: "#10B981" },
  { label: "", value: 1234, color: "#8B5CF6" },
  { label: "", value: 156, color: "#F59E0B" }
];
const browserData = [
  { label: "Chrome", value: 5234, color: "#4285F4", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Chromium, { className: "w-4 h-4 text-[#4285F4]" }) },
  { label: "Safari", value: 2156, color: "#000000", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Apple, { className: "w-4 h-4 text-gray-300" }) },
  { label: "Firefox", value: 1023, color: "#FF7139", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Globe, { className: "w-4 h-4 text-[#FF7139]" }) },
  { label: "Edge", value: 876, color: "#0078D7", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Globe, { className: "w-4 h-4 text-[#0078D7]" }) },
  { label: "Samsung", value: 342, color: "#1428A0", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Smartphone, { className: "w-4 h-4 text-[#1428A0]" }) },
  { label: "", value: 172, color: "#6B7280", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Globe, { className: "w-4 h-4 text-gray-400" }) }
];
const osData = [
  { label: "Windows", value: 3845, color: "#00A4EF" },
  { label: "macOS", value: 2134, color: "#A3AAAE" },
  { label: "iOS", value: 1923, color: "#000000" },
  { label: "Android", value: 1567, color: "#3DDC84" },
  { label: "Linux", value: 234, color: "#FCC624" }
];
const phoneBrandData = [
  { label: "iPhone", value: 2456, color: "#A3AAAE", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Apple, { className: "w-4 h-4 text-gray-300" }) },
  { label: "Samsung", value: 1234, color: "#1428A0", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Smartphone, { className: "w-4 h-4 text-[#1428A0]" }) },
  { label: "Xiaomi", value: 876, color: "#FF6900", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Smartphone, { className: "w-4 h-4 text-[#FF6900]" }) },
  { label: "OPPO", value: 543, color: "#00A854", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Smartphone, { className: "w-4 h-4 text-[#00A854]" }) },
  { label: "vivo", value: 432, color: "#415FFF", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Smartphone, { className: "w-4 h-4 text-[#415FFF]" }) },
  { label: "Huawei", value: 321, color: "#CF0A2C", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Smartphone, { className: "w-4 h-4 text-[#CF0A2C]" }) }
];
const deviceModelData = [
  { label: "iPhone 15 Pro Max", value: 456, color: "#A3AAAE" },
  { label: "iPhone 14 Pro", value: 398, color: "#A3AAAE" },
  { label: "Samsung S24 Ultra", value: 312, color: "#1428A0" },
  { label: "iPhone 13", value: 287, color: "#A3AAAE" },
  { label: "iPad Pro 12.9", value: 234, color: "#A3AAAE" },
  { label: "Xiaomi 14 Ultra", value: 198, color: "#FF6900" },
  { label: "Samsung S23", value: 176, color: "#1428A0" },
  { label: "iPad Air", value: 156, color: "#A3AAAE" }
];
const screenResolutionData = [
  { label: "1920x1080", value: 2345, color: "#3B82F6" },
  { label: "2560x1440", value: 1234, color: "#8B5CF6" },
  { label: "1366x768", value: 987, color: "#10B981" },
  { label: "3840x2160", value: 543, color: "#F59E0B" },
  { label: "390x844", value: 876, color: "#EC4899" },
  { label: "414x896", value: 654, color: "#06B6D4" }
];
function StatCard({ title, value, change, icon, trend }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(
    motion.div,
    {
      className: "relative overflow-hidden rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10 p-5",
      initial: { opacity: 0, y: 20 },
      animate: { opacity: 1, y: 0 },
      whileHover: { scale: 1.02, y: -2 },
      transition: { duration: 0.3 },
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start justify-between", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-400 mb-1", children: title }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-2xl font-bold text-white", children: value }),
            change && /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: `text-xs mt-1 ${trend === "up" ? "text-green-400" : "text-red-400"}`, children: [
              trend === "up" ? "" : "",
              " ",
              change
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-3 rounded-xl bg-white/10", children: icon })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute -bottom-4 -right-4 w-24 h-24 rounded-full bg-gradient-to-br from-blue-500/20 to-purple-500/20 blur-2xl" })
      ]
    }
  );
}
function ChartCard({ title, subtitle, children, className = "" }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(
    motion.div,
    {
      className: `rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10 p-6 ${className}`,
      initial: { opacity: 0, y: 20 },
      animate: { opacity: 1, y: 0 },
      transition: { duration: 0.5 },
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mb-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold text-white", children: title }),
          subtitle && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-400 mt-1", children: subtitle })
        ] }),
        children
      ]
    }
  );
}
function DeviceAnalyticsDashboard() {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-h-screen bg-gradient-to-br from-slate-900 via-purple-900/20 to-slate-900 p-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      motion.div,
      {
        className: "mb-8",
        initial: { opacity: 0, y: -20 },
        animate: { opacity: 1, y: 0 },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-white mb-2", children: "" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-gray-400", children: "" })
        ]
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        StatCard,
        {
          title: "",
          value: "9,803",
          change: "12.5% vs ",
          trend: "up",
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Globe, { className: "w-6 h-6 text-blue-400" })
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        StatCard,
        {
          title: "",
          value: "52.3%",
          change: "3.2%",
          trend: "up",
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Smartphone, { className: "w-6 h-6 text-green-400" })
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        StatCard,
        {
          title: "",
          value: "6,234",
          change: "8.7%",
          trend: "up",
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Cpu, { className: "w-6 h-6 text-purple-400" })
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        StatCard,
        {
          title: "",
          value: "42",
          change: "5 ",
          trend: "up",
          icon: /* @__PURE__ */ jsxRuntimeExports.jsx(MapPin, { className: "w-6 h-6 text-orange-400" })
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-8", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(
        ChartCard,
        {
          title: "",
          subtitle: "",
          className: "xl:col-span-1",
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex justify-center py-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(DonutChart, { data: deviceTypeData, size: 180, thickness: 35, showLabels: false }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-2 gap-3 mt-4", children: deviceTypeData.map((item) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "span",
                {
                  className: "w-3 h-3 rounded-full",
                  style: { backgroundColor: item.color }
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-gray-300", children: item.label }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-xs text-gray-500 ml-auto", children: [
                (item.value / deviceTypeData.reduce((a, b2) => a + b2.value, 0) * 100).toFixed(1),
                "%"
              ] })
            ] }, item.label)) })
          ]
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        ChartCard,
        {
          title: "",
          subtitle: "",
          className: "xl:col-span-1",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(BarChart, { data: browserData })
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(
        ChartCard,
        {
          title: "",
          subtitle: "",
          className: "xl:col-span-1",
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex justify-center py-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(DonutChart, { data: osData, size: 180, thickness: 35, showLabels: false }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-2 gap-3 mt-4", children: osData.map((item) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "span",
                {
                  className: "w-3 h-3 rounded-full",
                  style: { backgroundColor: item.color }
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-gray-300", children: item.label }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-xs text-gray-500 ml-auto", children: [
                (item.value / osData.reduce((a, b2) => a + b2.value, 0) * 100).toFixed(1),
                "%"
              ] })
            ] }, item.label)) })
          ]
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        ChartCard,
        {
          title: "",
          subtitle: "",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(BarChart, { data: phoneBrandData })
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        ChartCard,
        {
          title: "",
          subtitle: "",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(BarChart, { data: deviceModelData })
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        ChartCard,
        {
          title: "",
          subtitle: "",
          className: "lg:col-span-2",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-2 md:grid-cols-3 gap-4", children: screenResolutionData.map((item, index2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
            motion.div,
            {
              className: "p-4 rounded-xl bg-white/5 border border-white/10",
              initial: { opacity: 0, scale: 0.9 },
              animate: { opacity: 1, scale: 1 },
              transition: { delay: index2 * 0.1 },
              whileHover: { scale: 1.05 },
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "div",
                  {
                    className: "w-8 h-5 rounded mb-2 flex items-center justify-center",
                    style: { backgroundColor: item.color + "30", borderColor: item.color },
                    children: /* @__PURE__ */ jsxRuntimeExports.jsx(Monitor, { className: "w-3 h-3", style: { color: item.color } })
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-white", children: item.label }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-gray-400", children: [
                  item.value.toLocaleString(),
                  " "
                ] })
              ]
            },
            item.label
          )) })
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        ChartCard,
        {
          title: "",
          subtitle: "",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-4", children: [
            { label: " (>1200px)", value: 45, icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Monitor, { className: "w-5 h-5" }), color: "#3B82F6" },
            { label: " (768-1200px)", value: 25, icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Tablet, { className: "w-5 h-5" }), color: "#8B5CF6" },
            { label: " (<768px)", value: 30, icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Smartphone, { className: "w-5 h-5" }), color: "#10B981" }
          ].map((item, index2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
            motion.div,
            {
              className: "flex items-center gap-3",
              initial: { opacity: 0, x: -20 },
              animate: { opacity: 1, x: 0 },
              transition: { delay: index2 * 0.15 },
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "div",
                  {
                    className: "p-2 rounded-lg",
                    style: { backgroundColor: item.color + "20" },
                    children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { style: { color: item.color }, children: item.icon })
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-300", children: item.label }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-1.5 bg-white/10 rounded-full mt-1 overflow-hidden", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                    motion.div,
                    {
                      className: "h-full rounded-full",
                      style: { backgroundColor: item.color },
                      initial: { width: 0 },
                      animate: { width: `${item.value}%` },
                      transition: { duration: 0.8, delay: 0.3 + index2 * 0.15 }
                    }
                  ) })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-sm font-medium text-white", children: [
                  item.value,
                  "%"
                ] })
              ]
            },
            item.label
          )) })
        }
      )
    ] })
  ] });
}
const admin_analytics = withComponentProps(function AdminAnalytics() {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(DeviceAnalyticsDashboard, {});
});
const route34 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin_analytics
}, Symbol.toStringTag, { value: "Module" }));
const admin_404 = withComponentProps(function Admin404() {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "absolute inset-0 opacity-5",
      style: {
        backgroundImage: `linear-gradient(rgba(255,159,67,0.3) 1px, transparent 1px),
                           linear-gradient(90deg, rgba(255,159,67,0.3) 1px, transparent 1px)`,
        backgroundSize: "50px 50px"
      }
    }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
      className: "relative z-10 text-center px-6",
      initial: {
        opacity: 0,
        scale: 0.9
      },
      animate: {
        opacity: 1,
        scale: 1
      },
      transition: {
        duration: 0.5
      },
      children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "mb-8",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "inline-flex items-center justify-center w-24 h-24 rounded-2xl bg-gradient-to-br from-at-orange/20 to-at-purple/20 border border-at-orange/30",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            className: "text-5xl",
            children: ""
          })
        })
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("h1", {
        className: "text-8xl md:text-9xl font-display font-black mb-4",
        style: {
          background: "linear-gradient(135deg, #FF9F43, #8B5CF6)",
          WebkitBackgroundClip: "text",
          WebkitTextFillColor: "transparent"
        },
        children: "404"
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("h2", {
        className: "text-2xl font-bold text-white mb-2",
        children: ""
      }), /* @__PURE__ */ jsxRuntimeExports.jsx("p", {
        className: "text-slate-400 mb-8 max-w-md mx-auto",
        children: " URL "
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "flex gap-4 justify-center",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
          to: "/admin",
          className: "px-6 py-3 bg-gradient-to-r from-at-orange to-at-purple text-white font-bold rounded-lg hover:shadow-lg transition-all",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("button", {
          onClick: () => window.history.back(),
          className: "px-6 py-3 border border-slate-600 text-slate-300 hover:border-at-orange hover:text-at-orange rounded-lg transition-all",
          children: ""
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "mt-12 text-xs text-slate-600 font-mono",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
          children: "ERROR CODE: 404"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
          className: "mx-3",
          children: "|"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
          children: "ADMIN PANEL"
        })]
      })]
    })]
  });
});
const route35 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin_404
}, Symbol.toStringTag, { value: "Module" }));
const action$k = async ({
  request,
  context
}) => {
  const env = context.cloudflare.env;
  const isProd = env.ENVIRONMENT === "production";
  const secret = env.SESSION_SECRET || "default-secret";
  const themeSessionResolver = createDynamicThemeSessionResolver(secret, isProd);
  return createThemeAction(themeSessionResolver)({
    request,
    context,
    params: {}
  });
};
const route36 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$k
}, Symbol.toStringTag, { value: "Module" }));
async function loader$d({
  context
}) {
  const env = context.cloudflare.env;
  const {
    anime_db
  } = env;
  try {
    const {
      results
    } = await anime_db.prepare(`SELECT * FROM animes 
         ORDER BY 
           CASE status
             WHEN 'watching' THEN 1
             WHEN 'completed' THEN 2
             WHEN 'plan' THEN 3
             WHEN 'dropped' THEN 4
           END,
           created_at DESC
         LIMIT 50`).all();
    return Response.json({
      animes: results
    });
  } catch (error) {
    console.error("Failed to fetch animes:", error);
    return Response.json({
      animes: [],
      error: "Failed to fetch animes"
    }, {
      status: 500
    });
  }
}
async function action$j({
  request,
  context
}) {
  const env = context.cloudflare.env;
  const {
    anime_db
  } = env;
  try {
    const formData = await request.formData();
    const method = request.method;
    if (method === "POST") {
      const title = formData.get("title");
      const cover_url = formData.get("cover_url");
      const status = formData.get("status");
      const progress2 = formData.get("progress");
      const rating = formData.get("rating") ? parseInt(formData.get("rating")) : null;
      const review = formData.get("review");
      await anime_db.prepare(`INSERT INTO animes (title, cover_url, status, progress, rating, review)
           VALUES (?, ?, ?, ?, ?, ?)`).bind(title, cover_url, status, progress2, rating, review).run();
      return Response.json({
        success: true
      });
    } else if (method === "PUT") {
      const id2 = formData.get("id");
      const title = formData.get("title");
      const cover_url = formData.get("cover_url");
      const status = formData.get("status");
      const progress2 = formData.get("progress");
      const rating = formData.get("rating") ? parseInt(formData.get("rating")) : null;
      const review = formData.get("review");
      await anime_db.prepare(`UPDATE animes 
           SET title = ?, cover_url = ?, status = ?, progress = ?, rating = ?, review = ?
           WHERE id = ?`).bind(title, cover_url, status, progress2, rating, review, id2).run();
      return Response.json({
        success: true
      });
    } else if (method === "DELETE") {
      const id2 = formData.get("id");
      await anime_db.prepare(`DELETE FROM animes WHERE id = ?`).bind(id2).run();
      return Response.json({
        success: true
      });
    }
    return Response.json({
      error: "Method not allowed"
    }, {
      status: 405
    });
  } catch (error) {
    console.error("Anime action error:", error);
    return Response.json({
      error: "Action failed"
    }, {
      status: 500
    });
  }
}
const route37 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$j,
  loader: loader$d
}, Symbol.toStringTag, { value: "Module" }));
async function action$i({
  request,
  context
}) {
  const env = context.cloudflare.env;
  const anime_db = env?.anime_db;
  const CACHE_KV = env?.CACHE_KV;
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  try {
    const formData = await request.formData();
    const email = formData.get("email");
    const password = formData.get("password");
    if (!email || !password) {
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 400
      });
    }
    if (!anime_db) {
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 500
      });
    }
    const result = await loginUser(email, password, request, anime_db, CACHE_KV);
    if (!result.success) {
      return Response.json(result, {
        status: 401
      });
    }
    if (!result.session) {
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 500
      });
    }
    const isProduction = !request.url.includes("localhost");
    const cookieOptions = `session=${result.session.token}; HttpOnly; Path=/; Max-Age=${7 * 24 * 60 * 60}; SameSite=Strict${isProduction ? "; Secure" : ""}`;
    return Response.json({
      success: true,
      user: result.user
    }, {
      headers: {
        "Set-Cookie": cookieOptions
      }
    });
  } catch (error) {
    console.error("Login error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route38 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$i
}, Symbol.toStringTag, { value: "Module" }));
async function action$h({
  request,
  context
}) {
  const env = context.cloudflare.env;
  const anime_db = env?.anime_db;
  const CACHE_KV = env?.CACHE_KV;
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  if (!anime_db) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
  try {
    const formData = await request.formData();
    const email = formData.get("email");
    const password = formData.get("password");
    const username = formData.get("username") || void 0;
    if (!email || !password) {
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 400
      });
    }
    if (password.length < 6) {
      return Response.json({
        success: false,
        error: "6"
      }, {
        status: 400
      });
    }
    const result = await registerUser(
      email,
      password,
      "",
      // 
      username || "",
      anime_db,
      CACHE_KV
    );
    if (!result.success) {
      return Response.json(result, {
        status: 400
      });
    }
    const loginResult = await loginUser(email, password, request, anime_db, CACHE_KV);
    if (!loginResult.success || !loginResult.session) {
      return Response.json({
        success: true,
        user: result.user,
        message: ""
      }, {
        status: 200
      });
    }
    const isProduction = !request.url.includes("localhost");
    const cookieOptions = `session=${loginResult.session.token}; HttpOnly; Path=/; Max-Age=${7 * 24 * 60 * 60}; SameSite=Strict${isProduction ? "; Secure" : ""}`;
    return Response.json({
      success: true,
      user: loginResult.user
    }, {
      headers: {
        "Set-Cookie": cookieOptions
      }
    });
  } catch (error) {
    console.error("Register error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route39 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$h
}, Symbol.toStringTag, { value: "Module" }));
async function action$g({
  request,
  context
}) {
  const env = context.cloudflare.env;
  const CACHE_KV = env?.CACHE_KV;
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  try {
    const formData = await request.formData();
    const email = formData.get("email");
    if (!email || !email.includes("@")) {
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 400
      });
    }
    const result = await sendVerificationCode(
      email,
      request,
      CACHE_KV,
      true
      //  MailChannels
    );
    if (!result.success) {
      return Response.json(result, {
        status: 400
      });
    }
    return Response.json({
      success: true,
      message: ""
    });
  } catch (error) {
    console.error("Send code error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route40 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$g
}, Symbol.toStringTag, { value: "Module" }));
async function loader$c({
  request,
  context
}) {
  const env = context.cloudflare.env;
  const anime_db = env?.anime_db;
  try {
    if (!anime_db) {
      return Response.json({
        user: null
      }, {
        status: 401
      });
    }
    const token = getSessionToken(request);
    const result = await verifySession$1(token, anime_db);
    if (!result.valid || !result.user) {
      return Response.json({
        user: null
      }, {
        status: 401
      });
    }
    return Response.json({
      user: result.user
    });
  } catch (error) {
    console.error("Get user error:", error);
    return Response.json({
      user: null
    }, {
      status: 500
    });
  }
}
const route41 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$c
}, Symbol.toStringTag, { value: "Module" }));
async function loader$b({
  params,
  context
}) {
  const env = context.cloudflare.env;
  const {
    IMAGES_BUCKET
  } = env;
  if (!IMAGES_BUCKET) {
    console.error("CRITICAL: R2 Bucket 'IMAGES_BUCKET' is not bound or configured.");
    return new Response("Service Unavailable: R2 bucket not configured", {
      status: 503
    });
  }
  const key = params["*"] || "";
  if (!key) {
    return new Response("Bad Request: File path required", {
      status: 400
    });
  }
  try {
    const object = await IMAGES_BUCKET.get(key);
    if (!object) {
      console.warn(`Image not found in R2: ${key}`);
      return new Response("File not found", {
        status: 404
      });
    }
    const headers = new Headers();
    object.writeHttpMetadata(headers);
    headers.set("etag", object.httpEtag);
    headers.set("Cache-Control", "public, max-age=31536000, immutable");
    return new Response(object.body, {
      headers
    });
  } catch (error) {
    console.error(`R2 fetch error for key '${key}':`, error);
    return new Response("Internal Server Error: Failed to fetch file", {
      status: 500
    });
  }
}
const route42 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$b
}, Symbol.toStringTag, { value: "Module" }));
function getSecurityHeaders() {
  return {
    "X-Frame-Options": "DENY",
    "X-Content-Type-Options": "nosniff",
    "X-XSS-Protection": "1; mode=block",
    "Referrer-Policy": "strict-origin-when-cross-origin",
    "Content-Security-Policy": "default-src 'self'; script-src 'self' 'unsafe-inline' https://challenges.cloudflare.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.jsdelivr.net; img-src 'self' data: blob: https:; media-src 'self' https: data: blob:; font-src 'self' data: https://fonts.gstatic.com; connect-src 'self' https://api.i-meto.com https://cdn.jsdelivr.net; frame-src https://challenges.cloudflare.com;"
  };
}
function addSecurityHeaders(response) {
  const headers = getSecurityHeaders();
  Object.entries(headers).forEach(([key, value]) => {
    if (value) {
      response.headers.set(key, value);
    }
  });
  return response;
}
function jsonWithSecurity(data, init) {
  const response = Response.json(data, init);
  return addSecurityHeaders(response);
}
function sanitizeComment(content) {
  if (!content) return "";
  return content.trim().replace(/<[^>]*>/g, "").replace(/javascript:/gi, "").replace(/on\w+=/gi, "").slice(0, 2e3);
}
function isSpamComment(content) {
  if (!content) return false;
  const spamPatterns = [
    // 
    /|||/i,
    /|/i,
    /|QQ|/i,
    /|/i,
    /||/i,
    // 
    /https?:\/\/[^\s]+\.(xyz|top|cc|tk|ml|ga|cf)/i,
    // 
    /(.)\1{10,}/
  ];
  return spamPatterns.some((pattern2) => pattern2.test(content));
}
async function action$f({
  request,
  context
}) {
  const sessionId = getSessionId(request);
  if (!sessionId) {
    return jsonWithSecurity({
      error: "Unauthorized"
    }, {
      status: 401
    });
  }
  const env = context.cloudflare.env;
  const {
    r2_bucket
  } = env;
  if (!r2_bucket) {
    console.error("R2 bucket not bound");
    return jsonWithSecurity({
      error: "Storage service unavailable"
    }, {
      status: 503
    });
  }
  try {
    const formData = await request.formData();
    const file = formData.get("file");
    if (!file) {
      return jsonWithSecurity({
        error: "No file provided"
      }, {
        status: 400
      });
    }
    if (!file.type.startsWith("image/")) {
      return jsonWithSecurity({
        error: "Only images are allowed"
      }, {
        status: 400
      });
    }
    if (file.size > 5 * 1024 * 1024) {
      return jsonWithSecurity({
        error: "Image size too large (max 5MB)"
      }, {
        status: 400
      });
    }
    const arrayBuffer = await file.arrayBuffer();
    const header = new Uint8Array(arrayBuffer.slice(0, 4));
    const hex2 = Array.from(header).map((b2) => b2.toString(16).padStart(2, "0")).join("");
    const isImage2 = hex2.startsWith("ffd8ff") || hex2.startsWith("89504e47") || hex2.startsWith("47494638") || hex2.startsWith("52494646");
    if (!isImage2) {
      return jsonWithSecurity({
        error: "Invalid image format"
      }, {
        status: 400
      });
    }
    const now2 = /* @__PURE__ */ new Date();
    const year = now2.getFullYear();
    const month = String(now2.getMonth() + 1).padStart(2, "0");
    const timestamp = Date.now();
    const random = Math.random().toString(36).substring(2, 8);
    const ext = file.name.split(".").pop() || "jpg";
    const key = `uploads/${year}/${month}/${timestamp}-${random}.${ext}`;
    await r2_bucket.put(key, file.stream(), {
      httpMetadata: {
        contentType: file.type
      }
    });
    const publicDomain = env.PUBLIC_R2_DOMAIN || "";
    const url = publicDomain ? `https://${publicDomain}/${key}` : `/r2/${key}`;
    return jsonWithSecurity({
      success: true,
      url,
      key
    });
  } catch (error) {
    console.error("Upload failed:", error);
    return jsonWithSecurity({
      error: "Upload failed"
    }, {
      status: 500
    });
  }
}
const route43 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$f
}, Symbol.toStringTag, { value: "Module" }));
async function action$e({
  request,
  context
}) {
  const env = context.cloudflare.env;
  const {
    anime_db
  } = env;
  const formData = await request.formData();
  const content = formData.get("content");
  const articleId = formData.get("article_id");
  const author = formData.get("author");
  const turnstileToken = formData.get("cf-turnstile-response");
  if (!turnstileToken) {
    return Response.json({
      error: ""
    }, {
      status: 400
    });
  }
  const turnstileSecret = env.TURNSTILE_SECRET;
  if (turnstileSecret) {
    try {
      const verifyResponse = await fetch("https://challenges.cloudflare.com/turnstile/v0/siteverify", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          secret: turnstileSecret,
          response: turnstileToken
        })
      });
      if (!verifyResponse.ok) {
        return jsonWithSecurity({
          error: ""
        }, {
          status: 500
        });
      }
      const verifyData = await verifyResponse.json();
      if (!verifyData.success) {
        return jsonWithSecurity({
          error: ""
        }, {
          status: 400
        });
      }
    } catch (error) {
      console.error("Turnstile verification error:", error);
      return jsonWithSecurity({
        error: ""
      }, {
        status: 500
      });
    }
  } else {
    console.error("TURNSTILE_SECRET is missing");
    return jsonWithSecurity({
      error: " (Turnstile)"
    }, {
      status: 500
    });
  }
  const cleanedContent = sanitizeComment(content);
  if (!cleanedContent || cleanedContent.length < 3) {
    return Response.json({
      error: ""
    }, {
      status: 400
    });
  }
  if (isSpamComment(cleanedContent)) {
    try {
      await anime_db.prepare(`INSERT INTO comments (article_id, author, content, is_danmaku, status, is_spam)
           VALUES (?, ?, ?, ?, ?, ?)`).bind(articleId, author || "", cleanedContent, false, "pending", true).run();
    } catch (error) {
      console.error("Failed to save spam comment:", error);
    }
    return Response.json({
      success: true,
      message: ""
    });
  }
  try {
    await anime_db.prepare(`INSERT INTO comments (article_id, author, content, is_danmaku, status, is_spam)
         VALUES (?, ?, ?, ?, ?, ?)`).bind(articleId, author || "", cleanedContent, false, "approved", false).run();
    return jsonWithSecurity({
      success: true,
      message: ""
    });
  } catch (error) {
    console.error("Failed to save comment:", error);
    return jsonWithSecurity({
      error: ""
    }, {
      status: 500
    });
  }
}
const route44 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$e
}, Symbol.toStringTag, { value: "Module" }));
async function action$d({
  request,
  context
}) {
  const {
    requireAdmin: requireAdmin2
  } = await Promise.resolve().then(() => auth);
  const {
    anime_db
  } = context.cloudflare.env;
  const session = await requireAdmin2(request, anime_db);
  if (!session) {
    return jsonWithSecurity({
      error: "Unauthorized: Admin access required"
    }, {
      status: 403
    });
  }
  const formData = await request.formData();
  const env = context.cloudflare.env;
  const {
    validateCSRFToken
  } = await import("./csrf.server-CJK6G2Bt.js");
  const csrfToken = formData.get("_csrf");
  const secret = env.CSRF_SECRET || env.PAYMENT_SECRET || "default-secret";
  const csrfResult = await validateCSRFToken(csrfToken, session.sessionId, env.CACHE_KV, secret);
  if (!csrfResult.valid) {
    return jsonWithSecurity({
      error: "CSRF Validation Failed: " + csrfResult.error
    }, {
      status: 403
    });
  }
  const intent = formData.get("intent");
  const commentId = formData.get("commentId");
  if (!commentId) {
    return jsonWithSecurity({
      error: "Missing comment ID"
    }, {
      status: 400
    });
  }
  try {
    if (intent === "approve") {
      await anime_db.prepare("UPDATE comments SET status = 'approved' WHERE id = ?").bind(commentId).run();
      return jsonWithSecurity({
        success: true,
        message: ""
      });
    } else if (intent === "delete") {
      await anime_db.prepare("DELETE FROM comments WHERE id = ?").bind(commentId).run();
      return jsonWithSecurity({
        success: true,
        message: ""
      });
    }
    return jsonWithSecurity({
      error: "Invalid intent"
    }, {
      status: 400
    });
  } catch (error) {
    console.error("Admin comment action failed:", error);
    return jsonWithSecurity({
      error: "Operation failed"
    }, {
      status: 500
    });
  }
}
const route45 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$d
}, Symbol.toStringTag, { value: "Module" }));
const ORDER_STATE_MACHINE = {
  pending: ["paid", "failed", "cancelled", "expired"],
  paid: ["refunded"],
  failed: ["pending"],
  // 
  cancelled: [],
  expired: [],
  refunded: []
};
function canTransition(from, to) {
  return ORDER_STATE_MACHINE[from]?.includes(to) ?? false;
}
async function action$c({
  request,
  context
}) {
  const {
    getOrder: getOrder2,
    updateOrderStatus: updateOrderStatus2,
    acquirePaymentLock: acquirePaymentLock2,
    releasePaymentLock: releasePaymentLock2,
    getOrderByTradeNo: getOrderByTradeNo2
  } = await Promise.resolve().then(() => gateway_server);
  const {
    createSubscription: createSubscription2
  } = await Promise.resolve().then(() => subscription_server);
  const {
    addCoins: addCoins2
  } = await Promise.resolve().then(() => coins_server);
  const {
    logAudit: logAudit2
  } = await Promise.resolve().then(() => auditLog_server);
  const {
    validateAmount: validateAmount2,
    validateTimestamp: validateTimestamp2
  } = await Promise.resolve().then(() => paymentSign_server);
  const {
    verifyCallbackSignature: verifyCallbackSignature2,
    isCallbackIPAllowed: isCallbackIPAllowed2
  } = await Promise.resolve().then(() => signature_server);
  const {
    PAYMENT_CONFIG: PAYMENT_CONFIG2
  } = await Promise.resolve().then(() => index);
  const env = context.cloudflare.env;
  const {
    anime_db,
    CACHE_KV,
    PAYMENT_SECRET,
    PAYMENT_CALLBACK_IPS,
    ENVIRONMENT
  } = env;
  const isDevelopment = ENVIRONMENT !== "production";
  if (request.method !== "POST") {
    return new Response("Method not allowed", {
      status: 405
    });
  }
  const clientIP = request.headers.get("CF-Connecting-IP") || request.headers.get("X-Forwarded-For")?.split(",")[0]?.trim() || request.headers.get("X-Real-IP") || "unknown";
  if (!isCallbackIPAllowed2(clientIP, PAYMENT_CALLBACK_IPS, isDevelopment)) {
    console.error(` IP : ${clientIP}`);
    await logAudit2(anime_db, {
      action: "payment_failed",
      metadata: {
        reason: "IP ",
        ip: clientIP
      },
      riskLevel: "high"
    });
    return new Response("Forbidden", {
      status: 403
    });
  }
  try {
    const contentType = request.headers.get("content-type") || "";
    let params;
    if (contentType.includes("application/json")) {
      params = await request.json();
    } else {
      const formData = await request.formData();
      params = {
        order_no: formData.get("order_no"),
        trade_no: formData.get("trade_no"),
        amount: formData.get("amount"),
        status: formData.get("status"),
        timestamp: formData.get("timestamp"),
        sign: formData.get("sign"),
        nonce: formData.get("nonce")
      };
    }
    if (!params.order_no || !params.trade_no || !params.amount || !params.status) {
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 400
      });
    }
    if (params.timestamp && !validateTimestamp2(params.timestamp, PAYMENT_CONFIG2.timestampValidity)) {
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 400
      });
    }
    if (!params.sign) {
      console.error("");
      await logAudit2(anime_db, {
        action: "payment_failed",
        targetId: params.order_no,
        metadata: {
          reason: ""
        },
        riskLevel: "high"
      });
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 400
      });
    }
    const signatureResult = await verifyCallbackSignature2({
      order_no: params.order_no,
      trade_no: params.trade_no,
      amount: String(params.amount),
      status: params.status,
      timestamp: String(params.timestamp || ""),
      nonce: params.nonce || ""
    }, params.sign, PAYMENT_SECRET);
    if (!signatureResult.valid) {
      console.error(`: ${params.order_no}`);
      await logAudit2(anime_db, {
        action: "payment_failed",
        targetId: params.order_no,
        metadata: {
          reason: "",
          ip: clientIP
        },
        riskLevel: "high"
      });
      return Response.json({
        success: false,
        error: signatureResult.error
      }, {
        status: 403
      });
    }
    const lockKey = `payment_lock:${params.order_no}`;
    const lockAcquired = await acquirePaymentLock2(CACHE_KV, lockKey, PAYMENT_CONFIG2.lockDuration);
    if (!lockAcquired) {
      console.warn(`: ${params.order_no}`);
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 429
      });
    }
    try {
      if (params.trade_no) {
        const existingOrder = await getOrderByTradeNo2(anime_db, params.trade_no);
        if (existingOrder && existingOrder.order_no !== params.order_no) {
          console.error(`: trade_no=${params.trade_no}, existing_order=${existingOrder.order_no}`);
          await logAudit2(anime_db, {
            action: "payment_failed",
            targetId: params.order_no,
            metadata: {
              reason: "",
              trade_no: params.trade_no,
              existing_order: existingOrder.order_no
            },
            riskLevel: "high"
          });
          return Response.json({
            success: false,
            error: ""
          }, {
            status: 400
          });
        }
      }
      const order = await getOrder2(anime_db, params.order_no);
      if (!order) {
        return Response.json({
          success: false,
          error: ""
        }, {
          status: 404
        });
      }
      const targetStatus = params.status === "success" ? "paid" : "failed";
      if (!canTransition(order.status, targetStatus)) {
        console.warn(`: ${order.order_no} ${order.status} -> ${targetStatus}`);
        if (order.status === targetStatus) {
          return Response.json({
            success: true,
            message: ""
          });
        }
        return Response.json({
          success: false,
          error: `: ${order.status}`
        }, {
          status: 400
        });
      }
      const paidAmount = typeof params.amount === "string" ? Math.round(parseFloat(params.amount) * 100) : params.amount;
      if (!validateAmount2(paidAmount, order.amount)) {
        console.error(`: paid=${paidAmount}, order=${order.amount}`);
        await logAudit2(anime_db, {
          userId: order.user_id,
          action: "payment_failed",
          targetType: "order",
          targetId: order.order_no,
          metadata: {
            paidAmount,
            orderAmount: order.amount,
            reason: ""
          },
          riskLevel: "high"
        });
        return Response.json({
          success: false,
          error: ""
        }, {
          status: 400
        });
      }
      if (params.status === "success") {
        const paidAt = Math.floor(Date.now() / 1e3);
        const {
          product_type,
          product_id,
          user_id
        } = order;
        try {
          switch (product_type) {
            case "subscription":
              const [tierId, period] = product_id.split(":");
              await createSubscription2(anime_db, {
                userId: user_id,
                tierId: parseInt(tierId),
                period,
                orderId: order.order_no
              });
              break;
            case "coins":
              const coinsAmount = parseInt(product_id);
              await addCoins2(anime_db, user_id, coinsAmount, "purchase", ` ${coinsAmount}`, "order", order.order_no);
              break;
            case "shop_item":
              const itemId = parseInt(product_id);
              const itemExists = await anime_db.prepare("SELECT id FROM shop_items WHERE id = ?").bind(itemId).first();
              if (!itemExists) {
                throw new Error(`Shop item not found: ${itemId}`);
              }
              await anime_db.prepare(`
                                INSERT INTO user_purchases (user_id, item_id, transaction_id, purchased_at)
                                VALUES (?, ?, ?, unixepoch())
                            `).bind(user_id, itemId, order.order_no).run();
              console.log(`Shop item delivery successful: user=${user_id}, item=${itemId}`);
              await logAudit2(anime_db, {
                userId: user_id,
                action: "item_acquired",
                targetType: "shop_item",
                targetId: product_id,
                metadata: {
                  order_no: order.order_no,
                  trade_no: params.trade_no,
                  status: "delivered"
                }
              });
              break;
            default:
              console.warn("Unknown product type:", product_type);
          }
          await updateOrderStatus2(anime_db, params.order_no, "paid", params.trade_no, paidAt);
          await logAudit2(anime_db, {
            userId: order.user_id,
            action: "payment_success",
            targetType: "order",
            targetId: order.order_no,
            metadata: {
              amount: order.amount,
              productType: order.product_type,
              productId: order.product_id,
              tradeNo: params.trade_no
            }
          });
          return Response.json({
            success: true,
            message: ""
          });
        } catch (deliveryError) {
          console.error(":", deliveryError);
          await logAudit2(anime_db, {
            userId: order.user_id,
            action: "payment_failed",
            targetType: "order",
            targetId: order.order_no,
            metadata: {
              reason: "",
              error: String(deliveryError),
              tradeNo: params.trade_no
            },
            riskLevel: "high"
          });
          return Response.json({
            success: false,
            error: ""
          }, {
            status: 500
          });
        }
      } else {
        await updateOrderStatus2(anime_db, params.order_no, "failed");
        await logAudit2(anime_db, {
          userId: order.user_id,
          action: "payment_failed",
          targetType: "order",
          targetId: order.order_no,
          metadata: {
            reason: "",
            ip: clientIP
          }
        });
        return Response.json({
          success: true,
          message: ""
        });
      }
    } finally {
      await releasePaymentLock2(CACHE_KV, lockKey);
    }
  } catch (error) {
    console.error("Payment callback error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route46 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$c
}, Symbol.toStringTag, { value: "Module" }));
function generateOrderNo() {
  const now2 = /* @__PURE__ */ new Date();
  const datePart = now2.toISOString().replace(/[-T:Z.]/g, "").slice(0, 14);
  const randomPart = Math.random().toString(36).substring(2, 8).toUpperCase();
  return `ORD${datePart}${randomPart}`;
}
function generateNonce() {
  return crypto.randomUUID().replace(/-/g, "");
}
function validateTimestamp(timestamp, maxAgeSeconds = 300) {
  const ts = typeof timestamp === "string" ? parseInt(timestamp, 10) : timestamp;
  const now2 = Math.floor(Date.now() / 1e3);
  return Math.abs(now2 - ts) <= maxAgeSeconds;
}
function validateAmount(paidAmount, orderAmount, tolerance = 0) {
  return Math.abs(paidAmount - orderAmount) <= tolerance;
}
const paymentSign_server = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  generateNonce,
  generateOrderNo,
  validateAmount,
  validateTimestamp
}, Symbol.toStringTag, { value: "Module" }));
async function createPaymentOrder(db, params) {
  const orderNo = generateOrderNo();
  const nonce = generateNonce();
  const expiresAt = Math.floor(Date.now() / 1e3) + 30 * 60;
  try {
    const result = await execute(
      db,
      `INSERT INTO payment_orders (
        order_no, user_id, amount, currency, payment_method,
        status, product_type, product_id, product_name,
        nonce, client_ip, user_agent, expires_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,
      orderNo,
      params.userId,
      params.amount,
      "CNY",
      params.paymentMethod,
      "pending",
      params.productType,
      params.productId,
      params.productName,
      nonce,
      params.clientIp || null,
      params.userAgent || null,
      expiresAt
    );
    if (!result.success) {
      return { success: false, error: "" };
    }
    const order = await queryFirst(
      db,
      "SELECT * FROM payment_orders WHERE order_no = ?",
      orderNo
    );
    return { success: true, order };
  } catch (error) {
    console.error("Create order error:", error);
    return { success: false, error: "" };
  }
}
async function getOrder(db, orderNo) {
  return queryFirst(
    db,
    "SELECT * FROM payment_orders WHERE order_no = ?",
    orderNo
  );
}
async function updateOrderStatus(db, orderNo, status, tradeNo, paidAt) {
  try {
    const updates = ["status = ?"];
    const values = [status];
    if (tradeNo) {
      updates.push("trade_no = ?");
      values.push(tradeNo);
    }
    if (paidAt) {
      updates.push("paid_at = ?");
      values.push(paidAt);
    }
    values.push(orderNo);
    await execute(
      db,
      `UPDATE payment_orders SET ${updates.join(", ")} WHERE order_no = ?`,
      ...values
    );
    return true;
  } catch (error) {
    console.error("Update order status error:", error);
    return false;
  }
}
async function acquirePaymentLock(kv, lockKey, ttlSeconds = 30) {
  if (!kv) return true;
  try {
    const existing = await kv.get(lockKey);
    if (existing) {
      console.log(`: ${lockKey}`);
      return false;
    }
    await kv.put(lockKey, JSON.stringify({
      acquiredAt: Date.now(),
      expiresAt: Date.now() + ttlSeconds * 1e3
    }), { expirationTtl: ttlSeconds });
    return true;
  } catch (error) {
    console.error(":", error);
    return false;
  }
}
async function releasePaymentLock(kv, lockKey) {
  if (!kv) return;
  try {
    await kv.delete(lockKey);
  } catch (error) {
    console.error(":", error);
  }
}
async function getOrderByTradeNo(db, tradeNo) {
  return queryFirst(
    db,
    "SELECT * FROM payment_orders WHERE trade_no = ? AND status = ?",
    tradeNo,
    "paid"
  );
}
const gateway_server = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  acquirePaymentLock,
  createPaymentOrder,
  getOrder,
  getOrderByTradeNo,
  releasePaymentLock,
  updateOrderStatus
}, Symbol.toStringTag, { value: "Module" }));
async function logAudit(db, entry2) {
  try {
    await execute(
      db,
      `INSERT INTO audit_logs (
        user_id, action, target_type, target_id, 
        old_value, new_value, ip_address, user_agent, 
        risk_level, metadata
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,
      entry2.userId || null,
      entry2.action,
      entry2.targetType || null,
      entry2.targetId || null,
      entry2.oldValue ? JSON.stringify(entry2.oldValue) : null,
      entry2.newValue ? JSON.stringify(entry2.newValue) : null,
      entry2.ipAddress || null,
      entry2.userAgent || null,
      entry2.riskLevel || determineRiskLevel(entry2.action),
      entry2.metadata ? JSON.stringify(entry2.metadata) : null
    );
  } catch (error) {
    console.error("Audit log failed:", error);
  }
}
function determineRiskLevel(action2) {
  const highRiskActions = [
    "password_change",
    "2fa_disable",
    "payment_refund",
    "admin_action",
    "session_revoke"
  ];
  const mediumRiskActions = [
    "2fa_enable",
    "payment_success",
    "subscription_cancel",
    "settings_change"
  ];
  if (highRiskActions.includes(action2)) return "high";
  if (mediumRiskActions.includes(action2)) return "medium";
  return "low";
}
const auditLog_server = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  logAudit
}, Symbol.toStringTag, { value: "Module" }));
const SIGNATURE_EXPIRY_MS = 10 * 60 * 1e3;
async function hmacSign(message, secretKey) {
  const encoder = new TextEncoder();
  const keyData = encoder.encode(secretKey);
  const messageData = encoder.encode(message);
  const key = await crypto.subtle.importKey(
    "raw",
    keyData,
    { name: "HMAC", hash: "SHA-256" },
    false,
    ["sign"]
  );
  const signatureBuffer = await crypto.subtle.sign("HMAC", key, messageData);
  const signatureArray = Array.from(new Uint8Array(signatureBuffer));
  return signatureArray.map((b2) => b2.toString(16).padStart(2, "0")).join("");
}
async function generatePaymentSignature(orderNo, amount, userId, secretKey) {
  if (!secretKey || secretKey.includes("REPLACE_WITH")) {
    throw new Error("");
  }
  const nonce = crypto.randomUUID();
  const timestamp = Date.now();
  const message = `${orderNo}:${amount}:${userId}:${nonce}:${timestamp}`;
  const signature = await hmacSign(message, secretKey);
  return { nonce, timestamp, signature };
}
async function verifyPaymentSignature(orderNo, amount, userId, nonce, timestamp, signature, secretKey) {
  const now2 = Date.now();
  if (now2 - timestamp > SIGNATURE_EXPIRY_MS) {
    return { valid: false, error: "" };
  }
  const message = `${orderNo}:${amount}:${userId}:${nonce}:${timestamp}`;
  const expectedSignature = await hmacSign(message, secretKey);
  if (signature.length !== expectedSignature.length) {
    return { valid: false, error: "" };
  }
  let mismatch = 0;
  for (let i = 0; i < signature.length; i++) {
    mismatch |= signature.charCodeAt(i) ^ expectedSignature.charCodeAt(i);
  }
  if (mismatch !== 0) {
    return { valid: false, error: "" };
  }
  return { valid: true };
}
async function verifyCallbackSignature(params, sign, secretKey) {
  if (!secretKey || secretKey.includes("REPLACE_WITH")) {
    console.error("");
    return { valid: false, error: "" };
  }
  const sortedKeys = Object.keys(params).filter((k2) => k2 !== "sign").sort();
  const signString = sortedKeys.filter((key) => params[key] !== "" && params[key] !== void 0).map((key) => `${key}=${params[key]}`).join("&");
  const expectedSignature = await hmacSign(signString, secretKey);
  if (sign.length !== expectedSignature.length) {
    return { valid: false, error: "" };
  }
  let mismatch = 0;
  for (let i = 0; i < sign.length; i++) {
    mismatch |= sign.charCodeAt(i) ^ expectedSignature.charCodeAt(i);
  }
  if (mismatch !== 0) {
    return { valid: false, error: "" };
  }
  return { valid: true };
}
function isCallbackIPAllowed(ip, allowedIPs, isDevelopment) {
  if (isDevelopment) {
    return true;
  }
  if (!allowedIPs || allowedIPs.trim() === "") {
    console.warn(" IP ");
    return true;
  }
  const ipList = allowedIPs.split(",").map((s) => s.trim()).filter(Boolean);
  return ipList.includes(ip);
}
async function generateSecurePayUrl(baseUrl, orderNo, amount, userId, secretKey) {
  const { nonce, timestamp, signature } = await generatePaymentSignature(orderNo, amount, userId, secretKey);
  const url = new URL(baseUrl, "https://placeholder.com");
  url.searchParams.set("orderNo", orderNo);
  url.searchParams.set("nonce", nonce);
  url.searchParams.set("ts", timestamp.toString());
  url.searchParams.set("sig", signature);
  return url.pathname + url.search;
}
const signature_server = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  generatePaymentSignature,
  generateSecurePayUrl,
  isCallbackIPAllowed,
  verifyCallbackSignature,
  verifyPaymentSignature
}, Symbol.toStringTag, { value: "Module" }));
async function loader$a({
  request,
  context
}) {
  const {
    anime_db,
    PAYMENT_SECRET
  } = context.cloudflare.env;
  const url = new URL(request.url);
  const orderNo = url.searchParams.get("orderNo");
  const nonce = url.searchParams.get("nonce");
  const timestamp = url.searchParams.get("ts");
  const signature = url.searchParams.get("sig");
  if (!orderNo) {
    return new Response("", {
      status: 400
    });
  }
  const order = await getOrder(anime_db, orderNo);
  if (!order) {
    return new Response("", {
      status: 404
    });
  }
  if (nonce && timestamp && signature) {
    const verification = await verifyPaymentSignature(orderNo, order.amount, order.user_id, nonce, parseInt(timestamp), signature, PAYMENT_SECRET);
    if (!verification.valid) {
      await logAudit(anime_db, {
        userId: order.user_id,
        action: "payment_failed",
        targetType: "order",
        targetId: orderNo,
        metadata: {
          error: verification.error,
          type: "invalid_signature"
        }
      });
      return new Response(`: ${verification.error}`, {
        status: 403
      });
    }
  } else {
    console.warn(`Unsigned payment completion attempt for order ${orderNo}`);
  }
  if (order.status !== "pending") {
    return redirect("/shop?status=already_processed");
  }
  const paidAt = Math.floor(Date.now() / 1e3);
  const tradeNo = `MOCK${Date.now()}`;
  await updateOrderStatus(anime_db, orderNo, "paid", tradeNo, paidAt);
  const {
    product_type,
    product_id,
    user_id,
    amount
  } = order;
  switch (product_type) {
    case "subscription":
      const [tierId, period] = product_id.split(":");
      await createSubscription(anime_db, {
        userId: user_id,
        tierId: parseInt(tierId),
        period,
        orderId: orderNo
      });
      break;
    case "coins":
      const coinsAmount = parseInt(product_id);
      await addCoins(anime_db, user_id, coinsAmount, "purchase", orderNo, ` ${coinsAmount}`);
      break;
  }
  await logAudit(anime_db, {
    userId: user_id,
    action: "payment_success",
    targetType: "order",
    targetId: orderNo,
    metadata: {
      amount,
      productType: product_type,
      productId: product_id,
      mock: true,
      signatureVerified: !!(nonce && timestamp && signature)
    }
  });
  return redirect("/shop?status=success");
}
const route47 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$a
}, Symbol.toStringTag, { value: "Module" }));
async function loader$9({
  request,
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken(request);
  const {
    valid,
    user
  } = await verifySession$1(token, anime_db);
  if (!valid || !user) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  const [tiers, subscription] = await Promise.all([getAllTiers(anime_db), getUserSubscription(anime_db, user.id)]);
  return Response.json({
    success: true,
    tiers,
    subscription
  });
}
async function action$b({
  request,
  context
}) {
  const {
    anime_db,
    PAYMENT_SECRET
  } = context.cloudflare.env;
  const token = getSessionToken(request);
  const {
    valid,
    user
  } = await verifySession$1(token, anime_db);
  if (!valid || !user) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  const formData = await request.formData();
  const actionType = formData.get("action");
  switch (actionType) {
    case "subscribe": {
      const tierId = parseInt(formData.get("tierId"));
      const period = formData.get("period");
      const tier = await getTierById(anime_db, tierId);
      if (!tier) {
        return Response.json({
          success: false,
          error: ""
        }, {
          status: 400
        });
      }
      const priceField = `price_${period}`;
      const amount = tier[priceField];
      if (!amount) {
        return Response.json({
          success: false,
          error: ""
        }, {
          status: 400
        });
      }
      const clientIp = request.headers.get("CF-Connecting-IP") || void 0;
      const userAgent = request.headers.get("User-Agent") || void 0;
      const orderResult = await createPaymentOrder(anime_db, {
        userId: user.id,
        amount,
        productType: "subscription",
        productId: `${tierId}:${period}`,
        productName: `${tier.display_name} (${period === "monthly" ? "" : period === "quarterly" ? "" : ""})`,
        paymentMethod: "mock",
        //  Mock 
        clientIp,
        userAgent
      });
      if (!orderResult.success) {
        return Response.json({
          success: false,
          error: orderResult.error
        }, {
          status: 500
        });
      }
      await logAudit(anime_db, {
        userId: user.id,
        action: "payment_create",
        targetType: "order",
        targetId: orderResult.order.order_no,
        metadata: {
          tierId,
          period,
          amount
        }
      });
      const {
        generateSecurePayUrl: generateSecurePayUrl2
      } = await Promise.resolve().then(() => signature_server);
      const payUrl = await generateSecurePayUrl2("/api/payment/mock-complete", orderResult.order.order_no, amount, user.id, PAYMENT_SECRET);
      return Response.json({
        success: true,
        order: orderResult.order,
        payUrl
      });
    }
    case "cancel": {
      const reason = formData.get("reason");
      const result = await cancelSubscription(anime_db, user.id, reason);
      if (result.success) {
        await logAudit(anime_db, {
          userId: user.id,
          action: "subscription_cancel",
          metadata: {
            reason
          }
        });
      }
      return Response.json(result);
    }
    case "resume": {
      const result = await resumeAutoRenew(anime_db, user.id);
      if (result.success) {
        await logAudit(anime_db, {
          userId: user.id,
          action: "subscription_renew"
        });
      }
      return Response.json(result);
    }
    default:
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 400
      });
  }
}
const route48 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$b,
  loader: loader$9
}, Symbol.toStringTag, { value: "Module" }));
async function loader$8({
  request,
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken(request);
  const {
    valid,
    user
  } = await verifySession$1(token, anime_db);
  if (!valid || !user) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
  const signInRecord = await anime_db.prepare(`
            SELECT * FROM coin_transactions 
            WHERE user_id = ? AND source = 'daily_signin' 
            AND date(created_at, 'unixepoch') = ?
        `).bind(user.id, today).first();
  const streakResult = await anime_db.prepare(`
            SELECT COUNT(DISTINCT date(created_at, 'unixepoch')) as streak
            FROM coin_transactions 
            WHERE user_id = ? AND source = 'daily_signin'
            AND created_at > unixepoch('now', '-30 days')
        `).bind(user.id).first();
  const coins = await getUserCoins(anime_db, user.id);
  return Response.json({
    success: true,
    signedIn: !!signInRecord,
    streak: streakResult?.streak || 0,
    coins
  });
}
async function action$a({
  request,
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken(request);
  const {
    valid,
    user
  } = await verifySession$1(token, anime_db);
  if (!valid || !user) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
  const existingSignIn = await anime_db.prepare(`
            SELECT * FROM coin_transactions 
            WHERE user_id = ? AND source = 'daily_signin' 
            AND date(created_at, 'unixepoch') = ?
        `).bind(user.id, today).first();
  if (existingSignIn) {
    return Response.json({
      success: false,
      error: "",
      signedIn: true
    });
  }
  let baseCoins = 5;
  const subscription = await getUserSubscription(anime_db, user.id);
  if (subscription && subscription.status === "active") {
    const tier = await getTierById(anime_db, subscription.tier_id);
    if (tier) {
      try {
        const privileges2 = JSON.parse(tier.privileges || "{}");
        baseCoins = privileges2.dailySignInBonus || baseCoins;
      } catch (e) {
      }
    }
  }
  const yesterdaySignIn = await anime_db.prepare(`
            SELECT * FROM coin_transactions 
            WHERE user_id = ? AND source = 'daily_signin'
            AND date(created_at, 'unixepoch') = date('now', '-1 day')
        `).bind(user.id).first();
  let bonus = 0;
  let streak = 1;
  if (yesterdaySignIn) {
    const streakResult = await anime_db.prepare(`
                SELECT COUNT(*) as count FROM (
                    SELECT DISTINCT date(created_at, 'unixepoch') as sign_date
                    FROM coin_transactions 
                    WHERE user_id = ? AND source = 'daily_signin'
                    ORDER BY sign_date DESC
                    LIMIT 30
                )
            `).bind(user.id).first();
    streak = (streakResult?.count || 0) + 1;
    if (streak % 7 === 0) {
      bonus = Math.floor(baseCoins * 0.5);
    }
  }
  const totalCoins = baseCoins + bonus;
  await addCoins(anime_db, user.id, totalCoins, "daily_signin", `${bonus > 0 ? ` (${streak})` : ""}`);
  const newBalance = await getUserCoins(anime_db, user.id);
  const result = {
    success: true,
    coins: totalCoins,
    bonus,
    streak,
    message: bonus > 0 ? ` ${totalCoins}  ( ${bonus})` : ` ${totalCoins} `
  };
  return Response.json({
    ...result,
    balance: newBalance
  });
}
const route49 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$a,
  loader: loader$8
}, Symbol.toStringTag, { value: "Module" }));
async function action$9({
  request,
  context
}) {
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken(request);
  const {
    valid,
    user
  } = await verifySession$1(token, anime_db);
  if (!valid || !user) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  const formData = await request.formData();
  const itemId = parseInt(formData.get("itemId"));
  if (!itemId) {
    return Response.json({
      success: false,
      error: "ID"
    }, {
      status: 400
    });
  }
  const item = await anime_db.prepare("SELECT * FROM shop_items WHERE id = ? AND is_active = 1").bind(itemId).first();
  if (!item) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 404
    });
  }
  if (item.stock !== -1 && item.stock <= 0) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 400
    });
  }
  const existingPurchase = await anime_db.prepare("SELECT * FROM user_purchases WHERE user_id = ? AND item_id = ?").bind(user.id, itemId).first();
  if (existingPurchase && ["avatar_frame", "badge", "theme"].includes(item.type)) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 400
    });
  }
  const currentCoins = await getUserCoins(anime_db, user.id);
  if (currentCoins < item.price_coins) {
    return Response.json({
      success: false,
      error: ` ${item.price_coins} ${currentCoins}`
    }, {
      status: 400
    });
  }
  const statements = [];
  statements.push(anime_db.prepare("UPDATE users SET coins = coins - ? WHERE id = ? AND coins >= ?").bind(item.price_coins, user.id, item.price_coins));
  if (item.stock !== -1) {
    statements.push(anime_db.prepare("UPDATE shop_items SET stock = stock - 1, sold_count = sold_count + 1 WHERE id = ? AND stock > 0").bind(itemId));
  } else {
    statements.push(anime_db.prepare("UPDATE shop_items SET sold_count = sold_count + 1 WHERE id = ?").bind(itemId));
  }
  statements.push(anime_db.prepare(`
            INSERT INTO user_purchases (user_id, item_id, transaction_id, purchased_at)
            VALUES (?, ?, ?, unixepoch())
        `).bind(user.id, itemId, null));
  statements.push(anime_db.prepare(`
            INSERT INTO coin_transactions (
                user_id, amount, type, source,
                balance_before, balance_after,
                description, created_at
            ) VALUES (?, ?, 'spend', 'shop', ?, ?, ?, unixepoch())
        `).bind(user.id, -item.price_coins, currentCoins, currentCoins - item.price_coins, `: ${item.name}`));
  try {
    const results = await anime_db.batch(statements);
    const coinUpdateResult = results[0];
    if (!coinUpdateResult.meta.changes) {
      return Response.json({
        success: false,
        error: ""
      }, {
        status: 409
      });
    }
    if (item.stock !== -1) {
      const stockUpdateResult = results[1];
      if (!stockUpdateResult.meta.changes) {
      }
    }
    await logAudit(anime_db, {
      userId: user.id,
      action: "shop_purchase",
      targetType: "shop_item",
      targetId: String(itemId),
      metadata: {
        itemName: item.name,
        price: item.price_coins
      }
    });
    const newBalance = await getUserCoins(anime_db, user.id);
    return Response.json({
      success: true,
      message: ` ${item.name}`,
      item: {
        id: item.id,
        name: item.name,
        type: item.type
      },
      balance: newBalance
    });
  } catch (error) {
    console.error("Purchase batch error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route50 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$9
}, Symbol.toStringTag, { value: "Module" }));
function getSourceName(source) {
  const names = {
    "daily_signin": "",
    "daily_login": "",
    "purchase": "",
    "shop": "",
    "activity": "",
    "referral": "",
    "achievement": "",
    "admin": "",
    "refund": ""
  };
  return names[source] || source;
}
function getTypeName(type) {
  const names = {
    "earn": "",
    "spend": "",
    "gift": "",
    "refund": "",
    "expire": ""
  };
  return names[type] || type;
}
async function loader$7({
  request,
  context
}) {
  const {
    getSessionToken: getSessionToken2,
    verifySession: verifySession2
  } = await Promise.resolve().then(() => auth_server);
  const {
    getUserCoins: getUserCoins2,
    getCoinTransactionHistory: getCoinTransactionHistory2
  } = await Promise.resolve().then(() => coins_server);
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken2(request);
  const {
    valid,
    user
  } = await verifySession2(token, anime_db);
  if (!valid || !user) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  const url = new URL(request.url);
  const limit = parseInt(url.searchParams.get("limit") || "20");
  const offset = parseInt(url.searchParams.get("offset") || "0");
  const balance = await getUserCoins2(anime_db, user.id);
  const transactions = await getCoinTransactionHistory2(anime_db, user.id, limit, offset);
  const formattedTransactions = transactions.map((tx) => ({
    id: tx.id,
    type: tx.type,
    amount: tx.amount,
    source: tx.source,
    description: tx.description,
    balanceAfter: tx.balance_after,
    createdAt: tx.created_at,
    sourceName: getSourceName(tx.source),
    typeName: getTypeName(tx.type)
  }));
  return Response.json({
    success: true,
    balance,
    transactions: formattedTransactions
  });
}
const route51 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$7
}, Symbol.toStringTag, { value: "Module" }));
async function loader$6({
  request,
  context
}) {
  const {
    getSessionToken: getSessionToken2,
    verifySession: verifySession2
  } = await Promise.resolve().then(() => auth_server);
  const {
    getUserCoins: getUserCoins2
  } = await Promise.resolve().then(() => coins_server);
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken2(request);
  const {
    valid,
    user
  } = await verifySession2(token, anime_db);
  let balance = 0;
  if (valid && user) {
    balance = await getUserCoins2(anime_db, user.id);
  }
  return Response.json({
    success: true,
    packages: RECHARGE_PACKAGES,
    balance,
    isLoggedIn: valid
  });
}
async function action$8({
  request,
  context
}) {
  const {
    getSessionToken: getSessionToken2,
    verifySession: verifySession2
  } = await Promise.resolve().then(() => auth_server);
  const {
    createPaymentOrder: createPaymentOrder2
  } = await Promise.resolve().then(() => gateway_server);
  const {
    logAudit: logAudit2
  } = await Promise.resolve().then(() => auditLog_server);
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken2(request);
  const {
    valid,
    user
  } = await verifySession2(token, anime_db);
  if (!valid || !user) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  const formData = await request.formData();
  const packageId = formData.get("packageId");
  const pkg = RECHARGE_PACKAGES.find((p) => p.id === packageId);
  if (!pkg) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 400
    });
  }
  const clientIp = request.headers.get("CF-Connecting-IP") || void 0;
  const userAgent = request.headers.get("User-Agent") || void 0;
  const totalCoins = pkg.coins + pkg.bonus;
  const orderResult = await createPaymentOrder2(anime_db, {
    userId: user.id,
    amount: pkg.price,
    productType: "coins",
    productId: String(totalCoins),
    productName: ` ${totalCoins} (${pkg.bonus})`,
    paymentMethod: "mock",
    clientIp,
    userAgent
  });
  if (!orderResult.success) {
    return Response.json({
      success: false,
      error: orderResult.error
    }, {
      status: 500
    });
  }
  await logAudit2(anime_db, {
    userId: user.id,
    action: "payment_create",
    targetType: "order",
    targetId: orderResult.order.order_no,
    metadata: {
      packageId,
      coins: totalCoins,
      price: pkg.price
    }
  });
  const secretKey = context.cloudflare.env.PAYMENT_SECRET_KEY || "dev-secret-key";
  const payUrl = await generateSecurePayUrl("/api/payment/mock-complete", orderResult.order.order_no, pkg.price, user.id, secretKey);
  return Response.json({
    success: true,
    order: orderResult.order,
    package: pkg,
    totalCoins,
    payUrl
  });
}
const route52 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$8,
  loader: loader$6
}, Symbol.toStringTag, { value: "Module" }));
async function loader$5({
  request,
  context
}) {
  const {
    getSessionToken: getSessionToken2,
    verifySession: verifySession2
  } = await Promise.resolve().then(() => auth_server);
  const {
    anime_db
  } = context.cloudflare.env;
  const token = getSessionToken2(request);
  const {
    valid,
    user
  } = await verifySession2(token, anime_db);
  if (!valid || !user) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  const purchases = await anime_db.prepare(`
            SELECT 
                up.id,
                up.item_id,
                up.purchased_at,
                si.name as item_name,
                si.type as item_type,
                si.image_url as item_image
            FROM user_purchases up
            JOIN shop_items si ON up.item_id = si.id
            WHERE up.user_id = ?
            ORDER BY up.purchased_at DESC
        `).bind(user.id).all();
  const items = purchases.results || [];
  const grouped = {
    avatar_frame: items.filter((i) => i.item_type === "avatar_frame"),
    theme: items.filter((i) => i.item_type === "theme"),
    emoji: items.filter((i) => i.item_type === "emoji"),
    badge: items.filter((i) => i.item_type === "badge"),
    effect: items.filter((i) => i.item_type === "effect"),
    other: items.filter((i) => !["avatar_frame", "theme", "emoji", "badge", "effect"].includes(i.item_type || ""))
  };
  return Response.json({
    success: true,
    purchases: items,
    grouped,
    count: items.length
  });
}
const route53 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$5
}, Symbol.toStringTag, { value: "Module" }));
function buildMessages(prompt) {
  return [
    { role: "system", content: prompt.system },
    { role: "user", content: prompt.user }
  ];
}
const AI_PROMPTS = {
  /**  */
  summary: (content) => ({
    system: `

1.  100-200 
2. 
3. 
4. """"`,
    user: `

${content}`
  }),
  /**  */
  search: (query, articlesContext) => ({
    system: `
 JSON [{"slug": "slug", "relevance": ""}]
 []`,
    user: `${query}


${articlesContext}`
  }),
  /**  -  */
  writingContinue: (content) => ({
    system: `

1. 
2. 
3. `,
    user: ` 200-300 

${content}`
  }),
  /**  -  */
  writingPolish: (content) => ({
    system: `

1. 
2. 
3. `,
    user: `

${content}`
  }),
  /**  */
  chat: (systemContext) => ({
    system: `A.T. Field AI 




${systemContext}


1. 
2. 
3. 
4.  150 `
  }),
  /**  */
  moderate: (content) => ({
    system: `
1. 
2. 
3. 
4. 

 JSON 
{
  "safe": true/false,
  "reason": "",
  "category": "spam/hate/political/nsfw/safe"
}`,
    user: `${content}`
  }),
  /** SEO  */
  seo: (title, content) => ({
    system: ` SEO  SEO 
 JSON 
{
  "metaTitle": "SEO 50-60",
  "metaDescription": "120-160",
  "keywords": ["1", "2", ...]
}`,
    user: `${title}

${content.slice(0, 1e3)}`
  }),
  /**  */
  tags: (title, content) => ({
    system: `

1.  3-6 
2. 2-4 
3.  JSON ["1", "2", ...]`,
    user: `${title}

${content.slice(0, 2e3)}`
  }),
  /**  */
  recommend: (currentArticle, candidateArticles) => ({
    system: ` 3-5 
 JSON 
[{"slug": "slug", "reason": "15"}]`,
    user: `${currentArticle}

${candidateArticles}`
  })
};
function safeParseJSON(content, fallback) {
  try {
    const jsonMatch = content.match(/\[[\s\S]*\]|\{[\s\S]*\}/);
    if (jsonMatch) {
      return JSON.parse(jsonMatch[0]);
    }
    return JSON.parse(content);
  } catch {
    console.error("Failed to parse AI JSON response:", content);
    return fallback;
  }
}
const DEEPSEEK_API_URL = "https://api.deepseek.com/v1/chat/completions";
const DEFAULT_MODEL = "deepseek-chat";
const MAX_RETRIES = 3;
const RETRY_DELAY_MS = 1e3;
const DEFAULT_DAILY_LIMITS = AI_DAILY_LIMITS;
async function callDeepseek(apiKey, options) {
  const {
    model = DEFAULT_MODEL,
    messages,
    temperature = 0.7,
    maxTokens = 2e3,
    stream = false,
    aiBinding
  } = options;
  let lastError = null;
  for (let attempt = 1; attempt <= MAX_RETRIES; attempt++) {
    try {
      const response = await fetch(DEEPSEEK_API_URL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${apiKey}`
        },
        body: JSON.stringify({
          model,
          messages,
          temperature,
          max_tokens: maxTokens,
          stream,
          //  jsonMode  response_format
          ...options.jsonMode ? { response_format: { type: "json_object" } } : {}
        })
      });
      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        throw new Error(
          `Deepseek API error: ${response.status} - ${errorData.error?.message || response.statusText}`
        );
      }
      const data = await response.json();
      const content = data.choices?.[0]?.message?.content || "";
      const tokensUsed = data.usage?.total_tokens || 0;
      return {
        success: true,
        content,
        tokensUsed,
        cached: false
      };
    } catch (error) {
      lastError = error;
      console.error(`Deepseek API attempt ${attempt} failed:`, error);
      if (attempt < MAX_RETRIES) {
        await sleep(RETRY_DELAY_MS * attempt);
      }
    }
  }
  if (aiBinding) {
    try {
      console.warn("Deepseek API exhausted, falling back to Workers AI...");
      const { generateText } = await import("./workers-ai.server-Do1NCQw_.js");
      const fallbackModel = "@cf/meta/llama-3-8b-instruct";
      const fallbackContent = await generateText(
        aiBinding,
        messages,
        fallbackModel
      );
      return {
        success: true,
        content: fallbackContent,
        tokensUsed: 0,
        // Workers AI 0
        cached: false
      };
    } catch (fallbackError) {
      console.error("Workers AI Fallback failed:", fallbackError);
    }
  }
  return {
    success: false,
    error: lastError?.message || " AI  (Fallback also failed)"
  };
}
async function callDeepseekWithCache(apiKey, kv, cacheKey, options, cacheTTL = 3600) {
  if (kv) {
    try {
      const cached = await kv.get(cacheKey);
      if (cached) {
        return {
          success: true,
          content: cached,
          tokensUsed: 0,
          cached: true
        };
      }
    } catch (error) {
      console.error("KV cache read error:", error);
    }
  }
  const result = await callDeepseek(apiKey, options);
  if (result.success && result.content && kv) {
    try {
      await kv.put(cacheKey, result.content, { expirationTtl: cacheTTL });
    } catch (error) {
      console.error("KV cache write error:", error);
    }
  }
  return result;
}
async function trackAIUsage(db, record) {
  try {
    await execute(
      db,
      `INSERT INTO ai_usage (user_id, feature, tokens_used, created_at)
       VALUES (?, ?, ?, unixepoch())`,
      record.userId || null,
      record.feature,
      record.tokensUsed
    );
  } catch (error) {
    console.error("Failed to track AI usage:", error);
  }
}
async function checkDailyLimit(db, kv, feature, customLimits) {
  const limits = customLimits || DEFAULT_DAILY_LIMITS;
  const limit = limits[feature] || 100;
  const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
  const counterKey = `ai_limit:${feature}:${today}`;
  let currentCount = 0;
  if (kv) {
    try {
      const cached = await kv.get(counterKey);
      currentCount = cached ? parseInt(cached, 10) : 0;
    } catch (error) {
      console.error("KV counter read error:", error);
    }
  }
  return {
    allowed: currentCount < limit,
    remaining: Math.max(0, limit - currentCount),
    limit
  };
}
async function incrementDailyCount(kv, feature) {
  if (!kv) return;
  const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
  const counterKey = `ai_limit:${feature}:${today}`;
  try {
    const cached = await kv.get(counterKey);
    const currentCount = cached ? parseInt(cached, 10) : 0;
    await kv.put(counterKey, String(currentCount + 1), { expirationTtl: 9e4 });
  } catch (error) {
    console.error("KV counter increment error:", error);
  }
}
function sleep(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}
const DEFAULT_AI_CONFIG = {
  enabled: true,
  features: {
    chat: true,
    summary: true,
    writing: true,
    moderate: true,
    seo: true,
    tags: true,
    search: true,
    recommend: true
  },
  chatbot: {
    name: "MAGI",
    welcomeMessage: "Need some anime recommendations?",
    placeholder: "Ask me anything..."
  },
  limits: {
    dailyTotal: 100,
    perFeature: {}
  }
};
async function getAIConfig(db) {
  try {
    const settings2 = await queryFirst(
      db,
      "SELECT config_json FROM system_settings WHERE id = 1"
    );
    if (!settings2?.config_json) {
      return DEFAULT_AI_CONFIG;
    }
    const config = JSON.parse(settings2.config_json);
    const aiConfig = config.ai || {};
    return {
      enabled: aiConfig.enabled ?? DEFAULT_AI_CONFIG.enabled,
      features: {
        ...DEFAULT_AI_CONFIG.features,
        ...aiConfig.features
      },
      limits: {
        dailyTotal: aiConfig.limits?.dailyTotal ?? DEFAULT_AI_CONFIG.limits.dailyTotal,
        perFeature: {
          ...DEFAULT_AI_CONFIG.limits.perFeature,
          ...aiConfig.limits?.perFeature
        }
      },
      chatbot: {
        ...DEFAULT_AI_CONFIG.chatbot,
        ...aiConfig.chatbot
      }
    };
  } catch (error) {
    console.error("Failed to get AI config:", error);
    return DEFAULT_AI_CONFIG;
  }
}
function getDeepseekAPIKey(env) {
  return env?.DEEPSEEK_API_KEY || null;
}
async function buildBlogContext(db) {
  try {
    const articles2 = await db.prepare(`
      SELECT title, slug, summary, category, tags
      FROM articles
      WHERE status = 'published'
      ORDER BY created_at DESC
      LIMIT 20
    `).all();
    const animes = await db.prepare(`
      SELECT title, status, rating, review
      FROM animes
      ORDER BY created_at DESC
      LIMIT 10
    `).all();
    let context = "## \n";
    for (const article of articles2.results || []) {
      context += `- ${article.title}(${article.category || ""}): ${article.summary || ""}
`;
    }
    context += "\n## \n";
    for (const anime of animes.results || []) {
      const statusMap = {
        watching: "",
        completed: "",
        dropped: "",
        plan: ""
      };
      context += `- ${anime.title}${statusMap[anime.status] || anime.status}${anime.rating ? ` :${anime.rating}/10` : ""}
`;
    }
    return context;
  } catch (error) {
    console.error("Failed to build blog context:", error);
    return "";
  }
}
async function action$7({
  request,
  context
}) {
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const env = context.cloudflare.env;
  const db = env.anime_db;
  const kv = env.CACHE_KV || null;
  const {
    requireAuth: requireAuth2
  } = await Promise.resolve().then(() => auth);
  const session = await requireAuth2(request, db);
  if (!session) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  try {
    const config = await getAIConfig(db);
    if (!config.enabled || !config.features.chat) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const apiKey = getDeepseekAPIKey(env);
    if (!apiKey) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const limitCheck = await checkDailyLimit(db, kv, "chat");
    if (!limitCheck.allowed) {
      return Response.json({
        success: false,
        error: " AI ",
        remaining: 0
      });
    }
    const body = await request.json();
    const {
      message,
      history = []
    } = body;
    if (!message || typeof message !== "string" || message.trim().length === 0) {
      return Response.json({
        success: false,
        error: ""
      });
    }
    if (message.length > 500) {
      return Response.json({
        success: false,
        error: "500"
      });
    }
    const blogContext = await buildBlogContext(db);
    const systemPrompt = AI_PROMPTS.chat(blogContext);
    const recentHistory = history.slice(-6);
    const messages = [{
      role: "system",
      content: systemPrompt.system
    }, ...recentHistory, {
      role: "user",
      content: message
    }];
    const result = await callDeepseek(apiKey, {
      messages,
      temperature: 0.8,
      maxTokens: 500
    });
    if (!result.success) {
      return Response.json({
        success: false,
        error: result.error || "AI "
      });
    }
    await trackAIUsage(db, {
      feature: "chat",
      tokensUsed: result.tokensUsed || 0
    });
    await incrementDailyCount(kv, "chat");
    return Response.json({
      success: true,
      reply: result.content,
      remaining: limitCheck.remaining - 1
    });
  } catch (error) {
    console.error("AI Chat error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
async function loader$4({
  context
}) {
  const env = context.cloudflare.env;
  const db = env.anime_db;
  const kv = env.CACHE_KV || null;
  try {
    const config = await getAIConfig(db);
    const limitCheck = await checkDailyLimit(db, kv, "chat");
    return Response.json({
      enabled: config.enabled && config.features.chat,
      chatbot: config.chatbot,
      remaining: limitCheck.remaining,
      limit: limitCheck.limit
    });
  } catch (error) {
    console.error("AI Chat config error:", error);
    return Response.json({
      enabled: false,
      error: ""
    });
  }
}
const route54 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$7,
  loader: loader$4
}, Symbol.toStringTag, { value: "Module" }));
async function action$6({
  request,
  context
}) {
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const env = context.cloudflare.env;
  const db = env.anime_db;
  const kv = env.CACHE_KV || null;
  try {
    const config = await getAIConfig(db);
    if (!config.enabled || !config.features.summary) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const apiKey = getDeepseekAPIKey(env);
    if (!apiKey) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const limitCheck = await checkDailyLimit(db, kv, "summary");
    if (!limitCheck.allowed) {
      return Response.json({
        success: false,
        error: " AI "
      });
    }
    const body = await request.json();
    const {
      content,
      title
    } = body;
    if (!content || typeof content !== "string" || content.trim().length < 50) {
      return Response.json({
        success: false,
        error: "50"
      });
    }
    const truncatedContent = content.slice(0, 5e3);
    const prompt = AI_PROMPTS.summary(truncatedContent);
    const messages = buildMessages(prompt);
    const result = await callDeepseek(apiKey, {
      messages,
      temperature: 0.7,
      maxTokens: 500,
      aiBinding: env.AI
    });
    if (!result.success) {
      return Response.json({
        success: false,
        error: result.error || "AI "
      });
    }
    await trackAIUsage(db, {
      feature: "summary",
      tokensUsed: result.tokensUsed || 0
    });
    await incrementDailyCount(kv, "summary");
    return Response.json({
      success: true,
      summary: result.content?.trim()
    });
  } catch (error) {
    console.error("AI Summary error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route55 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$6
}, Symbol.toStringTag, { value: "Module" }));
const WRITING_PROMPTS = {
  continue: AI_PROMPTS.writingContinue,
  polish: AI_PROMPTS.writingPolish,
  translate: (content, targetLang = "") => ({
    system: `${targetLang}

1. 
2. 
3. `,
    user: `

${content}`
  }),
  correct: (content) => ({
    system: `

1. 
2. 
3. `,
    user: `

${content}`
  })
};
async function action$5({
  request,
  context
}) {
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const env = context.cloudflare.env;
  const db = env.anime_db;
  const {
    requireAdmin: requireAdmin2
  } = await Promise.resolve().then(() => auth);
  const session = await requireAdmin2(request, db);
  if (!session) {
    return Response.json({
      success: false,
      error: "Unauthorized"
    }, {
      status: 401
    });
  }
  const kv = env.CACHE_KV || null;
  try {
    const config = await getAIConfig(db);
    if (!config.enabled || !config.features.writing) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const apiKey = getDeepseekAPIKey(env);
    if (!apiKey) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const limitCheck = await checkDailyLimit(db, kv, "writing");
    if (!limitCheck.allowed) {
      return Response.json({
        success: false,
        error: " AI "
      });
    }
    const body = await request.json();
    const {
      content,
      action: action2,
      targetLang
    } = body;
    if (!content || typeof content !== "string" || content.trim().length === 0) {
      return Response.json({
        success: false,
        error: ""
      });
    }
    if (!action2 || !WRITING_PROMPTS[action2]) {
      return Response.json({
        success: false,
        error: ""
      });
    }
    if (content.length > 3e3) {
      return Response.json({
        success: false,
        error: "3000"
      });
    }
    const promptFn = WRITING_PROMPTS[action2];
    const prompt = promptFn(content, targetLang);
    const messages = buildMessages(prompt);
    const result = await callDeepseek(apiKey, {
      messages,
      temperature: action2 === "correct" ? 0.3 : 0.7,
      maxTokens: 2e3
    });
    if (!result.success) {
      return Response.json({
        success: false,
        error: result.error || "AI "
      });
    }
    await trackAIUsage(db, {
      feature: "writing",
      tokensUsed: result.tokensUsed || 0
    });
    await incrementDailyCount(kv, "writing");
    return Response.json({
      success: true,
      result: result.content?.trim()
    });
  } catch (error) {
    console.error("AI Writing error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route56 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$5
}, Symbol.toStringTag, { value: "Module" }));
async function action$4({
  request,
  context
}) {
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const env = context.cloudflare.env;
  const db = env.anime_db;
  const kv = env.CACHE_KV || null;
  try {
    const config = await getAIConfig(db);
    if (!config.enabled || !config.features.moderate) {
      return Response.json({
        success: true,
        result: {
          safe: true,
          category: "safe"
        }
      });
    }
    const apiKey = getDeepseekAPIKey(env);
    if (!apiKey) {
      return Response.json({
        success: true,
        result: {
          safe: true,
          category: "safe"
        }
      });
    }
    const limitCheck = await checkDailyLimit(db, kv, "moderate");
    if (!limitCheck.allowed) {
      return Response.json({
        success: true,
        result: {
          safe: true,
          category: "safe"
        }
      });
    }
    const body = await request.json();
    const {
      content,
      type = "comment"
    } = body;
    if (!content || typeof content !== "string" || content.trim().length === 0) {
      return Response.json({
        success: false,
        error: ""
      });
    }
    if (content.trim().length < 5) {
      return Response.json({
        success: true,
        result: {
          safe: true,
          category: "safe"
        }
      });
    }
    const prompt = AI_PROMPTS.moderate(content);
    const messages = buildMessages(prompt);
    const result = await callDeepseek(apiKey, {
      messages,
      temperature: 0.1,
      // 
      maxTokens: 200,
      aiBinding: env.AI,
      jsonMode: true
    });
    if (!result.success || !result.content) {
      return Response.json({
        success: true,
        result: {
          safe: true,
          category: "safe"
        }
      });
    }
    const moderationResult = safeParseJSON(result.content, {
      safe: true,
      category: "safe"
    });
    await trackAIUsage(db, {
      feature: "moderate",
      tokensUsed: result.tokensUsed || 0
    });
    await incrementDailyCount(kv, "moderate");
    return Response.json({
      success: true,
      result: moderationResult
    });
  } catch (error) {
    console.error("AI Moderate error:", error);
    return Response.json({
      success: true,
      result: {
        safe: true,
        category: "safe"
      }
    });
  }
}
const route57 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$4
}, Symbol.toStringTag, { value: "Module" }));
async function action$3({
  request,
  context
}) {
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const env = context.cloudflare.env;
  const db = env.anime_db;
  const kv = env.CACHE_KV || null;
  try {
    const config = await getAIConfig(db);
    if (!config.enabled || !config.features.seo) {
      return Response.json({
        success: false,
        error: "AI SEO "
      });
    }
    const apiKey = getDeepseekAPIKey(env);
    if (!apiKey) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const limitCheck = await checkDailyLimit(db, kv, "seo");
    if (!limitCheck.allowed) {
      return Response.json({
        success: false,
        error: " AI SEO "
      });
    }
    const body = await request.json();
    const {
      title,
      content
    } = body;
    if (!title || !content) {
      return Response.json({
        success: false,
        error: ""
      });
    }
    const prompt = AI_PROMPTS.seo(title, content);
    const messages = buildMessages(prompt);
    const result = await callDeepseek(apiKey, {
      messages,
      temperature: 0.5,
      maxTokens: 500,
      aiBinding: env.AI,
      jsonMode: true
    });
    if (!result.success || !result.content) {
      return Response.json({
        success: false,
        error: result.error || "AI "
      });
    }
    const seoResult = safeParseJSON(result.content, {
      metaTitle: title,
      metaDescription: content.slice(0, 150),
      keywords: []
    });
    await trackAIUsage(db, {
      feature: "seo",
      tokensUsed: result.tokensUsed || 0
    });
    await incrementDailyCount(kv, "seo");
    return Response.json({
      success: true,
      result: seoResult
    });
  } catch (error) {
    console.error("AI SEO error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route58 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$3
}, Symbol.toStringTag, { value: "Module" }));
async function action$2({
  request,
  context
}) {
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const env = context.cloudflare.env;
  const db = env.anime_db;
  const kv = env.CACHE_KV || null;
  try {
    const config = await getAIConfig(db);
    if (!config.enabled || !config.features.tags) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const apiKey = getDeepseekAPIKey(env);
    if (!apiKey) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const limitCheck = await checkDailyLimit(db, kv, "tags");
    if (!limitCheck.allowed) {
      return Response.json({
        success: false,
        error: " AI "
      });
    }
    const body = await request.json();
    const {
      title,
      content
    } = body;
    if (!title || !content) {
      return Response.json({
        success: false,
        error: ""
      });
    }
    const prompt = AI_PROMPTS.tags(title, content);
    const messages = buildMessages(prompt);
    const result = await callDeepseek(apiKey, {
      messages,
      temperature: 0.6,
      maxTokens: 200,
      aiBinding: env.AI,
      jsonMode: true
    });
    if (!result.success || !result.content) {
      return Response.json({
        success: false,
        error: result.error || "AI "
      });
    }
    const tags = safeParseJSON(result.content, []);
    await trackAIUsage(db, {
      feature: "tags",
      tokensUsed: result.tokensUsed || 0
    });
    await incrementDailyCount(kv, "tags");
    return Response.json({
      success: true,
      tags: tags.slice(0, 6)
      // 6
    });
  } catch (error) {
    console.error("AI Tags error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route59 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$2
}, Symbol.toStringTag, { value: "Module" }));
async function action$1({
  request,
  context
}) {
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const env = context.cloudflare.env;
  const db = env.anime_db;
  const kv = env.CACHE_KV || null;
  const {
    requireAuth: requireAuth2
  } = await Promise.resolve().then(() => auth);
  const session = await requireAuth2(request, db);
  if (!session) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  try {
    const config = await getAIConfig(db);
    if (!config.enabled || !config.features.search) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const apiKey = getDeepseekAPIKey(env);
    if (!apiKey) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const limitCheck = await checkDailyLimit(db, kv, "search");
    if (!limitCheck.allowed) {
      return Response.json({
        success: false,
        error: " AI "
      });
    }
    const body = await request.json();
    const {
      query
    } = body;
    if (!query || typeof query !== "string" || query.trim().length < 2) {
      return Response.json({
        success: false,
        error: ""
      });
    }
    const articles2 = await queryAll(db, `SELECT slug, title, summary, category, tags
       FROM articles
       WHERE status = 'published'
       ORDER BY created_at DESC
       LIMIT 50`);
    if (articles2.length === 0) {
      return Response.json({
        success: true,
        results: []
      });
    }
    const articlesContext = articles2.map((a, i) => `${i + 1}. [${a.slug}] ${a.title} - ${a.summary || ""} (${a.category || ""})`).join("\n");
    const prompt = AI_PROMPTS.search(query, articlesContext);
    const messages = buildMessages(prompt);
    const result = await callDeepseek(apiKey, {
      messages,
      temperature: 0.3,
      maxTokens: 500,
      aiBinding: env.AI,
      jsonMode: true
    });
    if (!result.success || !result.content) {
      return Response.json({
        success: false,
        error: result.error || "AI "
      });
    }
    const searchResults = safeParseJSON(result.content, []);
    await trackAIUsage(db, {
      feature: "search",
      tokensUsed: result.tokensUsed || 0
    });
    await incrementDailyCount(kv, "search");
    return Response.json({
      success: true,
      results: searchResults.slice(0, 10)
      // 10
    });
  } catch (error) {
    console.error("AI Search error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route60 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$1
}, Symbol.toStringTag, { value: "Module" }));
async function action({
  request,
  context
}) {
  if (request.method !== "POST") {
    return Response.json({
      success: false,
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const env = context.cloudflare.env;
  const db = env.anime_db;
  const kv = env.CACHE_KV || null;
  const {
    requireAuth: requireAuth2
  } = await Promise.resolve().then(() => auth);
  const session = await requireAuth2(request, db);
  if (!session) {
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 401
    });
  }
  try {
    const config = await getAIConfig(db);
    if (!config.enabled || !config.features.recommend) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const apiKey = getDeepseekAPIKey(env);
    if (!apiKey) {
      return Response.json({
        success: false,
        error: "AI "
      });
    }
    const limitCheck = await checkDailyLimit(db, kv, "recommend");
    if (!limitCheck.allowed) {
      return Response.json({
        success: false,
        error: " AI "
      });
    }
    const body = await request.json();
    const {
      articleSlug
    } = body;
    if (!articleSlug) {
      return Response.json({
        success: false,
        error: ""
      });
    }
    const currentArticle = await queryFirst(db, `SELECT slug, title, summary, category, tags
       FROM articles
       WHERE slug = ? AND status = 'published'`, articleSlug);
    if (!currentArticle) {
      return Response.json({
        success: false,
        error: ""
      });
    }
    const candidateArticles = await queryAll(db, `SELECT slug, title, summary, category, tags
       FROM articles
       WHERE status = 'published' AND slug != ?
       ORDER BY created_at DESC
       LIMIT 30`, articleSlug);
    if (candidateArticles.length === 0) {
      return Response.json({
        success: true,
        recommendations: []
      });
    }
    const currentContext = `${currentArticle.title} - ${currentArticle.summary || ""} (${currentArticle.category || ""})`;
    const candidatesContext = candidateArticles.map((a) => `[${a.slug}] ${a.title} - ${a.summary || ""} (${a.category || ""})`).join("\n");
    const prompt = AI_PROMPTS.recommend(currentContext, candidatesContext);
    const messages = buildMessages(prompt);
    const cacheKey = `ai_recommend:${articleSlug}`;
    const result = await callDeepseekWithCache(
      apiKey,
      kv,
      cacheKey,
      {
        messages,
        temperature: 0.5,
        maxTokens: 500,
        aiBinding: env.AI,
        jsonMode: true
      },
      3600 * 24
      //  24 
    );
    if (!result.success || !result.content) {
      return Response.json({
        success: false,
        error: result.error || "AI "
      });
    }
    const recommendations = safeParseJSON(result.content, []);
    if (!result.cached) {
      await trackAIUsage(db, {
        feature: "recommend",
        tokensUsed: result.tokensUsed || 0
      });
      await incrementDailyCount(kv, "recommend");
    }
    return Response.json({
      success: true,
      recommendations: recommendations.slice(0, 5)
      // 5
    });
  } catch (error) {
    console.error("AI Recommend error:", error);
    return Response.json({
      success: false,
      error: ""
    }, {
      status: 500
    });
  }
}
const route61 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action
}, Symbol.toStringTag, { value: "Module" }));
const BANGUMI_API_BASE = "https://api.bgm.tv";
async function searchAnime(keyword, limit = 10) {
  if (!keyword || keyword.trim().length === 0) {
    return [];
  }
  try {
    const url = `${BANGUMI_API_BASE}/search/subject/${encodeURIComponent(keyword)}?type=2&responseGroup=small&max_results=${limit}`;
    const response = await fetch(url, {
      headers: {
        "User-Agent": "my-anime-blog/1.0 (https://my-anime-blog.fhainc.workers.dev)",
        "Accept": "application/json"
      }
    });
    if (!response.ok) {
      console.error("Bangumi search failed:", response.status);
      return [];
    }
    const data = await response.json();
    if (data && data.list && Array.isArray(data.list)) {
      return data.list.map((item) => ({
        id: item.id,
        name: item.name || "",
        name_cn: item.name_cn || item.name || "",
        type: item.type,
        images: item.images,
        summary: item.summary,
        air_date: item.air_date,
        rating: item.rating,
        eps_count: item.eps_count
      }));
    }
    return [];
  } catch (error) {
    console.error("Bangumi search error:", error);
    return [];
  }
}
async function getAnimeDetail(subjectId) {
  try {
    const url = `${BANGUMI_API_BASE}/v0/subjects/${subjectId}`;
    const response = await fetch(url, {
      headers: {
        "User-Agent": "my-anime-blog/1.0 (https://my-anime-blog.fhainc.workers.dev)",
        "Accept": "application/json"
      }
    });
    if (!response.ok) {
      console.error("Bangumi detail fetch failed:", response.status);
      return null;
    }
    const data = await response.json();
    return data;
  } catch (error) {
    console.error("Bangumi detail error:", error);
    return null;
  }
}
async function getAnimeCharacters(subjectId) {
  try {
    const url = `${BANGUMI_API_BASE}/v0/subjects/${subjectId}/characters`;
    const response = await fetch(url, {
      headers: {
        "User-Agent": "my-anime-blog/1.0 (https://my-anime-blog.fhainc.workers.dev)",
        "Accept": "application/json"
      }
    });
    if (!response.ok) {
      console.error("Bangumi characters fetch failed:", response.status);
      return [];
    }
    const data = await response.json();
    return Array.isArray(data) ? data : [];
  } catch (error) {
    console.error("Bangumi characters error:", error);
    return [];
  }
}
async function getAnimeStaff(subjectId) {
  try {
    const url = `${BANGUMI_API_BASE}/v0/subjects/${subjectId}/persons`;
    const response = await fetch(url, {
      headers: {
        "User-Agent": "my-anime-blog/1.0 (https://my-anime-blog.fhainc.workers.dev)",
        "Accept": "application/json"
      }
    });
    if (!response.ok) {
      console.error("Bangumi staff fetch failed:", response.status);
      return [];
    }
    const data = await response.json();
    return Array.isArray(data) ? data : [];
  } catch (error) {
    console.error("Bangumi staff error:", error);
    return [];
  }
}
function extractInfoFromInfobox(infobox) {
  if (!infobox) return {};
  const result = {};
  for (const item of infobox) {
    if (item.key === "" || item.key === "") {
      result.studio = typeof item.value === "string" ? item.value : JSON.stringify(item.value);
    }
    if (item.key === "" || item.key === "") {
      result.director = typeof item.value === "string" ? item.value : JSON.stringify(item.value);
    }
    if (item.key === "") {
      result.originalWork = typeof item.value === "string" ? item.value : JSON.stringify(item.value);
    }
  }
  return result;
}
async function loader$3({
  request
}) {
  const url = new URL(request.url);
  const keyword = url.searchParams.get("q") || "";
  if (!keyword.trim()) {
    return Response.json({
      results: []
    });
  }
  try {
    const results = await searchAnime(keyword, 10);
    return Response.json({
      results
    });
  } catch (error) {
    console.error("Bangumi search API error:", error);
    return Response.json({
      error: ""
    }, {
      status: 500
    });
  }
}
const route62 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$3
}, Symbol.toStringTag, { value: "Module" }));
async function loader$2({
  request
}) {
  const url = new URL(request.url);
  const idStr = url.searchParams.get("id");
  if (!idStr) {
    return Response.json({
      error: " id "
    }, {
      status: 400
    });
  }
  const id2 = parseInt(idStr, 10);
  if (isNaN(id2)) {
    return Response.json({
      error: " id"
    }, {
      status: 400
    });
  }
  try {
    const [detail, characters, staff] = await Promise.all([getAnimeDetail(id2), getAnimeCharacters(id2), getAnimeStaff(id2)]);
    if (!detail) {
      return Response.json({
        error: ""
      }, {
        status: 404
      });
    }
    const productionInfo = extractInfoFromInfobox(detail.infobox);
    return Response.json({
      ...detail,
      characters: characters.slice(0, 10),
      staff: staff.slice(0, 10),
      production: productionInfo
    });
  } catch (error) {
    console.error("Bangumi detail API error:", error);
    return Response.json({
      error: ""
    }, {
      status: 500
    });
  }
}
const route63 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$2
}, Symbol.toStringTag, { value: "Module" }));
function loader$1({
  request
}) {
  const url = new URL(request.url);
  const baseUrl = `${url.protocol}//${url.host}`;
  const robotsTxt = `User-agent: *
Allow: /
Disallow: /admin/
Disallow: /api/
Disallow: /user/

Sitemap: ${baseUrl}/sitemap.xml
`;
  return new Response(robotsTxt, {
    headers: {
      "Content-Type": "text/plain",
      "Cache-Control": "public, max-age=86400"
      // 24 
    }
  });
}
const route64 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$1
}, Symbol.toStringTag, { value: "Module" }));
async function loader({
  request,
  context
}) {
  const {
    getDBSafe
  } = await import("./db-DVeXv2KN.js");
  const anime_db = getDBSafe(context);
  const url = new URL(request.url);
  const baseUrl = `${url.protocol}//${url.host}`;
  let articles2 = [];
  if (anime_db) {
    try {
      const result = await anime_db.prepare("SELECT slug, updated_at FROM articles WHERE status = 'published' ORDER BY created_at DESC").all();
      if (result.results) {
        articles2 = result.results;
      }
    } catch (error) {
      console.error("Failed to fetch articles for sitemap:", error);
    }
  }
  const staticPages = ["", "/articles", "/archive", "/bangumi", "/gallery"];
  const sitemap = `<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  ${staticPages.map((page) => {
    return `
  <url>
    <loc>${baseUrl}${page}</loc>
    <changefreq>daily</changefreq>
    <priority>${page === "" ? 1 : 0.8}</priority>
  </url>`;
  }).join("")}
  ${articles2.map((article) => {
    return `
  <url>
    <loc>${baseUrl}/articles/${article.slug}</loc>
    <lastmod>${new Date(article.updated_at * 1e3).toISOString()}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.6</priority>
  </url>`;
  }).join("")}
</urlset>`;
  return new Response(sitemap, {
    headers: {
      "Content-Type": "application/xml",
      "Cache-Control": "public, max-age=3600"
    }
  });
}
const route65 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader
}, Symbol.toStringTag, { value: "Module" }));
const _404 = withComponentProps(function NotFound() {
  const navigate = useNavigate();
  const [countdown, setCountdown] = reactExports.useState(15);
  reactExports.useEffect(() => {
    const timer = setInterval(() => {
      setCountdown((prev) => {
        if (prev <= 1) {
          clearInterval(timer);
          navigate("/");
          return 0;
        }
        return prev - 1;
      });
    }, 1e3);
    return () => clearInterval(timer);
  }, [navigate]);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
    className: "container mx-auto px-4 py-16 min-h-[70vh] flex items-center justify-center relative overflow-hidden",
    children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "absolute inset-0 pointer-events-none select-none opacity-[0.03] dark:opacity-[0.05]",
      style: {
        backgroundImage: `url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0l25.98 15v30L30 60 4.02 45V15z' fill-opacity='1' fill='%23FF9F43' fill-rule='evenodd'/%3E%3C/svg%3E")`,
        backgroundSize: "60px 60px"
      }
    }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
      className: "absolute inset-0 pointer-events-none overflow-hidden select-none flex items-center justify-center",
      children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
        className: "text-[20vw] font-display font-bold text-slate-900/[0.03] dark:text-white/[0.03] rotate-[-10deg] blur-sm",
        children: "EMERGENCY"
      })
    }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
      className: "relative z-10 flex flex-col lg:flex-row items-center justify-center gap-12 lg:gap-24",
      children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        className: "hidden lg:flex flex-col items-end gap-6 text-right font-mono text-xs text-at-orange/80 select-none",
        initial: {
          opacity: 0,
          x: -20
        },
        animate: {
          opacity: 1,
          x: 0
        },
        transition: {
          duration: 0.8
        },
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex flex-col gap-1 border-r-2 border-at-orange/30 pr-4 py-2",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            className: "text-at-orange font-bold",
            children: "/// SYSTEM_ALERT"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            children: "ERR_CODE: 0x404"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            children: "SYNC_RATE: 0.00%"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            children: "TARGET: NOT_FOUND"
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "w-32 h-px bg-gradient-to-l from-at-orange to-transparent opacity-50"
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "text-4xl animate-pulse text-at-orange",
          children: ""
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
        className: "flex flex-col md:flex-row items-center gap-8 md:gap-16",
        children: [/* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          className: "relative w-64 md:w-80 shrink-0",
          initial: {
            opacity: 0,
            scale: 0.9
          },
          animate: {
            opacity: 1,
            scale: 1
          },
          transition: {
            duration: 0.6
          },
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "absolute -inset-4 border-2 border-at-orange rounded-3xl opacity-20"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "absolute -inset-4 border-2 border-at-orange rounded-3xl opacity-40 translate-x-2 translate-y-2"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
            className: "relative z-10 w-full h-auto rounded-2xl shadow-2xl shadow-orange-500/10 overflow-hidden",
            animate: {
              y: [0, -10, 0]
            },
            transition: {
              duration: 4,
              repeat: Infinity,
              ease: "easeInOut"
            },
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(OptimizedImage, {
              src: "/404-character.png",
              alt: "",
              className: "w-full h-auto",
              width: 320
            })
          })]
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
          className: "text-center md:text-left max-w-md",
          initial: {
            opacity: 0,
            x: 20
          },
          animate: {
            opacity: 1,
            x: 0
          },
          transition: {
            duration: 0.6,
            delay: 0.2
          },
          children: [/* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
            className: "mb-4 flex items-center justify-center md:justify-start gap-3",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              className: "px-3 py-1 rounded-md text-xs font-black bg-[#FF6B6B] text-white uppercase tracking-widest border-2 border-[#D63031]",
              children: "Warning"
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
              className: "h-0.5 flex-1 bg-[#FF6B6B]"
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "mb-6 relative",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
              className: "relative z-10",
              animate: {
                filter: ["drop-shadow(0 0 2px rgba(255, 159, 67, 0.3))", "drop-shadow(0 0 8px rgba(255, 159, 67, 0.6))", "drop-shadow(0 0 2px rgba(255, 159, 67, 0.3))", "drop-shadow(0 0 15px rgba(255, 159, 67, 0.8))", "drop-shadow(0 0 2px rgba(255, 159, 67, 0.3))"]
              },
              transition: {
                duration: 2.5,
                repeat: Infinity,
                repeatType: "loop",
                times: [0, 0.1, 0.2, 0.5, 1],
                ease: "easeInOut"
              },
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(GlitchText, {
                text: "404",
                className: "text-8xl md:text-9xl font-display font-black leading-none tracking-tight text-slate-900 dark:text-white"
              })
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("h2", {
            className: "text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center justify-center md:justify-start gap-3 drop-shadow-md",
            children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              className: "text-at-orange text-3xl",
              children: "///"
            }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              children: ""
            })]
          }), /* @__PURE__ */ jsxRuntimeExports.jsxs("p", {
            className: "text-slate-600 dark:text-slate-300 mb-8 leading-relaxed font-medium text-lg drop-shadow-sm",
            children: ["", /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}), " ", /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
              className: "text-at-orange font-mono font-bold text-xl mx-1",
              children: countdown
            }), " "]
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
            className: "w-full h-1 bg-slate-200 dark:bg-slate-700 rounded-full mb-8 overflow-hidden",
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(motion.div, {
              className: "h-full bg-at-orange",
              initial: {
                width: "0%"
              },
              animate: {
                width: "100%"
              },
              transition: {
                duration: 15,
                ease: "linear"
              }
            })
          }), /* @__PURE__ */ jsxRuntimeExports.jsx(Link, {
            to: "/",
            className: "group relative inline-flex items-center gap-3 px-10 py-4 bg-[#FF9F43] hover:bg-[#ff8f26] text-white font-display font-black text-lg rounded-xl shadow-xl shadow-orange-500/20 hover:shadow-orange-500/40 hover:-translate-y-1 transition-all overflow-hidden border-b-4 border-[#e08020] active:border-b-0 active:translate-y-1",
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("span", {
              className: "relative z-10 flex items-center gap-2",
              children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                children: "EMERGENCY EXIT"
              }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
                className: "group-hover:translate-x-1 transition-transform",
                children: ""
              })]
            })
          })]
        })]
      }), /* @__PURE__ */ jsxRuntimeExports.jsxs(motion.div, {
        className: "hidden lg:flex flex-col items-start gap-6 text-left font-mono text-xs text-at-purple/80 select-none",
        initial: {
          opacity: 0,
          x: 20
        },
        animate: {
          opacity: 1,
          x: 0
        },
        transition: {
          duration: 0.8,
          delay: 0.2
        },
        children: [/* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "text-4xl animate-pulse text-at-purple",
          children: ""
        }), /* @__PURE__ */ jsxRuntimeExports.jsx("div", {
          className: "w-32 h-px bg-gradient-to-r from-at-purple to-transparent opacity-50"
        }), /* @__PURE__ */ jsxRuntimeExports.jsxs("div", {
          className: "flex flex-col gap-1 border-l-2 border-at-purple/30 pl-4 py-2",
          children: [/* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            className: "text-at-purple font-bold",
            children: "/// DIAGNOSTIC"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            children: "STATUS: LOST"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            children: "MEM: LEAKING"
          }), /* @__PURE__ */ jsxRuntimeExports.jsx("span", {
            children: "AUTO_RTN: TRUE"
          })]
        })]
      })]
    })]
  });
});
const route66 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: _404
}, Symbol.toStringTag, { value: "Module" }));
const serverManifest = { "entry": { "module": "/assets/entry.client-fueMUVzy.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js"], "css": [] }, "routes": { "root": { "id": "root", "parentId": void 0, "path": "", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": true, "module": "/assets/root--gW73Th1.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/root-DF_Zjjqs.js", "/assets/GlassCard-CrEj4dg_.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/proxy-QmzHzwmy.js", "/assets/ThemeToggle-DWPGz7wj.js", "/assets/index-CuC0plJV.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/cn-BB8OEnXs.js", "/assets/x-CcsBvib0.js", "/assets/useUser-BCO3T5ST.js", "/assets/use-transform-DJg3iRFb.js", "/assets/house-BlPNDmgk.js", "/assets/MobileNav-CQlPjias.js", "/assets/user-DONRSZTV.js", "/assets/shopping-bag-B-Rgidm9.js", "/assets/package-B7qq4V5h.js", "/assets/settings-CNPApsez.js"], "css": ["/assets/root-Cd7ohKAl.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/home": { "id": "routes/home", "parentId": "root", "path": void 0, "index": true, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/home-Dr9NCP2B.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/GlassCard-CrEj4dg_.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/proxy-QmzHzwmy.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/cn-BB8OEnXs.js", "/assets/index-CuC0plJV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/articles": { "id": "routes/articles", "parentId": "root", "path": "articles", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/articles-CF-KOvXa.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/categoryColor-CX4b08Pt.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/proxy-QmzHzwmy.js", "/assets/loader-circle-Bt4PRsCu.js", "/assets/search-Db_nU4CG.js", "/assets/calendar-yABytypy.js", "/assets/eye-CZEvifov.js", "/assets/heart-m3d3E98F.js", "/assets/arrow-right-BJnmv7GL.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/index-CuC0plJV.js", "/assets/createLucideIcon-B4Kb0hH0.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/articles.$slug": { "id": "routes/articles.$slug", "parentId": "root", "path": "articles/:slug", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/articles._slug-CJ7QEaZq.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/categoryColor-CX4b08Pt.js", "/assets/arrow-left-pQEoaJZ8.js", "/assets/proxy-QmzHzwmy.js", "/assets/calendar-yABytypy.js", "/assets/clock-DT9JXxYI.js", "/assets/eye-CZEvifov.js", "/assets/heart-m3d3E98F.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/share-2-rv4ySOlQ.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/index-CuC0plJV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/archive": { "id": "routes/archive", "parentId": "root", "path": "archive", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/archive-Cpr7nSRI.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/GlassCard-CrEj4dg_.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/use-transform-DJg3iRFb.js", "/assets/proxy-QmzHzwmy.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/cn-BB8OEnXs.js", "/assets/index-CuC0plJV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/gallery": { "id": "routes/gallery", "parentId": "root", "path": "gallery", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/gallery-CV_CU43W.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/proxy-QmzHzwmy.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/index-CuC0plJV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/bangumi": { "id": "routes/bangumi", "parentId": "root", "path": "bangumi", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/bangumi-KXWJpF0D.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/GlassCard-CrEj4dg_.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/proxy-QmzHzwmy.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/star-CLX-p9uY.js", "/assets/calendar-yABytypy.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/cn-BB8OEnXs.js", "/assets/index-CuC0plJV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/bangumi.$id": { "id": "routes/bangumi.$id", "parentId": "root", "path": "bangumi/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/bangumi._id-DKf5ZgRb.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/GlassCard-CrEj4dg_.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/proxy-QmzHzwmy.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/cn-BB8OEnXs.js", "/assets/index-CuC0plJV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/login": { "id": "routes/login", "parentId": "root", "path": "login", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/login-BxqWUoyO.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/ResponsiveComponents-Dz6OTjbu.js", "/assets/mail-CF9Ixb6m.js", "/assets/lock-DQXNxspK.js", "/assets/index-CuC0plJV.js", "/assets/proxy-QmzHzwmy.js", "/assets/circle-alert-BDiPFbCM.js", "/assets/loader-circle-Bt4PRsCu.js", "/assets/arrow-right-BJnmv7GL.js", "/assets/GlassCard-CrEj4dg_.js", "/assets/circle-check-big-CGIJMsOn.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/bundle-mjs-BNe0Xlio.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/register": { "id": "routes/register", "parentId": "root", "path": "register", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/register-Br40ro2V.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/ResponsiveComponents-Dz6OTjbu.js", "/assets/mail-CF9Ixb6m.js", "/assets/lock-DQXNxspK.js", "/assets/circle-check-big-CGIJMsOn.js", "/assets/index-CuC0plJV.js", "/assets/proxy-QmzHzwmy.js", "/assets/arrow-right-BJnmv7GL.js", "/assets/refresh-cw-C_DZ2imj.js", "/assets/loader-circle-Bt4PRsCu.js", "/assets/circle-alert-BDiPFbCM.js", "/assets/GlassCard-CrEj4dg_.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/bundle-mjs-BNe0Xlio.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/forgot-password": { "id": "routes/forgot-password", "parentId": "root", "path": "forgot-password", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/forgot-password-DFC5G8HB.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/ResponsiveComponents-Dz6OTjbu.js", "/assets/mail-CF9Ixb6m.js", "/assets/loader-circle-Bt4PRsCu.js", "/assets/index-CuC0plJV.js", "/assets/proxy-QmzHzwmy.js", "/assets/lock-DQXNxspK.js", "/assets/arrow-right-BJnmv7GL.js", "/assets/circle-alert-BDiPFbCM.js", "/assets/createLucideIcon-B4Kb0hH0.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/logout": { "id": "routes/logout", "parentId": "root", "path": "logout", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/logout-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/privacy": { "id": "routes/privacy", "parentId": "root", "path": "privacy", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/privacy-Cr148WoI.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/ResponsiveComponents-Dz6OTjbu.js", "/assets/proxy-QmzHzwmy.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/terms": { "id": "routes/terms", "parentId": "root", "path": "terms", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/terms-ByeqF0Jn.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/arrow-left-pQEoaJZ8.js", "/assets/proxy-QmzHzwmy.js", "/assets/scale-Cqb7RwLy.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/shield-check-YbmHUo6o.js", "/assets/triangle-alert-DmZ_RWws.js", "/assets/mail-CF9Ixb6m.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/disclaimer": { "id": "routes/disclaimer", "parentId": "root", "path": "disclaimer", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/disclaimer-80VYlXdE.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/arrow-left-pQEoaJZ8.js", "/assets/proxy-QmzHzwmy.js", "/assets/shield-BAOinCdi.js", "/assets/scale-Cqb7RwLy.js", "/assets/triangle-alert-DmZ_RWws.js", "/assets/user-DONRSZTV.js", "/assets/server-DRrU4pZY.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/lock-DQXNxspK.js", "/assets/refresh-cw-C_DZ2imj.js", "/assets/mail-CF9Ixb6m.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/legal.sponsor": { "id": "routes/legal.sponsor", "parentId": "root", "path": "legal/sponsor", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/legal.sponsor-Blf3sddw.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/arrow-left-pQEoaJZ8.js", "/assets/proxy-QmzHzwmy.js", "/assets/heart-m3d3E98F.js", "/assets/crown-BqXe2STX.js", "/assets/sparkles-DIRIwBYD.js", "/assets/star-CLX-p9uY.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/credit-card-D25a4cmP.js", "/assets/refresh-cw-C_DZ2imj.js", "/assets/triangle-alert-DmZ_RWws.js", "/assets/mail-CF9Ixb6m.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/legal.privacy": { "id": "routes/legal.privacy", "parentId": "root", "path": "legal/privacy", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/legal.privacy-D7m54e08.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/arrow-left-pQEoaJZ8.js", "/assets/proxy-QmzHzwmy.js", "/assets/shield-BAOinCdi.js", "/assets/database-CA6pPA2I.js", "/assets/share-2-rv4ySOlQ.js", "/assets/lock-DQXNxspK.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/refresh-cw-C_DZ2imj.js", "/assets/mail-CF9Ixb6m.js", "/assets/server-DRrU4pZY.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/_game": { "id": "routes/_game", "parentId": "root", "path": "/", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/_game-CJYzxUIG.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/MobileNav-CQlPjias.js", "/assets/proxy-QmzHzwmy.js", "/assets/index-CuC0plJV.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/house-BlPNDmgk.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/user-DONRSZTV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/user.dashboard": { "id": "routes/user.dashboard", "parentId": "routes/_game", "path": "user/dashboard", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/user.dashboard-RK3tuo75.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/ClientOnly-BOcfc5EM.js", "/assets/proxy-QmzHzwmy.js", "/assets/shopping-bag-B-Rgidm9.js", "/assets/sparkles-DIRIwBYD.js", "/assets/calendar-yABytypy.js", "/assets/chevron-right-BGn2kvDI.js", "/assets/index-CuC0plJV.js", "/assets/useUser-BCO3T5ST.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/arrow-right-BJnmv7GL.js", "/assets/server-DRrU4pZY.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/crown-BqXe2STX.js", "/assets/house-BlPNDmgk.js", "/assets/settings-CNPApsez.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/user.inventory": { "id": "routes/user.inventory", "parentId": "routes/_game", "path": "user/inventory", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": true, "module": "/assets/user.inventory-CQYS6WSz.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/ClientOnly-BOcfc5EM.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/proxy-QmzHzwmy.js", "/assets/package-B7qq4V5h.js", "/assets/index-CuC0plJV.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/crown-BqXe2STX.js", "/assets/house-BlPNDmgk.js", "/assets/settings-CNPApsez.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/user.achievements": { "id": "routes/user.achievements", "parentId": "routes/_game", "path": "user/achievements", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": true, "module": "/assets/user.achievements-uwoCMs6y.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/proxy-QmzHzwmy.js", "/assets/ClientOnly-BOcfc5EM.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/cn-BB8OEnXs.js", "/assets/index-CuC0plJV.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/crown-BqXe2STX.js", "/assets/house-BlPNDmgk.js", "/assets/settings-CNPApsez.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/settings": { "id": "routes/settings", "parentId": "routes/_game", "path": "settings", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": true, "module": "/assets/settings-CJnnPgh0.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/ClientOnly-BOcfc5EM.js", "/assets/proxy-QmzHzwmy.js", "/assets/palette-D0NDd2Kg.js", "/assets/ThemeToggle-DWPGz7wj.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/user-DONRSZTV.js", "/assets/lock-DQXNxspK.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/shield-BAOinCdi.js", "/assets/database-CA6pPA2I.js", "/assets/index-CuC0plJV.js", "/assets/circle-check-big-CGIJMsOn.js", "/assets/circle-alert-BDiPFbCM.js", "/assets/smartphone-DVujm1Bp.js", "/assets/chevron-right-BGn2kvDI.js", "/assets/loader-circle-Bt4PRsCu.js", "/assets/crown-BqXe2STX.js", "/assets/house-BlPNDmgk.js", "/assets/settings-CNPApsez.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/shop": { "id": "routes/shop", "parentId": "routes/_game", "path": "shop", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/shop-2HybOzOT.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/ClientOnly-BOcfc5EM.js", "/assets/proxy-QmzHzwmy.js", "/assets/credit-card-D25a4cmP.js", "/assets/shield-check-YbmHUo6o.js", "/assets/loader-circle-Bt4PRsCu.js", "/assets/clock-DT9JXxYI.js", "/assets/circle-check-big-CGIJMsOn.js", "/assets/useUser-BCO3T5ST.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/shopping-bag-B-Rgidm9.js", "/assets/star-CLX-p9uY.js", "/assets/zap-Dds3Pv6m.js", "/assets/crown-BqXe2STX.js", "/assets/index-CuC0plJV.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/house-BlPNDmgk.js", "/assets/settings-CNPApsez.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/user.membership": { "id": "routes/user.membership", "parentId": "routes/_game", "path": "user/membership", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/user.membership-BUlbmjCi.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/ClientOnly-BOcfc5EM.js", "/assets/crown-BqXe2STX.js", "/assets/proxy-QmzHzwmy.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/zap-Dds3Pv6m.js", "/assets/x-CcsBvib0.js", "/assets/palette-D0NDd2Kg.js", "/assets/sparkles-DIRIwBYD.js", "/assets/clock-DT9JXxYI.js", "/assets/useUser-BCO3T5ST.js", "/assets/chevron-right-BGn2kvDI.js", "/assets/calendar-yABytypy.js", "/assets/refresh-cw-C_DZ2imj.js", "/assets/circle-check-big-CGIJMsOn.js", "/assets/credit-card-D25a4cmP.js", "/assets/shield-check-YbmHUo6o.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/index-CuC0plJV.js", "/assets/house-BlPNDmgk.js", "/assets/settings-CNPApsez.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.login": { "id": "routes/admin.login", "parentId": "root", "path": "panel/login", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.login-Czney8U2.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/proxy-QmzHzwmy.js", "/assets/index-CuC0plJV.js", "/assets/shield-BAOinCdi.js", "/assets/user-DONRSZTV.js", "/assets/lock-DQXNxspK.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/eye-CZEvifov.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.logout": { "id": "routes/admin.logout", "parentId": "root", "path": "panel/logout", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.logout-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin": { "id": "routes/admin", "parentId": "root", "path": "admin", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin-txUFDFxH.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/proxy-QmzHzwmy.js", "/assets/index-CuC0plJV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.article.new": { "id": "routes/admin.article.new", "parentId": "routes/admin", "path": "article/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.article.new-B2exoUrs.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/index-CuC0plJV.js", "/assets/proxy-QmzHzwmy.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.anime.manage": { "id": "routes/admin.anime.manage", "parentId": "routes/admin", "path": "anime/manage", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.anime.manage-DUfPmlsk.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/proxy-QmzHzwmy.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/index-CuC0plJV.js", "/assets/x-CcsBvib0.js", "/assets/search-Db_nU4CG.js", "/assets/loader-circle-Bt4PRsCu.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/calendar-yABytypy.js", "/assets/star-CLX-p9uY.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.articles": { "id": "routes/admin.articles", "parentId": "routes/admin", "path": "articles", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.articles-CrI02AQW.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/proxy-QmzHzwmy.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.comments": { "id": "routes/admin.comments", "parentId": "routes/admin", "path": "comments", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.comments-D6aeeVL3.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/proxy-QmzHzwmy.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.gallery": { "id": "routes/admin.gallery", "parentId": "routes/admin", "path": "gallery", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.gallery-4PxEEmDM.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/proxy-QmzHzwmy.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/index-CuC0plJV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.settings": { "id": "routes/admin.settings", "parentId": "routes/admin", "path": "settings", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.settings-Dw7oUBft.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/proxy-QmzHzwmy.js", "/assets/index-CuC0plJV.js", "/assets/cn-BB8OEnXs.js", "/assets/bundle-mjs-BNe0Xlio.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.tags": { "id": "routes/admin.tags", "parentId": "routes/admin", "path": "tags", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.tags-CbQ1NlmE.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/proxy-QmzHzwmy.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.analytics": { "id": "routes/admin.analytics", "parentId": "routes/admin", "path": "analytics", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.analytics-DuAlbv9a.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/proxy-QmzHzwmy.js", "/assets/createLucideIcon-B4Kb0hH0.js", "/assets/smartphone-DVujm1Bp.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.404": { "id": "routes/admin.404", "parentId": "routes/admin", "path": "*", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.404-C5-rl_q4.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/proxy-QmzHzwmy.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/action.set-theme": { "id": "routes/action.set-theme", "parentId": "root", "path": "action/set-theme", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/action.set-theme-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.animes": { "id": "routes/api.animes", "parentId": "root", "path": "api/animes", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.animes-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.auth.login": { "id": "routes/api.auth.login", "parentId": "root", "path": "api/auth/login", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.auth.login-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.auth.register": { "id": "routes/api.auth.register", "parentId": "root", "path": "api/auth/register", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.auth.register-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.auth.send-code": { "id": "routes/api.auth.send-code", "parentId": "root", "path": "api/auth/send-code", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.auth.send-code-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.user.me": { "id": "routes/api.user.me", "parentId": "root", "path": "api/user/me", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.user.me-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.r2.$": { "id": "routes/api.r2.$", "parentId": "root", "path": "api/r2/*", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.r2._-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.upload": { "id": "routes/api.upload", "parentId": "root", "path": "api/upload", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.upload-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.comments": { "id": "routes/api.comments", "parentId": "root", "path": "api/comments", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.comments-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.admin.comments": { "id": "routes/api.admin.comments", "parentId": "root", "path": "api/admin/comments", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.admin.comments-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.payment.callback": { "id": "routes/api.payment.callback", "parentId": "root", "path": "api/payment/callback", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.payment.callback-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.payment.mock-complete": { "id": "routes/api.payment.mock-complete", "parentId": "root", "path": "api/payment/mock-complete", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.payment.mock-complete-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.subscription": { "id": "routes/api.subscription", "parentId": "root", "path": "api/subscription", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.subscription-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.daily-signin": { "id": "routes/api.daily-signin", "parentId": "root", "path": "api/daily-signin", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.daily-signin-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.shop.purchase": { "id": "routes/api.shop.purchase", "parentId": "root", "path": "api/shop/purchase", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.shop.purchase-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.wallet": { "id": "routes/api.wallet", "parentId": "root", "path": "api/wallet", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.wallet-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.wallet.recharge": { "id": "routes/api.wallet.recharge", "parentId": "root", "path": "api/wallet/recharge", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.wallet.recharge-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.user.purchases": { "id": "routes/api.user.purchases", "parentId": "root", "path": "api/user/purchases", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.user.purchases-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.ai.chat": { "id": "routes/api.ai.chat", "parentId": "root", "path": "api/ai/chat", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.ai.chat-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.ai.summary": { "id": "routes/api.ai.summary", "parentId": "root", "path": "api/ai/summary", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.ai.summary-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.ai.writing": { "id": "routes/api.ai.writing", "parentId": "root", "path": "api/ai/writing", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.ai.writing-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.ai.moderate": { "id": "routes/api.ai.moderate", "parentId": "root", "path": "api/ai/moderate", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.ai.moderate-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.ai.seo": { "id": "routes/api.ai.seo", "parentId": "root", "path": "api/ai/seo", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.ai.seo-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.ai.tags": { "id": "routes/api.ai.tags", "parentId": "root", "path": "api/ai/tags", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.ai.tags-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.ai.search": { "id": "routes/api.ai.search", "parentId": "root", "path": "api/ai/search", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.ai.search-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.ai.recommend": { "id": "routes/api.ai.recommend", "parentId": "root", "path": "api/ai/recommend", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.ai.recommend-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.bangumi.search": { "id": "routes/api.bangumi.search", "parentId": "root", "path": "api/bangumi/search", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.bangumi.search-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.bangumi.detail": { "id": "routes/api.bangumi.detail", "parentId": "root", "path": "api/bangumi/detail", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.bangumi.detail-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/robots[.]txt": { "id": "routes/robots[.]txt", "parentId": "root", "path": "robots.txt", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/robots_._txt-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/sitemap[.]xml": { "id": "routes/sitemap[.]xml", "parentId": "root", "path": "sitemap.xml", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/sitemap_._xml-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/404": { "id": "routes/404", "parentId": "root", "path": "*", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/404-xpvY0TTY.js", "imports": ["/assets/chunk-4WY6JWTD-C28ylCBm.js", "/assets/bundle-mjs-BNe0Xlio.js", "/assets/OptimizedImage-BycwCyKg.js", "/assets/proxy-QmzHzwmy.js", "/assets/cn-BB8OEnXs.js", "/assets/index-CuC0plJV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 } }, "url": "/assets/manifest-919cd18e.js", "version": "919cd18e", "sri": void 0 };
const assetsBuildDirectory = "build\\client";
const basename = "/";
const future = { "v8_middleware": false, "unstable_optimizeDeps": false, "unstable_splitRouteModules": false, "unstable_subResourceIntegrity": false, "unstable_viteEnvironmentApi": true };
const ssr = true;
const isSpaMode = false;
const prerender = [];
const routeDiscovery = { "mode": "lazy", "manifestPath": "/__manifest" };
const publicPath = "/";
const entry = { module: entryServer };
const routes = {
  "root": {
    id: "root",
    parentId: void 0,
    path: "",
    index: void 0,
    caseSensitive: void 0,
    module: route0
  },
  "routes/home": {
    id: "routes/home",
    parentId: "root",
    path: void 0,
    index: true,
    caseSensitive: void 0,
    module: route1
  },
  "routes/articles": {
    id: "routes/articles",
    parentId: "root",
    path: "articles",
    index: void 0,
    caseSensitive: void 0,
    module: route2
  },
  "routes/articles.$slug": {
    id: "routes/articles.$slug",
    parentId: "root",
    path: "articles/:slug",
    index: void 0,
    caseSensitive: void 0,
    module: route3
  },
  "routes/archive": {
    id: "routes/archive",
    parentId: "root",
    path: "archive",
    index: void 0,
    caseSensitive: void 0,
    module: route4
  },
  "routes/gallery": {
    id: "routes/gallery",
    parentId: "root",
    path: "gallery",
    index: void 0,
    caseSensitive: void 0,
    module: route5
  },
  "routes/bangumi": {
    id: "routes/bangumi",
    parentId: "root",
    path: "bangumi",
    index: void 0,
    caseSensitive: void 0,
    module: route6
  },
  "routes/bangumi.$id": {
    id: "routes/bangumi.$id",
    parentId: "root",
    path: "bangumi/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route7
  },
  "routes/login": {
    id: "routes/login",
    parentId: "root",
    path: "login",
    index: void 0,
    caseSensitive: void 0,
    module: route8
  },
  "routes/register": {
    id: "routes/register",
    parentId: "root",
    path: "register",
    index: void 0,
    caseSensitive: void 0,
    module: route9
  },
  "routes/forgot-password": {
    id: "routes/forgot-password",
    parentId: "root",
    path: "forgot-password",
    index: void 0,
    caseSensitive: void 0,
    module: route10
  },
  "routes/logout": {
    id: "routes/logout",
    parentId: "root",
    path: "logout",
    index: void 0,
    caseSensitive: void 0,
    module: route11
  },
  "routes/privacy": {
    id: "routes/privacy",
    parentId: "root",
    path: "privacy",
    index: void 0,
    caseSensitive: void 0,
    module: route12
  },
  "routes/terms": {
    id: "routes/terms",
    parentId: "root",
    path: "terms",
    index: void 0,
    caseSensitive: void 0,
    module: route13
  },
  "routes/disclaimer": {
    id: "routes/disclaimer",
    parentId: "root",
    path: "disclaimer",
    index: void 0,
    caseSensitive: void 0,
    module: route14
  },
  "routes/legal.sponsor": {
    id: "routes/legal.sponsor",
    parentId: "root",
    path: "legal/sponsor",
    index: void 0,
    caseSensitive: void 0,
    module: route15
  },
  "routes/legal.privacy": {
    id: "routes/legal.privacy",
    parentId: "root",
    path: "legal/privacy",
    index: void 0,
    caseSensitive: void 0,
    module: route16
  },
  "routes/_game": {
    id: "routes/_game",
    parentId: "root",
    path: "/",
    index: void 0,
    caseSensitive: void 0,
    module: route17
  },
  "routes/user.dashboard": {
    id: "routes/user.dashboard",
    parentId: "routes/_game",
    path: "user/dashboard",
    index: void 0,
    caseSensitive: void 0,
    module: route18
  },
  "routes/user.inventory": {
    id: "routes/user.inventory",
    parentId: "routes/_game",
    path: "user/inventory",
    index: void 0,
    caseSensitive: void 0,
    module: route19
  },
  "routes/user.achievements": {
    id: "routes/user.achievements",
    parentId: "routes/_game",
    path: "user/achievements",
    index: void 0,
    caseSensitive: void 0,
    module: route20
  },
  "routes/settings": {
    id: "routes/settings",
    parentId: "routes/_game",
    path: "settings",
    index: void 0,
    caseSensitive: void 0,
    module: route21
  },
  "routes/shop": {
    id: "routes/shop",
    parentId: "routes/_game",
    path: "shop",
    index: void 0,
    caseSensitive: void 0,
    module: route22
  },
  "routes/user.membership": {
    id: "routes/user.membership",
    parentId: "routes/_game",
    path: "user/membership",
    index: void 0,
    caseSensitive: void 0,
    module: route23
  },
  "routes/admin.login": {
    id: "routes/admin.login",
    parentId: "root",
    path: "panel/login",
    index: void 0,
    caseSensitive: void 0,
    module: route24
  },
  "routes/admin.logout": {
    id: "routes/admin.logout",
    parentId: "root",
    path: "panel/logout",
    index: void 0,
    caseSensitive: void 0,
    module: route25
  },
  "routes/admin": {
    id: "routes/admin",
    parentId: "root",
    path: "admin",
    index: void 0,
    caseSensitive: void 0,
    module: route26
  },
  "routes/admin.article.new": {
    id: "routes/admin.article.new",
    parentId: "routes/admin",
    path: "article/new",
    index: void 0,
    caseSensitive: void 0,
    module: route27
  },
  "routes/admin.anime.manage": {
    id: "routes/admin.anime.manage",
    parentId: "routes/admin",
    path: "anime/manage",
    index: void 0,
    caseSensitive: void 0,
    module: route28
  },
  "routes/admin.articles": {
    id: "routes/admin.articles",
    parentId: "routes/admin",
    path: "articles",
    index: void 0,
    caseSensitive: void 0,
    module: route29
  },
  "routes/admin.comments": {
    id: "routes/admin.comments",
    parentId: "routes/admin",
    path: "comments",
    index: void 0,
    caseSensitive: void 0,
    module: route30
  },
  "routes/admin.gallery": {
    id: "routes/admin.gallery",
    parentId: "routes/admin",
    path: "gallery",
    index: void 0,
    caseSensitive: void 0,
    module: route31
  },
  "routes/admin.settings": {
    id: "routes/admin.settings",
    parentId: "routes/admin",
    path: "settings",
    index: void 0,
    caseSensitive: void 0,
    module: route32
  },
  "routes/admin.tags": {
    id: "routes/admin.tags",
    parentId: "routes/admin",
    path: "tags",
    index: void 0,
    caseSensitive: void 0,
    module: route33
  },
  "routes/admin.analytics": {
    id: "routes/admin.analytics",
    parentId: "routes/admin",
    path: "analytics",
    index: void 0,
    caseSensitive: void 0,
    module: route34
  },
  "routes/admin.404": {
    id: "routes/admin.404",
    parentId: "routes/admin",
    path: "*",
    index: void 0,
    caseSensitive: void 0,
    module: route35
  },
  "routes/action.set-theme": {
    id: "routes/action.set-theme",
    parentId: "root",
    path: "action/set-theme",
    index: void 0,
    caseSensitive: void 0,
    module: route36
  },
  "routes/api.animes": {
    id: "routes/api.animes",
    parentId: "root",
    path: "api/animes",
    index: void 0,
    caseSensitive: void 0,
    module: route37
  },
  "routes/api.auth.login": {
    id: "routes/api.auth.login",
    parentId: "root",
    path: "api/auth/login",
    index: void 0,
    caseSensitive: void 0,
    module: route38
  },
  "routes/api.auth.register": {
    id: "routes/api.auth.register",
    parentId: "root",
    path: "api/auth/register",
    index: void 0,
    caseSensitive: void 0,
    module: route39
  },
  "routes/api.auth.send-code": {
    id: "routes/api.auth.send-code",
    parentId: "root",
    path: "api/auth/send-code",
    index: void 0,
    caseSensitive: void 0,
    module: route40
  },
  "routes/api.user.me": {
    id: "routes/api.user.me",
    parentId: "root",
    path: "api/user/me",
    index: void 0,
    caseSensitive: void 0,
    module: route41
  },
  "routes/api.r2.$": {
    id: "routes/api.r2.$",
    parentId: "root",
    path: "api/r2/*",
    index: void 0,
    caseSensitive: void 0,
    module: route42
  },
  "routes/api.upload": {
    id: "routes/api.upload",
    parentId: "root",
    path: "api/upload",
    index: void 0,
    caseSensitive: void 0,
    module: route43
  },
  "routes/api.comments": {
    id: "routes/api.comments",
    parentId: "root",
    path: "api/comments",
    index: void 0,
    caseSensitive: void 0,
    module: route44
  },
  "routes/api.admin.comments": {
    id: "routes/api.admin.comments",
    parentId: "root",
    path: "api/admin/comments",
    index: void 0,
    caseSensitive: void 0,
    module: route45
  },
  "routes/api.payment.callback": {
    id: "routes/api.payment.callback",
    parentId: "root",
    path: "api/payment/callback",
    index: void 0,
    caseSensitive: void 0,
    module: route46
  },
  "routes/api.payment.mock-complete": {
    id: "routes/api.payment.mock-complete",
    parentId: "root",
    path: "api/payment/mock-complete",
    index: void 0,
    caseSensitive: void 0,
    module: route47
  },
  "routes/api.subscription": {
    id: "routes/api.subscription",
    parentId: "root",
    path: "api/subscription",
    index: void 0,
    caseSensitive: void 0,
    module: route48
  },
  "routes/api.daily-signin": {
    id: "routes/api.daily-signin",
    parentId: "root",
    path: "api/daily-signin",
    index: void 0,
    caseSensitive: void 0,
    module: route49
  },
  "routes/api.shop.purchase": {
    id: "routes/api.shop.purchase",
    parentId: "root",
    path: "api/shop/purchase",
    index: void 0,
    caseSensitive: void 0,
    module: route50
  },
  "routes/api.wallet": {
    id: "routes/api.wallet",
    parentId: "root",
    path: "api/wallet",
    index: void 0,
    caseSensitive: void 0,
    module: route51
  },
  "routes/api.wallet.recharge": {
    id: "routes/api.wallet.recharge",
    parentId: "root",
    path: "api/wallet/recharge",
    index: void 0,
    caseSensitive: void 0,
    module: route52
  },
  "routes/api.user.purchases": {
    id: "routes/api.user.purchases",
    parentId: "root",
    path: "api/user/purchases",
    index: void 0,
    caseSensitive: void 0,
    module: route53
  },
  "routes/api.ai.chat": {
    id: "routes/api.ai.chat",
    parentId: "root",
    path: "api/ai/chat",
    index: void 0,
    caseSensitive: void 0,
    module: route54
  },
  "routes/api.ai.summary": {
    id: "routes/api.ai.summary",
    parentId: "root",
    path: "api/ai/summary",
    index: void 0,
    caseSensitive: void 0,
    module: route55
  },
  "routes/api.ai.writing": {
    id: "routes/api.ai.writing",
    parentId: "root",
    path: "api/ai/writing",
    index: void 0,
    caseSensitive: void 0,
    module: route56
  },
  "routes/api.ai.moderate": {
    id: "routes/api.ai.moderate",
    parentId: "root",
    path: "api/ai/moderate",
    index: void 0,
    caseSensitive: void 0,
    module: route57
  },
  "routes/api.ai.seo": {
    id: "routes/api.ai.seo",
    parentId: "root",
    path: "api/ai/seo",
    index: void 0,
    caseSensitive: void 0,
    module: route58
  },
  "routes/api.ai.tags": {
    id: "routes/api.ai.tags",
    parentId: "root",
    path: "api/ai/tags",
    index: void 0,
    caseSensitive: void 0,
    module: route59
  },
  "routes/api.ai.search": {
    id: "routes/api.ai.search",
    parentId: "root",
    path: "api/ai/search",
    index: void 0,
    caseSensitive: void 0,
    module: route60
  },
  "routes/api.ai.recommend": {
    id: "routes/api.ai.recommend",
    parentId: "root",
    path: "api/ai/recommend",
    index: void 0,
    caseSensitive: void 0,
    module: route61
  },
  "routes/api.bangumi.search": {
    id: "routes/api.bangumi.search",
    parentId: "root",
    path: "api/bangumi/search",
    index: void 0,
    caseSensitive: void 0,
    module: route62
  },
  "routes/api.bangumi.detail": {
    id: "routes/api.bangumi.detail",
    parentId: "root",
    path: "api/bangumi/detail",
    index: void 0,
    caseSensitive: void 0,
    module: route63
  },
  "routes/robots[.]txt": {
    id: "routes/robots[.]txt",
    parentId: "root",
    path: "robots.txt",
    index: void 0,
    caseSensitive: void 0,
    module: route64
  },
  "routes/sitemap[.]xml": {
    id: "routes/sitemap[.]xml",
    parentId: "root",
    path: "sitemap.xml",
    index: void 0,
    caseSensitive: void 0,
    module: route65
  },
  "routes/404": {
    id: "routes/404",
    parentId: "root",
    path: "*",
    index: void 0,
    caseSensitive: void 0,
    module: route66
  }
};
const serverBuild = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  assets: serverManifest,
  assetsBuildDirectory,
  basename,
  entry,
  future,
  isSpaMode,
  prerender,
  publicPath,
  routeDiscovery,
  routes,
  ssr
}, Symbol.toStringTag, { value: "Module" }));
export {
  AnimatePresence as A,
  X$1 as X,
  createLucideIcon as c,
  isMobileDevice as i,
  jsxRuntimeExports as j,
  motion as m,
  serverBuild as s
};
