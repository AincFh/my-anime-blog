# 后端 API 与服务接口层划分

该目录 (`app/api/`) 为由 React Router 提供的全栈环境中的**纯服务端业务逻辑层**分离区。
为了确保项目结构的清晰，杜绝前后端文件混乱混合，所有不对用户暴露视图（仅包含 `action` / `loader` 用于 JSON 存取互联的模块）均安置于此。

## 目录职能分配

- **`auth/`**: 用户认证管理（登录、注册、验证码派发等）
- **`user/`**: 用户系统相关（读取个人信息、每日签到、购买校验等）
- **`admin/`**: 管理后台专用重度操作口（包括危险操作如强刷缓存与全局评论处置）
- **`payment/`**: 系统经济管线（包含订单验证、虚拟钱包扣费、购买订阅及外部回调）
- **`ai/`**: 调用外部大语言模型服务池的管道集合（智能对话、内容审核、摘要推荐及 SEO 重生）
- **`bangumi/`**: 外部番剧流信息集成适配抓取层
- **`wallet/`**: 钱包余额变动管道
- **`misc/`**: 杂项基础设施（如图床直接上传代理、主题控制、OG 生成）

## 开发守则

1. **绝对禁飞区**：禁止在 `app/api/` 任何文件中导出 `export default function Component()` 或进行任何 HTML / JSX 返回构建！所有的响应均须使用 `Response.json()`。
2. 由于文件结构已外移，引入系统内部的 `services`, `utils` 或 `database` 必须使用绝对别名引入（例如 `import { getDB } from "~/utils/db";`）以防止由相对路径上跳越界造成的崩溃。
